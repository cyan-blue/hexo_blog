{"meta":{"version":1,"warehouse":"2.2.0"},"models":{"Asset":[{"_id":"themes/next/source/vendors/velocity/velocity.ui.min.js","path":"vendors/velocity/velocity.ui.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/velocity/velocity.ui.js","path":"vendors/velocity/velocity.ui.js","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/velocity/velocity.min.js","path":"vendors/velocity/velocity.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/velocity/velocity.js","path":"vendors/velocity/velocity.js","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/velocity/bower.json","path":"vendors/velocity/bower.json","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/resume.css","path":"vendors/resume.css","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/jquery/index.js","path":"vendors/jquery/index.js","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/fastclick/lib/fastclick.min.js","path":"vendors/fastclick/lib/fastclick.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/fastclick/lib/fastclick.js","path":"vendors/fastclick/lib/fastclick.js","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/fastclick/bower.json","path":"vendors/fastclick/bower.json","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/fastclick/README.md","path":"vendors/fastclick/README.md","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/fastclick/LICENSE","path":"vendors/fastclick/LICENSE","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/fancybox/source/jquery.fancybox.pack.js","path":"vendors/fancybox/source/jquery.fancybox.pack.js","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/fancybox/source/jquery.fancybox.js","path":"vendors/fancybox/source/jquery.fancybox.js","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/fancybox/source/jquery.fancybox.css","path":"vendors/fancybox/source/jquery.fancybox.css","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/fancybox/source/helpers/jquery.fancybox-thumbs.js","path":"vendors/fancybox/source/helpers/jquery.fancybox-thumbs.js","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/fancybox/source/helpers/jquery.fancybox-thumbs.css","path":"vendors/fancybox/source/helpers/jquery.fancybox-thumbs.css","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/fancybox/source/helpers/jquery.fancybox-media.js","path":"vendors/fancybox/source/helpers/jquery.fancybox-media.js","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/fancybox/source/helpers/jquery.fancybox-buttons.js","path":"vendors/fancybox/source/helpers/jquery.fancybox-buttons.js","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/fancybox/source/helpers/jquery.fancybox-buttons.css","path":"vendors/fancybox/source/helpers/jquery.fancybox-buttons.css","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/fancybox/source/helpers/fancybox_buttons.png","path":"vendors/fancybox/source/helpers/fancybox_buttons.png","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/fancybox/source/fancybox_sprite@2x.png","path":"vendors/fancybox/source/fancybox_sprite@2x.png","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/fancybox/source/fancybox_sprite.png","path":"vendors/fancybox/source/fancybox_sprite.png","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/fancybox/source/fancybox_overlay.png","path":"vendors/fancybox/source/fancybox_overlay.png","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/fancybox/source/fancybox_loading@2x.gif","path":"vendors/fancybox/source/fancybox_loading@2x.gif","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/fancybox/source/fancybox_loading.gif","path":"vendors/fancybox/source/fancybox_loading.gif","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/fancybox/source/blank.gif","path":"vendors/fancybox/source/blank.gif","modified":0,"renderable":1},{"_id":"themes/next/source/site.xml","path":"site.xml","modified":0,"renderable":1},{"_id":"themes/next/source/resume_back.html","path":"resume_back.html","modified":0,"renderable":1},{"_id":"themes/next/source/resume.html","path":"resume.html","modified":0,"renderable":1},{"_id":"themes/next/source/js/ua-parser.min.js","path":"js/ua-parser.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/nav-toggle.js","path":"js/nav-toggle.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/motion_global.js","path":"js/motion_global.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/motion_fallback.js","path":"js/motion_fallback.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/lazyload.js","path":"js/lazyload.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/hook-duoshuo.js","path":"js/hook-duoshuo.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/helpers.js","path":"js/helpers.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/fancy-box.js","path":"js/fancy-box.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/bootstrap.scrollspy.js","path":"js/bootstrap.scrollspy.js","modified":0,"renderable":1},{"_id":"themes/next/source/images/searchicon.png","path":"images/searchicon.png","modified":0,"renderable":1},{"_id":"themes/next/source/images/placeholder.gif","path":"images/placeholder.gif","modified":0,"renderable":1},{"_id":"themes/next/source/images/loading.gif","path":"images/loading.gif","modified":0,"renderable":1},{"_id":"themes/next/source/images/default_avatar.jpg","path":"images/default_avatar.jpg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-zero.svg","path":"images/cc-zero.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by.svg","path":"images/cc-by.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-sa.svg","path":"images/cc-by-sa.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-nd.svg","path":"images/cc-by-nd.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-nc.svg","path":"images/cc-by-nc.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-nc-sa.svg","path":"images/cc-by-nc-sa.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-nc-nd.svg","path":"images/cc-by-nc-nd.svg","modified":0,"renderable":1},{"_id":"themes/next/source/fonts/lato/lato-regita-webfont.svg","path":"fonts/lato/lato-regita-webfont.svg","modified":0,"renderable":1},{"_id":"themes/next/source/fonts/lato/lato-regita-webfont-g.woff","path":"fonts/lato/lato-regita-webfont-g.woff","modified":0,"renderable":1},{"_id":"themes/next/source/fonts/lato/lato-regita-webfont-g.ttf","path":"fonts/lato/lato-regita-webfont-g.ttf","modified":0,"renderable":1},{"_id":"themes/next/source/fonts/lato/lato-regita-webfont-g.eot","path":"fonts/lato/lato-regita-webfont-g.eot","modified":0,"renderable":1},{"_id":"themes/next/source/fonts/lato/lato-reg-webfont.svg","path":"fonts/lato/lato-reg-webfont.svg","modified":0,"renderable":1},{"_id":"themes/next/source/fonts/lato/lato-reg-webfont-g.woff","path":"fonts/lato/lato-reg-webfont-g.woff","modified":0,"renderable":1},{"_id":"themes/next/source/fonts/lato/lato-reg-webfont-g.ttf","path":"fonts/lato/lato-reg-webfont-g.ttf","modified":0,"renderable":1},{"_id":"themes/next/source/fonts/lato/lato-reg-webfont-g.eot","path":"fonts/lato/lato-reg-webfont-g.eot","modified":0,"renderable":1},{"_id":"themes/next/source/fonts/lato/lato-ligita-webfont.svg","path":"fonts/lato/lato-ligita-webfont.svg","modified":0,"renderable":1},{"_id":"themes/next/source/fonts/lato/lato-ligita-webfont-g.woff","path":"fonts/lato/lato-ligita-webfont-g.woff","modified":0,"renderable":1},{"_id":"themes/next/source/fonts/lato/lato-ligita-webfont-g.ttf","path":"fonts/lato/lato-ligita-webfont-g.ttf","modified":0,"renderable":1},{"_id":"themes/next/source/fonts/lato/lato-ligita-webfont-g.eot","path":"fonts/lato/lato-ligita-webfont-g.eot","modified":0,"renderable":1},{"_id":"themes/next/source/fonts/lato/lato-lig-webfont.svg","path":"fonts/lato/lato-lig-webfont.svg","modified":0,"renderable":1},{"_id":"themes/next/source/fonts/lato/lato-lig-webfont-g.woff","path":"fonts/lato/lato-lig-webfont-g.woff","modified":0,"renderable":1},{"_id":"themes/next/source/fonts/lato/lato-lig-webfont-g.ttf","path":"fonts/lato/lato-lig-webfont-g.ttf","modified":0,"renderable":1},{"_id":"themes/next/source/fonts/lato/lato-lig-webfont-g.eot","path":"fonts/lato/lato-lig-webfont-g.eot","modified":0,"renderable":1},{"_id":"themes/next/source/fonts/lato/lato-bolita-webfont.svg","path":"fonts/lato/lato-bolita-webfont.svg","modified":0,"renderable":1},{"_id":"themes/next/source/fonts/lato/lato-bolita-webfont-g.woff","path":"fonts/lato/lato-bolita-webfont-g.woff","modified":0,"renderable":1},{"_id":"themes/next/source/fonts/lato/lato-bolita-webfont-g.ttf","path":"fonts/lato/lato-bolita-webfont-g.ttf","modified":0,"renderable":1},{"_id":"themes/next/source/fonts/lato/lato-bolita-webfont-g.eot","path":"fonts/lato/lato-bolita-webfont-g.eot","modified":0,"renderable":1},{"_id":"themes/next/source/fonts/lato/lato-bol-webfont.svg","path":"fonts/lato/lato-bol-webfont.svg","modified":0,"renderable":1},{"_id":"themes/next/source/fonts/lato/lato-bol-webfont-g.woff","path":"fonts/lato/lato-bol-webfont-g.woff","modified":0,"renderable":1},{"_id":"themes/next/source/fonts/lato/lato-bol-webfont-g.ttf","path":"fonts/lato/lato-bol-webfont-g.ttf","modified":0,"renderable":1},{"_id":"themes/next/source/fonts/lato/lato-bol-webfont-g.eot","path":"fonts/lato/lato-bol-webfont-g.eot","modified":0,"renderable":1},{"_id":"themes/next/source/fonts/icon-linecons/selection.json","path":"fonts/icon-linecons/selection.json","modified":0,"renderable":1},{"_id":"themes/next/source/fonts/icon-linecons/icomoon.woff","path":"fonts/icon-linecons/icomoon.woff","modified":0,"renderable":1},{"_id":"themes/next/source/fonts/icon-linecons/icomoon.ttf","path":"fonts/icon-linecons/icomoon.ttf","modified":0,"renderable":1},{"_id":"themes/next/source/fonts/icon-linecons/icomoon.svg","path":"fonts/icon-linecons/icomoon.svg","modified":0,"renderable":1},{"_id":"themes/next/source/fonts/icon-linecons/icomoon.eot","path":"fonts/icon-linecons/icomoon.eot","modified":0,"renderable":1},{"_id":"themes/next/source/fonts/icon-icomoon/icomoon.woff","path":"fonts/icon-icomoon/icomoon.woff","modified":0,"renderable":1},{"_id":"themes/next/source/fonts/icon-icomoon/icomoon.ttf","path":"fonts/icon-icomoon/icomoon.ttf","modified":0,"renderable":1},{"_id":"themes/next/source/fonts/icon-icomoon/icomoon.svg","path":"fonts/icon-icomoon/icomoon.svg","modified":0,"renderable":1},{"_id":"themes/next/source/fonts/icon-icomoon/icomoon.eot","path":"fonts/icon-icomoon/icomoon.eot","modified":0,"renderable":1},{"_id":"themes/next/source/fonts/icon-fifty-shades/selection.json","path":"fonts/icon-fifty-shades/selection.json","modified":0,"renderable":1},{"_id":"themes/next/source/fonts/icon-fifty-shades/icomoon.woff","path":"fonts/icon-fifty-shades/icomoon.woff","modified":0,"renderable":1},{"_id":"themes/next/source/fonts/icon-fifty-shades/icomoon.ttf","path":"fonts/icon-fifty-shades/icomoon.ttf","modified":0,"renderable":1},{"_id":"themes/next/source/fonts/icon-fifty-shades/icomoon.svg","path":"fonts/icon-fifty-shades/icomoon.svg","modified":0,"renderable":1},{"_id":"themes/next/source/fonts/icon-fifty-shades/icomoon.eot","path":"fonts/icon-fifty-shades/icomoon.eot","modified":0,"renderable":1},{"_id":"themes/next/source/fonts/icon-feather/selection.json","path":"fonts/icon-feather/selection.json","modified":0,"renderable":1},{"_id":"themes/next/source/fonts/icon-feather/icomoon.woff","path":"fonts/icon-feather/icomoon.woff","modified":0,"renderable":1},{"_id":"themes/next/source/fonts/icon-feather/icomoon.ttf","path":"fonts/icon-feather/icomoon.ttf","modified":0,"renderable":1},{"_id":"themes/next/source/fonts/icon-feather/icomoon.svg","path":"fonts/icon-feather/icomoon.svg","modified":0,"renderable":1},{"_id":"themes/next/source/fonts/icon-feather/icomoon.eot","path":"fonts/icon-feather/icomoon.eot","modified":0,"renderable":1},{"_id":"themes/next/source/fonts/icon-default/selection.json","path":"fonts/icon-default/selection.json","modified":0,"renderable":1},{"_id":"themes/next/source/fonts/icon-default/icomoon.woff","path":"fonts/icon-default/icomoon.woff","modified":0,"renderable":1},{"_id":"themes/next/source/fonts/icon-default/icomoon.ttf","path":"fonts/icon-default/icomoon.ttf","modified":0,"renderable":1},{"_id":"themes/next/source/fonts/icon-default/icomoon.svg","path":"fonts/icon-default/icomoon.svg","modified":0,"renderable":1},{"_id":"themes/next/source/fonts/icon-default/icomoon.eot","path":"fonts/icon-default/icomoon.eot","modified":0,"renderable":1},{"_id":"themes/next/source/favicon.ico","path":"favicon.ico","modified":0,"renderable":1},{"_id":"themes/next/source/css/main.styl","path":"css/main.styl","modified":0,"renderable":1},{"_id":"themes/next/source/baidu_verify_swRnZfPIeR.html","path":"baidu_verify_swRnZfPIeR.html","modified":0,"renderable":1},{"_id":"themes/next/source/README","path":"README","modified":0,"renderable":1},{"_id":"themes/next/source/LICENSE","path":"LICENSE","modified":0,"renderable":1},{"_id":"themes/next/source/404.html","path":"404.html","modified":0,"renderable":1}],"Cache":[{"_id":"source/_posts/2015/10/09/Django-Notes.md","shasum":"fa1afbffb4eaaad29be50272a82402ca4e4de7ca","modified":1467214165171,"hash":"fa1afbffb4eaaad29be50272a82402ca4e4de7ca"},{"_id":"source/_posts/2015/10/09/Git-Use.md","shasum":"3d1e6170212a23785bed935823606efcb7fe443f","modified":1467214165171,"hash":"3d1e6170212a23785bed935823606efcb7fe443f"},{"_id":"source/_posts/2015/10/09/Git-Use.md~","shasum":"3d1e6170212a23785bed935823606efcb7fe443f","modified":1467214165171,"hash":"3d1e6170212a23785bed935823606efcb7fe443f"},{"_id":"source/_posts/2015/10/09/github-user-pwd.md","shasum":"a76102a3302b42f804553b11dbc47272725498b2","modified":1467215553405,"hash":"0015369f9b4507483e114d66b943f9e5e79ddbcc"},{"_id":"source/_posts/2015/10/12/Css.md","shasum":"a4971244b05ee5430f2411be2f7198b37d4f212b","modified":1467214165171,"hash":"a4971244b05ee5430f2411be2f7198b37d4f212b"},{"_id":"source/_posts/2015/10/12/Django.md","shasum":"0f99705275adfe37a632a48409182d9b8e77bd19","modified":1467214165171,"hash":"0f99705275adfe37a632a48409182d9b8e77bd19"},{"_id":"source/_posts/2015/10/12/JS.md","shasum":"bce7f07dfcf3488a9f431a3b59cf792a4c3fb1e0","modified":1467214165171,"hash":"bce7f07dfcf3488a9f431a3b59cf792a4c3fb1e0"},{"_id":"source/_posts/2015/10/14/linux.md","shasum":"4c7de55e1b9f8d0f7a8003be85f10db2440c7367","modified":1467214165175,"hash":"4c7de55e1b9f8d0f7a8003be85f10db2440c7367"},{"_id":"source/_posts/2015/10/12/Markdown.md","shasum":"4caf028ce5745db4c7e86ceec5284324362145a1","modified":1467214165171,"hash":"4caf028ce5745db4c7e86ceec5284324362145a1"},{"_id":"source/_posts/2015/10/12/technology.md","shasum":"0d6cd71027b981011cb0f617f000bf508ee7fbac","modified":1467214165171,"hash":"0d6cd71027b981011cb0f617f000bf508ee7fbac"},{"_id":"source/_posts/2015/10/13/python_question.md","shasum":"fc501e29635fbba999d0d0318e0451ecde2eee35","modified":1467214165171,"hash":"fc501e29635fbba999d0d0318e0451ecde2eee35"},{"_id":"source/_posts/2015/10/15/html.md","shasum":"0fe57f8913bd05ea4e8427212891ccdbc37ee453","modified":1467214165175,"hash":"0fe57f8913bd05ea4e8427212891ccdbc37ee453"},{"_id":"source/_posts/2015/10/17/python复制.md","shasum":"29ce8889eca07e9281f3037a7c500536fd0b41cf","modified":1467214165175,"hash":"29ce8889eca07e9281f3037a7c500536fd0b41cf"},{"_id":"source/_posts/2015/10/29/django-favicon.md","shasum":"07423c438a0362e891bc1d02be1ac3cc43045fae","modified":1467214165175,"hash":"07423c438a0362e891bc1d02be1ac3cc43045fae"},{"_id":"source/_posts/2015/10/20/python-date.md","shasum":"6bed91e0bfa9a3e738ac7d82dfe3df8bc2b9947c","modified":1467214165175,"hash":"6bed91e0bfa9a3e738ac7d82dfe3df8bc2b9947c"},{"_id":"source/_posts/2015/10/30/deleteLinux历史记录.md","shasum":"f5945054bdce4aa1bb9428f0d59e724890306f90","modified":1467214165175,"hash":"f5945054bdce4aa1bb9428f0d59e724890306f90"},{"_id":"source/_posts/2015/10/24/mysql-use.md","shasum":"563446706bcfd4663623baed724650c217aa4507","modified":1467214165175,"hash":"563446706bcfd4663623baed724650c217aa4507"},{"_id":"source/_posts/2015/10/21/django-install-problem.md","shasum":"0f39d5130af158d42d5c769b3dbf36e0a506135a","modified":1467214165175,"hash":"0f39d5130af158d42d5c769b3dbf36e0a506135a"},{"_id":"source/_posts/2015/10/30/html5之checkbox.md","shasum":"4dfd9ce14f603e8c8bdf87434f4b86afd67814f4","modified":1467214165175,"hash":"4dfd9ce14f603e8c8bdf87434f4b86afd67814f4"},{"_id":"source/_posts/2015/10/24/nodejs.md","shasum":"3f79e39362843624de73f0b9937c022bfac952e3","modified":1467214165175,"hash":"3f79e39362843624de73f0b9937c022bfac952e3"},{"_id":"source/_posts/2015/10/30/python之ord.md","shasum":"dfabb09a2d3b76cf1ef8d1e3802fbb74f6c5d05c","modified":1467214165175,"hash":"dfabb09a2d3b76cf1ef8d1e3802fbb74f6c5d05c"},{"_id":"source/_posts/2015/10/30/python列表解析.md","shasum":"b032aed705f8df135a42f69d5af51721623abee2","modified":1467214165175,"hash":"b032aed705f8df135a42f69d5af51721623abee2"},{"_id":"source/_posts/2015/11/02/python之input.md","shasum":"edc3ce47a1f9c58767fb9c0952dbd9b42041fc23","modified":1467214165175,"hash":"edc3ce47a1f9c58767fb9c0952dbd9b42041fc23"},{"_id":"source/_posts/2015/11/05/js之闭包.md","shasum":"f6d6b9c0382e1ebbac1adaef8dfde08c19d41ce2","modified":1467214165175,"hash":"f6d6b9c0382e1ebbac1adaef8dfde08c19d41ce2"},{"_id":"source/_posts/2015/11/03/mysql之1292.md","shasum":"f128b8c19ffabf793f264e6de52589e57d4856f2","modified":1467214165175,"hash":"f128b8c19ffabf793f264e6de52589e57d4856f2"},{"_id":"source/_posts/2015/11/05/ubuntu之装机必备.md","shasum":"6875fb4b8fdd4874c1a2891c30ffa1aad9045676","modified":1467214165175,"hash":"6875fb4b8fdd4874c1a2891c30ffa1aad9045676"},{"_id":"source/_posts/2015/11/06/django之related-name.md","shasum":"61574c885cac6e47faf2961d89e525ac2358adf3","modified":1467214165175,"hash":"61574c885cac6e47faf2961d89e525ac2358adf3"},{"_id":"source/_posts/2015/11/06/linux之缓存.md","shasum":"304505b227353d5b338b214ddf24c6250c98533a","modified":1467214165175,"hash":"304505b227353d5b338b214ddf24c6250c98533a"},{"_id":"source/_posts/2015/11/09/mysql之update.md","shasum":"3ed16b4e1e544c2505448108c64b3ebdfc484305","modified":1467214165175,"hash":"3ed16b4e1e544c2505448108c64b3ebdfc484305"},{"_id":"source/_posts/2015/11/06/vim之使用.md","shasum":"eabdc61158f6b5e1ed42e5ed103c375bb157a528","modified":1467214165175,"hash":"eabdc61158f6b5e1ed42e5ed103c375bb157a528"},{"_id":"source/_posts/2015/11/10/django之外键的删除.md","shasum":"5afce2a222646525e59c234c888070c9bdd949ff","modified":1467214165175,"hash":"5afce2a222646525e59c234c888070c9bdd949ff"},{"_id":"source/_posts/2015/11/07/django之温故知新1.md","shasum":"fe6fae0a598182c4bf8e70684c626948c0ca6640","modified":1467214165175,"hash":"fe6fae0a598182c4bf8e70684c626948c0ca6640"},{"_id":"source/_posts/2015/11/07/vim之格式化代码.md","shasum":"888e2d8734cfb3b53c1f154f35f536975d121145","modified":1467214165175,"hash":"888e2d8734cfb3b53c1f154f35f536975d121145"},{"_id":"source/_posts/2015/11/10/mysql之修改字段默认值.md","shasum":"e6425556972fd00026792e7f48afaa8841ea2651","modified":1467214165175,"hash":"e6425556972fd00026792e7f48afaa8841ea2651"},{"_id":"source/_posts/2015/11/16/android之Gson.md","shasum":"f3ba72dacff6e43217779c4adb1a51c02b8f9c3a","modified":1467214165175,"hash":"f3ba72dacff6e43217779c4adb1a51c02b8f9c3a"},{"_id":"source/_posts/2015/11/11/mysql之作业.md","shasum":"32f3363551576b447a02582c6d9fbab253dee783","modified":1467214165175,"hash":"32f3363551576b447a02582c6d9fbab253dee783"},{"_id":"source/_posts/2015/11/16/android之错误.md","shasum":"305274083eb3a55f5ae55d4b4145be0cea0445c9","modified":1467214165175,"hash":"305274083eb3a55f5ae55d4b4145be0cea0445c9"},{"_id":"source/_posts/2015/11/16/android之scroll.md","shasum":"93d89c48ff475e26b5ee1a0bfd4eb74167b55fc8","modified":1467214165175,"hash":"93d89c48ff475e26b5ee1a0bfd4eb74167b55fc8"},{"_id":"source/_posts/2015/11/20/flask之学习安装.md","shasum":"1a1d92096216587841550fd0b7b89640e33f2b1c","modified":1467214165175,"hash":"1a1d92096216587841550fd0b7b89640e33f2b1c"},{"_id":"source/_posts/2015/11/18/android之oom.md","shasum":"b6d3ed7b9cc9bda53ebb508072ef2ca2afb1449e","modified":1467214165175,"hash":"b6d3ed7b9cc9bda53ebb508072ef2ca2afb1449e"},{"_id":"source/_posts/2015/11/25/flask之错误收集.md","shasum":"c5a8f48ab11c3a09289676b775041e8b9bc36e17","modified":1467214165175,"hash":"c5a8f48ab11c3a09289676b775041e8b9bc36e17"},{"_id":"source/_posts/2015/11/26/flask之Context.md","shasum":"501f9fa672bb76010d5ec3fa9b76232c1dff963a","modified":1467214165175,"hash":"501f9fa672bb76010d5ec3fa9b76232c1dff963a"},{"_id":"source/_posts/2015/11/26/python之nosetests.md","shasum":"f0217c740bfcf5304285586a7e1ca7e80164b817","modified":1467214165175,"hash":"f0217c740bfcf5304285586a7e1ca7e80164b817"},{"_id":"source/_posts/2016/02/01/linux之find文件夹.md","shasum":"0851177d34f1365153091c50329a5c6802e056ad","modified":1467215553449,"hash":"3e2e32da695e50dd98834ccd1f4d697770ece18d"},{"_id":"source/_posts/2016/01/15/celeryUser.md","shasum":"307bc20d337b3c8312fa54b94f195f1f0cce31de","modified":1467214165175,"hash":"307bc20d337b3c8312fa54b94f195f1f0cce31de"},{"_id":"source/_posts/2015/12/09/git设置不需要设置密码.md","shasum":"7cddf03e9f035c6b14a20726fc64c37286dc6552","modified":1467214165175,"hash":"7cddf03e9f035c6b14a20726fc64c37286dc6552"},{"_id":"source/_posts/2016/01/07/uwsiguse.md","shasum":"22355b270c95ca988ab7cb17b33b5e34ee8902ad","modified":1467214165175,"hash":"22355b270c95ca988ab7cb17b33b5e34ee8902ad"},{"_id":"source/_posts/2016/01/08/mysql-command.md","shasum":"25cae9bad098cec822b2bba57d65a72562b7e55b","modified":1467214165175,"hash":"25cae9bad098cec822b2bba57d65a72562b7e55b"},{"_id":"source/categories/index.md","shasum":"18eca7b13c736b02385f8b465803d26177f3b7d0","modified":1467214165175,"hash":"18eca7b13c736b02385f8b465803d26177f3b7d0"},{"_id":"source/about/index.md","shasum":"e8d8f7dfa26c2caf3826de27e60d06100ea01d22","modified":1467214165175,"hash":"e8d8f7dfa26c2caf3826de27e60d06100ea01d22"},{"_id":"source/guestbook/index.md","shasum":"51239d273cfa95bcbfb71848a9fae673d74ab691","modified":1467214165175,"hash":"51239d273cfa95bcbfb71848a9fae673d74ab691"},{"_id":"source/tags/index.md","shasum":"655f5c0536560911a9380843767267e519360092","modified":1467214165175,"hash":"655f5c0536560911a9380843767267e519360092"},{"_id":"themes/next/source/css/_common/_page/home.styl","shasum":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1467214165191,"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709"},{"_id":"themes/next/source/css/_mixins/Mist.styl","shasum":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1467214165195,"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709"},{"_id":"themes/next/source/css/_mixins/custom.styl","shasum":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1467214165195,"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709"},{"_id":"themes/next/source/css/_mixins/default.styl","shasum":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1467214165195,"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709"},{"_id":"themes/next/source/css/_variables/custom.styl","shasum":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1467214165195,"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709"},{"_id":"themes/next/source/css/_variables/default.styl","shasum":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1467214165195,"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709"},{"_id":"themes/next/README.md","shasum":"3319de8565699fc9642f76c41ee96b50f2234b6a","modified":1467214165191,"hash":"3319de8565699fc9642f76c41ee96b50f2234b6a"},{"_id":"themes/next/README.en.md","shasum":"565ba52b3825b85a9f05b41183caca7f18b741d4","modified":1467214165191,"hash":"565ba52b3825b85a9f05b41183caca7f18b741d4"},{"_id":"themes/next/languages/default.yml","shasum":"7e65ef918f16d0189055deb5f1616b9dedcb1920","modified":1467214165191,"hash":"7e65ef918f16d0189055deb5f1616b9dedcb1920"},{"_id":"themes/next/bower.json","shasum":"1bdb0641bdcb9b5b154d2e379c57fe5675f06b9c","modified":1467214165191,"hash":"1bdb0641bdcb9b5b154d2e379c57fe5675f06b9c"},{"_id":"themes/next/languages/de.yml","shasum":"7a8de0e5665c52a1bf168c1e7dd222c8a74fb0ab","modified":1467214165191,"hash":"7a8de0e5665c52a1bf168c1e7dd222c8a74fb0ab"},{"_id":"themes/next/_config.yml","shasum":"6649947164d4f09811469c7aaf80f2fa9315ad38","modified":1467216699397,"hash":"1072d85eb6c84ba6aa8d4b9daeae9440e21586df"},{"_id":"themes/next/languages/en.yml","shasum":"7e65ef918f16d0189055deb5f1616b9dedcb1920","modified":1467214165191,"hash":"7e65ef918f16d0189055deb5f1616b9dedcb1920"},{"_id":"themes/next/languages/fr-FR.yml","shasum":"6d097445342a9fb5235afea35d65bf5271b772f0","modified":1467214165191,"hash":"6d097445342a9fb5235afea35d65bf5271b772f0"},{"_id":"themes/next/languages/zh-hk.yml","shasum":"3fc38103c9efa6f6c37149adbddb014ff85ec849","modified":1467214165191,"hash":"3fc38103c9efa6f6c37149adbddb014ff85ec849"},{"_id":"themes/next/languages/zh-Hans.yml","shasum":"d000613ecb7b3daa36cb507abaa6123eee8ae53b","modified":1467214165191,"hash":"d000613ecb7b3daa36cb507abaa6123eee8ae53b"},{"_id":"themes/next/languages/ru.yml","shasum":"b4a827b9ddac9d5f6dca096fe513aeafb46a3e93","modified":1467214165191,"hash":"b4a827b9ddac9d5f6dca096fe513aeafb46a3e93"},{"_id":"themes/next/languages/zh-tw.yml","shasum":"8897a06e521b36c7a1226c72057c8357611eded8","modified":1467214165191,"hash":"8897a06e521b36c7a1226c72057c8357611eded8"},{"_id":"themes/next/layout/_layout.swig","shasum":"56acb341e0ced83b0ae24861450a7e7fa903e56b","modified":1467214165191,"hash":"56acb341e0ced83b0ae24861450a7e7fa903e56b"},{"_id":"themes/next/layout/_macro/post.swig","shasum":"598b3085b6b74f4664eb66e6ae8737920e07d7a9","modified":1467214165191,"hash":"598b3085b6b74f4664eb66e6ae8737920e07d7a9"},{"_id":"themes/next/layout/_macro/post-collapse.swig","shasum":"42927bdde998cefd3cf4f19b0476d69bd9e5116a","modified":1467214165191,"hash":"42927bdde998cefd3cf4f19b0476d69bd9e5116a"},{"_id":"themes/next/layout/_macro/sidebar.swig","shasum":"b0c467b42073270db7db41907ce8881f64bf3793","modified":1467214165191,"hash":"b0c467b42073270db7db41907ce8881f64bf3793"},{"_id":"themes/next/layout/_partials/footer.swig","shasum":"44d513401032362655c40cae66e579dba8dd3d85","modified":1467214165191,"hash":"44d513401032362655c40cae66e579dba8dd3d85"},{"_id":"themes/next/layout/_partials/head.swig","shasum":"208d81dbb98bbd522b568361ed01f1f187add181","modified":1467214165191,"hash":"208d81dbb98bbd522b568361ed01f1f187add181"},{"_id":"themes/next/layout/_partials/pagination.swig","shasum":"d6c7f04eee4388d8f133eb5526b7c0875c321a30","modified":1467214165191,"hash":"d6c7f04eee4388d8f133eb5526b7c0875c321a30"},{"_id":"themes/next/layout/_partials/header.swig","shasum":"b39cc596367cf7cef0791c5aaa1dbd8a54160415","modified":1467214165191,"hash":"b39cc596367cf7cef0791c5aaa1dbd8a54160415"},{"_id":"themes/next/layout/_partials/old-browsers.swig","shasum":"dbbfea810bf3a2ed9c83b9a6683037175aacfc67","modified":1467214165191,"hash":"dbbfea810bf3a2ed9c83b9a6683037175aacfc67"},{"_id":"themes/next/layout/_partials/search/swiftype.swig","shasum":"00c2b49f6289198b0b2b4e157e4ee783277f32a7","modified":1467214165191,"hash":"00c2b49f6289198b0b2b4e157e4ee783277f32a7"},{"_id":"themes/next/layout/_partials/search.swig","shasum":"64f14da26792a17bc27836c4e9d83190175f36e6","modified":1467214165191,"hash":"64f14da26792a17bc27836c4e9d83190175f36e6"},{"_id":"themes/next/layout/_partials/search/tinysou.swig","shasum":"2f92046e0b50ebd65abb7045b1cbbfc50abbb034","modified":1467214165191,"hash":"2f92046e0b50ebd65abb7045b1cbbfc50abbb034"},{"_id":"themes/next/layout/_partials/share/jiathis.swig","shasum":"63315fcf210799f894208c9f512737096df84962","modified":1467214165191,"hash":"63315fcf210799f894208c9f512737096df84962"},{"_id":"themes/next/layout/_partials/share/duoshuo_share.swig","shasum":"89c5a5240ecb223acfe1d12377df5562a943fd5d","modified":1467214165191,"hash":"89c5a5240ecb223acfe1d12377df5562a943fd5d"},{"_id":"themes/next/layout/_scripts/analytics/baidu-analytics.swig","shasum":"38403680433dfa4a0523448495986a3306cd9d95","modified":1467214165191,"hash":"38403680433dfa4a0523448495986a3306cd9d95"},{"_id":"themes/next/layout/_scripts/analytics/google-analytics.swig","shasum":"30a23fa7e816496fdec0e932aa42e2d13098a9c2","modified":1467214165191,"hash":"30a23fa7e816496fdec0e932aa42e2d13098a9c2"},{"_id":"themes/next/layout/_scripts/analytics.swig","shasum":"0ebbf76c2317faa8ba31365adba59331c2e0262c","modified":1467214165191,"hash":"0ebbf76c2317faa8ba31365adba59331c2e0262c"},{"_id":"themes/next/layout/_scripts/bootstrap.scrollspy.swig","shasum":"85295f126836b95f0837d03e58228bb3cf8c4490","modified":1467214165191,"hash":"85295f126836b95f0837d03e58228bb3cf8c4490"},{"_id":"themes/next/layout/_scripts/baidushare.swig","shasum":"d726361945437cf6e48067b3dd041b7e36e98d85","modified":1467214165191,"hash":"d726361945437cf6e48067b3dd041b7e36e98d85"},{"_id":"themes/next/layout/_scripts/comments/disqus.swig","shasum":"3491d3cebabc8a28857200db28a1be65aad6adc2","modified":1467214165191,"hash":"3491d3cebabc8a28857200db28a1be65aad6adc2"},{"_id":"themes/next/layout/_scripts/comments/duoshuo.swig","shasum":"63b9648dcc03dc2536a7a887185fb15acfabceb4","modified":1467214165191,"hash":"63b9648dcc03dc2536a7a887185fb15acfabceb4"},{"_id":"themes/next/layout/_scripts/fancy-box.swig","shasum":"41b4ff1446060c88c33bf666a32277dcf12129f0","modified":1467214165191,"hash":"41b4ff1446060c88c33bf666a32277dcf12129f0"},{"_id":"themes/next/layout/_scripts/helpers.swig","shasum":"4d2cbfca0aaf546a2b5813288073e824c1498fdf","modified":1467214165191,"hash":"4d2cbfca0aaf546a2b5813288073e824c1498fdf"},{"_id":"themes/next/layout/_scripts/mathjax.swig","shasum":"abc52fefb276c52cbb19de5c214521dfcf2a10fd","modified":1467214165191,"hash":"abc52fefb276c52cbb19de5c214521dfcf2a10fd"},{"_id":"themes/next/layout/_scripts/motion.swig","shasum":"817705bfd1a1282cb6bf59094afe507e11455aa0","modified":1467214165191,"hash":"817705bfd1a1282cb6bf59094afe507e11455aa0"},{"_id":"themes/next/layout/_scripts/pages/post-details.swig","shasum":"b63ef233886538f30ced60344ac15d25e5f3e0af","modified":1467214165191,"hash":"b63ef233886538f30ced60344ac15d25e5f3e0af"},{"_id":"themes/next/layout/archive.swig","shasum":"0c3ce594759f347ea90a4ce592a7a18e2ae4cc5c","modified":1467214165191,"hash":"0c3ce594759f347ea90a4ce592a7a18e2ae4cc5c"},{"_id":"themes/next/layout/category.swig","shasum":"d6b3e1dc5e0b8deade9a084c463126e70188ee9b","modified":1467214165191,"hash":"d6b3e1dc5e0b8deade9a084c463126e70188ee9b"},{"_id":"themes/next/layout/index.swig","shasum":"bb6099879b841865c0016a3d3a19b4fb19a83bb4","modified":1467214165191,"hash":"bb6099879b841865c0016a3d3a19b4fb19a83bb4"},{"_id":"themes/next/scripts/merge-configs.js","shasum":"dfd147d1317e56d283f5e779f00608e913603b51","modified":1467214165191,"hash":"dfd147d1317e56d283f5e779f00608e913603b51"},{"_id":"themes/next/scripts/tags/center-quote.js","shasum":"37274f743c2054244dcbbde56fba9ff353414281","modified":1467214165191,"hash":"37274f743c2054244dcbbde56fba9ff353414281"},{"_id":"themes/next/scripts/tags/full-image.js","shasum":"0d69739d1bad5861a4a6ff2db511c3669783e438","modified":1467214165191,"hash":"0d69739d1bad5861a4a6ff2db511c3669783e438"},{"_id":"themes/next/layout/page.swig","shasum":"8019d02232a6dd1a665b6a4d2daef8e5dd2f0049","modified":1467214165191,"hash":"8019d02232a6dd1a665b6a4d2daef8e5dd2f0049"},{"_id":"themes/next/layout/post.swig","shasum":"a84457e8ced46e63bc7a8a9e0541a6ba53122a92","modified":1467214165191,"hash":"a84457e8ced46e63bc7a8a9e0541a6ba53122a92"},{"_id":"themes/next/layout/tag.swig","shasum":"aab44af54fcbc66fea4ad12b2767ffca3eadd451","modified":1467214165191,"hash":"aab44af54fcbc66fea4ad12b2767ffca3eadd451"},{"_id":"themes/next/source/404.html","shasum":"4a0d9ade0dee916eede2f4f7c54a245ecfaea3f1","modified":1467214165191,"hash":"4a0d9ade0dee916eede2f4f7c54a245ecfaea3f1"},{"_id":"themes/next/source/LICENSE","shasum":"702c4322e3cb936294690608b59f8b60b1fc8d30","modified":1467214165191,"hash":"702c4322e3cb936294690608b59f8b60b1fc8d30"},{"_id":"themes/next/source/README","shasum":"3f15f4a56fc4b56c0a5a536c15034439b84e3382","modified":1467214165191,"hash":"3f15f4a56fc4b56c0a5a536c15034439b84e3382"},{"_id":"themes/next/source/baidu_verify_swRnZfPIeR.html","shasum":"c0abc1613ffb97e011aa114d1ba7dd9519533ee7","modified":1467214165191,"hash":"c0abc1613ffb97e011aa114d1ba7dd9519533ee7"},{"_id":"themes/next/source/css/_common/_component/back-to-top.styl","shasum":"88cd66910260006aa8e9e795df4948d4b67bfa11","modified":1467214165191,"hash":"88cd66910260006aa8e9e795df4948d4b67bfa11"},{"_id":"themes/next/source/css/_common/_component/buttons.styl","shasum":"81063e0979f04a0f9af37f321d7321dda9abf593","modified":1467214165191,"hash":"81063e0979f04a0f9af37f321d7321dda9abf593"},{"_id":"themes/next/source/css/_common/_component/comments.styl","shasum":"54e73681ba6f57ef961138f94d2ee8ac845990c3","modified":1467214165191,"hash":"54e73681ba6f57ef961138f94d2ee8ac845990c3"},{"_id":"themes/next/source/css/_common/_component/duoshuo.styl","shasum":"c307f1e4827d7cb82816a5f9de109ae14ed4199c","modified":1467214165191,"hash":"c307f1e4827d7cb82816a5f9de109ae14ed4199c"},{"_id":"themes/next/source/css/_common/_component/gallery.styl","shasum":"387ce23bba52b22a586b2dfb4ec618fe1ffd3926","modified":1467214165191,"hash":"387ce23bba52b22a586b2dfb4ec618fe1ffd3926"},{"_id":"themes/next/source/css/_common/_component/jiathis.styl","shasum":"327b5f63d55ec26f7663185c1a778440588d9803","modified":1467214165191,"hash":"327b5f63d55ec26f7663185c1a778440588d9803"},{"_id":"themes/next/source/css/_common/_component/pagination.styl","shasum":"711c8830886619d4f4a0598b0cde5499dce50c62","modified":1467214165191,"hash":"711c8830886619d4f4a0598b0cde5499dce50c62"},{"_id":"themes/next/source/css/_common/_component/posts-collapse.styl","shasum":"8f9e8f5f65956ccf1d52ff8526392803dff579d3","modified":1467214165191,"hash":"8f9e8f5f65956ccf1d52ff8526392803dff579d3"},{"_id":"themes/next/source/css/_common/_component/posts-expand.styl","shasum":"4b82dbbb6e536e6e8ee3cec6e62c2fd4bea60a09","modified":1467214165191,"hash":"4b82dbbb6e536e6e8ee3cec6e62c2fd4bea60a09"},{"_id":"themes/next/source/css/_common/_component/posts-type.styl","shasum":"40b593134bf96d1d6095b3439d47820659d7f10b","modified":1467214165191,"hash":"40b593134bf96d1d6095b3439d47820659d7f10b"},{"_id":"themes/next/source/css/_common/_component/tag-cloud.styl","shasum":"dd8a3b22fc2f222ac6e6c05bd8a773fb039169c0","modified":1467214165191,"hash":"dd8a3b22fc2f222ac6e6c05bd8a773fb039169c0"},{"_id":"themes/next/source/css/_common/_core/base.styl","shasum":"e79a08484b191dca14ccfc005053eb95786dafae","modified":1467214165191,"hash":"e79a08484b191dca14ccfc005053eb95786dafae"},{"_id":"themes/next/source/css/_common/_core/helpers.styl","shasum":"41a31d651b60b4f458fc56a1d191dfbbdcb6d794","modified":1467214165191,"hash":"41a31d651b60b4f458fc56a1d191dfbbdcb6d794"},{"_id":"themes/next/source/css/_common/_core/normalize.styl","shasum":"ece571f38180febaf02ace8187ead8318a300ea7","modified":1467214165191,"hash":"ece571f38180febaf02ace8187ead8318a300ea7"},{"_id":"themes/next/source/css/_common/_core/scaffolding.styl","shasum":"cbd7f1d5c72e3024b5d70dafb6ca93e2723652ab","modified":1467214165191,"hash":"cbd7f1d5c72e3024b5d70dafb6ca93e2723652ab"},{"_id":"themes/next/source/css/_common/_fonts/icon-default.styl","shasum":"8b809aef383bebaeb3f282b47675f3a364ce3569","modified":1467214165191,"hash":"8b809aef383bebaeb3f282b47675f3a364ce3569"},{"_id":"themes/next/source/css/_common/_fonts/icon-feather.styl","shasum":"80413afacfa656322100ce1900fed1ebcd8f8f44","modified":1467214165191,"hash":"80413afacfa656322100ce1900fed1ebcd8f8f44"},{"_id":"themes/next/source/css/_common/_core/tables.styl","shasum":"f142a185fda68bc579e89ead9a31bc8fa0f3ca8c","modified":1467214165191,"hash":"f142a185fda68bc579e89ead9a31bc8fa0f3ca8c"},{"_id":"themes/next/source/css/_common/_fonts/icon-fifty-shades.styl","shasum":"249f75bafa26b99d272352c0646e7497ea680b39","modified":1467214165191,"hash":"249f75bafa26b99d272352c0646e7497ea680b39"},{"_id":"themes/next/source/css/_common/_fonts/icon-font.styl","shasum":"ec3f86739bede393cafcd3e31052c01115ae20d6","modified":1467214165191,"hash":"ec3f86739bede393cafcd3e31052c01115ae20d6"},{"_id":"themes/next/source/css/_common/_fonts/icon-linecons.styl","shasum":"9cdbedb3627ac941cfb063b152abe5a75c3c699a","modified":1467214165191,"hash":"9cdbedb3627ac941cfb063b152abe5a75c3c699a"},{"_id":"themes/next/source/css/_common/_page/archive.styl","shasum":"dff879f55ca65fa79c07e9098719e53eeea7ac88","modified":1467214165191,"hash":"dff879f55ca65fa79c07e9098719e53eeea7ac88"},{"_id":"themes/next/source/css/_common/_page/categories.styl","shasum":"4f696a2eaeee2f214adcf273eab25c62a398077a","modified":1467214165191,"hash":"4f696a2eaeee2f214adcf273eab25c62a398077a"},{"_id":"themes/next/source/css/_common/_page/post-detail.styl","shasum":"73796f6f13caa7151a2ee8e55755627e0d189f55","modified":1467214165191,"hash":"73796f6f13caa7151a2ee8e55755627e0d189f55"},{"_id":"themes/next/source/css/_common/_section/body.styl","shasum":"ca1a4766cbe25baac757c6b47a4858d221afdc40","modified":1467214165191,"hash":"ca1a4766cbe25baac757c6b47a4858d221afdc40"},{"_id":"themes/next/source/css/_common/_section/footer.styl","shasum":"8994ffcce84deac0471532f270f97c44fea54dc0","modified":1467214165191,"hash":"8994ffcce84deac0471532f270f97c44fea54dc0"},{"_id":"themes/next/source/css/_common/_section/header.styl","shasum":"ba501332fb111bd72dc0777f2e1c8a29ad538ff9","modified":1467214165191,"hash":"ba501332fb111bd72dc0777f2e1c8a29ad538ff9"},{"_id":"themes/next/source/css/_common/_section/layout.styl","shasum":"4daaadd156ece64ae05908ad6bb0159c8a27c071","modified":1467214165191,"hash":"4daaadd156ece64ae05908ad6bb0159c8a27c071"},{"_id":"themes/next/source/css/_common/_section/media.styl","shasum":"fa9809d2ecc753cf32f70803c1d0821c405211f4","modified":1467214165191,"hash":"fa9809d2ecc753cf32f70803c1d0821c405211f4"},{"_id":"themes/next/source/css/_common/_section/sidebar.styl","shasum":"d57e1769ebd2c472d2b27d17a706d3f564f94033","modified":1467214165191,"hash":"d57e1769ebd2c472d2b27d17a706d3f564f94033"},{"_id":"themes/next/source/css/_common/_vendor/highlight/highlight.styl","shasum":"f3529b7da284c4b859429573c9b1004d32937e40","modified":1467214165191,"hash":"f3529b7da284c4b859429573c9b1004d32937e40"},{"_id":"themes/next/source/css/_common/_vendor/highlight/theme.styl","shasum":"ae19721ceee5ba460e131cb2427dae3c1ff39d6f","modified":1467214165191,"hash":"ae19721ceee5ba460e131cb2427dae3c1ff39d6f"},{"_id":"themes/next/source/css/_custom/custom.styl","shasum":"ed1360dfd016c40cce03421742362cabe3e581a0","modified":1467214165191,"hash":"ed1360dfd016c40cce03421742362cabe3e581a0"},{"_id":"themes/next/source/css/_mixins/base.styl","shasum":"66985fe77bd323f7f8f634908e17166f51e96e95","modified":1467214165195,"hash":"66985fe77bd323f7f8f634908e17166f51e96e95"},{"_id":"themes/next/source/css/_schemes/Mist/index.styl","shasum":"f3f4fac628d0b588cb40795d498110d33b11ce26","modified":1467214165195,"hash":"f3f4fac628d0b588cb40795d498110d33b11ce26"},{"_id":"themes/next/source/css/_schemes/default/_menu.styl","shasum":"4bba29cece65ffc5122f4e052063dea4439fe4ae","modified":1467214165195,"hash":"4bba29cece65ffc5122f4e052063dea4439fe4ae"},{"_id":"themes/next/source/css/_schemes/default/_search.styl","shasum":"c524bccdc554349106d1c8be9c3f275d4c0d4281","modified":1467214165195,"hash":"c524bccdc554349106d1c8be9c3f275d4c0d4281"},{"_id":"themes/next/source/css/_schemes/default/index.styl","shasum":"2588e55132e10d82c0608f03c2c72a2bace8fa4e","modified":1467214165195,"hash":"2588e55132e10d82c0608f03c2c72a2bace8fa4e"},{"_id":"themes/next/source/css/_variables/Mist.styl","shasum":"f5dda1ca48c1b73a0bd34e08413de57699f24083","modified":1467214165195,"hash":"f5dda1ca48c1b73a0bd34e08413de57699f24083"},{"_id":"themes/next/source/css/main.styl","shasum":"b05c342e94ded24a5f2b203cedf77d3faa817fd5","modified":1467214165195,"hash":"b05c342e94ded24a5f2b203cedf77d3faa817fd5"},{"_id":"themes/next/source/css/_variables/base.styl","shasum":"66e94d53e65a739c21111440b891d0d98068062b","modified":1467214165195,"hash":"66e94d53e65a739c21111440b891d0d98068062b"},{"_id":"themes/next/source/favicon.ico","shasum":"5b83c3906dae38f9b0cababfdf5f3f568f4f6af6","modified":1467214165195,"hash":"5b83c3906dae38f9b0cababfdf5f3f568f4f6af6"},{"_id":"themes/next/source/fonts/icon-default/icomoon.eot","shasum":"90763e97be18be78e65749075225cceeddc6fa8a","modified":1467214165195,"hash":"90763e97be18be78e65749075225cceeddc6fa8a"},{"_id":"themes/next/source/fonts/icon-default/icomoon.svg","shasum":"f92ad8cddc250f0bb5ca466fca95d321987e127e","modified":1467214165195,"hash":"f92ad8cddc250f0bb5ca466fca95d321987e127e"},{"_id":"themes/next/source/fonts/icon-default/icomoon.woff","shasum":"dbe0368f2a65d87b13234cfea29d9783892fc7a8","modified":1467214165195,"hash":"dbe0368f2a65d87b13234cfea29d9783892fc7a8"},{"_id":"themes/next/source/fonts/icon-default/icomoon.ttf","shasum":"c093408e6030221cafc1f79d897f1fb5283c1178","modified":1467214165195,"hash":"c093408e6030221cafc1f79d897f1fb5283c1178"},{"_id":"themes/next/source/fonts/icon-default/selection.json","shasum":"dc07c29f687315f9458f6b251c214768af865fb2","modified":1467214165195,"hash":"dc07c29f687315f9458f6b251c214768af865fb2"},{"_id":"themes/next/source/fonts/icon-feather/icomoon.eot","shasum":"11554b9e9d5b9f535ba96cbb27d45d8c8f1689fd","modified":1467214165195,"hash":"11554b9e9d5b9f535ba96cbb27d45d8c8f1689fd"},{"_id":"themes/next/source/fonts/icon-feather/icomoon.svg","shasum":"d5eb756eefda9b454dcb23c2b1cefd4051d18d41","modified":1467214165195,"hash":"d5eb756eefda9b454dcb23c2b1cefd4051d18d41"},{"_id":"themes/next/source/fonts/icon-feather/icomoon.ttf","shasum":"b2bbae4b613403cf61ad25037913378da1c07b8f","modified":1467214165195,"hash":"b2bbae4b613403cf61ad25037913378da1c07b8f"},{"_id":"themes/next/source/fonts/icon-feather/icomoon.woff","shasum":"2ea1c59c17422798e64ee6f4e9ce1f7aff1a06a5","modified":1467214165195,"hash":"2ea1c59c17422798e64ee6f4e9ce1f7aff1a06a5"},{"_id":"themes/next/source/fonts/icon-feather/selection.json","shasum":"06ea91e3f98ebe1080087acad4356802bc5b6ebf","modified":1467214165195,"hash":"06ea91e3f98ebe1080087acad4356802bc5b6ebf"},{"_id":"themes/next/source/fonts/icon-fifty-shades/icomoon.eot","shasum":"da86ba5df72d1288de9e9633e5f528062dd427d5","modified":1467214165195,"hash":"da86ba5df72d1288de9e9633e5f528062dd427d5"},{"_id":"themes/next/source/fonts/icon-fifty-shades/icomoon.svg","shasum":"1a4afd739e1f8eb8d430dbdd29e36a9999802e8d","modified":1467214165195,"hash":"1a4afd739e1f8eb8d430dbdd29e36a9999802e8d"},{"_id":"themes/next/source/fonts/icon-fifty-shades/icomoon.woff","shasum":"4de6a74f523dee33d95dde61caae5809f9a5d448","modified":1467214165195,"hash":"4de6a74f523dee33d95dde61caae5809f9a5d448"},{"_id":"themes/next/source/fonts/icon-fifty-shades/icomoon.ttf","shasum":"72fe82e1f3db52414eed706952d385af241cb196","modified":1467214165195,"hash":"72fe82e1f3db52414eed706952d385af241cb196"},{"_id":"themes/next/source/fonts/icon-fifty-shades/selection.json","shasum":"fdd09098d1c3688e2c88cf33fd51e76b383b6d7f","modified":1467214165195,"hash":"fdd09098d1c3688e2c88cf33fd51e76b383b6d7f"},{"_id":"themes/next/source/fonts/icon-icomoon/icomoon.eot","shasum":"301fcf00c24750dddf1c529f944ca62c7f1a217d","modified":1467214165195,"hash":"301fcf00c24750dddf1c529f944ca62c7f1a217d"},{"_id":"themes/next/source/fonts/icon-icomoon/icomoon.ttf","shasum":"f399713d1c9400d4d3373e38991a7e362a754a94","modified":1467214165195,"hash":"f399713d1c9400d4d3373e38991a7e362a754a94"},{"_id":"themes/next/source/fonts/icon-icomoon/icomoon.woff","shasum":"05f1ec0bd307da5e731a86eb4961589a6042aebb","modified":1467214165195,"hash":"05f1ec0bd307da5e731a86eb4961589a6042aebb"},{"_id":"themes/next/source/fonts/icon-icomoon/icomoon.svg","shasum":"e316347805eb93425faa678611c5e42a7152da8f","modified":1467214165195,"hash":"e316347805eb93425faa678611c5e42a7152da8f"},{"_id":"themes/next/source/fonts/icon-linecons/icomoon.eot","shasum":"e2d7f040428a632f3c50bfa94083b759936effc2","modified":1467214165195,"hash":"e2d7f040428a632f3c50bfa94083b759936effc2"},{"_id":"themes/next/source/fonts/icon-linecons/icomoon.svg","shasum":"808eaf7d61f7e67c76976265c885e79c36920f0b","modified":1467214165195,"hash":"808eaf7d61f7e67c76976265c885e79c36920f0b"},{"_id":"themes/next/source/fonts/icon-linecons/icomoon.ttf","shasum":"078068206684e4f185b0187ad3cee16f54a287d7","modified":1467214165195,"hash":"078068206684e4f185b0187ad3cee16f54a287d7"},{"_id":"themes/next/source/fonts/icon-linecons/icomoon.woff","shasum":"0b07ee6ceda3b1bceb40c1e7379b3aa48dcc15a8","modified":1467214165195,"hash":"0b07ee6ceda3b1bceb40c1e7379b3aa48dcc15a8"},{"_id":"themes/next/source/fonts/lato/lato-bol-webfont-g.eot","shasum":"d81b9c592a23e3b1f76c3e77853a1d840f16bb71","modified":1467214165195,"hash":"d81b9c592a23e3b1f76c3e77853a1d840f16bb71"},{"_id":"themes/next/source/fonts/icon-linecons/selection.json","shasum":"db4ce25d31449ecc6685b32e145252103967bb5c","modified":1467214165195,"hash":"db4ce25d31449ecc6685b32e145252103967bb5c"},{"_id":"themes/next/source/fonts/lato/lato-bol-webfont-g.woff","shasum":"0098108f9e29ae4f265b755fb5979b1f72be6bbc","modified":1467214165195,"hash":"0098108f9e29ae4f265b755fb5979b1f72be6bbc"},{"_id":"themes/next/source/fonts/lato/lato-bolita-webfont-g.eot","shasum":"6cd494d71a9fb9f435f7722bbda9d5e6a4893968","modified":1467214165199,"hash":"6cd494d71a9fb9f435f7722bbda9d5e6a4893968"},{"_id":"themes/next/source/fonts/lato/lato-bolita-webfont-g.woff","shasum":"cd08800b3330fcd0a0d7849e684c62987985d686","modified":1467214165199,"hash":"cd08800b3330fcd0a0d7849e684c62987985d686"},{"_id":"themes/next/source/fonts/lato/lato-lig-webfont-g.eot","shasum":"08b674c48040d26dd05870e708c3366e91c7fc35","modified":1467214165199,"hash":"08b674c48040d26dd05870e708c3366e91c7fc35"},{"_id":"themes/next/source/fonts/lato/lato-lig-webfont-g.woff","shasum":"5f1c1daa92b017fbf6daff97762fcf74d44d2050","modified":1467214165199,"hash":"5f1c1daa92b017fbf6daff97762fcf74d44d2050"},{"_id":"themes/next/source/fonts/lato/lato-ligita-webfont-g.eot","shasum":"1ebee478e43fd25cda0ab5d076ff9857b187788f","modified":1467214165199,"hash":"1ebee478e43fd25cda0ab5d076ff9857b187788f"},{"_id":"themes/next/source/fonts/lato/lato-ligita-webfont-g.woff","shasum":"c1075d00549cc21ec23efeb5d12fa8df91992887","modified":1467214165203,"hash":"c1075d00549cc21ec23efeb5d12fa8df91992887"},{"_id":"themes/next/source/fonts/lato/lato-reg-webfont-g.woff","shasum":"4deb7b9aa2d82b8675379c27a446523c0b5e01e8","modified":1467214165203,"hash":"4deb7b9aa2d82b8675379c27a446523c0b5e01e8"},{"_id":"themes/next/source/fonts/lato/lato-reg-webfont-g.eot","shasum":"4b1e1edc29011cc3714f453a40ef0dabe0e949bf","modified":1467214165203,"hash":"4b1e1edc29011cc3714f453a40ef0dabe0e949bf"},{"_id":"themes/next/source/fonts/lato/lato-regita-webfont-g.eot","shasum":"4d2a5b3b5028f24f4c9669390ca0041067a6352e","modified":1467214165203,"hash":"4d2a5b3b5028f24f4c9669390ca0041067a6352e"},{"_id":"themes/next/source/fonts/lato/lato-regita-webfont-g.woff","shasum":"27eed88e72783a98c9c1e5b28715fac3c39ba0a3","modified":1467214165203,"hash":"27eed88e72783a98c9c1e5b28715fac3c39ba0a3"},{"_id":"themes/next/source/images/cc-by-nc-nd.svg","shasum":"c6524ece3f8039a5f612feaf865d21ec8a794564","modified":1467214165203,"hash":"c6524ece3f8039a5f612feaf865d21ec8a794564"},{"_id":"themes/next/source/images/cc-by-nc-sa.svg","shasum":"3031be41e8753c70508aa88e84ed8f4f653f157e","modified":1467214165203,"hash":"3031be41e8753c70508aa88e84ed8f4f653f157e"},{"_id":"themes/next/source/images/cc-by.svg","shasum":"28a0a4fe355a974a5e42f68031652b76798d4f7e","modified":1467214165203,"hash":"28a0a4fe355a974a5e42f68031652b76798d4f7e"},{"_id":"themes/next/source/images/cc-by-nd.svg","shasum":"c563508ce9ced1e66948024ba1153400ac0e0621","modified":1467214165203,"hash":"c563508ce9ced1e66948024ba1153400ac0e0621"},{"_id":"themes/next/source/images/cc-by-sa.svg","shasum":"aa4742d733c8af8d38d4c183b8adbdcab045872e","modified":1467214165203,"hash":"aa4742d733c8af8d38d4c183b8adbdcab045872e"},{"_id":"themes/next/source/images/cc-by-nc.svg","shasum":"8d39b39d88f8501c0d27f8df9aae47136ebc59b7","modified":1467214165203,"hash":"8d39b39d88f8501c0d27f8df9aae47136ebc59b7"},{"_id":"themes/next/source/images/cc-zero.svg","shasum":"87669bf8ac268a91d027a0a4802c92a1473e9030","modified":1467214165203,"hash":"87669bf8ac268a91d027a0a4802c92a1473e9030"},{"_id":"themes/next/source/images/default_avatar.jpg","shasum":"b687bb4bfbe35a32b592c24d652ba80cfdc770fc","modified":1467214165207,"hash":"b687bb4bfbe35a32b592c24d652ba80cfdc770fc"},{"_id":"themes/next/source/images/loading.gif","shasum":"5fbd472222feb8a22cf5b8aa5dc5b8e13af88e2b","modified":1467214165207,"hash":"5fbd472222feb8a22cf5b8aa5dc5b8e13af88e2b"},{"_id":"themes/next/source/images/placeholder.gif","shasum":"5fbd472222feb8a22cf5b8aa5dc5b8e13af88e2b","modified":1467214165207,"hash":"5fbd472222feb8a22cf5b8aa5dc5b8e13af88e2b"},{"_id":"themes/next/source/images/searchicon.png","shasum":"67727a6a969be0b2659b908518fa6706eed307b8","modified":1467214165207,"hash":"67727a6a969be0b2659b908518fa6706eed307b8"},{"_id":"themes/next/source/js/fancy-box.js","shasum":"c9782bfa8c1e51a8f8541530d836e75f48a433c2","modified":1467214165207,"hash":"c9782bfa8c1e51a8f8541530d836e75f48a433c2"},{"_id":"themes/next/source/js/bootstrap.scrollspy.js","shasum":"ae7bdce88b515aade4eea8bf7407eec458bcd625","modified":1467214165207,"hash":"ae7bdce88b515aade4eea8bf7407eec458bcd625"},{"_id":"themes/next/source/js/helpers.js","shasum":"c2117b0ec653df4c45dd9d9575b190cbe1035335","modified":1467214165207,"hash":"c2117b0ec653df4c45dd9d9575b190cbe1035335"},{"_id":"themes/next/source/js/lazyload.js","shasum":"b92e9acdc7afc15468314c03f4a643b0c93944cf","modified":1467214165207,"hash":"b92e9acdc7afc15468314c03f4a643b0c93944cf"},{"_id":"themes/next/source/js/hook-duoshuo.js","shasum":"ea30e91c6b7fdaa6dce4a848f25cdf90436b072a","modified":1467214165207,"hash":"ea30e91c6b7fdaa6dce4a848f25cdf90436b072a"},{"_id":"themes/next/source/js/motion_fallback.js","shasum":"a767d522c65a8b2fbad49135c9332135c6785c3e","modified":1467214165207,"hash":"a767d522c65a8b2fbad49135c9332135c6785c3e"},{"_id":"themes/next/source/js/motion_global.js","shasum":"367e329b2cc19c6b7634ea2917a218c84a22ec17","modified":1467214165207,"hash":"367e329b2cc19c6b7634ea2917a218c84a22ec17"},{"_id":"themes/next/source/js/nav-toggle.js","shasum":"78b59f1beb12adea0d7f9bcf4377cb699963f220","modified":1467214165207,"hash":"78b59f1beb12adea0d7f9bcf4377cb699963f220"},{"_id":"themes/next/source/js/ua-parser.min.js","shasum":"acf0ee6a47ffb7231472b56e43996e3f947c258a","modified":1467214165207,"hash":"acf0ee6a47ffb7231472b56e43996e3f947c258a"},{"_id":"themes/next/source/resume.html","shasum":"2c3025aec50e07ef9ced1fdd1efbc8f92dec5088","modified":1467214165207,"hash":"2c3025aec50e07ef9ced1fdd1efbc8f92dec5088"},{"_id":"themes/next/source/resume_back.html","shasum":"b16e98e94943ccc521a9f40cb42c8c8bf5702aa7","modified":1467214165207,"hash":"b16e98e94943ccc521a9f40cb42c8c8bf5702aa7"},{"_id":"themes/next/source/site.xml","shasum":"9564af1f6537a43417188d5d5c74c0ac406409ba","modified":1467214165207,"hash":"9564af1f6537a43417188d5d5c74c0ac406409ba"},{"_id":"themes/next/source/vendors/fancybox/source/blank.gif","shasum":"2daeaa8b5f19f0bc209d976c02bd6acb51b00b0a","modified":1467214165207,"hash":"2daeaa8b5f19f0bc209d976c02bd6acb51b00b0a"},{"_id":"themes/next/source/vendors/fancybox/source/fancybox_loading@2x.gif","shasum":"273b123496a42ba45c3416adb027cd99745058b0","modified":1467214165207,"hash":"273b123496a42ba45c3416adb027cd99745058b0"},{"_id":"themes/next/source/vendors/fancybox/source/fancybox_loading.gif","shasum":"1a755fb2599f3a313cc6cfdb14df043f8c14a99c","modified":1467214165207,"hash":"1a755fb2599f3a313cc6cfdb14df043f8c14a99c"},{"_id":"themes/next/source/vendors/fancybox/source/fancybox_overlay.png","shasum":"b3a4ee645ba494f52840ef8412015ba0f465dbe0","modified":1467214165207,"hash":"b3a4ee645ba494f52840ef8412015ba0f465dbe0"},{"_id":"themes/next/source/vendors/fancybox/source/helpers/fancybox_buttons.png","shasum":"e385b139516c6813dcd64b8fc431c364ceafe5f3","modified":1467214165207,"hash":"e385b139516c6813dcd64b8fc431c364ceafe5f3"},{"_id":"themes/next/source/vendors/fancybox/source/fancybox_sprite@2x.png","shasum":"30c58913f327e28f466a00f4c1ac8001b560aed8","modified":1467214165207,"hash":"30c58913f327e28f466a00f4c1ac8001b560aed8"},{"_id":"themes/next/source/vendors/fancybox/source/fancybox_sprite.png","shasum":"17df19f97628e77be09c352bf27425faea248251","modified":1467214165207,"hash":"17df19f97628e77be09c352bf27425faea248251"},{"_id":"themes/next/source/vendors/fancybox/source/helpers/jquery.fancybox-buttons.css","shasum":"1a9d8e5c22b371fcc69d4dbbb823d9c39f04c0c8","modified":1467214165207,"hash":"1a9d8e5c22b371fcc69d4dbbb823d9c39f04c0c8"},{"_id":"themes/next/source/vendors/fancybox/source/helpers/jquery.fancybox-thumbs.css","shasum":"4ac329c16a5277592fc12a37cca3d72ca4ec292f","modified":1467214165207,"hash":"4ac329c16a5277592fc12a37cca3d72ca4ec292f"},{"_id":"themes/next/source/vendors/fancybox/source/helpers/jquery.fancybox-buttons.js","shasum":"91e41741c2e93f732c82aaacec4cfc6e3f3ec876","modified":1467214165207,"hash":"91e41741c2e93f732c82aaacec4cfc6e3f3ec876"},{"_id":"themes/next/source/vendors/fancybox/source/helpers/jquery.fancybox-media.js","shasum":"3bdf69ed2469e4fb57f5a95f17300eef891ff90d","modified":1467214165207,"hash":"3bdf69ed2469e4fb57f5a95f17300eef891ff90d"},{"_id":"themes/next/source/vendors/fancybox/source/helpers/jquery.fancybox-thumbs.js","shasum":"53e194f4a72e649c04fb586dd57762b8c022800b","modified":1467214165207,"hash":"53e194f4a72e649c04fb586dd57762b8c022800b"},{"_id":"themes/next/source/vendors/fancybox/source/jquery.fancybox.css","shasum":"5f163444617b6cf267342f06ac166a237bb62df9","modified":1467214165207,"hash":"5f163444617b6cf267342f06ac166a237bb62df9"},{"_id":"themes/next/source/vendors/fancybox/source/jquery.fancybox.js","shasum":"1cf3d47b5ccb7cb6e9019c64f2a88d03a64853e4","modified":1467214165207,"hash":"1cf3d47b5ccb7cb6e9019c64f2a88d03a64853e4"},{"_id":"themes/next/source/vendors/fancybox/source/jquery.fancybox.pack.js","shasum":"53360764b429c212f424399384417ccc233bb3be","modified":1467214165207,"hash":"53360764b429c212f424399384417ccc233bb3be"},{"_id":"themes/next/source/vendors/fastclick/README.md","shasum":"1decd8e1adad2cd6db0ab50cf56de6035156f4ea","modified":1467214165207,"hash":"1decd8e1adad2cd6db0ab50cf56de6035156f4ea"},{"_id":"themes/next/source/vendors/fastclick/LICENSE","shasum":"dcd5b6b43095d9e90353a28b09cb269de8d4838e","modified":1467214165207,"hash":"dcd5b6b43095d9e90353a28b09cb269de8d4838e"},{"_id":"themes/next/source/vendors/fastclick/bower.json","shasum":"13379463c7463b4b96d13556b46faa4cc38d81e6","modified":1467214165207,"hash":"13379463c7463b4b96d13556b46faa4cc38d81e6"},{"_id":"themes/next/source/vendors/fastclick/lib/fastclick.js","shasum":"06cef196733a710e77ad7e386ced6963f092dc55","modified":1467214165207,"hash":"06cef196733a710e77ad7e386ced6963f092dc55"},{"_id":"themes/next/source/vendors/fastclick/lib/fastclick.min.js","shasum":"2cae0f5a6c5d6f3cb993015e6863f9483fc4de18","modified":1467214165207,"hash":"2cae0f5a6c5d6f3cb993015e6863f9483fc4de18"},{"_id":"themes/next/source/vendors/resume.css","shasum":"dea2e30891264cd1ac4e362cf6ca68f4f0d0abab","modified":1467214165207,"hash":"dea2e30891264cd1ac4e362cf6ca68f4f0d0abab"},{"_id":"themes/next/source/vendors/velocity/bower.json","shasum":"2ec99573e84c7117368beccb9e94b6bf35d2db03","modified":1467214165207,"hash":"2ec99573e84c7117368beccb9e94b6bf35d2db03"},{"_id":"themes/next/source/vendors/velocity/velocity.min.js","shasum":"2f1afadc12e4cf59ef3b405308d21baa97e739c6","modified":1467214165207,"hash":"2f1afadc12e4cf59ef3b405308d21baa97e739c6"},{"_id":"themes/next/source/vendors/velocity/velocity.ui.min.js","shasum":"ed5e534cd680a25d8d14429af824f38a2c7d9908","modified":1467214165207,"hash":"ed5e534cd680a25d8d14429af824f38a2c7d9908"},{"_id":"themes/next/source/vendors/velocity/velocity.ui.js","shasum":"6a1d101eab3de87527bb54fcc8c7b36b79d8f0df","modified":1467214165207,"hash":"6a1d101eab3de87527bb54fcc8c7b36b79d8f0df"},{"_id":"themes/next/source/fonts/lato/lato-bol-webfont.svg","shasum":"bb6b59175da249ad5dc7e1d09babd763964b3f3b","modified":1467214165195,"hash":"bb6b59175da249ad5dc7e1d09babd763964b3f3b"},{"_id":"themes/next/source/fonts/lato/lato-bolita-webfont-g.ttf","shasum":"2007f546660221940e9dc6b9a3cae9b72fbe17af","modified":1467214165199,"hash":"2007f546660221940e9dc6b9a3cae9b72fbe17af"},{"_id":"themes/next/source/fonts/lato/lato-bolita-webfont.svg","shasum":"4867fa8a4d1d19791c47e49c28e802c48763fd23","modified":1467214165199,"hash":"4867fa8a4d1d19791c47e49c28e802c48763fd23"},{"_id":"themes/next/source/fonts/lato/lato-bol-webfont-g.ttf","shasum":"c330d59f3e64e07a2571c2ba4f4109b20a168f69","modified":1467214165195,"hash":"c330d59f3e64e07a2571c2ba4f4109b20a168f69"},{"_id":"themes/next/source/fonts/lato/lato-lig-webfont-g.ttf","shasum":"6eb95108fef81bd8cfbf7e20d4ca0634e5989019","modified":1467214165199,"hash":"6eb95108fef81bd8cfbf7e20d4ca0634e5989019"},{"_id":"themes/next/source/fonts/lato/lato-lig-webfont.svg","shasum":"2767d2e55cbe7216512594f49d828fc17f19089d","modified":1467214165199,"hash":"2767d2e55cbe7216512594f49d828fc17f19089d"},{"_id":"themes/next/source/fonts/lato/lato-ligita-webfont.svg","shasum":"b72122e87cf25fbcfc4cf988930580c76822ba5f","modified":1467214165203,"hash":"b72122e87cf25fbcfc4cf988930580c76822ba5f"},{"_id":"themes/next/source/fonts/lato/lato-ligita-webfont-g.ttf","shasum":"584f340776412f77f04de06ee04348ef823d5097","modified":1467214165203,"hash":"584f340776412f77f04de06ee04348ef823d5097"},{"_id":"themes/next/source/fonts/lato/lato-regita-webfont.svg","shasum":"0948ab7d5116011ea4fb2fe34be1da6294a332ee","modified":1467214165203,"hash":"0948ab7d5116011ea4fb2fe34be1da6294a332ee"},{"_id":"themes/next/source/fonts/lato/lato-regita-webfont-g.ttf","shasum":"e4cea8035a258a869a6139fbf74e6d0c247bd49b","modified":1467214165203,"hash":"e4cea8035a258a869a6139fbf74e6d0c247bd49b"},{"_id":"themes/next/source/fonts/lato/lato-reg-webfont.svg","shasum":"bc48872ceb40822c44933566b789e63e16bdff0a","modified":1467214165203,"hash":"bc48872ceb40822c44933566b789e63e16bdff0a"},{"_id":"themes/next/source/fonts/lato/lato-reg-webfont-g.ttf","shasum":"127f241871a9fe42cd8d073a0835410f3824d57c","modified":1467214165203,"hash":"127f241871a9fe42cd8d073a0835410f3824d57c"},{"_id":"themes/next/source/vendors/jquery/index.js","shasum":"41b4bfbaa96be6d1440db6e78004ade1c134e276","modified":1467214165207,"hash":"41b4bfbaa96be6d1440db6e78004ade1c134e276"},{"_id":"themes/next/test/intern.js","shasum":"11fa8a4f5c3b4119a179ae0a2584c8187f907a73","modified":1467214165211,"hash":"11fa8a4f5c3b4119a179ae0a2584c8187f907a73"},{"_id":"themes/next/test/helpers.js","shasum":"a1f5de25154c3724ffc24a91ddc576cdbd60864f","modified":1467214165207,"hash":"a1f5de25154c3724ffc24a91ddc576cdbd60864f"},{"_id":"themes/next/source/vendors/velocity/velocity.js","shasum":"e63dc7cea055ca60a95d286f32349d88b10c5a4d","modified":1467214165207,"hash":"e63dc7cea055ca60a95d286f32349d88b10c5a4d"},{"_id":"public/vendors/velocity/velocity.ui.min.js","modified":1454320495507,"shasum":"ed5e534cd680a25d8d14429af824f38a2c7d9908"},{"_id":"public/vendors/velocity/velocity.ui.js","modified":1454320495515,"shasum":"6a1d101eab3de87527bb54fcc8c7b36b79d8f0df"},{"_id":"public/vendors/velocity/velocity.min.js","modified":1454320495519,"shasum":"2f1afadc12e4cf59ef3b405308d21baa97e739c6"},{"_id":"public/vendors/velocity/velocity.js","modified":1454320495524,"shasum":"9f08181baea0cc0e906703b7e5df9111b9ef3373"},{"_id":"public/vendors/velocity/bower.json","modified":1454320495557,"shasum":"0ef14e7ccdfba5db6eb3f8fc6aa3b47282c36409"},{"_id":"public/vendors/resume.css","modified":1454320495560,"shasum":"dea2e30891264cd1ac4e362cf6ca68f4f0d0abab"},{"_id":"public/vendors/jquery/index.js","modified":1454320495563,"shasum":"41b4bfbaa96be6d1440db6e78004ade1c134e276"},{"_id":"public/vendors/fastclick/lib/fastclick.min.js","modified":1454320495565,"shasum":"2cae0f5a6c5d6f3cb993015e6863f9483fc4de18"},{"_id":"public/vendors/fastclick/lib/fastclick.js","modified":1454320495567,"shasum":"06cef196733a710e77ad7e386ced6963f092dc55"},{"_id":"public/vendors/fastclick/bower.json","modified":1454320495569,"shasum":"4dcecf83afddba148464d5339c93f6d0aa9f42e9"},{"_id":"public/vendors/fastclick/README.html","modified":1454320495609,"shasum":"4a6074903daa9004301ef30a6fb96556ba3eab60"},{"_id":"public/vendors/fastclick/LICENSE","modified":1454320495621,"shasum":"dcd5b6b43095d9e90353a28b09cb269de8d4838e"},{"_id":"public/vendors/fancybox/source/jquery.fancybox.pack.js","modified":1454320495649,"shasum":"53360764b429c212f424399384417ccc233bb3be"},{"_id":"public/vendors/fancybox/source/jquery.fancybox.js","modified":1454320495652,"shasum":"1cf3d47b5ccb7cb6e9019c64f2a88d03a64853e4"},{"_id":"public/vendors/fancybox/source/jquery.fancybox.css","modified":1454320495656,"shasum":"5f163444617b6cf267342f06ac166a237bb62df9"},{"_id":"public/vendors/fancybox/source/helpers/jquery.fancybox-thumbs.js","modified":1454320495659,"shasum":"53e194f4a72e649c04fb586dd57762b8c022800b"},{"_id":"public/vendors/fancybox/source/helpers/jquery.fancybox-thumbs.css","modified":1454320495662,"shasum":"4ac329c16a5277592fc12a37cca3d72ca4ec292f"},{"_id":"public/vendors/fancybox/source/helpers/jquery.fancybox-media.js","modified":1454320495664,"shasum":"3bdf69ed2469e4fb57f5a95f17300eef891ff90d"},{"_id":"public/vendors/fancybox/source/helpers/jquery.fancybox-buttons.js","modified":1454320495665,"shasum":"91e41741c2e93f732c82aaacec4cfc6e3f3ec876"},{"_id":"public/vendors/fancybox/source/helpers/jquery.fancybox-buttons.css","modified":1454320495666,"shasum":"1a9d8e5c22b371fcc69d4dbbb823d9c39f04c0c8"},{"_id":"public/vendors/fancybox/source/helpers/fancybox_buttons.png","modified":1454320495669,"shasum":"e385b139516c6813dcd64b8fc431c364ceafe5f3"},{"_id":"public/vendors/fancybox/source/fancybox_sprite@2x.png","modified":1454320495696,"shasum":"30c58913f327e28f466a00f4c1ac8001b560aed8"},{"_id":"public/vendors/fancybox/source/fancybox_sprite.png","modified":1454320495698,"shasum":"17df19f97628e77be09c352bf27425faea248251"},{"_id":"public/vendors/fancybox/source/fancybox_overlay.png","modified":1454320495701,"shasum":"b3a4ee645ba494f52840ef8412015ba0f465dbe0"},{"_id":"public/vendors/fancybox/source/fancybox_loading@2x.gif","modified":1454320495706,"shasum":"273b123496a42ba45c3416adb027cd99745058b0"},{"_id":"public/vendors/fancybox/source/fancybox_loading.gif","modified":1454320495708,"shasum":"1a755fb2599f3a313cc6cfdb14df043f8c14a99c"},{"_id":"public/vendors/fancybox/source/blank.gif","modified":1454320495710,"shasum":"2daeaa8b5f19f0bc209d976c02bd6acb51b00b0a"},{"_id":"public/site.xml","modified":1454320495712,"shasum":"9564af1f6537a43417188d5d5c74c0ac406409ba"},{"_id":"public/resume_back.html","modified":1454320495714,"shasum":"b16e98e94943ccc521a9f40cb42c8c8bf5702aa7"},{"_id":"public/resume.html","modified":1454320495717,"shasum":"2c3025aec50e07ef9ced1fdd1efbc8f92dec5088"},{"_id":"public/js/ua-parser.min.js","modified":1454320495744,"shasum":"acf0ee6a47ffb7231472b56e43996e3f947c258a"},{"_id":"public/js/nav-toggle.js","modified":1454320495746,"shasum":"78b59f1beb12adea0d7f9bcf4377cb699963f220"},{"_id":"public/js/motion_global.js","modified":1454320495750,"shasum":"367e329b2cc19c6b7634ea2917a218c84a22ec17"},{"_id":"public/js/motion_fallback.js","modified":1454320495753,"shasum":"a767d522c65a8b2fbad49135c9332135c6785c3e"},{"_id":"public/js/lazyload.js","modified":1454320495754,"shasum":"b92e9acdc7afc15468314c03f4a643b0c93944cf"},{"_id":"public/js/hook-duoshuo.js","modified":1454320495756,"shasum":"5f722b3967d50cc1e36efaa5e2a4a0ad464496b0"},{"_id":"public/js/helpers.js","modified":1454320495759,"shasum":"c2117b0ec653df4c45dd9d9575b190cbe1035335"},{"_id":"public/js/fancy-box.js","modified":1454320495761,"shasum":"c9782bfa8c1e51a8f8541530d836e75f48a433c2"},{"_id":"public/js/bootstrap.scrollspy.js","modified":1454320495764,"shasum":"ae7bdce88b515aade4eea8bf7407eec458bcd625"},{"_id":"public/images/searchicon.png","modified":1454320495766,"shasum":"67727a6a969be0b2659b908518fa6706eed307b8"},{"_id":"public/images/placeholder.gif","modified":1454320495793,"shasum":"5fbd472222feb8a22cf5b8aa5dc5b8e13af88e2b"},{"_id":"public/images/loading.gif","modified":1454320495796,"shasum":"5fbd472222feb8a22cf5b8aa5dc5b8e13af88e2b"},{"_id":"public/images/default_avatar.jpg","modified":1454320495800,"shasum":"b687bb4bfbe35a32b592c24d652ba80cfdc770fc"},{"_id":"public/images/cc-zero.svg","modified":1454320495802,"shasum":"87669bf8ac268a91d027a0a4802c92a1473e9030"},{"_id":"public/images/cc-by.svg","modified":1454320495804,"shasum":"28a0a4fe355a974a5e42f68031652b76798d4f7e"},{"_id":"public/images/cc-by-sa.svg","modified":1454320495888,"shasum":"aa4742d733c8af8d38d4c183b8adbdcab045872e"},{"_id":"public/images/cc-by-nd.svg","modified":1454320495892,"shasum":"c563508ce9ced1e66948024ba1153400ac0e0621"},{"_id":"public/images/cc-by-nc.svg","modified":1454320495897,"shasum":"8d39b39d88f8501c0d27f8df9aae47136ebc59b7"},{"_id":"public/images/cc-by-nc-sa.svg","modified":1454320495901,"shasum":"3031be41e8753c70508aa88e84ed8f4f653f157e"},{"_id":"public/images/cc-by-nc-nd.svg","modified":1454320495903,"shasum":"c6524ece3f8039a5f612feaf865d21ec8a794564"},{"_id":"public/fonts/lato/lato-regita-webfont.svg","modified":1454320495907,"shasum":"0948ab7d5116011ea4fb2fe34be1da6294a332ee"},{"_id":"public/fonts/lato/lato-regita-webfont-g.woff","modified":1454320495915,"shasum":"27eed88e72783a98c9c1e5b28715fac3c39ba0a3"},{"_id":"public/fonts/lato/lato-regita-webfont-g.ttf","modified":1454320495945,"shasum":"e4cea8035a258a869a6139fbf74e6d0c247bd49b"},{"_id":"public/fonts/lato/lato-regita-webfont-g.eot","modified":1454320495950,"shasum":"4d2a5b3b5028f24f4c9669390ca0041067a6352e"},{"_id":"public/fonts/lato/lato-reg-webfont.svg","modified":1454320495954,"shasum":"bc48872ceb40822c44933566b789e63e16bdff0a"},{"_id":"public/fonts/lato/lato-reg-webfont-g.woff","modified":1454320495957,"shasum":"4deb7b9aa2d82b8675379c27a446523c0b5e01e8"},{"_id":"public/fonts/lato/lato-reg-webfont-g.ttf","modified":1454320495984,"shasum":"127f241871a9fe42cd8d073a0835410f3824d57c"},{"_id":"public/fonts/lato/lato-reg-webfont-g.eot","modified":1454320495987,"shasum":"4b1e1edc29011cc3714f453a40ef0dabe0e949bf"},{"_id":"public/fonts/lato/lato-ligita-webfont.svg","modified":1454320495989,"shasum":"b72122e87cf25fbcfc4cf988930580c76822ba5f"},{"_id":"public/fonts/lato/lato-ligita-webfont-g.woff","modified":1454320495993,"shasum":"c1075d00549cc21ec23efeb5d12fa8df91992887"},{"_id":"public/fonts/lato/lato-ligita-webfont-g.ttf","modified":1454320495996,"shasum":"584f340776412f77f04de06ee04348ef823d5097"},{"_id":"public/fonts/lato/lato-ligita-webfont-g.eot","modified":1454320495999,"shasum":"1ebee478e43fd25cda0ab5d076ff9857b187788f"},{"_id":"public/fonts/lato/lato-lig-webfont.svg","modified":1454320496001,"shasum":"2767d2e55cbe7216512594f49d828fc17f19089d"},{"_id":"public/fonts/lato/lato-lig-webfont-g.woff","modified":1454320496004,"shasum":"5f1c1daa92b017fbf6daff97762fcf74d44d2050"},{"_id":"public/fonts/lato/lato-lig-webfont-g.ttf","modified":1454320496006,"shasum":"6eb95108fef81bd8cfbf7e20d4ca0634e5989019"},{"_id":"public/fonts/lato/lato-lig-webfont-g.eot","modified":1454320496033,"shasum":"08b674c48040d26dd05870e708c3366e91c7fc35"},{"_id":"public/fonts/lato/lato-bolita-webfont.svg","modified":1454320496038,"shasum":"4867fa8a4d1d19791c47e49c28e802c48763fd23"},{"_id":"public/fonts/lato/lato-bolita-webfont-g.woff","modified":1454320496041,"shasum":"cd08800b3330fcd0a0d7849e684c62987985d686"},{"_id":"public/fonts/lato/lato-bolita-webfont-g.ttf","modified":1454320496044,"shasum":"2007f546660221940e9dc6b9a3cae9b72fbe17af"},{"_id":"public/fonts/lato/lato-bolita-webfont-g.eot","modified":1454320496046,"shasum":"6cd494d71a9fb9f435f7722bbda9d5e6a4893968"},{"_id":"public/fonts/lato/lato-bol-webfont.svg","modified":1454320496049,"shasum":"bb6b59175da249ad5dc7e1d09babd763964b3f3b"},{"_id":"public/fonts/lato/lato-bol-webfont-g.woff","modified":1454320496051,"shasum":"0098108f9e29ae4f265b755fb5979b1f72be6bbc"},{"_id":"public/fonts/lato/lato-bol-webfont-g.ttf","modified":1454320496053,"shasum":"c330d59f3e64e07a2571c2ba4f4109b20a168f69"},{"_id":"public/fonts/lato/lato-bol-webfont-g.eot","modified":1454320496060,"shasum":"d81b9c592a23e3b1f76c3e77853a1d840f16bb71"},{"_id":"public/fonts/icon-linecons/selection.json","modified":1454320496071,"shasum":"68da6ea1b3ab9355d42694bf5745071cdefa4a65"},{"_id":"public/fonts/icon-linecons/icomoon.woff","modified":1454320496075,"shasum":"0b07ee6ceda3b1bceb40c1e7379b3aa48dcc15a8"},{"_id":"public/fonts/icon-linecons/icomoon.ttf","modified":1454320496077,"shasum":"078068206684e4f185b0187ad3cee16f54a287d7"},{"_id":"public/fonts/icon-linecons/icomoon.svg","modified":1454320496080,"shasum":"808eaf7d61f7e67c76976265c885e79c36920f0b"},{"_id":"public/fonts/icon-linecons/icomoon.eot","modified":1454320496082,"shasum":"e2d7f040428a632f3c50bfa94083b759936effc2"},{"_id":"public/fonts/icon-icomoon/icomoon.woff","modified":1454320496085,"shasum":"05f1ec0bd307da5e731a86eb4961589a6042aebb"},{"_id":"public/fonts/icon-icomoon/icomoon.ttf","modified":1454320496130,"shasum":"f399713d1c9400d4d3373e38991a7e362a754a94"},{"_id":"public/fonts/icon-icomoon/icomoon.svg","modified":1454320496134,"shasum":"e316347805eb93425faa678611c5e42a7152da8f"},{"_id":"public/fonts/icon-icomoon/icomoon.eot","modified":1454320496138,"shasum":"301fcf00c24750dddf1c529f944ca62c7f1a217d"},{"_id":"public/fonts/icon-fifty-shades/selection.json","modified":1454320496141,"shasum":"e5a5042e8e516b1d30fa3b1206d2c74921cec72b"},{"_id":"public/fonts/icon-fifty-shades/icomoon.woff","modified":1454320496143,"shasum":"4de6a74f523dee33d95dde61caae5809f9a5d448"},{"_id":"public/fonts/icon-fifty-shades/icomoon.ttf","modified":1454320496148,"shasum":"72fe82e1f3db52414eed706952d385af241cb196"},{"_id":"public/fonts/icon-fifty-shades/icomoon.svg","modified":1454320496181,"shasum":"1a4afd739e1f8eb8d430dbdd29e36a9999802e8d"},{"_id":"public/fonts/icon-fifty-shades/icomoon.eot","modified":1454320496184,"shasum":"da86ba5df72d1288de9e9633e5f528062dd427d5"},{"_id":"public/fonts/icon-feather/selection.json","modified":1454320496187,"shasum":"d95a90b0d541e48b049902090c0d008ad92b4115"},{"_id":"public/fonts/icon-feather/icomoon.woff","modified":1454320496189,"shasum":"2ea1c59c17422798e64ee6f4e9ce1f7aff1a06a5"},{"_id":"public/fonts/icon-feather/icomoon.ttf","modified":1454320496192,"shasum":"b2bbae4b613403cf61ad25037913378da1c07b8f"},{"_id":"public/fonts/icon-feather/icomoon.svg","modified":1454320496195,"shasum":"d5eb756eefda9b454dcb23c2b1cefd4051d18d41"},{"_id":"public/fonts/icon-feather/icomoon.eot","modified":1454320496198,"shasum":"11554b9e9d5b9f535ba96cbb27d45d8c8f1689fd"},{"_id":"public/fonts/icon-default/selection.json","modified":1454320496226,"shasum":"ff1b9b78eced4d0368d14cc192ac67a0dd498593"},{"_id":"public/fonts/icon-default/icomoon.woff","modified":1454320496228,"shasum":"dbe0368f2a65d87b13234cfea29d9783892fc7a8"},{"_id":"public/fonts/icon-default/icomoon.ttf","modified":1454320496232,"shasum":"c093408e6030221cafc1f79d897f1fb5283c1178"},{"_id":"public/fonts/icon-default/icomoon.svg","modified":1454320496235,"shasum":"f92ad8cddc250f0bb5ca466fca95d321987e127e"},{"_id":"public/fonts/icon-default/icomoon.eot","modified":1454320496237,"shasum":"90763e97be18be78e65749075225cceeddc6fa8a"},{"_id":"public/favicon.ico","modified":1454320496240,"shasum":"5b83c3906dae38f9b0cababfdf5f3f568f4f6af6"},{"_id":"public/css/main.css","modified":1454320497810,"shasum":"06c2b0d6380d9550036172e06ca1c24aa6cfe397"},{"_id":"public/baidu_verify_swRnZfPIeR.html","modified":1454320498123,"shasum":"c0abc1613ffb97e011aa114d1ba7dd9519533ee7"},{"_id":"public/README","modified":1454320498137,"shasum":"3f15f4a56fc4b56c0a5a536c15034439b84e3382"},{"_id":"public/LICENSE","modified":1454320498150,"shasum":"702c4322e3cb936294690608b59f8b60b1fc8d30"},{"_id":"public/404.html","modified":1454320498151,"shasum":"4a0d9ade0dee916eede2f4f7c54a245ecfaea3f1"},{"_id":"public/tags/index.html","hash":"26df635e10e9e727e91e0bf2a4513a17d371ab32","modified":1467217541111},{"_id":"public/guestbook/index.html","hash":"9b8004eb5047e650227823b9372e77961e656b37","modified":1467217541112},{"_id":"public/categories/index.html","hash":"3706d4f078b41e750d03a88aef1d7322cd57f138","modified":1467217541112},{"_id":"public/about/index.html","hash":"92777a31bad071967c99479618f43f93ab7d95eb","modified":1467217541112},{"_id":"public/2016/02/01/linux之find文件夹/index.html","hash":"eda36cb133a56b4d4ec0929a6223a2f690758df0","modified":1467217541112},{"_id":"public/2016/01/15/celeryUser/index.html","hash":"c3a9f541857655c10bd853b6a6b85b24bfa1dccf","modified":1467217541112},{"_id":"public/2016/01/08/mysql-command/index.html","hash":"df8df4b18d8697f81adb23cde74ecd889070e96e","modified":1467217541112},{"_id":"public/2016/01/07/uwsiguse/index.html","hash":"74d4c6536d2fa257d9f458be2105fe17f0c84c58","modified":1467217541112},{"_id":"public/2015/12/09/git设置不需要设置密码/index.html","hash":"4ad3c510410bcb599a45bb1b6eb89b9934c000c1","modified":1467217541112},{"_id":"public/2015/11/26/flask之Context/index.html","hash":"057c478695d8011d02f633e6b0f790f764604447","modified":1467217541112},{"_id":"public/2015/11/26/python之nosetests/index.html","hash":"8d64e407823e9828e706169d5e174ab10dbf2d41","modified":1467217541112},{"_id":"public/2015/11/25/flask之错误收集/index.html","hash":"993eb7f8689d164d9ad2f609ccc265e6ae2774c7","modified":1467217541112},{"_id":"public/2015/11/20/flask之学习安装/index.html","hash":"0cf0ec5dd87a15ce5467568f4ae46636c7a7c171","modified":1467217541112},{"_id":"public/2015/11/18/android之oom/index.html","hash":"f055c60bc588ccef0014d0e26114d4ed3851c5a7","modified":1467217541113},{"_id":"public/2015/11/16/android之scroll/index.html","hash":"92acf8f0b5ec6faddfbd98ccbf69cdb291e57187","modified":1467217541113},{"_id":"public/2015/11/16/android之Gson/index.html","hash":"15552dd9c4209c6200de6d202575e23e976fae16","modified":1467217541113},{"_id":"public/2015/11/16/android之错误/index.html","hash":"6181703ab3b7a69fb67550b78fcca08d23ba3bb7","modified":1467217541113},{"_id":"public/2015/11/11/mysql之作业/index.html","hash":"79953ac63bf3686c26c0d9c7143ccbdbc6c72bb5","modified":1467217541113},{"_id":"public/2015/11/10/mysql之修改字段默认值/index.html","hash":"c6f3924a0d5d89c5372b7dccd5562f30b2b6272b","modified":1467217541113},{"_id":"public/2015/11/10/django之外键的删除/index.html","hash":"fe5d54b36174402a0d1b3771022d4c2409f13afa","modified":1467217541113},{"_id":"public/2015/11/09/mysql之update/index.html","hash":"cb003265dfd5ef89fd2c240c09496b081edc8757","modified":1467217541113},{"_id":"public/2015/11/07/vim之格式化代码/index.html","hash":"7cb457346c261abb5e570b8d3f8aeedd03595c83","modified":1467217541113},{"_id":"public/2015/11/07/django之温故知新1/index.html","hash":"ae887bf543e3ae8148740b441def9103dac7b3c2","modified":1467217541113},{"_id":"public/2015/11/06/django之related-name/index.html","hash":"c75a8ef6b46d66539d428e6139194c67f2f64cbd","modified":1467217541113},{"_id":"public/2015/11/06/linux之缓存/index.html","hash":"b8a741aef240a0c4d6364ea74f0f33ae05f8830f","modified":1467217541115},{"_id":"public/2015/11/06/vim之使用/index.html","hash":"676afb9534c8419915186f6647ff286872753f5f","modified":1467217541115},{"_id":"public/2015/11/05/js之闭包/index.html","hash":"826ae73fb7fb781366e056b2265cbf302910668e","modified":1467217541115},{"_id":"public/2015/11/05/ubuntu之装机必备/index.html","hash":"9bfd12f2f8960733f3009fb657c55bc1a5c24af7","modified":1467217541115},{"_id":"public/2015/11/03/mysql之1292/index.html","hash":"2b7c546ce00a0ca7b83d83242924cfa3ea26dc56","modified":1467217541115},{"_id":"public/2015/11/02/python之input/index.html","hash":"74a78fad95a4811431601a0c6625fd6baf3ef1bf","modified":1467217541115},{"_id":"public/2015/10/30/python之ord/index.html","hash":"beb300e11bed8de43154244822f2af7a46c1736f","modified":1467217541115},{"_id":"public/2015/10/30/html5之checkbox/index.html","hash":"d4f8471705a176fe7ec8af67c58f92030baddf84","modified":1467217541115},{"_id":"public/2015/10/30/python列表解析/index.html","hash":"315694be5207604846c3444e52b54e94b4e4c19a","modified":1467217541115},{"_id":"public/2015/10/30/deleteLinux历史记录/index.html","hash":"c03f3c3d8aaa9439417992bb42cc0f3e0bed9a1e","modified":1467217541115},{"_id":"public/2015/10/29/django-favicon/index.html","hash":"45c8ba3d14ba87edfc4cfede4fc589fbaac48fa2","modified":1467217541115},{"_id":"public/2015/10/24/nodejs/index.html","hash":"80e98b79de40fe59298d0c264ab784bcc4f34aa0","modified":1467217541115},{"_id":"public/2015/10/24/mysql-use/index.html","hash":"e4acaaba646af57bf8557462aa0495148024dcf8","modified":1467217541115},{"_id":"public/2015/10/21/django-install-problem/index.html","hash":"7c93d1dbabfd898554e9621895cb9c7ef853a1f8","modified":1467217541116},{"_id":"public/2015/10/20/python-date/index.html","hash":"41ff0d6ddbeb5357e18d6eec0bdd3ce322d0f2cd","modified":1467217541116},{"_id":"public/2015/10/17/python复制/index.html","hash":"a90cecaea3b7a8bdb59a9bb40ae20ddeece5f0c5","modified":1467217541116},{"_id":"public/2015/10/15/html/index.html","hash":"8713e424ea973091fd311aab7edf8478cda42cfa","modified":1467217541116},{"_id":"public/2015/10/14/linux/index.html","hash":"6bab7083c40676a24a8a6dd04f100dc168e31709","modified":1467217541116},{"_id":"public/2015/10/13/python_question/index.html","hash":"a3b6caee6f0642c60056dc4f343e1dd66a6005f8","modified":1467217541116},{"_id":"public/2015/10/12/technology/index.html","hash":"c20f7aad17d694c070b4a7a6f644313aae19b055","modified":1467217541116},{"_id":"public/2015/10/12/Django/index.html","hash":"b3d9d7a7bf98eb751892825cd288b8751623a028","modified":1467217541116},{"_id":"public/2015/10/12/Css/index.html","hash":"4b402619b21ec2e1cb70b8a4f8378a9d3ee65423","modified":1467217541116},{"_id":"public/2015/10/12/Markdown/index.html","hash":"af571c06c001b416786092457470f29419d4fa8e","modified":1467217541116},{"_id":"public/2015/10/12/JS/index.html","hash":"fcaa0f466d903139c579ce21d5f9f51a02a2c8c7","modified":1467217541116},{"_id":"public/2015/10/09/github-user-pwd/index.html","hash":"179a474625979b667e37ec008fca362fca8b8e39","modified":1467217541116},{"_id":"public/2015/10/09/Django-Notes/index.html","hash":"3ff9123917029bbddeb86b159a9250de7b347067","modified":1467217541116},{"_id":"public/2015/10/09/Git-Use/index.html","hash":"b1a3dbaa2d5c263155c93a0b9ad717f36fe117ad","modified":1467217541116},{"_id":"public/categories/Django/index.html","hash":"ea2d3d0a5189453150c8c4db0906be30a63e5181","modified":1467217541117},{"_id":"public/categories/Git/index.html","hash":"658427018b1d7921a3334ea1cc88f941c63c7456","modified":1467217541117},{"_id":"public/categories/MySql/index.html","hash":"9c2417c0f525476733c9f44cf7b3bb807cd47e8d","modified":1467217541117},{"_id":"public/categories/Django/转载/index.html","hash":"c8a7d7ee4ef77545cd8368b61d54f660584429cf","modified":1467217541117},{"_id":"public/categories/Vim/index.html","hash":"7bd146fd6b7ce88af1d1c82d3129fa710757f99a","modified":1467217541117},{"_id":"public/categories/Django/温故知新/index.html","hash":"e08b0bed96a939c6a4519834af073e7d25142cdc","modified":1467217541117},{"_id":"public/categories/Linux/index.html","hash":"51ba219adb2832d905c17b787f037c5f0e4a34e5","modified":1467217541117},{"_id":"public/categories/Linux/Ubuntu/index.html","hash":"9684c46baf4ffc590195c8f37941b7a3992bf664","modified":1467217541117},{"_id":"public/categories/Js/index.html","hash":"3785900f236689a06817e8d3ff7e1b3d9283f02f","modified":1467217541117},{"_id":"public/categories/Js/前端/index.html","hash":"d2a84d98b09e6384df65d03dd6c7ff3059e03b14","modified":1467217541117},{"_id":"public/categories/Mysql/index.html","hash":"b5ecc064722ac45d1eaaac85a093546ceea1910e","modified":1467217541117},{"_id":"public/categories/Python/index.html","hash":"a63623942084f4cad2d5191241c0adb16197ab10","modified":1467217541117},{"_id":"public/categories/前端/index.html","hash":"03cf28cd70311b7fb44a9684e9f38938a850b479","modified":1467217541117},{"_id":"public/categories/数据库/index.html","hash":"1620d95a4dc0c1e2551a71872cef02a8d985dc6e","modified":1467217541117},{"_id":"public/categories/Django/Ubuntu/index.html","hash":"3657e2c851d030aad3ea291f952a8b794dd5ee67","modified":1467217541117},{"_id":"public/categories/技术点滴/index.html","hash":"ccf6c2baea7352cff1dc03ac00c55265b4e3a0f1","modified":1467217541117},{"_id":"public/archives/index.html","hash":"cacb064c3db731b25217acf1bdde3d7cbdab13a9","modified":1467217541116},{"_id":"public/archives/page/2/index.html","hash":"d380b6e1cb57a8a6aec97116e5d6acb7706b8852","modified":1467217541116},{"_id":"public/archives/page/3/index.html","hash":"279f7f18154c7f6b29e6924aced442fb200baa18","modified":1467217541116},{"_id":"public/archives/page/4/index.html","hash":"8727b9bec1d4d1718b84150faff7973c7a857159","modified":1467217541116},{"_id":"public/archives/page/5/index.html","hash":"639909ccc4daa37430c99aeaedd63f1e03b83511","modified":1467217541116},{"_id":"public/archives/2015/index.html","hash":"ff093ce5700cf27901a8b30f89ace653f05acd03","modified":1467217541116},{"_id":"public/archives/2015/page/2/index.html","hash":"9f0cc5cddd593412e57b7abe7aebfc90507693ed","modified":1467217541116},{"_id":"public/archives/2015/page/3/index.html","hash":"4b35192194c7d4f9326b5f4368a11a819bbded1b","modified":1467217541116},{"_id":"public/archives/2015/page/4/index.html","hash":"4ce8aae981c58858aec2e54ce8534f26fe420ba6","modified":1467217541116},{"_id":"public/archives/2015/page/5/index.html","hash":"3ef37c44c1268a59d0d6b1ddd12b5ea2fe10f994","modified":1467217541116},{"_id":"public/archives/2015/10/index.html","hash":"d8607d9cfe7d92856547d2a4cc2073f2da28fccc","modified":1467217541116},{"_id":"public/archives/2015/10/page/2/index.html","hash":"5bdbce893ddbc6d1840b8efca68edd008014ace6","modified":1467217541116},{"_id":"public/archives/2015/10/page/3/index.html","hash":"e9b5ddb89970bbd1e982b2642b80937f6b632154","modified":1467217541116},{"_id":"public/archives/2015/11/index.html","hash":"07419292f823df25702b90a209b23a329bd07652","modified":1467217541116},{"_id":"public/archives/2015/11/page/2/index.html","hash":"ca751b854cb74e4aa6e592df3bd72ea62a7482e9","modified":1467217541116},{"_id":"public/archives/2015/11/page/3/index.html","hash":"cdfbda0eedd72a17e8c607cd9384817987409826","modified":1467217541117},{"_id":"public/archives/2015/12/index.html","hash":"2def468306adb2d946f9bf9d347b2bdfdef71134","modified":1467217541117},{"_id":"public/archives/2016/index.html","hash":"c78bc2409c5649f4ebb5ae988acd1ca4da4f8307","modified":1467217541117},{"_id":"public/archives/2016/01/index.html","hash":"4d715402d3bd45a2dd09d72684d22d2bf7f37904","modified":1467217541117},{"_id":"public/archives/2016/02/index.html","hash":"c9e97dd784c56d1000844a0c6248e15e0ea760d4","modified":1467217541117},{"_id":"public/index.html","hash":"7400f80e35bcc9c559d1f83b33e47c2d5e9c75e9","modified":1467217541117},{"_id":"public/page/2/index.html","hash":"41a1e695ea8a2c1662f725f3bcef554e2acba591","modified":1467217541118},{"_id":"public/page/3/index.html","hash":"3da33758233cfa900a6df9b3d20d70905d0954c6","modified":1467217541118},{"_id":"public/page/4/index.html","hash":"3b77b2f551f349cdd54f06a57112f869b3f42de0","modified":1467217541118},{"_id":"public/page/5/index.html","hash":"adba6bca91eb3434fbec8f73d7a57ee4f3232043","modified":1467217541118},{"_id":"public/tags/Django/index.html","hash":"bb521a1ebe48af1a27b4e519b109601821eea0bb","modified":1467217541118},{"_id":"public/tags/Git/index.html","hash":"cefd1ce6b7fdc3018ee0ad68ee3b4994ee7b68be","modified":1467217541118},{"_id":"public/tags/test/index.html","hash":"b6bcf9f4a6fea1c6f9abc257cfbfdd7e0f9a48a1","modified":1467217541118},{"_id":"public/tags/python/index.html","hash":"d130ddb655888c9737e1ac52d01e12a9240b2b17","modified":1467217541118},{"_id":"public/tags/android/index.html","hash":"52b772a21eba20fcc18a0324bc6965de8fd664a1","modified":1467217541118},{"_id":"public/tags/错误收集/index.html","hash":"eab0e660c27cde7f51b233a8b2d1f43bc0f59e3d","modified":1467217541118},{"_id":"public/tags/MySql/index.html","hash":"73a31564f42501ad087c6e739fddba5484ef6c2f","modified":1467217541118},{"_id":"public/tags/Vim/index.html","hash":"ce92a6684406543823de29c976fc4c7bcb95bd5b","modified":1467217541118},{"_id":"public/tags/Linux/index.html","hash":"861fce490dc89dc913b2e51aa6bda33faf5659c8","modified":1467217541118},{"_id":"public/tags/Js/index.html","hash":"1bdee9266afb863a25cda61f5d140873ffcbd351","modified":1467217541118},{"_id":"public/tags/Mysql/index.html","hash":"4f837a75a0047ef08184c20d900fdd9e87160bf3","modified":1467217541118},{"_id":"public/tags/Python/index.html","hash":"c4ace6eba53173d8df8829c5b16cdc579c0989c0","modified":1467217541118},{"_id":"public/tags/NodeJs/index.html","hash":"2798566622304c28b67f7299ff81b095a3382f1a","modified":1467217541118},{"_id":"public/tags/Html/index.html","hash":"99a8a6380afb6528bc7b1fd335748b8c3524eb9c","modified":1467217541118},{"_id":"public/tags/技术点滴/index.html","hash":"6dec8ff0eda9ef8740e80132e15dff86db81d0af","modified":1467217541118},{"_id":"public/tags/Markdown/index.html","hash":"aefcd6ee559a34cedc32d77283c5d1e4116c4694","modified":1467217541118},{"_id":"public/tags/Error/index.html","hash":"78aede51112fce459bf9fdba0784f53fa9eadefc","modified":1467217541118},{"_id":"public/tags/Css/index.html","hash":"6bf4b647f037954bea6a308bb4a3582f3c56d30f","modified":1467217541118},{"_id":"public/tags/GitHub/index.html","modified":1454320516160,"shasum":"368e1086653a12f77dbbae888cc60d72bad1a453"},{"_id":"themes/next/.bowerrc","hash":"80e096fdc1cf912ee85dd9f7e6e77fd40cf60f10","modified":1467214165191},{"_id":"themes/next/.editorconfig","hash":"792fd2bd8174ece1a75d5fd24ab16594886f3a7f","modified":1467214165191},{"_id":"themes/next/.jshintrc","hash":"12c5e37da3432bee2219ed1c667076d54f1639c0","modified":1467214165191},{"_id":"themes/next/test/.jshintrc","hash":"096ed6df627373edd820f24d46b8baf528dee61d","modified":1467214165207},{"_id":"themes/next/source/vendors/fancybox/.bower.json","hash":"cc40a9b11e52348e554c84e4a5c058056f6b7aeb","modified":1467214165207},{"_id":"themes/next/source/vendors/fancybox/.gitattributes","hash":"2db21acfbd457452462f71cc4048a943ee61b8e0","modified":1467214165207},{"_id":"themes/next/source/vendors/fastclick/.bower.json","hash":"93ebd5b35e632f714dcf1753e1f6db77ec74449b","modified":1467214165207},{"_id":"themes/next/source/vendors/jquery/.bower.json","hash":"91745c2cc6c946c7275f952b2b0760b880cea69e","modified":1467214165207},{"_id":"themes/next/source/vendors/velocity/.bower.json","hash":"05f960846f1c7a93dab1d3f9a1121e86812e8c88","modified":1467214165207},{"_id":"source/_posts/2016/06/29/依赖注入原理.md","hash":"b3a74f5f08e7865db61c58c12ffa09c7cb56f6c3","modified":1467217417401},{"_id":"public/2016/06/29/依赖注入原理/index.html","hash":"4908b334e407c6a6f8b1be0bd781448ec07cdda9","modified":1467217541112},{"_id":"public/archives/2016/06/index.html","hash":"9f8f2d0c21b345679451a119f76f2a0696c7ebf7","modified":1467217541117},{"_id":"public/categories/代码/index.html","hash":"db4c399f5a73f69c3963538d97586bd47f12bc87","modified":1467217541117},{"_id":"public/tags/代码/index.html","hash":"3fd2c0e1f1cf1627c49724b72570714387f159ce","modified":1467217541118},{"_id":"source/_posts/2016/06/29/uuu.html","hash":"019595c3ffd99c59ff89a0de60cce60f136e6ce7","modified":1467217186981},{"_id":"public/2016/06/29/uuu/index.html","hash":"873bbf6ac0b69370e17f28f2fd673cf10536e9c1","modified":1467217541121}],"Category":[{"name":"Django","_id":"cik3sv4or00010s371ajc9hkt"},{"name":"Git","_id":"cik3sv4sx000e0s37spaa1njj"},{"name":"MySql","_id":"cik3sv4v500100s37bugrwrfp"},{"name":"转载","parent":"cik3sv4or00010s371ajc9hkt","_id":"cik3sv4vi00180s37uheqxyvn"},{"name":"Vim","_id":"cik3sv4vp001g0s37t2hhtro2"},{"name":"温故知新","parent":"cik3sv4or00010s371ajc9hkt","_id":"cik3sv4wm001l0s37qmu43d1u"},{"name":"Linux","_id":"cik3sv4wz001q0s37o51sfllc"},{"name":"Ubuntu","parent":"cik3sv4wz001q0s37o51sfllc","_id":"cik3sv4xu001w0s37gr2r5dsn"},{"name":"Js","_id":"cik3sv4y900290s37ba2rf12q"},{"name":"前端","parent":"cik3sv4y900290s37ba2rf12q","_id":"cik3sv4ya002b0s37yahlrf1g"},{"name":"Mysql","_id":"cik3sv4yc002g0s374oqjykwp"},{"name":"Python","_id":"cik3sv4yl002l0s3779gncw6o"},{"name":"前端","_id":"cik3sv4zg00330s37x4l0w27q"},{"name":"数据库","_id":"cik3sv4zl00380s376v8y1iz7"},{"name":"Ubuntu","parent":"cik3sv4or00010s371ajc9hkt","_id":"cik3sv4zp003c0s37axeptf4v"},{"name":"技术点滴","_id":"cik3sv516003x0s37vqob7kb0"},{"name":"代码","_id":"ciq12qgmn0001uybya7hqjpir"}],"Data":[],"Page":[{"title":"Yann tags","date":"2015-10-17T13:25:05.000Z","type":"tags","comments":0,"_content":"","source":"tags/index.md","raw":"title: Yann tags\ndate: 2015-10-17 21:25:05\ntype: \"tags\"\ncomments: false\n---\n","updated":"2016-06-29T15:29:25.175Z","path":"tags/index.html","_id":"cik3sv4rd00050s37b1dayq3i","layout":"page","content":"","excerpt":"","more":""},{"title":"guestbook","date":"2015-10-08T02:42:52.000Z","_content":"\n<div class=\"ds-recent-visitors\" data-num-items=\"28\" data-avatar-size=\"42\" id=\"ds-recent-visitors\"></div>\n","source":"guestbook/index.md","raw":"title: guestbook\ndate: 2015-10-08 10:42:52\n---\n\n<div class=\"ds-recent-visitors\" data-num-items=\"28\" data-avatar-size=\"42\" id=\"ds-recent-visitors\"></div>\n","updated":"2016-06-29T15:29:25.175Z","path":"guestbook/index.html","_id":"cik3sv4rf00060s37nmtldwqt","comments":1,"layout":"page","content":"<div class=\"ds-recent-visitors\" data-num-items=\"28\" data-avatar-size=\"42\" id=\"ds-recent-visitors\"></div>\n","excerpt":"","more":"<div class=\"ds-recent-visitors\" data-num-items=\"28\" data-avatar-size=\"42\" id=\"ds-recent-visitors\"></div>\n"},{"title":"Yann categories","date":"2015-10-17T13:29:03.000Z","type":"categories","comments":0,"_content":"","source":"categories/index.md","raw":"title: Yann categories\ndate: 2015-10-17 21:29:03\ntype: \"categories\"\ncomments: false\n---\n","updated":"2016-06-29T15:29:25.175Z","path":"categories/index.html","_id":"cik3sv4rg00070s37a58ipea5","layout":"page","content":"","excerpt":"","more":""},{"title":"about","date":"2015-10-08T03:03:19.000Z","_content":"\n<h1>My Name Is Yann</h1>","source":"about/index.md","raw":"title: about\ndate: 2015-10-08 11:03:19\n---\n\n<h1>My Name Is Yann</h1>","updated":"2016-06-29T15:29:25.175Z","path":"about/index.html","_id":"cik3sv4ri00080s37xwi9nasj","comments":1,"layout":"page","content":"<h1>My Name Is Yann</h1>","excerpt":"","more":"<h1>My Name Is Yann</h1>"}],"Post":[{"title":"Django Notes","date":"2015-10-09T05:39:28.000Z","_content":"\n## Django Basics\n\n##### 使用django的权限管理系统permission\n\n* 为model添加权限\n\n    ```\n    class OrderList(models.Model):\n        id = BigIntegerAutoField(primary_key=True)\n        buyer_name = models.CharField(default=\"\",max_length=32, verbose_name=u'买手')\n        order_amount = models.FloatField(default=0, verbose_name=u'金额')\n        created = models.DateField(auto_now_add=True, verbose_name=u'订货日期')\n        updated = models.DateTimeField(auto_now=True, verbose_name=u'更新日期')\n\n        class Meta:\n            db_table = 'suplychain_flashsale_orderlist'\n            verbose_name = u'**表'\n            verbose_name_plural = u'**表'\n            permissions = [(\"change_order_list_inline\", u\"**\"),]\n\n        def __unicode__(self):\n            return '<%s,%s,%s>' % (str(self.id or ''), self.id, self.buyer_name)\n    ```\n\n* views中可以使用如下方法来操作权限\n\n    ```\n    request.user.has_perm('dinghuo.change_order_list_inline')\n    ```\n\n* 在template中使用权限方法：\n\n    ```\n    {% if perms.conf %}\n        <p>You have permission to do something in the foo app.</p>\n    <p>You can vote!</p>\n    {% endif %}\n    {% if perms.conf.oprater_task %}\n           <p>You can drive!</p>\n    <p>You don't have permission to do anything in the foo app.</p>\n    {% endif %}\n    ```\n\n##### 在Django中MySQL的Composite Primary Key的实现\n  * Django不直接支持Composite Primary Key，但是可以如下实现。\n    - 定义model，选择composite key中的一个作为主键。\n    - 在model内部的Meta内，使用**unique_together**把composite key组织在一起。\n    例如：\n    ```\n          class Test(models.Model):\n              user_id = models.CharField(max_length=16, primary_key=True) # 选取user_id作为django层面的primary key\n              item_id = models.CharField(max_length=16)\n              class Meta:\n                  unique_together = (\"user_id\", \"item_id\") # (user_id, item_id)就是我们需要的composite primary key\n      ```\n    - 在MySQL层面（只针对MySQL数据库），对Test这个model所对应的表重新创建：\n    ```\n      mysql> DROP TABLE service_test; #丢弃Django syncdb创建的表\n      mysql> CREATE TABLE service_test (\n               user_id VARCHAR(16) NOT NULL,\n               item_id VARCHAR(16) NOT NULL,\n               primary key (user_id, item_id)\n             ) ENGINE=InnoDB;\n    ```\n\n##### Model字段缺省值(default=)\n  - 用例:\n  ```\n    created_at = models.DatetimeField(default=datetime.datetime.now)\n    dummy_int  = models.IntegerField(default=0)\n    ```\n  - 原理:\n    * default值并没有写入数据库的表中：如果写入数据库表中，字段//dummy_int//的定义应包含“DEFAULT 0”；但数据库表中未有体现。\n    * django model在构造函数//%%__init__%%()//中设置各字段的default值:根据default=0,构造函数内就把dummy_int的值设为0.\n    * 代码体现在///django/db/models/base.py//, 308-354行。\n  - 如果要让default值的设置体现在数据库表上，则要做以下改动：\n    * 改动文件//django/db/backends/creation.py//:\n    ```\n      def sql_create_model(self, model, style, known_models=set()):\n          ...\n          ## add the following code：\n          if(f.default != models.fields.NOT_PROVIDED):\n              if hasattr(f.default, '__call__'):\n                  pass ## we have a little bit trouble here -- default is a python method!!!\n              else:\n                  field_output.append(style.SQL_KEYWORD('DEFAULT ' + f.default.__str__()))\n    ```\n    * 什么时候需要把default值体现在数据库表中？\n      - 一个简单的用列：更新数据库中记录，如果记录被修改，时间戳也会自动更新为修改记录的新时间；如果记录其他字段未被修改，时间戳不会变化。\n        * 在django层面，无法达到该效果。因为每次update操作，django必须设置时间戳字段的值，这样即使数据库表中其他字段没有修改，该时间戳字段也被修改了。\n        * 而在数据库表里面，只要把timestamp字段设为//default CURRENT_TIMESTAMP on update CURRENT_TIMESTAMP//则可以达到理想效果：如果其他字段没有修改，时间戳也不会变化。\n    * 问题（注意！！）\n      - 正如上面代码中注释那样，如果在model中定义的字段的default值为python函数，比如//datetime.datetime.now//，就难以通过代码解析来设置数据库表中的default定义。\n      - 如果数据库表中对相应字段已有default配置，那么model的构造函数内就不必对该字段进行default值的设置。**所以这不是一项简单的工作，请不要轻易去尝试改动**。\n    * Reference: http://www.supermind.org/blog/671/django-not-setting-default-column-value-in-mysql\n\n##### Model主键自增\n  * 用例:\n    ```\n    d = models.AutoField(primary_key=True)\n    这是一个自增主键(auto-incrementing primary key)如果你要指定一个自定义主键，将该字段设置为primary_key=True。如果\n    Django看到你显式的设置了Field primary key，\n    它将不会增加自增id字段。每个model必须有exactly one字段设置为primary_key=True.\n    如显示添加自己的主键：uid = models.BigIntegerField(primary_key=True)\n    则uid需要自己在程序里去赋值或去数据库将主键更改为自增，并保证满足主键要求\n    ```\n\n###### update() 方法\n  - 用例:\n    ```\n    # change User record: set status=1 for all records that have id=1;\n    # return value x is the number of records that have id=1.\n    x = User.objects.filter(id=1).update(status=1)\n    ```\n  - 如果希望update()返回被更新的记录数(而不是满足filter条件的记录数),需要改变文件///django/db/backends/mysql/base.py//:\n    * 源代码如下:\n    ```\n      # We need the number of potentially affected rows after an\n      # \"UPDATE\", not the number of changed rows.\n      kwargs['client_flag'] = CLIENT.FOUND_ROWS\n    ```\n    * 改为:\n    ```\n      kwargs['client_flag'] = CLIENT.MULTI_RESULTS\n    ```\n\n##### save() 方法\n  - 内部处理流程:\n  ```\n    1) 发出一个预存信号。 它发出一个将要存储一个对象的通知。你可以注册一个监听程序，\n    在信号发出的时候就会被调用。\n\n    2) 预处理数据. 对于对象的每个字段，将根据需要进行自动的数据修改。大部分字段并不预处理\n    ，它们会保持它们原来的样子。预处理仅仅用在那些有特殊性质的字段，比如文件字段。\n\n    3) 为数据库准备数据。 每一个字段先要把当前值转化成数据库中可以保存的数据的类型。\n    大多数字段的数据不需要预先准备。简单的数据类型，比如整型和字符串等python对象可以直接写进数据库。\n    然而，更复杂的数据类型需要做一些修改。比如， DateFields 使用python的 datetime 对象来存储数据。\n    数据库并不能存储 datetime 对象，所以该字段要存入数据库先要把值转化为符合ISO标准的日期字符串。\n\n    4) 向数据库中插入数据。 经过预处理准备好的数据然后会组合成一条SQL语句来插入数据库。\n\n    5) 发出存毕信号。 与预存信号类似，存毕信号在对象成功保存之后发出。同样，这些信号也还没有文档化。\n    ```\n  - 处理原则：```\n    1) 如果对象的主键属性被设置成相当于 True 的值（比如 None 或者空字符串之外的值），Django会执行一个 SELECT 查询来检测是否已存在一个相同主键的记录。\n\n    2) 如果已经存在一个主键相同的记录，Django就执行 UPDATE 查询。\n\n    3) 如果对象的主键属性 没有 被设置，或者被设置但数据库中没有与之同主键的记录，那么Django就会执行 INSERT 插入。\n    ```\n\n##### 类实例序列化与反序列化\n  - 对于django中Model对象:<code python>\n    from django.core import serializers\n    serializers.serialize('json', queryset, indent=2,\n    use_natural_keys=True)//序列化\n    serializers.deserialize(\"json\", sstring)//反序列化\n    这种方式的反序列化后是一个DeserializeObject包装类</code>\n  - 使用对于一般的复杂对象：<code python>\n    import jsonpickle\n    pickled = jsonpickle.encode(obj)//序列化\n    unpickled = jsonpickle.decode(pickled)//反序列化\n    反序列化后是一个新的类对象</code>\n  - jsonpickle的安装：<code>\n    先要安装pip工具:sudo apt-get install python-pip。\n    然后执行命令：pip install -U jsonpickle。</code>\n  - 参考：[[http://zhdoc.bitsrv.net/django/html/topics/serialization.html]]and[[http://jsonpickle.github.com/]]\n\n###### django中静态文件路径配置\n  - 首先，在settings.py中加入一条静态路径的常量：<code python>\n    STATIC_FILE_ROOT='/home/meixqhi/workspace/django/src/fbproject'\n    </code>\n  - 其次，在urls.py文件中加入以下内容:<code python>\n    from settings import STATIC_FILE_ROOT\n    (r'^static/(?P<path>.*)','django.views.static.serve',{'document_root': '%s/static/' % STATIC_FILE_ROOT}),\n    </code>\n  - 然后就可以通过以下路径来访问STATIC_FILE_ROOT路径下static目录中的静态文件了:<code>\n    http://domain/apppath/static/home.html\n    </code>\n\n##### paginator\n  *分页 <code>\n   from django.core.paginator import Paginator\n   from models import Weibo\n\n   queryset = Weibo.objects.all()\n   paginator = Paginator(queryset, 5)\n   page = paginator.page(1)\n   page.object_list</code>\n\n##### Import module,model\n  * 动态加载module,model：<code>\n    from django.utils.importlib import import_module\n    import_module(module)\n\n    from django.db import model\n    model = models.get_model('weibo', 'weibo') #(app_label,model_name)</code>\n\n##### Signal\n  * Signal机制 <code>\n        function:\n\tconnect(self, receiver, sender=None, weak=True, dispatch_uid=None)\n\tsend(self, sender, **named):\n\tdecoretor:\n\treceiver(signal, **kwargs):</code>\n  * 使用方法：\n    - 声明：<code>\n\tfrom django.dispatch import Signal\n\tuser_logged_in = Signal(providing_args=['request', 'user'])</code>\n    - 注册你要触发的方法：<code>\n    def logged_status(user,access_token):\n\tuser.is_active = True\n    user_logged_in.connect(logged_status,sender=user.__class__) #sender不传参,则sender默认为None,表示响应所有的send信号 </code>\n    - 在某个你要触发某个方法的地方发送消息，让这些注册的方法执行：<code>\n\tuser_logged_in.send(sender=user.__class__, user=user, access_token=request.session.get('access_token', None))</code>\n    - 如果要防止某个方法在module重复加载时也被重复监听，可以在connect方法中添加唯一的标识：dispatch_uid='my_update_blogs'\n    - 由于监听方法默认状态weak=True是不保证一定会执行的，由于方法的弱引用会在资源不够的时候被垃圾回收器回收，如果一定要执行，则需显示在connect中设置weak=False。\n\n\n##### Django Deployment\n  - Install //libapache2-mod-wsgi//: \\\\ <code>\n    sudo apt-get install libapache2-mod-wsgi </code>\n  - Suppose you have django project //system// under directory ///srv/internals//: <code>\n    cd /srv/internals/system\n    mkdir apache </code>\n  - Create file //django.wsgi// under directory //apache//, the file contains: <code python>\n    import os\n    import sys\n\n    path = '/srv/internals'\n    if path not in sys.path:\n        sys.path.append(path)\n        sys.path.append(path+\"/system\")\n\n    os.environ['DJANGO_SETTINGS_MODULE'] = 'system.settings'\n\n    import django.core.handlers.wsgi\n    application = django.core.handlers.wsgi.WSGIHandler() </code>\n  - Edit // /etc/apache2/httpd.conf//, adding the following: \\\\ <code bash>\n    Alias /system/media /srv/internals/system/media/   # make sure directory 'media' exists\n    Alias /system/static /srv/internals/system/static/ # make sure directory 'static' exists\n\n    <Directory /srv/internals/system/media>\n        AllowOverride All\n        Order deny,allow\n        Allow from all\n    </Directory>\n\n    <Directory /srv/internals/system/static>\n        Order deny,allow\n        Allow from all\n    </Directory>\n\n    WSGIScriptAlias /internal /srv/internals/system/apache/django.wsgi\n\n    <Directory /srv/internals/system/apache>\n        Order deny,allow\n        Allow from all\n    </Directory> </code>\n  - Edit ///srv/internals/system/settings.py//: <code bash>\n    MEDIA_ROOT = '/srv/internals/system/media/'\n    MEDIA_URL = '/system/media/' # http://<your_domain>/system/media points to /srv/internals/system/media\n    STATIC_ROOT = '/srv/internals/system/static/'\n    STATIC_URL = '/system/static/'\n    ADMIN_MEDIA_PREFIX = '/system/static/admin/'\n    ROOT_URLCONF = 'system.urls' </code>\n  - Visit the django project via http: <code>\n    http://<your_domain>/internal/admin/\n    http://<your_domain>/internal/<app_name> # visit application with name \"app_name\"</code>\n  - **Keep Admin Style**: \\\\ <code>\n    cd /srv/internals/system/static/admin/\n    cp -rf /usr/local/lib/python2.7/dist-packages/Django-1.3-py2.7.egg/django/contrib/admin/media/* .\n    or\n    cp -rf /usr/local/lib/python2.7/dist-packages/django/contrib/admin/media/* . </code>\n  - **Unicode Decoding Error**: (uploading file and filename has //non-ascii// characters) add the following to ///etc/apache2/envvars//: <code bash>\n    export LANG='en_US.UTF-8'\n    export LC_ALL='en_US.UTF-8' </code>\n  - Debug with apache: <code>\n    apache2ctl -k restart # with root\n    tail -f /var/log/apache/error.log </code>\n\n===== Django DB Schema Migration with South =====\n====  For Django < 1.7   ====\n  * 往Django App //tagtex.qpoints// 的表内增加一个字段：\n    - 初始化: <code>\n      python manage.py schemamigration tagtex.qpoints --initial\n      (如果APP执行过syncdb操作，需要执行以下操作： python manage.py migrate tagtex.qpoints --fake )</code>\n    - 修改表，增加字段\n    - 进行migration: <code>\n      python manage.py schemamigration tagtex.qpoints --auto\n      python manage.py migrate tagtex.qpoints </code>\n\n====  For Django > 1.7   ====\n  * south 操作命令:<code>\n  $ python manage.py makemigrations [appname]\n  $ python manage.py migrate [appname]\n  </code>\n===== Django Developement Tips =====\n    http://ericholscher.com/blog/2008/oct/5/django-tips/\n\n===== django-middleware =====\n  * django 中间件\n  * 编写自己的中间件需要实现下面一个或几个方法：\n    - process_request(self, request)：返回None或HttpResponse。\n    - process_view(self, request, view_func, view_args, view_kwargs)：djangoview处理中间件返回None或HttpResponse。\n    - process_exception(request, e):该中间件对业务处理方法执行未捕获的异常进行处理。\n    - process_template_response(request, response):如果返回的TemplateResponse含有可执行的render方法，则该中间件生效。\n    - process_response(self, request, response):返回HttpResponse。\n  * 参考：https://docs.djangoproject.com/en/1.3/topics/http/middleware/\n  * code参考django源代码：django/core/handlers/base.py中get_response\n\n===== django-profile-middleware =====\n  * profile是一款能够记录程序方法或请求在运行过程调用了多少其他方法，以及每个方法消耗了多少时间及系统资源的python工具\n  * 使用步骤：\n    - 先安装 python-profiler <code>\n      sudo apt-get install python-profiler</code>\n    - 创建ProfileMiddleware类,参考：http://djangosnippets.org/snippets/605/\n    - 将类路径名加入settings.py里的MIDDLEWARE_CLASSES中 <code>\n      MIDDLEWARE_CLASSES = (\n        'tagtex.base.middleware.ProfileMiddleware',\n        )</code>\n    - 运行server，发送请求\n    ```\n       如http://<yourserver>/yoururl/?prof&params\n       ```\n\n===== mockserver =====\n  * mockserver的主要功能是通过代理记录上次请求的状态并保存，并为下次请求返回相同的结果。\n  * 使用步骤：\n    - 先安装mock_server\n    ```\n      git+ssh://git@s2/django-mock-server.git#egg=django-mock-server (也可以直接下载)\n      ```\n    - 然后将recorder app添加到settings.py的INSTALLED_APPS中\n    ```\n      INSTALLED_APPS = (\n          'mock_server.recorder'\n        )\n        ```\n    - 设置代理url\n    ```\n         from django.conf.urls.defaults import patterns, include, url\n         from mock_server.recorder.views import RecordView,PlaybackView\n         from mock_server.recorder.recorder import Recorder\n         SITE_API_ENDPOINT = '你要访问的站点域名或http://ip:port'\n\n         recorder = Recorder(format='http://localhost:8000%s')\n\n         urlpatterns = patterns('',\n\n             url(r'^(?P<url>.*)$', RecordView.as_view(recorder=recorder,proxy_format='%s/%%s'%SITE_API_ENDPOINT),name='site_api'),\n             #url(r'^(?P<url>.*)$', PlaybackView.as_view(recorder=recorder,proxy_format='%s/%%s'%SITE_API_ENDPOINT),name='site_api'),\n         )\n         ```\n    - 使用前先使用第一条url，RecordView，注释掉第二条，启动服务器，将你要mock的所有请求都先都由mockserver来代理，mockserver会将所有请求都记录保存到数据库。\n    - 然后再打开第二条url，Playback回放，注释掉第一条，所有请求都会返回之前一样的结果。\n\n\n##### Override Runserver Command\n  * To override **runserver** Command,\n  add the following to into //management/commands/runnserver.py//:\n    ```\n    class Command(BaseRunserverCommand):\n        option_list = BaseRunserverCommand.option_list + (\n            make_option('--adminmedia', dest='admin_media_path', default='',\n                help='Specifies the directory from which to serve admin media.'),\n        )\n\n        \"\"\"\n        Change the runserver default port to 9000. The method can be generically applied if\n        the default port needs to be changed.\n        \"\"\"\n        def handle(self, addrport=\"9000\", *args, **options):\n            super(Command, self).handle(addrport, *args, **options)\n\n        def get_handler(self, *args, **options):\n            \"\"\"\n            Serves admin media like old-school (deprecation pending).\n            \"\"\"\n\n            handler = super(Command, self).get_handler(*args, **options)\n            return AdminMediaHandler(handler, options.get('admin_media_path', ''))\n    ```\n\n\n##### 数据导入导出\n  * 数据导出:\n    ```\n        python manage.py dumpdata logistics.LogisticsCompany --indent=2 --format=json --natural >fixtures/initial_logistics_company.json\n    ```\n  * 数据导入:\n    ```\n        python manage.py loaddata fixtures/initial_logistics_company.json\n    ```\n\n##### 多个queryset 合并成一个\n  * django\n    ```\n        from itertools import islice, chain\n\n        class QuerySetChain(object):\n            \"\"\"\n            Chains multiple subquerysets (possibly of different models) and behaves as\n            one queryset.  Supports minimal methods needed for use with\n            django.core.paginator.\n            \"\"\"\n\n            def __init__(self, *subquerysets):\n                self.querysets = subquerysets\n\n            def count(self):\n                \"\"\"\n                Performs a .count() for all subquerysets and returns the number of\n                records as an integer.\n                \"\"\"\n                return sum(qs.count() for qs in self.querysets)\n\n            def _clone(self):\n                \"Returns a clone of this queryset chain\"\n                return self.__class__(*self.querysets)\n\n            def _all(self):\n                \"Iterates records in all subquerysets\"\n                return chain(*self.querysets)\n\n            def __getitem__(self, ndx):\n                \"\"\"\n                Retrieves an item or slice from the chained set of results from all\n                subquerysets.\n                \"\"\"\n                if type(ndx) is slice:\n                    return list(islice(self._all(), ndx.start, ndx.stop, ndx.step or 1))\n                else:\n                    return islice(self._all(), ndx, ndx+1).next()\n    ```\n\n##### django批量添加和更新\n  * django insert&update:\n  ```\n    def insert_many(objects, using=\"default\"):\n        \"\"\"Insert list of Django objects in one SQL query. Objects must be\n        of the same Django model. Note that save is not called and signals\n        on the model are not raised.\"\"\"\n        if not objects:\n            return\n\n        import django.db.models\n        from django.db import connections\n        con = connections[using]\n\n        model = objects[0].__class__\n        fields = [f for f in model._meta.fields if not isinstance(f, django.db.models.AutoField)]\n        parameters = []\n        for o in objects:\n            parameters.append(tuple(f.get_db_prep_save(f.pre_save(o, True), connection=con) for f in fields))\n\n        table = model._meta.db_table\n        column_names = \",\".join(con.ops.quote_name(f.column) for f in fields)\n        placeholders = \",\".join((\"%s\",) * len(fields))\n        con.cursor().executemany(\n            \"insert into %s (%s) values (%s)\" % (table, column_names, placeholders),\n            parameters)\n\n    def update_many(objects, fields=[], using=\"default\"):\n        \"\"\"Update list of Django objects in one SQL query,\n         optionally only overwrite the given fields (as names, e.g. fields=[\"foo\"]).\n        Objects must be of the same Django model.\n        Note that save is not called and signals on the model are not raised.\"\"\"\n        if not objects:\n            return\n\n        import django.db.models\n        from django.db import connections\n        con = connections[using]\n\n        names = fields\n        meta = objects[0]._meta\n        fields = [f for f in meta.fields if not isinstance(f, django.db.models.AutoField) and (not names or f.name in names)]\n\n        if not fields:\n            raise ValueError(\"No fields to update, field names are %s.\" % names)\n\n        fields_with_pk = fields + [meta.pk]\n        parameters = []\n        for o in objects:\n            parameters.append(tuple(f.get_db_prep_save(f.pre_save(o, True), connection=con) for f in fields_with_pk))\n\n        table = meta.db_table\n        assignments = \",\".join((\"%s=%%s\"% con.ops.quote_name(f.column)) for f in fields)\n        con.cursor().executemany(\n            \"update %s set %s where %s=%%s\" % (table, assignments, con.ops.quote_name(meta.pk.column)),\n            parameters)\n    ```\n\n","source":"_posts/2015/10/09/Django-Notes.md","raw":"title: Django Notes\ndate: 2015-10-09 13:39:28\ncategories:\n- Django\ntags:\n- Django\n---\n\n## Django Basics\n\n##### 使用django的权限管理系统permission\n\n* 为model添加权限\n\n    ```\n    class OrderList(models.Model):\n        id = BigIntegerAutoField(primary_key=True)\n        buyer_name = models.CharField(default=\"\",max_length=32, verbose_name=u'买手')\n        order_amount = models.FloatField(default=0, verbose_name=u'金额')\n        created = models.DateField(auto_now_add=True, verbose_name=u'订货日期')\n        updated = models.DateTimeField(auto_now=True, verbose_name=u'更新日期')\n\n        class Meta:\n            db_table = 'suplychain_flashsale_orderlist'\n            verbose_name = u'**表'\n            verbose_name_plural = u'**表'\n            permissions = [(\"change_order_list_inline\", u\"**\"),]\n\n        def __unicode__(self):\n            return '<%s,%s,%s>' % (str(self.id or ''), self.id, self.buyer_name)\n    ```\n\n* views中可以使用如下方法来操作权限\n\n    ```\n    request.user.has_perm('dinghuo.change_order_list_inline')\n    ```\n\n* 在template中使用权限方法：\n\n    ```\n    {% if perms.conf %}\n        <p>You have permission to do something in the foo app.</p>\n    <p>You can vote!</p>\n    {% endif %}\n    {% if perms.conf.oprater_task %}\n           <p>You can drive!</p>\n    <p>You don't have permission to do anything in the foo app.</p>\n    {% endif %}\n    ```\n\n##### 在Django中MySQL的Composite Primary Key的实现\n  * Django不直接支持Composite Primary Key，但是可以如下实现。\n    - 定义model，选择composite key中的一个作为主键。\n    - 在model内部的Meta内，使用**unique_together**把composite key组织在一起。\n    例如：\n    ```\n          class Test(models.Model):\n              user_id = models.CharField(max_length=16, primary_key=True) # 选取user_id作为django层面的primary key\n              item_id = models.CharField(max_length=16)\n              class Meta:\n                  unique_together = (\"user_id\", \"item_id\") # (user_id, item_id)就是我们需要的composite primary key\n      ```\n    - 在MySQL层面（只针对MySQL数据库），对Test这个model所对应的表重新创建：\n    ```\n      mysql> DROP TABLE service_test; #丢弃Django syncdb创建的表\n      mysql> CREATE TABLE service_test (\n               user_id VARCHAR(16) NOT NULL,\n               item_id VARCHAR(16) NOT NULL,\n               primary key (user_id, item_id)\n             ) ENGINE=InnoDB;\n    ```\n\n##### Model字段缺省值(default=)\n  - 用例:\n  ```\n    created_at = models.DatetimeField(default=datetime.datetime.now)\n    dummy_int  = models.IntegerField(default=0)\n    ```\n  - 原理:\n    * default值并没有写入数据库的表中：如果写入数据库表中，字段//dummy_int//的定义应包含“DEFAULT 0”；但数据库表中未有体现。\n    * django model在构造函数//%%__init__%%()//中设置各字段的default值:根据default=0,构造函数内就把dummy_int的值设为0.\n    * 代码体现在///django/db/models/base.py//, 308-354行。\n  - 如果要让default值的设置体现在数据库表上，则要做以下改动：\n    * 改动文件//django/db/backends/creation.py//:\n    ```\n      def sql_create_model(self, model, style, known_models=set()):\n          ...\n          ## add the following code：\n          if(f.default != models.fields.NOT_PROVIDED):\n              if hasattr(f.default, '__call__'):\n                  pass ## we have a little bit trouble here -- default is a python method!!!\n              else:\n                  field_output.append(style.SQL_KEYWORD('DEFAULT ' + f.default.__str__()))\n    ```\n    * 什么时候需要把default值体现在数据库表中？\n      - 一个简单的用列：更新数据库中记录，如果记录被修改，时间戳也会自动更新为修改记录的新时间；如果记录其他字段未被修改，时间戳不会变化。\n        * 在django层面，无法达到该效果。因为每次update操作，django必须设置时间戳字段的值，这样即使数据库表中其他字段没有修改，该时间戳字段也被修改了。\n        * 而在数据库表里面，只要把timestamp字段设为//default CURRENT_TIMESTAMP on update CURRENT_TIMESTAMP//则可以达到理想效果：如果其他字段没有修改，时间戳也不会变化。\n    * 问题（注意！！）\n      - 正如上面代码中注释那样，如果在model中定义的字段的default值为python函数，比如//datetime.datetime.now//，就难以通过代码解析来设置数据库表中的default定义。\n      - 如果数据库表中对相应字段已有default配置，那么model的构造函数内就不必对该字段进行default值的设置。**所以这不是一项简单的工作，请不要轻易去尝试改动**。\n    * Reference: http://www.supermind.org/blog/671/django-not-setting-default-column-value-in-mysql\n\n##### Model主键自增\n  * 用例:\n    ```\n    d = models.AutoField(primary_key=True)\n    这是一个自增主键(auto-incrementing primary key)如果你要指定一个自定义主键，将该字段设置为primary_key=True。如果\n    Django看到你显式的设置了Field primary key，\n    它将不会增加自增id字段。每个model必须有exactly one字段设置为primary_key=True.\n    如显示添加自己的主键：uid = models.BigIntegerField(primary_key=True)\n    则uid需要自己在程序里去赋值或去数据库将主键更改为自增，并保证满足主键要求\n    ```\n\n###### update() 方法\n  - 用例:\n    ```\n    # change User record: set status=1 for all records that have id=1;\n    # return value x is the number of records that have id=1.\n    x = User.objects.filter(id=1).update(status=1)\n    ```\n  - 如果希望update()返回被更新的记录数(而不是满足filter条件的记录数),需要改变文件///django/db/backends/mysql/base.py//:\n    * 源代码如下:\n    ```\n      # We need the number of potentially affected rows after an\n      # \"UPDATE\", not the number of changed rows.\n      kwargs['client_flag'] = CLIENT.FOUND_ROWS\n    ```\n    * 改为:\n    ```\n      kwargs['client_flag'] = CLIENT.MULTI_RESULTS\n    ```\n\n##### save() 方法\n  - 内部处理流程:\n  ```\n    1) 发出一个预存信号。 它发出一个将要存储一个对象的通知。你可以注册一个监听程序，\n    在信号发出的时候就会被调用。\n\n    2) 预处理数据. 对于对象的每个字段，将根据需要进行自动的数据修改。大部分字段并不预处理\n    ，它们会保持它们原来的样子。预处理仅仅用在那些有特殊性质的字段，比如文件字段。\n\n    3) 为数据库准备数据。 每一个字段先要把当前值转化成数据库中可以保存的数据的类型。\n    大多数字段的数据不需要预先准备。简单的数据类型，比如整型和字符串等python对象可以直接写进数据库。\n    然而，更复杂的数据类型需要做一些修改。比如， DateFields 使用python的 datetime 对象来存储数据。\n    数据库并不能存储 datetime 对象，所以该字段要存入数据库先要把值转化为符合ISO标准的日期字符串。\n\n    4) 向数据库中插入数据。 经过预处理准备好的数据然后会组合成一条SQL语句来插入数据库。\n\n    5) 发出存毕信号。 与预存信号类似，存毕信号在对象成功保存之后发出。同样，这些信号也还没有文档化。\n    ```\n  - 处理原则：```\n    1) 如果对象的主键属性被设置成相当于 True 的值（比如 None 或者空字符串之外的值），Django会执行一个 SELECT 查询来检测是否已存在一个相同主键的记录。\n\n    2) 如果已经存在一个主键相同的记录，Django就执行 UPDATE 查询。\n\n    3) 如果对象的主键属性 没有 被设置，或者被设置但数据库中没有与之同主键的记录，那么Django就会执行 INSERT 插入。\n    ```\n\n##### 类实例序列化与反序列化\n  - 对于django中Model对象:<code python>\n    from django.core import serializers\n    serializers.serialize('json', queryset, indent=2,\n    use_natural_keys=True)//序列化\n    serializers.deserialize(\"json\", sstring)//反序列化\n    这种方式的反序列化后是一个DeserializeObject包装类</code>\n  - 使用对于一般的复杂对象：<code python>\n    import jsonpickle\n    pickled = jsonpickle.encode(obj)//序列化\n    unpickled = jsonpickle.decode(pickled)//反序列化\n    反序列化后是一个新的类对象</code>\n  - jsonpickle的安装：<code>\n    先要安装pip工具:sudo apt-get install python-pip。\n    然后执行命令：pip install -U jsonpickle。</code>\n  - 参考：[[http://zhdoc.bitsrv.net/django/html/topics/serialization.html]]and[[http://jsonpickle.github.com/]]\n\n###### django中静态文件路径配置\n  - 首先，在settings.py中加入一条静态路径的常量：<code python>\n    STATIC_FILE_ROOT='/home/meixqhi/workspace/django/src/fbproject'\n    </code>\n  - 其次，在urls.py文件中加入以下内容:<code python>\n    from settings import STATIC_FILE_ROOT\n    (r'^static/(?P<path>.*)','django.views.static.serve',{'document_root': '%s/static/' % STATIC_FILE_ROOT}),\n    </code>\n  - 然后就可以通过以下路径来访问STATIC_FILE_ROOT路径下static目录中的静态文件了:<code>\n    http://domain/apppath/static/home.html\n    </code>\n\n##### paginator\n  *分页 <code>\n   from django.core.paginator import Paginator\n   from models import Weibo\n\n   queryset = Weibo.objects.all()\n   paginator = Paginator(queryset, 5)\n   page = paginator.page(1)\n   page.object_list</code>\n\n##### Import module,model\n  * 动态加载module,model：<code>\n    from django.utils.importlib import import_module\n    import_module(module)\n\n    from django.db import model\n    model = models.get_model('weibo', 'weibo') #(app_label,model_name)</code>\n\n##### Signal\n  * Signal机制 <code>\n        function:\n\tconnect(self, receiver, sender=None, weak=True, dispatch_uid=None)\n\tsend(self, sender, **named):\n\tdecoretor:\n\treceiver(signal, **kwargs):</code>\n  * 使用方法：\n    - 声明：<code>\n\tfrom django.dispatch import Signal\n\tuser_logged_in = Signal(providing_args=['request', 'user'])</code>\n    - 注册你要触发的方法：<code>\n    def logged_status(user,access_token):\n\tuser.is_active = True\n    user_logged_in.connect(logged_status,sender=user.__class__) #sender不传参,则sender默认为None,表示响应所有的send信号 </code>\n    - 在某个你要触发某个方法的地方发送消息，让这些注册的方法执行：<code>\n\tuser_logged_in.send(sender=user.__class__, user=user, access_token=request.session.get('access_token', None))</code>\n    - 如果要防止某个方法在module重复加载时也被重复监听，可以在connect方法中添加唯一的标识：dispatch_uid='my_update_blogs'\n    - 由于监听方法默认状态weak=True是不保证一定会执行的，由于方法的弱引用会在资源不够的时候被垃圾回收器回收，如果一定要执行，则需显示在connect中设置weak=False。\n\n\n##### Django Deployment\n  - Install //libapache2-mod-wsgi//: \\\\ <code>\n    sudo apt-get install libapache2-mod-wsgi </code>\n  - Suppose you have django project //system// under directory ///srv/internals//: <code>\n    cd /srv/internals/system\n    mkdir apache </code>\n  - Create file //django.wsgi// under directory //apache//, the file contains: <code python>\n    import os\n    import sys\n\n    path = '/srv/internals'\n    if path not in sys.path:\n        sys.path.append(path)\n        sys.path.append(path+\"/system\")\n\n    os.environ['DJANGO_SETTINGS_MODULE'] = 'system.settings'\n\n    import django.core.handlers.wsgi\n    application = django.core.handlers.wsgi.WSGIHandler() </code>\n  - Edit // /etc/apache2/httpd.conf//, adding the following: \\\\ <code bash>\n    Alias /system/media /srv/internals/system/media/   # make sure directory 'media' exists\n    Alias /system/static /srv/internals/system/static/ # make sure directory 'static' exists\n\n    <Directory /srv/internals/system/media>\n        AllowOverride All\n        Order deny,allow\n        Allow from all\n    </Directory>\n\n    <Directory /srv/internals/system/static>\n        Order deny,allow\n        Allow from all\n    </Directory>\n\n    WSGIScriptAlias /internal /srv/internals/system/apache/django.wsgi\n\n    <Directory /srv/internals/system/apache>\n        Order deny,allow\n        Allow from all\n    </Directory> </code>\n  - Edit ///srv/internals/system/settings.py//: <code bash>\n    MEDIA_ROOT = '/srv/internals/system/media/'\n    MEDIA_URL = '/system/media/' # http://<your_domain>/system/media points to /srv/internals/system/media\n    STATIC_ROOT = '/srv/internals/system/static/'\n    STATIC_URL = '/system/static/'\n    ADMIN_MEDIA_PREFIX = '/system/static/admin/'\n    ROOT_URLCONF = 'system.urls' </code>\n  - Visit the django project via http: <code>\n    http://<your_domain>/internal/admin/\n    http://<your_domain>/internal/<app_name> # visit application with name \"app_name\"</code>\n  - **Keep Admin Style**: \\\\ <code>\n    cd /srv/internals/system/static/admin/\n    cp -rf /usr/local/lib/python2.7/dist-packages/Django-1.3-py2.7.egg/django/contrib/admin/media/* .\n    or\n    cp -rf /usr/local/lib/python2.7/dist-packages/django/contrib/admin/media/* . </code>\n  - **Unicode Decoding Error**: (uploading file and filename has //non-ascii// characters) add the following to ///etc/apache2/envvars//: <code bash>\n    export LANG='en_US.UTF-8'\n    export LC_ALL='en_US.UTF-8' </code>\n  - Debug with apache: <code>\n    apache2ctl -k restart # with root\n    tail -f /var/log/apache/error.log </code>\n\n===== Django DB Schema Migration with South =====\n====  For Django < 1.7   ====\n  * 往Django App //tagtex.qpoints// 的表内增加一个字段：\n    - 初始化: <code>\n      python manage.py schemamigration tagtex.qpoints --initial\n      (如果APP执行过syncdb操作，需要执行以下操作： python manage.py migrate tagtex.qpoints --fake )</code>\n    - 修改表，增加字段\n    - 进行migration: <code>\n      python manage.py schemamigration tagtex.qpoints --auto\n      python manage.py migrate tagtex.qpoints </code>\n\n====  For Django > 1.7   ====\n  * south 操作命令:<code>\n  $ python manage.py makemigrations [appname]\n  $ python manage.py migrate [appname]\n  </code>\n===== Django Developement Tips =====\n    http://ericholscher.com/blog/2008/oct/5/django-tips/\n\n===== django-middleware =====\n  * django 中间件\n  * 编写自己的中间件需要实现下面一个或几个方法：\n    - process_request(self, request)：返回None或HttpResponse。\n    - process_view(self, request, view_func, view_args, view_kwargs)：djangoview处理中间件返回None或HttpResponse。\n    - process_exception(request, e):该中间件对业务处理方法执行未捕获的异常进行处理。\n    - process_template_response(request, response):如果返回的TemplateResponse含有可执行的render方法，则该中间件生效。\n    - process_response(self, request, response):返回HttpResponse。\n  * 参考：https://docs.djangoproject.com/en/1.3/topics/http/middleware/\n  * code参考django源代码：django/core/handlers/base.py中get_response\n\n===== django-profile-middleware =====\n  * profile是一款能够记录程序方法或请求在运行过程调用了多少其他方法，以及每个方法消耗了多少时间及系统资源的python工具\n  * 使用步骤：\n    - 先安装 python-profiler <code>\n      sudo apt-get install python-profiler</code>\n    - 创建ProfileMiddleware类,参考：http://djangosnippets.org/snippets/605/\n    - 将类路径名加入settings.py里的MIDDLEWARE_CLASSES中 <code>\n      MIDDLEWARE_CLASSES = (\n        'tagtex.base.middleware.ProfileMiddleware',\n        )</code>\n    - 运行server，发送请求\n    ```\n       如http://<yourserver>/yoururl/?prof&params\n       ```\n\n===== mockserver =====\n  * mockserver的主要功能是通过代理记录上次请求的状态并保存，并为下次请求返回相同的结果。\n  * 使用步骤：\n    - 先安装mock_server\n    ```\n      git+ssh://git@s2/django-mock-server.git#egg=django-mock-server (也可以直接下载)\n      ```\n    - 然后将recorder app添加到settings.py的INSTALLED_APPS中\n    ```\n      INSTALLED_APPS = (\n          'mock_server.recorder'\n        )\n        ```\n    - 设置代理url\n    ```\n         from django.conf.urls.defaults import patterns, include, url\n         from mock_server.recorder.views import RecordView,PlaybackView\n         from mock_server.recorder.recorder import Recorder\n         SITE_API_ENDPOINT = '你要访问的站点域名或http://ip:port'\n\n         recorder = Recorder(format='http://localhost:8000%s')\n\n         urlpatterns = patterns('',\n\n             url(r'^(?P<url>.*)$', RecordView.as_view(recorder=recorder,proxy_format='%s/%%s'%SITE_API_ENDPOINT),name='site_api'),\n             #url(r'^(?P<url>.*)$', PlaybackView.as_view(recorder=recorder,proxy_format='%s/%%s'%SITE_API_ENDPOINT),name='site_api'),\n         )\n         ```\n    - 使用前先使用第一条url，RecordView，注释掉第二条，启动服务器，将你要mock的所有请求都先都由mockserver来代理，mockserver会将所有请求都记录保存到数据库。\n    - 然后再打开第二条url，Playback回放，注释掉第一条，所有请求都会返回之前一样的结果。\n\n\n##### Override Runserver Command\n  * To override **runserver** Command,\n  add the following to into //management/commands/runnserver.py//:\n    ```\n    class Command(BaseRunserverCommand):\n        option_list = BaseRunserverCommand.option_list + (\n            make_option('--adminmedia', dest='admin_media_path', default='',\n                help='Specifies the directory from which to serve admin media.'),\n        )\n\n        \"\"\"\n        Change the runserver default port to 9000. The method can be generically applied if\n        the default port needs to be changed.\n        \"\"\"\n        def handle(self, addrport=\"9000\", *args, **options):\n            super(Command, self).handle(addrport, *args, **options)\n\n        def get_handler(self, *args, **options):\n            \"\"\"\n            Serves admin media like old-school (deprecation pending).\n            \"\"\"\n\n            handler = super(Command, self).get_handler(*args, **options)\n            return AdminMediaHandler(handler, options.get('admin_media_path', ''))\n    ```\n\n\n##### 数据导入导出\n  * 数据导出:\n    ```\n        python manage.py dumpdata logistics.LogisticsCompany --indent=2 --format=json --natural >fixtures/initial_logistics_company.json\n    ```\n  * 数据导入:\n    ```\n        python manage.py loaddata fixtures/initial_logistics_company.json\n    ```\n\n##### 多个queryset 合并成一个\n  * django\n    ```\n        from itertools import islice, chain\n\n        class QuerySetChain(object):\n            \"\"\"\n            Chains multiple subquerysets (possibly of different models) and behaves as\n            one queryset.  Supports minimal methods needed for use with\n            django.core.paginator.\n            \"\"\"\n\n            def __init__(self, *subquerysets):\n                self.querysets = subquerysets\n\n            def count(self):\n                \"\"\"\n                Performs a .count() for all subquerysets and returns the number of\n                records as an integer.\n                \"\"\"\n                return sum(qs.count() for qs in self.querysets)\n\n            def _clone(self):\n                \"Returns a clone of this queryset chain\"\n                return self.__class__(*self.querysets)\n\n            def _all(self):\n                \"Iterates records in all subquerysets\"\n                return chain(*self.querysets)\n\n            def __getitem__(self, ndx):\n                \"\"\"\n                Retrieves an item or slice from the chained set of results from all\n                subquerysets.\n                \"\"\"\n                if type(ndx) is slice:\n                    return list(islice(self._all(), ndx.start, ndx.stop, ndx.step or 1))\n                else:\n                    return islice(self._all(), ndx, ndx+1).next()\n    ```\n\n##### django批量添加和更新\n  * django insert&update:\n  ```\n    def insert_many(objects, using=\"default\"):\n        \"\"\"Insert list of Django objects in one SQL query. Objects must be\n        of the same Django model. Note that save is not called and signals\n        on the model are not raised.\"\"\"\n        if not objects:\n            return\n\n        import django.db.models\n        from django.db import connections\n        con = connections[using]\n\n        model = objects[0].__class__\n        fields = [f for f in model._meta.fields if not isinstance(f, django.db.models.AutoField)]\n        parameters = []\n        for o in objects:\n            parameters.append(tuple(f.get_db_prep_save(f.pre_save(o, True), connection=con) for f in fields))\n\n        table = model._meta.db_table\n        column_names = \",\".join(con.ops.quote_name(f.column) for f in fields)\n        placeholders = \",\".join((\"%s\",) * len(fields))\n        con.cursor().executemany(\n            \"insert into %s (%s) values (%s)\" % (table, column_names, placeholders),\n            parameters)\n\n    def update_many(objects, fields=[], using=\"default\"):\n        \"\"\"Update list of Django objects in one SQL query,\n         optionally only overwrite the given fields (as names, e.g. fields=[\"foo\"]).\n        Objects must be of the same Django model.\n        Note that save is not called and signals on the model are not raised.\"\"\"\n        if not objects:\n            return\n\n        import django.db.models\n        from django.db import connections\n        con = connections[using]\n\n        names = fields\n        meta = objects[0]._meta\n        fields = [f for f in meta.fields if not isinstance(f, django.db.models.AutoField) and (not names or f.name in names)]\n\n        if not fields:\n            raise ValueError(\"No fields to update, field names are %s.\" % names)\n\n        fields_with_pk = fields + [meta.pk]\n        parameters = []\n        for o in objects:\n            parameters.append(tuple(f.get_db_prep_save(f.pre_save(o, True), connection=con) for f in fields_with_pk))\n\n        table = meta.db_table\n        assignments = \",\".join((\"%s=%%s\"% con.ops.quote_name(f.column)) for f in fields)\n        con.cursor().executemany(\n            \"update %s set %s where %s=%%s\" % (table, assignments, con.ops.quote_name(meta.pk.column)),\n            parameters)\n    ```\n\n","slug":"Django-Notes","published":1,"updated":"2016-06-29T15:29:25.171Z","_id":"cik3sv4oj00000s37fz8ionwo","comments":1,"layout":"post","photos":[],"link":"","content":"<h2 id=\"Django-Basics\"><a href=\"#Django-Basics\" class=\"headerlink\" title=\"Django Basics\"></a>Django Basics</h2><h5 id=\"使用django的权限管理系统permission\"><a href=\"#使用django的权限管理系统permission\" class=\"headerlink\" title=\"使用django的权限管理系统permission\"></a>使用django的权限管理系统permission</h5><ul>\n<li><p>为model添加权限</p>\n  <figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">OrderList</span><span class=\"params\">(models.Model)</span>:</span></div><div class=\"line\">    id = BigIntegerAutoField(primary_key=<span class=\"keyword\">True</span>)</div><div class=\"line\">    buyer_name = models.CharField(default=<span class=\"string\">\"\"</span>,max_length=<span class=\"number\">32</span>, verbose_name=<span class=\"string\">u'买手'</span>)</div><div class=\"line\">    order_amount = models.FloatField(default=<span class=\"number\">0</span>, verbose_name=<span class=\"string\">u'金额'</span>)</div><div class=\"line\">    created = models.DateField(auto_now_add=<span class=\"keyword\">True</span>, verbose_name=<span class=\"string\">u'订货日期'</span>)</div><div class=\"line\">    updated = models.DateTimeField(auto_now=<span class=\"keyword\">True</span>, verbose_name=<span class=\"string\">u'更新日期'</span>)</div><div class=\"line\"></div><div class=\"line\">    <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Meta</span>:</span></div><div class=\"line\">        db_table = <span class=\"string\">'suplychain_flashsale_orderlist'</span></div><div class=\"line\">        verbose_name = <span class=\"string\">u'**表'</span></div><div class=\"line\">        verbose_name_plural = <span class=\"string\">u'**表'</span></div><div class=\"line\">        permissions = [(<span class=\"string\">\"change_order_list_inline\"</span>, <span class=\"string\">u\"**\"</span>),]</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__unicode__</span><span class=\"params\">(self)</span>:</span></div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">'&lt;%s,%s,%s&gt;'</span> % (str(self.id <span class=\"keyword\">or</span> <span class=\"string\">''</span>), self.id, self.buyer_name)</div></pre></td></tr></table></figure>\n</li>\n<li><p>views中可以使用如下方法来操作权限</p>\n  <figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">request<span class=\"selector-class\">.user</span><span class=\"selector-class\">.has_perm</span>(<span class=\"string\">'dinghuo.change_order_list_inline'</span>)</div></pre></td></tr></table></figure>\n</li>\n<li><p>在template中使用权限方法：</p>\n  <figure class=\"highlight django\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"xml\"></span><span class=\"template-tag\">&#123;% <span class=\"name\"><span class=\"name\">if</span></span> perms.conf %&#125;</span><span class=\"xml\"></span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>You have permission to do something in the foo app.<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>You can vote!<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></div><div class=\"line\"><span class=\"template-tag\">&#123;% <span class=\"name\"><span class=\"name\">endif</span></span> %&#125;</span><span class=\"xml\"></span></div><div class=\"line\"><span class=\"template-tag\">&#123;% <span class=\"name\"><span class=\"name\">if</span></span> perms.conf.oprater_task %&#125;</span><span class=\"xml\"></span></div><div class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>You can drive!<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>You don't have permission to do anything in the foo app.<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></div><div class=\"line\"><span class=\"template-tag\">&#123;% <span class=\"name\"><span class=\"name\">endif</span></span> %&#125;</span><span class=\"xml\"></span></div></pre></td></tr></table></figure>\n</li>\n</ul>\n<h5 id=\"在Django中MySQL的Composite-Primary-Key的实现\"><a href=\"#在Django中MySQL的Composite-Primary-Key的实现\" class=\"headerlink\" title=\"在Django中MySQL的Composite Primary Key的实现\"></a>在Django中MySQL的Composite Primary Key的实现</h5><ul>\n<li><p>Django不直接支持Composite Primary Key，但是可以如下实现。</p>\n<ul>\n<li>定义model，选择composite key中的一个作为主键。</li>\n<li><p>在model内部的Meta内，使用<strong>unique_together</strong>把composite key组织在一起。<br>例如：</p>\n<figure class=\"highlight nix\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">class Test(models.Model):</div><div class=\"line\">    <span class=\"attr\">user_id</span> = models.CharField(<span class=\"attr\">max_length=16,</span> <span class=\"attr\">primary_key=True)</span> <span class=\"comment\"># 选取user_id作为django层面的primary key</span></div><div class=\"line\">    <span class=\"attr\">item_id</span> = models.CharField(<span class=\"attr\">max_length=16)</span></div><div class=\"line\">    class Meta:</div><div class=\"line\">        <span class=\"attr\">unique_together</span> = (<span class=\"string\">\"user_id\"</span>, <span class=\"string\">\"item_id\"</span>) <span class=\"comment\"># (user_id, item_id)就是我们需要的composite primary key</span></div></pre></td></tr></table></figure>\n</li>\n<li><p>在MySQL层面（只针对MySQL数据库），对Test这个model所对应的表重新创建：</p>\n<figure class=\"highlight gauss\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">mysql&gt; <span class=\"built_in\">DROP</span> TABLE service_test; <span class=\"meta\">#丢弃Django syncdb创建的表</span></div><div class=\"line\">mysql&gt; <span class=\"keyword\">CREATE</span> TABLE service_test (</div><div class=\"line\">         user_id VARCHAR(<span class=\"number\">16</span>) <span class=\"keyword\">NOT</span> <span class=\"built_in\">NULL</span>,</div><div class=\"line\">         item_id VARCHAR(<span class=\"number\">16</span>) <span class=\"keyword\">NOT</span> <span class=\"built_in\">NULL</span>,</div><div class=\"line\">         primary <span class=\"built_in\">key</span> (user_id, item_id)</div><div class=\"line\">       ) ENGINE=InnoDB;</div></pre></td></tr></table></figure>\n</li>\n</ul>\n</li>\n</ul>\n<h5 id=\"Model字段缺省值-default\"><a href=\"#Model字段缺省值-default\" class=\"headerlink\" title=\"Model字段缺省值(default=)\"></a>Model字段缺省值(default=)</h5><ul>\n<li><p>用例:</p>\n<figure class=\"highlight haskell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"title\">created_at</span> = models.<span class=\"type\">DatetimeField</span>(<span class=\"keyword\">default</span>=datetime.datetime.now)</div><div class=\"line\"><span class=\"title\">dummy_int</span>  = models.<span class=\"type\">IntegerField</span>(<span class=\"keyword\">default</span>=0)</div></pre></td></tr></table></figure>\n</li>\n<li><p>原理:</p>\n<ul>\n<li>default值并没有写入数据库的表中：如果写入数据库表中，字段//dummy_int//的定义应包含“DEFAULT 0”；但数据库表中未有体现。</li>\n<li>django model在构造函数//%%<strong>init</strong>%%()//中设置各字段的default值:根据default=0,构造函数内就把dummy_int的值设为0.</li>\n<li>代码体现在///django/db/models/base.py//, 308-354行。</li>\n</ul>\n</li>\n<li><p>如果要让default值的设置体现在数据库表上，则要做以下改动：</p>\n<ul>\n<li><p>改动文件//django/db/backends/creation.py//:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">sql_create_model</span><span class=\"params\">(self, model, style, known_models=set<span class=\"params\">()</span>)</span>:</span></div><div class=\"line\">    ...</div><div class=\"line\">    <span class=\"comment\">## add the following code：</span></div><div class=\"line\">    <span class=\"keyword\">if</span>(f.default != models.fields.NOT_PROVIDED):</div><div class=\"line\">        <span class=\"keyword\">if</span> hasattr(f.default, <span class=\"string\">'__call__'</span>):</div><div class=\"line\">            <span class=\"keyword\">pass</span> <span class=\"comment\">## we have a little bit trouble here -- default is a python method!!!</span></div><div class=\"line\">        <span class=\"keyword\">else</span>:</div><div class=\"line\">            field_output.append(style.SQL_KEYWORD(<span class=\"string\">'DEFAULT '</span> + f.default.__str__()))</div></pre></td></tr></table></figure>\n</li>\n<li><p>什么时候需要把default值体现在数据库表中？</p>\n<ul>\n<li>一个简单的用列：更新数据库中记录，如果记录被修改，时间戳也会自动更新为修改记录的新时间；如果记录其他字段未被修改，时间戳不会变化。<ul>\n<li>在django层面，无法达到该效果。因为每次update操作，django必须设置时间戳字段的值，这样即使数据库表中其他字段没有修改，该时间戳字段也被修改了。</li>\n<li>而在数据库表里面，只要把timestamp字段设为//default CURRENT_TIMESTAMP on update CURRENT_TIMESTAMP//则可以达到理想效果：如果其他字段没有修改，时间戳也不会变化。</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>问题（注意！！）<ul>\n<li>正如上面代码中注释那样，如果在model中定义的字段的default值为python函数，比如//datetime.datetime.now//，就难以通过代码解析来设置数据库表中的default定义。</li>\n<li>如果数据库表中对相应字段已有default配置，那么model的构造函数内就不必对该字段进行default值的设置。<strong>所以这不是一项简单的工作，请不要轻易去尝试改动</strong>。</li>\n</ul>\n</li>\n<li>Reference: <a href=\"http://www.supermind.org/blog/671/django-not-setting-default-column-value-in-mysql\" target=\"_blank\" rel=\"external\">http://www.supermind.org/blog/671/django-not-setting-default-column-value-in-mysql</a></li>\n</ul>\n</li>\n</ul>\n<h5 id=\"Model主键自增\"><a href=\"#Model主键自增\" class=\"headerlink\" title=\"Model主键自增\"></a>Model主键自增</h5><ul>\n<li>用例:<figure class=\"highlight vbnet\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">d = models.AutoField(primary_key=<span class=\"literal\">True</span>)</div><div class=\"line\">这是一个自增主键(<span class=\"keyword\">auto</span>-incrementing primary <span class=\"keyword\">key</span>)如果你要指定一个自定义主键，将该字段设置为primary_key=<span class=\"literal\">True</span>。如果</div><div class=\"line\">Django看到你显式的设置了Field primary <span class=\"keyword\">key</span>，</div><div class=\"line\">它将不会增加自增id字段。每个model必须有exactly one字段设置为primary_key=<span class=\"literal\">True</span>.</div><div class=\"line\">如显示添加自己的主键：uid = models.BigIntegerField(primary_key=<span class=\"literal\">True</span>)</div><div class=\"line\">则uid需要自己在程序里去赋值或去数据库将主键更改为自增，并保证满足主键要求</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<h6 id=\"update-方法\"><a href=\"#update-方法\" class=\"headerlink\" title=\"update() 方法\"></a>update() 方法</h6><ul>\n<li><p>用例:</p>\n<figure class=\"highlight ada\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"># change User <span class=\"keyword\">record</span>: set status=<span class=\"number\">1</span> <span class=\"keyword\">for</span> <span class=\"keyword\">all</span> records that have id=<span class=\"number\">1</span>;</div><div class=\"line\"># <span class=\"keyword\">return</span> value x <span class=\"keyword\">is</span> the number <span class=\"keyword\">of</span> records that have id=<span class=\"number\">1</span>.</div><div class=\"line\">x = User.objects.filter(id=<span class=\"number\">1</span>).update(status=<span class=\"number\">1</span>)</div></pre></td></tr></table></figure>\n</li>\n<li><p>如果希望update()返回被更新的记录数(而不是满足filter条件的记录数),需要改变文件///django/db/backends/mysql/base.py//:</p>\n<ul>\n<li><p>源代码如下:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># We need the number of potentially affected rows after an</span></div><div class=\"line\"><span class=\"comment\"># \"UPDATE\", not the number of changed rows.</span></div><div class=\"line\">kwargs[<span class=\"string\">'client_flag'</span>] = CLIENT.FOUND_ROWS</div></pre></td></tr></table></figure>\n</li>\n<li><p>改为:</p>\n<figure class=\"highlight prolog\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">kwargs[<span class=\"string\">'client_flag'</span>] = <span class=\"symbol\">CLIENT</span>.<span class=\"symbol\">MULTI_RESULTS</span></div></pre></td></tr></table></figure>\n</li>\n</ul>\n</li>\n</ul>\n<h5 id=\"save-方法\"><a href=\"#save-方法\" class=\"headerlink\" title=\"save() 方法\"></a>save() 方法</h5><ul>\n<li><p>内部处理流程:</p>\n<figure class=\"highlight lsl\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"number\">1</span>) 发出一个预存信号。 它发出一个将要存储一个对象的通知。你可以注册一个监听程序，</div><div class=\"line\">在信号发出的时候就会被调用。</div><div class=\"line\"></div><div class=\"line\"><span class=\"number\">2</span>) 预处理数据. 对于对象的每个字段，将根据需要进行自动的数据修改。大部分字段并不预处理</div><div class=\"line\">，它们会保持它们原来的样子。预处理仅仅用在那些有特殊性质的字段，比如文件字段。</div><div class=\"line\"></div><div class=\"line\"><span class=\"number\">3</span>) 为数据库准备数据。 每一个字段先要把当前值转化成数据库中可以保存的数据的类型。</div><div class=\"line\">大多数字段的数据不需要预先准备。简单的数据类型，比如整型和字符串等python对象可以直接写进数据库。</div><div class=\"line\">然而，更复杂的数据类型需要做一些修改。比如， DateFields 使用python的 datetime 对象来存储数据。</div><div class=\"line\">数据库并不能存储 datetime 对象，所以该字段要存入数据库先要把值转化为符合ISO标准的日期字符串。</div><div class=\"line\"></div><div class=\"line\"><span class=\"number\">4</span>) 向数据库中插入数据。 经过预处理准备好的数据然后会组合成一条SQL语句来插入数据库。</div><div class=\"line\"></div><div class=\"line\"><span class=\"number\">5</span>) 发出存毕信号。 与预存信号类似，存毕信号在对象成功保存之后发出。同样，这些信号也还没有文档化。</div></pre></td></tr></table></figure>\n</li>\n<li><p>处理原则：<figure class=\"highlight lasso\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"number\">1</span>) 如果对象的主键属性被设置成相当于 <span class=\"literal\">True</span> 的值（比如 <span class=\"literal\">None</span> 或者空字符串之外的值），Django会执行一个 <span class=\"keyword\">SELECT</span> 查询来检测是否已存在一个相同主键的记录。</div><div class=\"line\"></div><div class=\"line\"><span class=\"number\">2</span>) 如果已经存在一个主键相同的记录，Django就执行 UPDATE 查询。</div><div class=\"line\"></div><div class=\"line\"><span class=\"number\">3</span>) 如果对象的主键属性 没有 被设置，或者被设置但数据库中没有与之同主键的记录，那么Django就会执行 INSERT 插入。</div></pre></td></tr></table></figure></p>\n</li>\n</ul>\n<h5 id=\"类实例序列化与反序列化\"><a href=\"#类实例序列化与反序列化\" class=\"headerlink\" title=\"类实例序列化与反序列化\"></a>类实例序列化与反序列化</h5><ul>\n<li>对于django中Model对象:<code python=\"\"><br>from django.core import serializers<br>serializers.serialize(‘json’, queryset, indent=2,<br>use_natural_keys=True)//序列化<br>serializers.deserialize(“json”, sstring)//反序列化<br>这种方式的反序列化后是一个DeserializeObject包装类</code></li>\n<li>使用对于一般的复杂对象：<code python=\"\"><br>import jsonpickle<br>pickled = jsonpickle.encode(obj)//序列化<br>unpickled = jsonpickle.decode(pickled)//反序列化<br>反序列化后是一个新的类对象</code></li>\n<li>jsonpickle的安装：<code><br>先要安装pip工具:sudo apt-get install python-pip。<br>然后执行命令：pip install -U jsonpickle。</code></li>\n<li>参考：[[<a href=\"http://zhdoc.bitsrv.net/django/html/topics/serialization.html]]and[[http://jsonpickle.github.com/\" target=\"_blank\" rel=\"external\">http://zhdoc.bitsrv.net/django/html/topics/serialization.html]]and[[http://jsonpickle.github.com/</a>]]</li>\n</ul>\n<h6 id=\"django中静态文件路径配置\"><a href=\"#django中静态文件路径配置\" class=\"headerlink\" title=\"django中静态文件路径配置\"></a>django中静态文件路径配置</h6><ul>\n<li>首先，在settings.py中加入一条静态路径的常量：<code python=\"\"><br>STATIC_FILE_ROOT=’/home/meixqhi/workspace/django/src/fbproject’<br></code></li>\n<li>其次，在urls.py文件中加入以下内容:<code python=\"\"><br>from settings import STATIC_FILE_ROOT<br>(r’^static/(?P<path></path>.*)’,’django.views.static.serve’,{‘document_root’: ‘%s/static/‘ % STATIC_FILE_ROOT}),<br></code></li>\n<li>然后就可以通过以下路径来访问STATIC_FILE_ROOT路径下static目录中的静态文件了:<code><br><a href=\"http://domain/apppath/static/home.html\" target=\"_blank\" rel=\"external\">http://domain/apppath/static/home.html</a><br></code></li>\n</ul>\n<h5 id=\"paginator\"><a href=\"#paginator\" class=\"headerlink\" title=\"paginator\"></a>paginator</h5><p>  *分页 <code><br>   from django.core.paginator import Paginator<br>   from models import Weibo</code></p>\n<p>   queryset = Weibo.objects.all()<br>   paginator = Paginator(queryset, 5)<br>   page = paginator.page(1)<br>   page.object_list</p>\n<h5 id=\"Import-module-model\"><a href=\"#Import-module-model\" class=\"headerlink\" title=\"Import module,model\"></a>Import module,model</h5><ul>\n<li><p>动态加载module,model：<code><br>from django.utils.importlib import import_module<br>import_module(module)</code></p>\n<p>from django.db import model<br>model = models.get_model(‘weibo’, ‘weibo’) #(app_label,model_name)</p>\n</li>\n</ul>\n<h5 id=\"Signal\"><a href=\"#Signal\" class=\"headerlink\" title=\"Signal\"></a>Signal</h5><ul>\n<li>Signal机制 <code><pre><code>function:\n</code></pre>connect(self, receiver, sender=None, weak=True, dispatch_uid=None)<br>send(self, sender, <strong>named):<br>decoretor:<br>receiver(signal, </strong>kwargs):</code></li>\n<li>使用方法：<ul>\n<li>声明：<code><br>from django.dispatch import Signal<br>user_logged_in = Signal(providing_args=[‘request’, ‘user’])</code></li>\n<li>注册你要触发的方法：<code><br>def logged_status(user,access_token):<br>user.is_active = True<br>user_logged_in.connect(logged_status,sender=user.<strong>class</strong>) #sender不传参,则sender默认为None,表示响应所有的send信号 </code></li>\n<li>在某个你要触发某个方法的地方发送消息，让这些注册的方法执行：<code><br>user_logged_in.send(sender=user.<strong>class</strong>, user=user, access_token=request.session.get(‘access_token’, None))</code></li>\n<li>如果要防止某个方法在module重复加载时也被重复监听，可以在connect方法中添加唯一的标识：dispatch_uid=’my_update_blogs’</li>\n<li>由于监听方法默认状态weak=True是不保证一定会执行的，由于方法的弱引用会在资源不够的时候被垃圾回收器回收，如果一定要执行，则需显示在connect中设置weak=False。</li>\n</ul>\n</li>\n</ul>\n<h5 id=\"Django-Deployment\"><a href=\"#Django-Deployment\" class=\"headerlink\" title=\"Django Deployment\"></a>Django Deployment</h5><ul>\n<li>Install //libapache2-mod-wsgi//: \\ <code><br>sudo apt-get install libapache2-mod-wsgi </code></li>\n<li>Suppose you have django project //system// under directory ///srv/internals//: <code><br>cd /srv/internals/system<br>mkdir apache </code></li>\n<li><p>Create file //django.wsgi// under directory //apache//, the file contains: <code python=\"\"><br>import os<br>import sys</code></p>\n<p>path = ‘/srv/internals’<br>if path not in sys.path:</p>\n<pre><code>sys.path.append(path)\nsys.path.append(path+&quot;/system&quot;)\n</code></pre><p>os.environ[‘DJANGO_SETTINGS_MODULE’] = ‘system.settings’</p>\n<p>import django.core.handlers.wsgi<br>application = django.core.handlers.wsgi.WSGIHandler() </p>\n</li>\n<li><p>Edit // /etc/apache2/httpd.conf//, adding the following: \\ <code bash=\"\"><br>Alias /system/media /srv/internals/system/media/   # make sure directory ‘media’ exists<br>Alias /system/static /srv/internals/system/static/ # make sure directory ‘static’ exists</code></p>\n<directory srv=\"\" internals=\"\" system=\"\" media=\"\"><br>    AllowOverride All<br>    Order deny,allow<br>    Allow from all<br></directory>\n\n<directory srv=\"\" internals=\"\" system=\"\" static=\"\"><br>    Order deny,allow<br>    Allow from all<br></directory>\n\n<p>WSGIScriptAlias /internal /srv/internals/system/apache/django.wsgi</p>\n<p><directory srv=\"\" internals=\"\" system=\"\" apache=\"\"></directory></p>\n<pre><code>Order deny,allow\nAllow from all\n</code></pre><p> </p>\n</li>\n<li>Edit ///srv/internals/system/settings.py//: <code bash=\"\"><br>MEDIA_ROOT = ‘/srv/internals/system/media/‘<br>MEDIA_URL = ‘/system/media/‘ # http://<your_domain>/system/media points to /srv/internals/system/media<br>STATIC_ROOT = ‘/srv/internals/system/static/‘<br>STATIC_URL = ‘/system/static/‘<br>ADMIN_MEDIA_PREFIX = ‘/system/static/admin/‘<br>ROOT_URLCONF = ‘system.urls’ </your_domain></code></li>\n<li>Visit the django project via http: <code><br>http://<your_domain>/internal/admin/<br>http://<your_domain>/internal/<app_name> # visit application with name “app_name”</app_name></your_domain></your_domain></code></li>\n<li><strong>Keep Admin Style</strong>: \\ <code><br>cd /srv/internals/system/static/admin/<br>cp -rf /usr/local/lib/python2.7/dist-packages/Django-1.3-py2.7.egg/django/contrib/admin/media/<em> .<br>or<br>cp -rf /usr/local/lib/python2.7/dist-packages/django/contrib/admin/media/</em> . </code></li>\n<li><strong>Unicode Decoding Error</strong>: (uploading file and filename has //non-ascii// characters) add the following to ///etc/apache2/envvars//: <code bash=\"\"><br>export LANG=’en_US.UTF-8’<br>export LC_ALL=’en_US.UTF-8’ </code></li>\n<li>Debug with apache: <code><br>apache2ctl -k restart # with root<br>tail -f /var/log/apache/error.log </code></li>\n</ul>\n<p>===== Django DB Schema Migration with South =====<br>====  For Django &lt; 1.7   ====</p>\n<ul>\n<li>往Django App //tagtex.qpoints// 的表内增加一个字段：<ul>\n<li>初始化: <code><br>python manage.py schemamigration tagtex.qpoints –initial<br>(如果APP执行过syncdb操作，需要执行以下操作： python manage.py migrate tagtex.qpoints –fake )</code></li>\n<li>修改表，增加字段</li>\n<li>进行migration: <code><br>python manage.py schemamigration tagtex.qpoints –auto<br>python manage.py migrate tagtex.qpoints </code></li>\n</ul>\n</li>\n</ul>\n<p>====  For Django &gt; 1.7   ====</p>\n<ul>\n<li>south 操作命令:<code><br>$ python manage.py makemigrations [appname]<br>$ python manage.py migrate [appname]<br></code><br>===== Django Developement Tips =====<br><a href=\"http://ericholscher.com/blog/2008/oct/5/django-tips/\" target=\"_blank\" rel=\"external\">http://ericholscher.com/blog/2008/oct/5/django-tips/</a></li>\n</ul>\n<p>===== django-middleware =====</p>\n<ul>\n<li>django 中间件</li>\n<li>编写自己的中间件需要实现下面一个或几个方法：<ul>\n<li>process_request(self, request)：返回None或HttpResponse。</li>\n<li>process_view(self, request, view_func, view_args, view_kwargs)：djangoview处理中间件返回None或HttpResponse。</li>\n<li>process_exception(request, e):该中间件对业务处理方法执行未捕获的异常进行处理。</li>\n<li>process_template_response(request, response):如果返回的TemplateResponse含有可执行的render方法，则该中间件生效。</li>\n<li>process_response(self, request, response):返回HttpResponse。</li>\n</ul>\n</li>\n<li>参考：<a href=\"https://docs.djangoproject.com/en/1.3/topics/http/middleware/\" target=\"_blank\" rel=\"external\">https://docs.djangoproject.com/en/1.3/topics/http/middleware/</a></li>\n<li>code参考django源代码：django/core/handlers/base.py中get_response</li>\n</ul>\n<p>===== django-profile-middleware =====</p>\n<ul>\n<li>profile是一款能够记录程序方法或请求在运行过程调用了多少其他方法，以及每个方法消耗了多少时间及系统资源的python工具</li>\n<li>使用步骤：<ul>\n<li>先安装 python-profiler <code><br>sudo apt-get install python-profiler</code></li>\n<li>创建ProfileMiddleware类,参考：<a href=\"http://djangosnippets.org/snippets/605/\" target=\"_blank\" rel=\"external\">http://djangosnippets.org/snippets/605/</a></li>\n<li>将类路径名加入settings.py里的MIDDLEWARE_CLASSES中 <code><br>MIDDLEWARE_CLASSES = (<br>  ‘tagtex.base.middleware.ProfileMiddleware’,<br>  )</code></li>\n<li>运行server，发送请求<figure class=\"highlight groovy\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">如<span class=\"string\">http:</span><span class=\"comment\">//&lt;yourserver&gt;/yoururl/?prof&amp;params</span></div></pre></td></tr></table></figure>\n</li>\n</ul>\n</li>\n</ul>\n<p>===== mockserver =====</p>\n<ul>\n<li>mockserver的主要功能是通过代理记录上次请求的状态并保存，并为下次请求返回相同的结果。</li>\n<li><p>使用步骤：</p>\n<ul>\n<li><p>先安装mock_server</p>\n<figure class=\"highlight autoit\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">git+ssh://git<span class=\"symbol\">@s2</span>/django-mock-server.git<span class=\"meta\">#egg=django-mock-server (也可以直接下载)</span></div></pre></td></tr></table></figure>\n</li>\n<li><p>然后将recorder app添加到settings.py的INSTALLED_APPS中</p>\n<figure class=\"highlight lisp\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">INSTALLED_APPS = (</div><div class=\"line\">    'mock_server.recorder'</div><div class=\"line\">  )</div></pre></td></tr></table></figure>\n</li>\n<li><p>设置代理url</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">from</span> django.conf.urls.defaults <span class=\"keyword\">import</span> patterns, include, url</div><div class=\"line\"><span class=\"keyword\">from</span> mock_server.recorder.views <span class=\"keyword\">import</span> RecordView,PlaybackView</div><div class=\"line\"><span class=\"keyword\">from</span> mock_server.recorder.recorder <span class=\"keyword\">import</span> Recorder</div><div class=\"line\">SITE_API_ENDPOINT = <span class=\"string\">'你要访问的站点域名或http://ip:port'</span></div><div class=\"line\"></div><div class=\"line\">recorder = Recorder(format=<span class=\"string\">'http://localhost:8000%s'</span>)</div><div class=\"line\"></div><div class=\"line\">urlpatterns = patterns(<span class=\"string\">''</span>,</div><div class=\"line\"></div><div class=\"line\">    url(<span class=\"string\">r'^(?P&lt;url&gt;.*)$'</span>, RecordView.as_view(recorder=recorder,proxy_format=<span class=\"string\">'%s/%%s'</span>%SITE_API_ENDPOINT),name=<span class=\"string\">'site_api'</span>),</div><div class=\"line\">    <span class=\"comment\">#url(r'^(?P&lt;url&gt;.*)$', PlaybackView.as_view(recorder=recorder,proxy_format='%s/%%s'%SITE_API_ENDPOINT),name='site_api'),</span></div><div class=\"line\">)</div></pre></td></tr></table></figure>\n</li>\n<li><p>使用前先使用第一条url，RecordView，注释掉第二条，启动服务器，将你要mock的所有请求都先都由mockserver来代理，mockserver会将所有请求都记录保存到数据库。</p>\n</li>\n<li>然后再打开第二条url，Playback回放，注释掉第一条，所有请求都会返回之前一样的结果。</li>\n</ul>\n</li>\n</ul>\n<h5 id=\"Override-Runserver-Command\"><a href=\"#Override-Runserver-Command\" class=\"headerlink\" title=\"Override Runserver Command\"></a>Override Runserver Command</h5><ul>\n<li>To override <strong>runserver</strong> Command,<br>add the following to into //management/commands/runnserver.py//:<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Command</span><span class=\"params\">(BaseRunserverCommand)</span>:</span></div><div class=\"line\">    option_list = BaseRunserverCommand.option_list + (</div><div class=\"line\">        make_option(<span class=\"string\">'--adminmedia'</span>, dest=<span class=\"string\">'admin_media_path'</span>, default=<span class=\"string\">''</span>,</div><div class=\"line\">            help=<span class=\"string\">'Specifies the directory from which to serve admin media.'</span>),</div><div class=\"line\">    )</div><div class=\"line\"></div><div class=\"line\">    <span class=\"string\">\"\"\"</span></div><div class=\"line\">    Change the runserver default port to 9000. The method can be generically applied if</div><div class=\"line\">    the default port needs to be changed.</div><div class=\"line\">    \"\"\"</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">handle</span><span class=\"params\">(self, addrport=<span class=\"string\">\"9000\"</span>, *args, **options)</span>:</span></div><div class=\"line\">        super(Command, self).handle(addrport, *args, **options)</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">get_handler</span><span class=\"params\">(self, *args, **options)</span>:</span></div><div class=\"line\">        <span class=\"string\">\"\"\"</span></div><div class=\"line\">        Serves admin media like old-school (deprecation pending).</div><div class=\"line\">        \"\"\"</div><div class=\"line\"></div><div class=\"line\">        handler = super(Command, self).get_handler(*args, **options)</div><div class=\"line\">        <span class=\"keyword\">return</span> AdminMediaHandler(handler, options.get(<span class=\"string\">'admin_media_path'</span>, <span class=\"string\">''</span>))</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<h5 id=\"数据导入导出\"><a href=\"#数据导入导出\" class=\"headerlink\" title=\"数据导入导出\"></a>数据导入导出</h5><ul>\n<li><p>数据导出:</p>\n<figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">python manage<span class=\"selector-class\">.py</span> dumpdata logistics<span class=\"selector-class\">.LogisticsCompany</span> --indent=<span class=\"number\">2</span> --format=json --natural &gt;fixtures/initial_logistics_company.json</div></pre></td></tr></table></figure>\n</li>\n<li><p>数据导入:</p>\n<figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">python manage<span class=\"selector-class\">.py</span> loaddata fixtures/initial_logistics_company.json</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<h5 id=\"多个queryset-合并成一个\"><a href=\"#多个queryset-合并成一个\" class=\"headerlink\" title=\"多个queryset 合并成一个\"></a>多个queryset 合并成一个</h5><ul>\n<li>django<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">from</span> itertools <span class=\"keyword\">import</span> islice, chain</div><div class=\"line\"></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">QuerySetChain</span><span class=\"params\">(object)</span>:</span></div><div class=\"line\">    <span class=\"string\">\"\"\"</span></div><div class=\"line\">    Chains multiple subquerysets (possibly of different models) and behaves as</div><div class=\"line\">    one queryset.  Supports minimal methods needed for use with</div><div class=\"line\">    django.core.paginator.</div><div class=\"line\">    \"\"\"</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span><span class=\"params\">(self, *subquerysets)</span>:</span></div><div class=\"line\">        self.querysets = subquerysets</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">count</span><span class=\"params\">(self)</span>:</span></div><div class=\"line\">        <span class=\"string\">\"\"\"</span></div><div class=\"line\">        Performs a .count() for all subquerysets and returns the number of</div><div class=\"line\">        records as an integer.</div><div class=\"line\">        \"\"\"</div><div class=\"line\">        <span class=\"keyword\">return</span> sum(qs.count() <span class=\"keyword\">for</span> qs <span class=\"keyword\">in</span> self.querysets)</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">_clone</span><span class=\"params\">(self)</span>:</span></div><div class=\"line\">        <span class=\"string\">\"Returns a clone of this queryset chain\"</span></div><div class=\"line\">        <span class=\"keyword\">return</span> self.__class__(*self.querysets)</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">_all</span><span class=\"params\">(self)</span>:</span></div><div class=\"line\">        <span class=\"string\">\"Iterates records in all subquerysets\"</span></div><div class=\"line\">        <span class=\"keyword\">return</span> chain(*self.querysets)</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__getitem__</span><span class=\"params\">(self, ndx)</span>:</span></div><div class=\"line\">        <span class=\"string\">\"\"\"</span></div><div class=\"line\">        Retrieves an item or slice from the chained set of results from all</div><div class=\"line\">        subquerysets.</div><div class=\"line\">        \"\"\"</div><div class=\"line\">        <span class=\"keyword\">if</span> type(ndx) <span class=\"keyword\">is</span> slice:</div><div class=\"line\">            <span class=\"keyword\">return</span> list(islice(self._all(), ndx.start, ndx.stop, ndx.step <span class=\"keyword\">or</span> <span class=\"number\">1</span>))</div><div class=\"line\">        <span class=\"keyword\">else</span>:</div><div class=\"line\">            <span class=\"keyword\">return</span> islice(self._all(), ndx, ndx+<span class=\"number\">1</span>).next()</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<h5 id=\"django批量添加和更新\"><a href=\"#django批量添加和更新\" class=\"headerlink\" title=\"django批量添加和更新\"></a>django批量添加和更新</h5><ul>\n<li>django insert&amp;update:<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">insert_many</span><span class=\"params\">(objects, using=<span class=\"string\">\"default\"</span>)</span>:</span></div><div class=\"line\">    <span class=\"string\">\"\"\"Insert list of Django objects in one SQL query. Objects must be</span></div><div class=\"line\">    of the same Django model. Note that save is not called and signals</div><div class=\"line\">    on the model are not raised.\"\"\"</div><div class=\"line\">    <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> objects:</div><div class=\"line\">        <span class=\"keyword\">return</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">import</span> django.db.models</div><div class=\"line\">    <span class=\"keyword\">from</span> django.db <span class=\"keyword\">import</span> connections</div><div class=\"line\">    con = connections[using]</div><div class=\"line\"></div><div class=\"line\">    model = objects[<span class=\"number\">0</span>].__class__</div><div class=\"line\">    fields = [f <span class=\"keyword\">for</span> f <span class=\"keyword\">in</span> model._meta.fields <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> isinstance(f, django.db.models.AutoField)]</div><div class=\"line\">    parameters = []</div><div class=\"line\">    <span class=\"keyword\">for</span> o <span class=\"keyword\">in</span> objects:</div><div class=\"line\">        parameters.append(tuple(f.get_db_prep_save(f.pre_save(o, <span class=\"keyword\">True</span>), connection=con) <span class=\"keyword\">for</span> f <span class=\"keyword\">in</span> fields))</div><div class=\"line\"></div><div class=\"line\">    table = model._meta.db_table</div><div class=\"line\">    column_names = <span class=\"string\">\",\"</span>.join(con.ops.quote_name(f.column) <span class=\"keyword\">for</span> f <span class=\"keyword\">in</span> fields)</div><div class=\"line\">    placeholders = <span class=\"string\">\",\"</span>.join((<span class=\"string\">\"%s\"</span>,) * len(fields))</div><div class=\"line\">    con.cursor().executemany(</div><div class=\"line\">        <span class=\"string\">\"insert into %s (%s) values (%s)\"</span> % (table, column_names, placeholders),</div><div class=\"line\">        parameters)</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">update_many</span><span class=\"params\">(objects, fields=[], using=<span class=\"string\">\"default\"</span>)</span>:</span></div><div class=\"line\">    <span class=\"string\">\"\"\"Update list of Django objects in one SQL query,</span></div><div class=\"line\">     optionally only overwrite the given fields (as names, e.g. fields=[\"foo\"]).</div><div class=\"line\">    Objects must be of the same Django model.</div><div class=\"line\">    Note that save is not called and signals on the model are not raised.\"\"\"</div><div class=\"line\">    <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> objects:</div><div class=\"line\">        <span class=\"keyword\">return</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">import</span> django.db.models</div><div class=\"line\">    <span class=\"keyword\">from</span> django.db <span class=\"keyword\">import</span> connections</div><div class=\"line\">    con = connections[using]</div><div class=\"line\"></div><div class=\"line\">    names = fields</div><div class=\"line\">    meta = objects[<span class=\"number\">0</span>]._meta</div><div class=\"line\">    fields = [f <span class=\"keyword\">for</span> f <span class=\"keyword\">in</span> meta.fields <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> isinstance(f, django.db.models.AutoField) <span class=\"keyword\">and</span> (<span class=\"keyword\">not</span> names <span class=\"keyword\">or</span> f.name <span class=\"keyword\">in</span> names)]</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> fields:</div><div class=\"line\">        <span class=\"keyword\">raise</span> ValueError(<span class=\"string\">\"No fields to update, field names are %s.\"</span> % names)</div><div class=\"line\"></div><div class=\"line\">    fields_with_pk = fields + [meta.pk]</div><div class=\"line\">    parameters = []</div><div class=\"line\">    <span class=\"keyword\">for</span> o <span class=\"keyword\">in</span> objects:</div><div class=\"line\">        parameters.append(tuple(f.get_db_prep_save(f.pre_save(o, <span class=\"keyword\">True</span>), connection=con) <span class=\"keyword\">for</span> f <span class=\"keyword\">in</span> fields_with_pk))</div><div class=\"line\"></div><div class=\"line\">    table = meta.db_table</div><div class=\"line\">    assignments = <span class=\"string\">\",\"</span>.join((<span class=\"string\">\"%s=%%s\"</span>% con.ops.quote_name(f.column)) <span class=\"keyword\">for</span> f <span class=\"keyword\">in</span> fields)</div><div class=\"line\">    con.cursor().executemany(</div><div class=\"line\">        <span class=\"string\">\"update %s set %s where %s=%%s\"</span> % (table, assignments, con.ops.quote_name(meta.pk.column)),</div><div class=\"line\">        parameters)</div></pre></td></tr></table></figure>\n</li>\n</ul>\n","excerpt":"","more":"<h2 id=\"Django-Basics\"><a href=\"#Django-Basics\" class=\"headerlink\" title=\"Django Basics\"></a>Django Basics</h2><h5 id=\"使用django的权限管理系统permission\"><a href=\"#使用django的权限管理系统permission\" class=\"headerlink\" title=\"使用django的权限管理系统permission\"></a>使用django的权限管理系统permission</h5><ul>\n<li><p>为model添加权限</p>\n  <figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">OrderList</span><span class=\"params\">(models.Model)</span>:</span></div><div class=\"line\">    id = BigIntegerAutoField(primary_key=<span class=\"keyword\">True</span>)</div><div class=\"line\">    buyer_name = models.CharField(default=<span class=\"string\">\"\"</span>,max_length=<span class=\"number\">32</span>, verbose_name=<span class=\"string\">u'买手'</span>)</div><div class=\"line\">    order_amount = models.FloatField(default=<span class=\"number\">0</span>, verbose_name=<span class=\"string\">u'金额'</span>)</div><div class=\"line\">    created = models.DateField(auto_now_add=<span class=\"keyword\">True</span>, verbose_name=<span class=\"string\">u'订货日期'</span>)</div><div class=\"line\">    updated = models.DateTimeField(auto_now=<span class=\"keyword\">True</span>, verbose_name=<span class=\"string\">u'更新日期'</span>)</div><div class=\"line\"></div><div class=\"line\">    <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Meta</span>:</span></div><div class=\"line\">        db_table = <span class=\"string\">'suplychain_flashsale_orderlist'</span></div><div class=\"line\">        verbose_name = <span class=\"string\">u'**表'</span></div><div class=\"line\">        verbose_name_plural = <span class=\"string\">u'**表'</span></div><div class=\"line\">        permissions = [(<span class=\"string\">\"change_order_list_inline\"</span>, <span class=\"string\">u\"**\"</span>),]</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__unicode__</span><span class=\"params\">(self)</span>:</span></div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">'&lt;%s,%s,%s&gt;'</span> % (str(self.id <span class=\"keyword\">or</span> <span class=\"string\">''</span>), self.id, self.buyer_name)</div></pre></td></tr></table></figure>\n</li>\n<li><p>views中可以使用如下方法来操作权限</p>\n  <figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">request<span class=\"selector-class\">.user</span><span class=\"selector-class\">.has_perm</span>(<span class=\"string\">'dinghuo.change_order_list_inline'</span>)</div></pre></td></tr></table></figure>\n</li>\n<li><p>在template中使用权限方法：</p>\n  <figure class=\"highlight django\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"xml\"></span><span class=\"template-tag\">&#123;% <span class=\"name\"><span class=\"name\">if</span></span> perms.conf %&#125;</span><span class=\"xml\"></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>You have permission to do something in the foo app.<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>You can vote!<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></div><div class=\"line\"></span><span class=\"template-tag\">&#123;% <span class=\"name\"><span class=\"name\">endif</span></span> %&#125;</span><span class=\"xml\"></div><div class=\"line\"></span><span class=\"template-tag\">&#123;% <span class=\"name\"><span class=\"name\">if</span></span> perms.conf.oprater_task %&#125;</span><span class=\"xml\"></div><div class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>You can drive!<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>You don't have permission to do anything in the foo app.<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></div><div class=\"line\"></span><span class=\"template-tag\">&#123;% <span class=\"name\"><span class=\"name\">endif</span></span> %&#125;</span><span class=\"xml\"></span></div></pre></td></tr></table></figure>\n</li>\n</ul>\n<h5 id=\"在Django中MySQL的Composite-Primary-Key的实现\"><a href=\"#在Django中MySQL的Composite-Primary-Key的实现\" class=\"headerlink\" title=\"在Django中MySQL的Composite Primary Key的实现\"></a>在Django中MySQL的Composite Primary Key的实现</h5><ul>\n<li><p>Django不直接支持Composite Primary Key，但是可以如下实现。</p>\n<ul>\n<li>定义model，选择composite key中的一个作为主键。</li>\n<li><p>在model内部的Meta内，使用<strong>unique_together</strong>把composite key组织在一起。<br>例如：</p>\n<figure class=\"highlight nix\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">class Test(models.Model):</div><div class=\"line\">    <span class=\"attr\">user_id</span> = models.CharField(<span class=\"attr\">max_length=16,</span> <span class=\"attr\">primary_key=True)</span> <span class=\"comment\"># 选取user_id作为django层面的primary key</span></div><div class=\"line\">    <span class=\"attr\">item_id</span> = models.CharField(<span class=\"attr\">max_length=16)</span></div><div class=\"line\">    class Meta:</div><div class=\"line\">        <span class=\"attr\">unique_together</span> = (<span class=\"string\">\"user_id\"</span>, <span class=\"string\">\"item_id\"</span>) <span class=\"comment\"># (user_id, item_id)就是我们需要的composite primary key</span></div></pre></td></tr></table></figure>\n</li>\n<li><p>在MySQL层面（只针对MySQL数据库），对Test这个model所对应的表重新创建：</p>\n<figure class=\"highlight gauss\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">mysql&gt; <span class=\"built_in\">DROP</span> TABLE service_test; <span class=\"meta\">#丢弃Django syncdb创建的表</span></div><div class=\"line\">mysql&gt; <span class=\"keyword\">CREATE</span> TABLE service_test (</div><div class=\"line\">         user_id VARCHAR(<span class=\"number\">16</span>) <span class=\"keyword\">NOT</span> <span class=\"built_in\">NULL</span>,</div><div class=\"line\">         item_id VARCHAR(<span class=\"number\">16</span>) <span class=\"keyword\">NOT</span> <span class=\"built_in\">NULL</span>,</div><div class=\"line\">         primary <span class=\"built_in\">key</span> (user_id, item_id)</div><div class=\"line\">       ) ENGINE=InnoDB;</div></pre></td></tr></table></figure>\n</li>\n</ul>\n</li>\n</ul>\n<h5 id=\"Model字段缺省值-default\"><a href=\"#Model字段缺省值-default\" class=\"headerlink\" title=\"Model字段缺省值(default=)\"></a>Model字段缺省值(default=)</h5><ul>\n<li><p>用例:</p>\n<figure class=\"highlight haskell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"title\">created_at</span> = models.<span class=\"type\">DatetimeField</span>(<span class=\"keyword\">default</span>=datetime.datetime.now)</div><div class=\"line\"><span class=\"title\">dummy_int</span>  = models.<span class=\"type\">IntegerField</span>(<span class=\"keyword\">default</span>=0)</div></pre></td></tr></table></figure>\n</li>\n<li><p>原理:</p>\n<ul>\n<li>default值并没有写入数据库的表中：如果写入数据库表中，字段//dummy_int//的定义应包含“DEFAULT 0”；但数据库表中未有体现。</li>\n<li>django model在构造函数//%%<strong>init</strong>%%()//中设置各字段的default值:根据default=0,构造函数内就把dummy_int的值设为0.</li>\n<li>代码体现在///django/db/models/base.py//, 308-354行。</li>\n</ul>\n</li>\n<li><p>如果要让default值的设置体现在数据库表上，则要做以下改动：</p>\n<ul>\n<li><p>改动文件//django/db/backends/creation.py//:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">sql_create_model</span><span class=\"params\">(self, model, style, known_models=set<span class=\"params\">()</span>)</span>:</span></div><div class=\"line\">    ...</div><div class=\"line\">    <span class=\"comment\">## add the following code：</span></div><div class=\"line\">    <span class=\"keyword\">if</span>(f.default != models.fields.NOT_PROVIDED):</div><div class=\"line\">        <span class=\"keyword\">if</span> hasattr(f.default, <span class=\"string\">'__call__'</span>):</div><div class=\"line\">            <span class=\"keyword\">pass</span> <span class=\"comment\">## we have a little bit trouble here -- default is a python method!!!</span></div><div class=\"line\">        <span class=\"keyword\">else</span>:</div><div class=\"line\">            field_output.append(style.SQL_KEYWORD(<span class=\"string\">'DEFAULT '</span> + f.default.__str__()))</div></pre></td></tr></table></figure>\n</li>\n<li><p>什么时候需要把default值体现在数据库表中？</p>\n<ul>\n<li>一个简单的用列：更新数据库中记录，如果记录被修改，时间戳也会自动更新为修改记录的新时间；如果记录其他字段未被修改，时间戳不会变化。<ul>\n<li>在django层面，无法达到该效果。因为每次update操作，django必须设置时间戳字段的值，这样即使数据库表中其他字段没有修改，该时间戳字段也被修改了。</li>\n<li>而在数据库表里面，只要把timestamp字段设为//default CURRENT_TIMESTAMP on update CURRENT_TIMESTAMP//则可以达到理想效果：如果其他字段没有修改，时间戳也不会变化。</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>问题（注意！！）<ul>\n<li>正如上面代码中注释那样，如果在model中定义的字段的default值为python函数，比如//datetime.datetime.now//，就难以通过代码解析来设置数据库表中的default定义。</li>\n<li>如果数据库表中对相应字段已有default配置，那么model的构造函数内就不必对该字段进行default值的设置。<strong>所以这不是一项简单的工作，请不要轻易去尝试改动</strong>。</li>\n</ul>\n</li>\n<li>Reference: <a href=\"http://www.supermind.org/blog/671/django-not-setting-default-column-value-in-mysql\">http://www.supermind.org/blog/671/django-not-setting-default-column-value-in-mysql</a></li>\n</ul>\n</li>\n</ul>\n<h5 id=\"Model主键自增\"><a href=\"#Model主键自增\" class=\"headerlink\" title=\"Model主键自增\"></a>Model主键自增</h5><ul>\n<li>用例:<figure class=\"highlight vbnet\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">d = models.AutoField(primary_key=<span class=\"literal\">True</span>)</div><div class=\"line\">这是一个自增主键(<span class=\"keyword\">auto</span>-incrementing primary <span class=\"keyword\">key</span>)如果你要指定一个自定义主键，将该字段设置为primary_key=<span class=\"literal\">True</span>。如果</div><div class=\"line\">Django看到你显式的设置了Field primary <span class=\"keyword\">key</span>，</div><div class=\"line\">它将不会增加自增id字段。每个model必须有exactly one字段设置为primary_key=<span class=\"literal\">True</span>.</div><div class=\"line\">如显示添加自己的主键：uid = models.BigIntegerField(primary_key=<span class=\"literal\">True</span>)</div><div class=\"line\">则uid需要自己在程序里去赋值或去数据库将主键更改为自增，并保证满足主键要求</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<h6 id=\"update-方法\"><a href=\"#update-方法\" class=\"headerlink\" title=\"update() 方法\"></a>update() 方法</h6><ul>\n<li><p>用例:</p>\n<figure class=\"highlight ada\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"># change User <span class=\"keyword\">record</span>: set status=<span class=\"number\">1</span> <span class=\"keyword\">for</span> <span class=\"keyword\">all</span> records that have id=<span class=\"number\">1</span>;</div><div class=\"line\"># <span class=\"keyword\">return</span> value x <span class=\"keyword\">is</span> the number <span class=\"keyword\">of</span> records that have id=<span class=\"number\">1</span>.</div><div class=\"line\">x = User.objects.filter(id=<span class=\"number\">1</span>).update(status=<span class=\"number\">1</span>)</div></pre></td></tr></table></figure>\n</li>\n<li><p>如果希望update()返回被更新的记录数(而不是满足filter条件的记录数),需要改变文件///django/db/backends/mysql/base.py//:</p>\n<ul>\n<li><p>源代码如下:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># We need the number of potentially affected rows after an</span></div><div class=\"line\"><span class=\"comment\"># \"UPDATE\", not the number of changed rows.</span></div><div class=\"line\">kwargs[<span class=\"string\">'client_flag'</span>] = CLIENT.FOUND_ROWS</div></pre></td></tr></table></figure>\n</li>\n<li><p>改为:</p>\n<figure class=\"highlight prolog\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">kwargs[<span class=\"string\">'client_flag'</span>] = <span class=\"symbol\">CLIENT</span>.<span class=\"symbol\">MULTI_RESULTS</span></div></pre></td></tr></table></figure>\n</li>\n</ul>\n</li>\n</ul>\n<h5 id=\"save-方法\"><a href=\"#save-方法\" class=\"headerlink\" title=\"save() 方法\"></a>save() 方法</h5><ul>\n<li><p>内部处理流程:</p>\n<figure class=\"highlight lsl\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"number\">1</span>) 发出一个预存信号。 它发出一个将要存储一个对象的通知。你可以注册一个监听程序，</div><div class=\"line\">在信号发出的时候就会被调用。</div><div class=\"line\"></div><div class=\"line\"><span class=\"number\">2</span>) 预处理数据. 对于对象的每个字段，将根据需要进行自动的数据修改。大部分字段并不预处理</div><div class=\"line\">，它们会保持它们原来的样子。预处理仅仅用在那些有特殊性质的字段，比如文件字段。</div><div class=\"line\"></div><div class=\"line\"><span class=\"number\">3</span>) 为数据库准备数据。 每一个字段先要把当前值转化成数据库中可以保存的数据的类型。</div><div class=\"line\">大多数字段的数据不需要预先准备。简单的数据类型，比如整型和字符串等python对象可以直接写进数据库。</div><div class=\"line\">然而，更复杂的数据类型需要做一些修改。比如， DateFields 使用python的 datetime 对象来存储数据。</div><div class=\"line\">数据库并不能存储 datetime 对象，所以该字段要存入数据库先要把值转化为符合ISO标准的日期字符串。</div><div class=\"line\"></div><div class=\"line\"><span class=\"number\">4</span>) 向数据库中插入数据。 经过预处理准备好的数据然后会组合成一条SQL语句来插入数据库。</div><div class=\"line\"></div><div class=\"line\"><span class=\"number\">5</span>) 发出存毕信号。 与预存信号类似，存毕信号在对象成功保存之后发出。同样，这些信号也还没有文档化。</div></pre></td></tr></table></figure>\n</li>\n<li><p>处理原则：<figure class=\"highlight lasso\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"number\">1</span>) 如果对象的主键属性被设置成相当于 <span class=\"literal\">True</span> 的值（比如 <span class=\"literal\">None</span> 或者空字符串之外的值），Django会执行一个 <span class=\"keyword\">SELECT</span> 查询来检测是否已存在一个相同主键的记录。</div><div class=\"line\"></div><div class=\"line\"><span class=\"number\">2</span>) 如果已经存在一个主键相同的记录，Django就执行 UPDATE 查询。</div><div class=\"line\"></div><div class=\"line\"><span class=\"number\">3</span>) 如果对象的主键属性 没有 被设置，或者被设置但数据库中没有与之同主键的记录，那么Django就会执行 INSERT 插入。</div></pre></td></tr></table></figure></p>\n</li>\n</ul>\n<h5 id=\"类实例序列化与反序列化\"><a href=\"#类实例序列化与反序列化\" class=\"headerlink\" title=\"类实例序列化与反序列化\"></a>类实例序列化与反序列化</h5><ul>\n<li>对于django中Model对象:<code python><br>from django.core import serializers<br>serializers.serialize(‘json’, queryset, indent=2,<br>use_natural_keys=True)//序列化<br>serializers.deserialize(“json”, sstring)//反序列化<br>这种方式的反序列化后是一个DeserializeObject包装类</code></li>\n<li>使用对于一般的复杂对象：<code python><br>import jsonpickle<br>pickled = jsonpickle.encode(obj)//序列化<br>unpickled = jsonpickle.decode(pickled)//反序列化<br>反序列化后是一个新的类对象</code></li>\n<li>jsonpickle的安装：<code><br>先要安装pip工具:sudo apt-get install python-pip。<br>然后执行命令：pip install -U jsonpickle。</code></li>\n<li>参考：[[<a href=\"http://zhdoc.bitsrv.net/django/html/topics/serialization.html]]and[[http://jsonpickle.github.com/\">http://zhdoc.bitsrv.net/django/html/topics/serialization.html]]and[[http://jsonpickle.github.com/</a>]]</li>\n</ul>\n<h6 id=\"django中静态文件路径配置\"><a href=\"#django中静态文件路径配置\" class=\"headerlink\" title=\"django中静态文件路径配置\"></a>django中静态文件路径配置</h6><ul>\n<li>首先，在settings.py中加入一条静态路径的常量：<code python><br>STATIC_FILE_ROOT=’/home/meixqhi/workspace/django/src/fbproject’<br></code></li>\n<li>其次，在urls.py文件中加入以下内容:<code python><br>from settings import STATIC_FILE_ROOT<br>(r’^static/(?P<path>.*)’,’django.views.static.serve’,{‘document_root’: ‘%s/static/‘ % STATIC_FILE_ROOT}),<br></code></li>\n<li>然后就可以通过以下路径来访问STATIC_FILE_ROOT路径下static目录中的静态文件了:<code><br><a href=\"http://domain/apppath/static/home.html\">http://domain/apppath/static/home.html</a><br></code></li>\n</ul>\n<h5 id=\"paginator\"><a href=\"#paginator\" class=\"headerlink\" title=\"paginator\"></a>paginator</h5><p>  *分页 <code><br>   from django.core.paginator import Paginator<br>   from models import Weibo</p>\n<p>   queryset = Weibo.objects.all()<br>   paginator = Paginator(queryset, 5)<br>   page = paginator.page(1)<br>   page.object_list</code></p>\n<h5 id=\"Import-module-model\"><a href=\"#Import-module-model\" class=\"headerlink\" title=\"Import module,model\"></a>Import module,model</h5><ul>\n<li><p>动态加载module,model：<code><br>from django.utils.importlib import import_module<br>import_module(module)</p>\n<p>from django.db import model<br>model = models.get_model(‘weibo’, ‘weibo’) #(app_label,model_name)</code></p>\n</li>\n</ul>\n<h5 id=\"Signal\"><a href=\"#Signal\" class=\"headerlink\" title=\"Signal\"></a>Signal</h5><ul>\n<li>Signal机制 <code><pre><code>function:\n</code></pre>connect(self, receiver, sender=None, weak=True, dispatch_uid=None)<br>send(self, sender, <strong>named):<br>decoretor:<br>receiver(signal, </strong>kwargs):</code></li>\n<li>使用方法：<ul>\n<li>声明：<code><br>from django.dispatch import Signal<br>user_logged_in = Signal(providing_args=[‘request’, ‘user’])</code></li>\n<li>注册你要触发的方法：<code><br>def logged_status(user,access_token):<br>user.is_active = True<br>user_logged_in.connect(logged_status,sender=user.<strong>class</strong>) #sender不传参,则sender默认为None,表示响应所有的send信号 </code></li>\n<li>在某个你要触发某个方法的地方发送消息，让这些注册的方法执行：<code><br>user_logged_in.send(sender=user.<strong>class</strong>, user=user, access_token=request.session.get(‘access_token’, None))</code></li>\n<li>如果要防止某个方法在module重复加载时也被重复监听，可以在connect方法中添加唯一的标识：dispatch_uid=’my_update_blogs’</li>\n<li>由于监听方法默认状态weak=True是不保证一定会执行的，由于方法的弱引用会在资源不够的时候被垃圾回收器回收，如果一定要执行，则需显示在connect中设置weak=False。</li>\n</ul>\n</li>\n</ul>\n<h5 id=\"Django-Deployment\"><a href=\"#Django-Deployment\" class=\"headerlink\" title=\"Django Deployment\"></a>Django Deployment</h5><ul>\n<li>Install //libapache2-mod-wsgi//: \\ <code><br>sudo apt-get install libapache2-mod-wsgi </code></li>\n<li>Suppose you have django project //system// under directory ///srv/internals//: <code><br>cd /srv/internals/system<br>mkdir apache </code></li>\n<li><p>Create file //django.wsgi// under directory //apache//, the file contains: <code python><br>import os<br>import sys</p>\n<p>path = ‘/srv/internals’<br>if path not in sys.path:</p>\n<pre><code>sys.path.append(path)\nsys.path.append(path+&quot;/system&quot;)\n</code></pre><p>os.environ[‘DJANGO_SETTINGS_MODULE’] = ‘system.settings’</p>\n<p>import django.core.handlers.wsgi<br>application = django.core.handlers.wsgi.WSGIHandler() </code></p>\n</li>\n<li><p>Edit // /etc/apache2/httpd.conf//, adding the following: \\ <code bash><br>Alias /system/media /srv/internals/system/media/   # make sure directory ‘media’ exists<br>Alias /system/static /srv/internals/system/static/ # make sure directory ‘static’ exists</p>\n<Directory /srv/internals/system/media><br>    AllowOverride All<br>    Order deny,allow<br>    Allow from all<br></Directory>\n\n<Directory /srv/internals/system/static><br>    Order deny,allow<br>    Allow from all<br></Directory>\n\n<p>WSGIScriptAlias /internal /srv/internals/system/apache/django.wsgi</p>\n<p><Directory /srv/internals/system/apache></p>\n<pre><code>Order deny,allow\nAllow from all\n</code></pre><p></Directory> </code></p>\n</li>\n<li>Edit ///srv/internals/system/settings.py//: <code bash><br>MEDIA_ROOT = ‘/srv/internals/system/media/‘<br>MEDIA_URL = ‘/system/media/‘ # http://<your_domain>/system/media points to /srv/internals/system/media<br>STATIC_ROOT = ‘/srv/internals/system/static/‘<br>STATIC_URL = ‘/system/static/‘<br>ADMIN_MEDIA_PREFIX = ‘/system/static/admin/‘<br>ROOT_URLCONF = ‘system.urls’ </code></li>\n<li>Visit the django project via http: <code><br>http://<your_domain>/internal/admin/<br>http://<your_domain>/internal/<app_name> # visit application with name “app_name”</code></li>\n<li><strong>Keep Admin Style</strong>: \\ <code><br>cd /srv/internals/system/static/admin/<br>cp -rf /usr/local/lib/python2.7/dist-packages/Django-1.3-py2.7.egg/django/contrib/admin/media/<em> .<br>or<br>cp -rf /usr/local/lib/python2.7/dist-packages/django/contrib/admin/media/</em> . </code></li>\n<li><strong>Unicode Decoding Error</strong>: (uploading file and filename has //non-ascii// characters) add the following to ///etc/apache2/envvars//: <code bash><br>export LANG=’en_US.UTF-8’<br>export LC_ALL=’en_US.UTF-8’ </code></li>\n<li>Debug with apache: <code><br>apache2ctl -k restart # with root<br>tail -f /var/log/apache/error.log </code></li>\n</ul>\n<p>===== Django DB Schema Migration with South =====<br>====  For Django &lt; 1.7   ====</p>\n<ul>\n<li>往Django App //tagtex.qpoints// 的表内增加一个字段：<ul>\n<li>初始化: <code><br>python manage.py schemamigration tagtex.qpoints –initial<br>(如果APP执行过syncdb操作，需要执行以下操作： python manage.py migrate tagtex.qpoints –fake )</code></li>\n<li>修改表，增加字段</li>\n<li>进行migration: <code><br>python manage.py schemamigration tagtex.qpoints –auto<br>python manage.py migrate tagtex.qpoints </code></li>\n</ul>\n</li>\n</ul>\n<p>====  For Django &gt; 1.7   ====</p>\n<ul>\n<li>south 操作命令:<code><br>$ python manage.py makemigrations [appname]<br>$ python manage.py migrate [appname]<br></code><br>===== Django Developement Tips =====<br><a href=\"http://ericholscher.com/blog/2008/oct/5/django-tips/\">http://ericholscher.com/blog/2008/oct/5/django-tips/</a></li>\n</ul>\n<p>===== django-middleware =====</p>\n<ul>\n<li>django 中间件</li>\n<li>编写自己的中间件需要实现下面一个或几个方法：<ul>\n<li>process_request(self, request)：返回None或HttpResponse。</li>\n<li>process_view(self, request, view_func, view_args, view_kwargs)：djangoview处理中间件返回None或HttpResponse。</li>\n<li>process_exception(request, e):该中间件对业务处理方法执行未捕获的异常进行处理。</li>\n<li>process_template_response(request, response):如果返回的TemplateResponse含有可执行的render方法，则该中间件生效。</li>\n<li>process_response(self, request, response):返回HttpResponse。</li>\n</ul>\n</li>\n<li>参考：<a href=\"https://docs.djangoproject.com/en/1.3/topics/http/middleware/\">https://docs.djangoproject.com/en/1.3/topics/http/middleware/</a></li>\n<li>code参考django源代码：django/core/handlers/base.py中get_response</li>\n</ul>\n<p>===== django-profile-middleware =====</p>\n<ul>\n<li>profile是一款能够记录程序方法或请求在运行过程调用了多少其他方法，以及每个方法消耗了多少时间及系统资源的python工具</li>\n<li>使用步骤：<ul>\n<li>先安装 python-profiler <code><br>sudo apt-get install python-profiler</code></li>\n<li>创建ProfileMiddleware类,参考：<a href=\"http://djangosnippets.org/snippets/605/\">http://djangosnippets.org/snippets/605/</a></li>\n<li>将类路径名加入settings.py里的MIDDLEWARE_CLASSES中 <code><br>MIDDLEWARE_CLASSES = (<br>  ‘tagtex.base.middleware.ProfileMiddleware’,<br>  )</code></li>\n<li>运行server，发送请求<figure class=\"highlight groovy\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">如<span class=\"string\">http:</span><span class=\"comment\">//&lt;yourserver&gt;/yoururl/?prof&amp;params</span></div></pre></td></tr></table></figure>\n</li>\n</ul>\n</li>\n</ul>\n<p>===== mockserver =====</p>\n<ul>\n<li>mockserver的主要功能是通过代理记录上次请求的状态并保存，并为下次请求返回相同的结果。</li>\n<li><p>使用步骤：</p>\n<ul>\n<li><p>先安装mock_server</p>\n<figure class=\"highlight autoit\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">git+ssh://git<span class=\"symbol\">@s2</span>/django-mock-server.git<span class=\"meta\">#egg=django-mock-server (也可以直接下载)</span></div></pre></td></tr></table></figure>\n</li>\n<li><p>然后将recorder app添加到settings.py的INSTALLED_APPS中</p>\n<figure class=\"highlight lisp\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">INSTALLED_APPS = (</div><div class=\"line\">    'mock_server.recorder'</div><div class=\"line\">  )</div></pre></td></tr></table></figure>\n</li>\n<li><p>设置代理url</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">from</span> django.conf.urls.defaults <span class=\"keyword\">import</span> patterns, include, url</div><div class=\"line\"><span class=\"keyword\">from</span> mock_server.recorder.views <span class=\"keyword\">import</span> RecordView,PlaybackView</div><div class=\"line\"><span class=\"keyword\">from</span> mock_server.recorder.recorder <span class=\"keyword\">import</span> Recorder</div><div class=\"line\">SITE_API_ENDPOINT = <span class=\"string\">'你要访问的站点域名或http://ip:port'</span></div><div class=\"line\"></div><div class=\"line\">recorder = Recorder(format=<span class=\"string\">'http://localhost:8000%s'</span>)</div><div class=\"line\"></div><div class=\"line\">urlpatterns = patterns(<span class=\"string\">''</span>,</div><div class=\"line\"></div><div class=\"line\">    url(<span class=\"string\">r'^(?P&lt;url&gt;.*)$'</span>, RecordView.as_view(recorder=recorder,proxy_format=<span class=\"string\">'%s/%%s'</span>%SITE_API_ENDPOINT),name=<span class=\"string\">'site_api'</span>),</div><div class=\"line\">    <span class=\"comment\">#url(r'^(?P&lt;url&gt;.*)$', PlaybackView.as_view(recorder=recorder,proxy_format='%s/%%s'%SITE_API_ENDPOINT),name='site_api'),</span></div><div class=\"line\">)</div></pre></td></tr></table></figure>\n</li>\n<li><p>使用前先使用第一条url，RecordView，注释掉第二条，启动服务器，将你要mock的所有请求都先都由mockserver来代理，mockserver会将所有请求都记录保存到数据库。</p>\n</li>\n<li>然后再打开第二条url，Playback回放，注释掉第一条，所有请求都会返回之前一样的结果。</li>\n</ul>\n</li>\n</ul>\n<h5 id=\"Override-Runserver-Command\"><a href=\"#Override-Runserver-Command\" class=\"headerlink\" title=\"Override Runserver Command\"></a>Override Runserver Command</h5><ul>\n<li>To override <strong>runserver</strong> Command,<br>add the following to into //management/commands/runnserver.py//:<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Command</span><span class=\"params\">(BaseRunserverCommand)</span>:</span></div><div class=\"line\">    option_list = BaseRunserverCommand.option_list + (</div><div class=\"line\">        make_option(<span class=\"string\">'--adminmedia'</span>, dest=<span class=\"string\">'admin_media_path'</span>, default=<span class=\"string\">''</span>,</div><div class=\"line\">            help=<span class=\"string\">'Specifies the directory from which to serve admin media.'</span>),</div><div class=\"line\">    )</div><div class=\"line\"></div><div class=\"line\">    <span class=\"string\">\"\"\"</div><div class=\"line\">    Change the runserver default port to 9000. The method can be generically applied if</div><div class=\"line\">    the default port needs to be changed.</div><div class=\"line\">    \"\"\"</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">handle</span><span class=\"params\">(self, addrport=<span class=\"string\">\"9000\"</span>, *args, **options)</span>:</span></div><div class=\"line\">        super(Command, self).handle(addrport, *args, **options)</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">get_handler</span><span class=\"params\">(self, *args, **options)</span>:</span></div><div class=\"line\">        <span class=\"string\">\"\"\"</div><div class=\"line\">        Serves admin media like old-school (deprecation pending).</div><div class=\"line\">        \"\"\"</span></div><div class=\"line\"></div><div class=\"line\">        handler = super(Command, self).get_handler(*args, **options)</div><div class=\"line\">        <span class=\"keyword\">return</span> AdminMediaHandler(handler, options.get(<span class=\"string\">'admin_media_path'</span>, <span class=\"string\">''</span>))</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<h5 id=\"数据导入导出\"><a href=\"#数据导入导出\" class=\"headerlink\" title=\"数据导入导出\"></a>数据导入导出</h5><ul>\n<li><p>数据导出:</p>\n<figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">python manage<span class=\"selector-class\">.py</span> dumpdata logistics<span class=\"selector-class\">.LogisticsCompany</span> --indent=<span class=\"number\">2</span> --format=json --natural &gt;fixtures/initial_logistics_company.json</div></pre></td></tr></table></figure>\n</li>\n<li><p>数据导入:</p>\n<figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">python manage<span class=\"selector-class\">.py</span> loaddata fixtures/initial_logistics_company.json</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<h5 id=\"多个queryset-合并成一个\"><a href=\"#多个queryset-合并成一个\" class=\"headerlink\" title=\"多个queryset 合并成一个\"></a>多个queryset 合并成一个</h5><ul>\n<li>django<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">from</span> itertools <span class=\"keyword\">import</span> islice, chain</div><div class=\"line\"></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">QuerySetChain</span><span class=\"params\">(object)</span>:</span></div><div class=\"line\">    <span class=\"string\">\"\"\"</div><div class=\"line\">    Chains multiple subquerysets (possibly of different models) and behaves as</div><div class=\"line\">    one queryset.  Supports minimal methods needed for use with</div><div class=\"line\">    django.core.paginator.</div><div class=\"line\">    \"\"\"</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span><span class=\"params\">(self, *subquerysets)</span>:</span></div><div class=\"line\">        self.querysets = subquerysets</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">count</span><span class=\"params\">(self)</span>:</span></div><div class=\"line\">        <span class=\"string\">\"\"\"</div><div class=\"line\">        Performs a .count() for all subquerysets and returns the number of</div><div class=\"line\">        records as an integer.</div><div class=\"line\">        \"\"\"</span></div><div class=\"line\">        <span class=\"keyword\">return</span> sum(qs.count() <span class=\"keyword\">for</span> qs <span class=\"keyword\">in</span> self.querysets)</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">_clone</span><span class=\"params\">(self)</span>:</span></div><div class=\"line\">        <span class=\"string\">\"Returns a clone of this queryset chain\"</span></div><div class=\"line\">        <span class=\"keyword\">return</span> self.__class__(*self.querysets)</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">_all</span><span class=\"params\">(self)</span>:</span></div><div class=\"line\">        <span class=\"string\">\"Iterates records in all subquerysets\"</span></div><div class=\"line\">        <span class=\"keyword\">return</span> chain(*self.querysets)</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__getitem__</span><span class=\"params\">(self, ndx)</span>:</span></div><div class=\"line\">        <span class=\"string\">\"\"\"</div><div class=\"line\">        Retrieves an item or slice from the chained set of results from all</div><div class=\"line\">        subquerysets.</div><div class=\"line\">        \"\"\"</span></div><div class=\"line\">        <span class=\"keyword\">if</span> type(ndx) <span class=\"keyword\">is</span> slice:</div><div class=\"line\">            <span class=\"keyword\">return</span> list(islice(self._all(), ndx.start, ndx.stop, ndx.step <span class=\"keyword\">or</span> <span class=\"number\">1</span>))</div><div class=\"line\">        <span class=\"keyword\">else</span>:</div><div class=\"line\">            <span class=\"keyword\">return</span> islice(self._all(), ndx, ndx+<span class=\"number\">1</span>).next()</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<h5 id=\"django批量添加和更新\"><a href=\"#django批量添加和更新\" class=\"headerlink\" title=\"django批量添加和更新\"></a>django批量添加和更新</h5><ul>\n<li>django insert&amp;update:<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">insert_many</span><span class=\"params\">(objects, using=<span class=\"string\">\"default\"</span>)</span>:</span></div><div class=\"line\">    <span class=\"string\">\"\"\"Insert list of Django objects in one SQL query. Objects must be</div><div class=\"line\">    of the same Django model. Note that save is not called and signals</div><div class=\"line\">    on the model are not raised.\"\"\"</span></div><div class=\"line\">    <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> objects:</div><div class=\"line\">        <span class=\"keyword\">return</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">import</span> django.db.models</div><div class=\"line\">    <span class=\"keyword\">from</span> django.db <span class=\"keyword\">import</span> connections</div><div class=\"line\">    con = connections[using]</div><div class=\"line\"></div><div class=\"line\">    model = objects[<span class=\"number\">0</span>].__class__</div><div class=\"line\">    fields = [f <span class=\"keyword\">for</span> f <span class=\"keyword\">in</span> model._meta.fields <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> isinstance(f, django.db.models.AutoField)]</div><div class=\"line\">    parameters = []</div><div class=\"line\">    <span class=\"keyword\">for</span> o <span class=\"keyword\">in</span> objects:</div><div class=\"line\">        parameters.append(tuple(f.get_db_prep_save(f.pre_save(o, <span class=\"keyword\">True</span>), connection=con) <span class=\"keyword\">for</span> f <span class=\"keyword\">in</span> fields))</div><div class=\"line\"></div><div class=\"line\">    table = model._meta.db_table</div><div class=\"line\">    column_names = <span class=\"string\">\",\"</span>.join(con.ops.quote_name(f.column) <span class=\"keyword\">for</span> f <span class=\"keyword\">in</span> fields)</div><div class=\"line\">    placeholders = <span class=\"string\">\",\"</span>.join((<span class=\"string\">\"%s\"</span>,) * len(fields))</div><div class=\"line\">    con.cursor().executemany(</div><div class=\"line\">        <span class=\"string\">\"insert into %s (%s) values (%s)\"</span> % (table, column_names, placeholders),</div><div class=\"line\">        parameters)</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">update_many</span><span class=\"params\">(objects, fields=[], using=<span class=\"string\">\"default\"</span>)</span>:</span></div><div class=\"line\">    <span class=\"string\">\"\"\"Update list of Django objects in one SQL query,</div><div class=\"line\">     optionally only overwrite the given fields (as names, e.g. fields=[\"foo\"]).</div><div class=\"line\">    Objects must be of the same Django model.</div><div class=\"line\">    Note that save is not called and signals on the model are not raised.\"\"\"</span></div><div class=\"line\">    <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> objects:</div><div class=\"line\">        <span class=\"keyword\">return</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">import</span> django.db.models</div><div class=\"line\">    <span class=\"keyword\">from</span> django.db <span class=\"keyword\">import</span> connections</div><div class=\"line\">    con = connections[using]</div><div class=\"line\"></div><div class=\"line\">    names = fields</div><div class=\"line\">    meta = objects[<span class=\"number\">0</span>]._meta</div><div class=\"line\">    fields = [f <span class=\"keyword\">for</span> f <span class=\"keyword\">in</span> meta.fields <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> isinstance(f, django.db.models.AutoField) <span class=\"keyword\">and</span> (<span class=\"keyword\">not</span> names <span class=\"keyword\">or</span> f.name <span class=\"keyword\">in</span> names)]</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">if</span> <span class=\"keyword\">not</span> fields:</div><div class=\"line\">        <span class=\"keyword\">raise</span> ValueError(<span class=\"string\">\"No fields to update, field names are %s.\"</span> % names)</div><div class=\"line\"></div><div class=\"line\">    fields_with_pk = fields + [meta.pk]</div><div class=\"line\">    parameters = []</div><div class=\"line\">    <span class=\"keyword\">for</span> o <span class=\"keyword\">in</span> objects:</div><div class=\"line\">        parameters.append(tuple(f.get_db_prep_save(f.pre_save(o, <span class=\"keyword\">True</span>), connection=con) <span class=\"keyword\">for</span> f <span class=\"keyword\">in</span> fields_with_pk))</div><div class=\"line\"></div><div class=\"line\">    table = meta.db_table</div><div class=\"line\">    assignments = <span class=\"string\">\",\"</span>.join((<span class=\"string\">\"%s=%%s\"</span>% con.ops.quote_name(f.column)) <span class=\"keyword\">for</span> f <span class=\"keyword\">in</span> fields)</div><div class=\"line\">    con.cursor().executemany(</div><div class=\"line\">        <span class=\"string\">\"update %s set %s where %s=%%s\"</span> % (table, assignments, con.ops.quote_name(meta.pk.column)),</div><div class=\"line\">        parameters)</div></pre></td></tr></table></figure>\n</li>\n</ul>\n"},{"title":"linux之find文件夹","date":"2016-02-01T09:47:24.000Z","_content":"\n\n##  linux统计文件夹中文件数目\n#####   第一种方法\n\n''' ls -l|grep \"^-\"|wc -l #这儿是列出当前目录下面的总共的文件夹数量'''\n\n*   ls -l 长列表输出该目录下文件信息(注意这里的文件，不同于一般的文件，可能是目录、链接、设备文件等)。如果ls -lR|grep \"^-\"|wc-l则可以连子目录下的文件一起统计。\n*   grep ^- 这里将长列表输出信息过滤一部分，只保留一般文件，如果只保留目录就是 ^d\n*   wc -l 统计输出信息的行数，因为已经过滤得只剩一般文件了，所以统计结果就是一般文件信息的行数，又由于一行信息对应一个文件，所以也就是文件的个数。\n\n####    第二种方法：\n\n<code>find ./ -type f|wc -l</code>\n\n*   由于默认find会去子目录查找，如果只想查找当前目录的文件用find ./ -maxdepth 1 -type f|wc -l即可。\n\n需要说明的是第二种方法会比第一种方法快很多，尤其是也统计子目录时。","source":"_posts/2016/02/01/linux之find文件夹.md","raw":"title: linux之find文件夹\ndate: 2016-02-01 17:47:24\ntags:\n- Linux\ncategories:\n- Linux\n\n---\n\n\n##  linux统计文件夹中文件数目\n#####   第一种方法\n\n''' ls -l|grep \"^-\"|wc -l #这儿是列出当前目录下面的总共的文件夹数量'''\n\n*   ls -l 长列表输出该目录下文件信息(注意这里的文件，不同于一般的文件，可能是目录、链接、设备文件等)。如果ls -lR|grep \"^-\"|wc-l则可以连子目录下的文件一起统计。\n*   grep ^- 这里将长列表输出信息过滤一部分，只保留一般文件，如果只保留目录就是 ^d\n*   wc -l 统计输出信息的行数，因为已经过滤得只剩一般文件了，所以统计结果就是一般文件信息的行数，又由于一行信息对应一个文件，所以也就是文件的个数。\n\n####    第二种方法：\n\n<code>find ./ -type f|wc -l</code>\n\n*   由于默认find会去子目录查找，如果只想查找当前目录的文件用find ./ -maxdepth 1 -type f|wc -l即可。\n\n需要说明的是第二种方法会比第一种方法快很多，尤其是也统计子目录时。","slug":"linux之find文件夹","published":1,"updated":"2016-06-29T15:52:33.449Z","_id":"cik3sv4sg00090s37us89gw0w","comments":1,"layout":"post","photos":[],"link":"","content":"<h2 id=\"linux统计文件夹中文件数目\"><a href=\"#linux统计文件夹中文件数目\" class=\"headerlink\" title=\"linux统计文件夹中文件数目\"></a>linux统计文件夹中文件数目</h2><h5 id=\"第一种方法\"><a href=\"#第一种方法\" class=\"headerlink\" title=\"第一种方法\"></a>第一种方法</h5><p>‘’’ ls -l|grep “^-“|wc -l #这儿是列出当前目录下面的总共的文件夹数量’’’</p>\n<ul>\n<li>ls -l 长列表输出该目录下文件信息(注意这里的文件，不同于一般的文件，可能是目录、链接、设备文件等)。如果ls -lR|grep “^-“|wc-l则可以连子目录下的文件一起统计。</li>\n<li>grep ^- 这里将长列表输出信息过滤一部分，只保留一般文件，如果只保留目录就是 ^d</li>\n<li>wc -l 统计输出信息的行数，因为已经过滤得只剩一般文件了，所以统计结果就是一般文件信息的行数，又由于一行信息对应一个文件，所以也就是文件的个数。</li>\n</ul>\n<h4 id=\"第二种方法：\"><a href=\"#第二种方法：\" class=\"headerlink\" title=\"第二种方法：\"></a>第二种方法：</h4><p><code>find ./ -type f|wc -l</code></p>\n<ul>\n<li>由于默认find会去子目录查找，如果只想查找当前目录的文件用find ./ -maxdepth 1 -type f|wc -l即可。</li>\n</ul>\n<p>需要说明的是第二种方法会比第一种方法快很多，尤其是也统计子目录时。</p>\n","excerpt":"","more":"<h2 id=\"linux统计文件夹中文件数目\"><a href=\"#linux统计文件夹中文件数目\" class=\"headerlink\" title=\"linux统计文件夹中文件数目\"></a>linux统计文件夹中文件数目</h2><h5 id=\"第一种方法\"><a href=\"#第一种方法\" class=\"headerlink\" title=\"第一种方法\"></a>第一种方法</h5><p>‘’’ ls -l|grep “^-“|wc -l #这儿是列出当前目录下面的总共的文件夹数量’’’</p>\n<ul>\n<li>ls -l 长列表输出该目录下文件信息(注意这里的文件，不同于一般的文件，可能是目录、链接、设备文件等)。如果ls -lR|grep “^-“|wc-l则可以连子目录下的文件一起统计。</li>\n<li>grep ^- 这里将长列表输出信息过滤一部分，只保留一般文件，如果只保留目录就是 ^d</li>\n<li>wc -l 统计输出信息的行数，因为已经过滤得只剩一般文件了，所以统计结果就是一般文件信息的行数，又由于一行信息对应一个文件，所以也就是文件的个数。</li>\n</ul>\n<h4 id=\"第二种方法：\"><a href=\"#第二种方法：\" class=\"headerlink\" title=\"第二种方法：\"></a>第二种方法：</h4><p><code>find ./ -type f|wc -l</code></p>\n<ul>\n<li>由于默认find会去子目录查找，如果只想查找当前目录的文件用find ./ -maxdepth 1 -type f|wc -l即可。</li>\n</ul>\n<p>需要说明的是第二种方法会比第一种方法快很多，尤其是也统计子目录时。</p>\n"},{"title":"celeryUser","date":"2016-01-15T07:20:45.000Z","_content":"\n\n\nsudo apt-get install rabbitmq-server\n\n$ sudo rabbitmqctl add_user myuser mypassword\n$ sudo rabbitmqctl add_vhost myvhost\n$ sudo rabbitmqctl set_permissions -p myvhost myuser \".*\" \".*\" \".*\"\n\n\n\ncelery -A app.celery worker --loglevel=info\n\n\n启动服务器：\n\n$ sudo rabbitmq-server\n你也可以添加 -detached 属性来让它在后台运行（注意：只有一个破折号）：\n\n$ sudo rabbitmq-server -detached\n永远不要用 kill 停止 RabbitMQ 服务器，而是应该用 rabbitmqctl 命令：\n\n$ sudo rabbitmqctl stop\n\n\nsudo rabbitmqctl list_queues\nsudo rabbitmqctl list_exchanges","source":"_posts/2016/01/15/celeryUser.md","raw":"title: celeryUser\ndate: 2016-01-15 15:20:45\ntags:\n---\n\n\n\nsudo apt-get install rabbitmq-server\n\n$ sudo rabbitmqctl add_user myuser mypassword\n$ sudo rabbitmqctl add_vhost myvhost\n$ sudo rabbitmqctl set_permissions -p myvhost myuser \".*\" \".*\" \".*\"\n\n\n\ncelery -A app.celery worker --loglevel=info\n\n\n启动服务器：\n\n$ sudo rabbitmq-server\n你也可以添加 -detached 属性来让它在后台运行（注意：只有一个破折号）：\n\n$ sudo rabbitmq-server -detached\n永远不要用 kill 停止 RabbitMQ 服务器，而是应该用 rabbitmqctl 命令：\n\n$ sudo rabbitmqctl stop\n\n\nsudo rabbitmqctl list_queues\nsudo rabbitmqctl list_exchanges","slug":"celeryUser","published":1,"updated":"2016-06-29T15:29:25.175Z","_id":"cik3sv4sl000a0s37yfqpvkiv","comments":1,"layout":"post","photos":[],"link":"","content":"<p>sudo apt-get install rabbitmq-server</p>\n<p>$ sudo rabbitmqctl add_user myuser mypassword<br>$ sudo rabbitmqctl add_vhost myvhost<br>$ sudo rabbitmqctl set_permissions -p myvhost myuser “.<em>“ “.</em>“ “.*”</p>\n<p>celery -A app.celery worker –loglevel=info</p>\n<p>启动服务器：</p>\n<p>$ sudo rabbitmq-server<br>你也可以添加 -detached 属性来让它在后台运行（注意：只有一个破折号）：</p>\n<p>$ sudo rabbitmq-server -detached<br>永远不要用 kill 停止 RabbitMQ 服务器，而是应该用 rabbitmqctl 命令：</p>\n<p>$ sudo rabbitmqctl stop</p>\n<p>sudo rabbitmqctl list_queues<br>sudo rabbitmqctl list_exchanges</p>\n","excerpt":"","more":"<p>sudo apt-get install rabbitmq-server</p>\n<p>$ sudo rabbitmqctl add_user myuser mypassword<br>$ sudo rabbitmqctl add_vhost myvhost<br>$ sudo rabbitmqctl set_permissions -p myvhost myuser “.<em>“ “.</em>“ “.*”</p>\n<p>celery -A app.celery worker –loglevel=info</p>\n<p>启动服务器：</p>\n<p>$ sudo rabbitmq-server<br>你也可以添加 -detached 属性来让它在后台运行（注意：只有一个破折号）：</p>\n<p>$ sudo rabbitmq-server -detached<br>永远不要用 kill 停止 RabbitMQ 服务器，而是应该用 rabbitmqctl 命令：</p>\n<p>$ sudo rabbitmqctl stop</p>\n<p>sudo rabbitmqctl list_queues<br>sudo rabbitmqctl list_exchanges</p>\n"},{"title":"mysql_command","date":"2016-01-08T02:10:19.000Z","_content":"\n\n```\nSET character_set_client = utf8;\nSET character_set_connection = utf8;\nSET character_set_database = utf8;\nSET character_set_results = utf8;\nSET character_set_server = utf8;\nSET default_storage_engine=INNODB;\nshow engines;\nshow variables like \"have_%\"; \n\nshow databases;\nuse AAA;\ndrop database AAA;\ncreate database AAA  DEFAULT CHARACTER SET gbk COLLATE gbk_chinese_ci;\ncreate database AAA DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci;\nshow variables like 'collation_%';\nshow global variables like 'character_set_server'; \nshow tables;\nshow create  table order_history;\nalter database AAA character set gbk;\nDROP TABLE IF EXISTS `role`;\n```","source":"_posts/2016/01/08/mysql-command.md","raw":"title: mysql_command\ndate: 2016-01-08 10:10:19\ntags:\n---\n\n\n```\nSET character_set_client = utf8;\nSET character_set_connection = utf8;\nSET character_set_database = utf8;\nSET character_set_results = utf8;\nSET character_set_server = utf8;\nSET default_storage_engine=INNODB;\nshow engines;\nshow variables like \"have_%\"; \n\nshow databases;\nuse AAA;\ndrop database AAA;\ncreate database AAA  DEFAULT CHARACTER SET gbk COLLATE gbk_chinese_ci;\ncreate database AAA DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci;\nshow variables like 'collation_%';\nshow global variables like 'character_set_server'; \nshow tables;\nshow create  table order_history;\nalter database AAA character set gbk;\nDROP TABLE IF EXISTS `role`;\n```","slug":"mysql-command","published":1,"updated":"2016-06-29T15:29:25.175Z","_id":"cik3sv4sp000b0s37jvu03yzp","comments":1,"layout":"post","photos":[],"link":"","content":"<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">SET</span> character_set_client = utf8;</div><div class=\"line\"><span class=\"keyword\">SET</span> character_set_connection = utf8;</div><div class=\"line\"><span class=\"keyword\">SET</span> character_set_database = utf8;</div><div class=\"line\"><span class=\"keyword\">SET</span> character_set_results = utf8;</div><div class=\"line\"><span class=\"keyword\">SET</span> character_set_server = utf8;</div><div class=\"line\"><span class=\"keyword\">SET</span> default_storage_engine=<span class=\"keyword\">INNODB</span>;</div><div class=\"line\"><span class=\"keyword\">show</span> <span class=\"keyword\">engines</span>;</div><div class=\"line\"><span class=\"keyword\">show</span> <span class=\"keyword\">variables</span> <span class=\"keyword\">like</span> <span class=\"string\">\"have_%\"</span>; </div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">show</span> <span class=\"keyword\">databases</span>;</div><div class=\"line\"><span class=\"keyword\">use</span> AAA;</div><div class=\"line\"><span class=\"keyword\">drop</span> <span class=\"keyword\">database</span> AAA;</div><div class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">database</span> AAA  <span class=\"keyword\">DEFAULT</span> <span class=\"built_in\">CHARACTER</span> <span class=\"keyword\">SET</span> gbk <span class=\"keyword\">COLLATE</span> gbk_chinese_ci;</div><div class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">database</span> AAA <span class=\"keyword\">DEFAULT</span> <span class=\"built_in\">CHARACTER</span> <span class=\"keyword\">SET</span> utf8 <span class=\"keyword\">COLLATE</span> utf8_general_ci;</div><div class=\"line\"><span class=\"keyword\">show</span> <span class=\"keyword\">variables</span> <span class=\"keyword\">like</span> <span class=\"string\">'collation_%'</span>;</div><div class=\"line\"><span class=\"keyword\">show</span> <span class=\"keyword\">global</span> <span class=\"keyword\">variables</span> <span class=\"keyword\">like</span> <span class=\"string\">'character_set_server'</span>; </div><div class=\"line\"><span class=\"keyword\">show</span> <span class=\"keyword\">tables</span>;</div><div class=\"line\"><span class=\"keyword\">show</span> <span class=\"keyword\">create</span>  <span class=\"keyword\">table</span> order_history;</div><div class=\"line\"><span class=\"keyword\">alter</span> <span class=\"keyword\">database</span> AAA <span class=\"built_in\">character</span> <span class=\"keyword\">set</span> gbk;</div><div class=\"line\"><span class=\"keyword\">DROP</span> <span class=\"keyword\">TABLE</span> <span class=\"keyword\">IF</span> <span class=\"keyword\">EXISTS</span> <span class=\"string\">`role`</span>;</div></pre></td></tr></table></figure>","excerpt":"","more":"<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">SET</span> character_set_client = utf8;</div><div class=\"line\"><span class=\"keyword\">SET</span> character_set_connection = utf8;</div><div class=\"line\"><span class=\"keyword\">SET</span> character_set_database = utf8;</div><div class=\"line\"><span class=\"keyword\">SET</span> character_set_results = utf8;</div><div class=\"line\"><span class=\"keyword\">SET</span> character_set_server = utf8;</div><div class=\"line\"><span class=\"keyword\">SET</span> default_storage_engine=<span class=\"keyword\">INNODB</span>;</div><div class=\"line\"><span class=\"keyword\">show</span> <span class=\"keyword\">engines</span>;</div><div class=\"line\"><span class=\"keyword\">show</span> <span class=\"keyword\">variables</span> <span class=\"keyword\">like</span> <span class=\"string\">\"have_%\"</span>; </div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">show</span> <span class=\"keyword\">databases</span>;</div><div class=\"line\"><span class=\"keyword\">use</span> AAA;</div><div class=\"line\"><span class=\"keyword\">drop</span> <span class=\"keyword\">database</span> AAA;</div><div class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">database</span> AAA  <span class=\"keyword\">DEFAULT</span> <span class=\"built_in\">CHARACTER</span> <span class=\"keyword\">SET</span> gbk <span class=\"keyword\">COLLATE</span> gbk_chinese_ci;</div><div class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">database</span> AAA <span class=\"keyword\">DEFAULT</span> <span class=\"built_in\">CHARACTER</span> <span class=\"keyword\">SET</span> utf8 <span class=\"keyword\">COLLATE</span> utf8_general_ci;</div><div class=\"line\"><span class=\"keyword\">show</span> <span class=\"keyword\">variables</span> <span class=\"keyword\">like</span> <span class=\"string\">'collation_%'</span>;</div><div class=\"line\"><span class=\"keyword\">show</span> <span class=\"keyword\">global</span> <span class=\"keyword\">variables</span> <span class=\"keyword\">like</span> <span class=\"string\">'character_set_server'</span>; </div><div class=\"line\"><span class=\"keyword\">show</span> <span class=\"keyword\">tables</span>;</div><div class=\"line\"><span class=\"keyword\">show</span> <span class=\"keyword\">create</span>  <span class=\"keyword\">table</span> order_history;</div><div class=\"line\"><span class=\"keyword\">alter</span> <span class=\"keyword\">database</span> AAA <span class=\"built_in\">character</span> <span class=\"keyword\">set</span> gbk;</div><div class=\"line\"><span class=\"keyword\">DROP</span> <span class=\"keyword\">TABLE</span> <span class=\"keyword\">IF</span> <span class=\"keyword\">EXISTS</span> <span class=\"string\">`role`</span>;</div></pre></td></tr></table></figure>"},{"title":"uwsiguse","date":"2016-01-07T06:25:49.000Z","_content":"\n\n\n# test.py\ndef application(env, start_response):\n    start_response('200 OK', [('Content-Type','text/html')])\n    return 'Welcome to MuxiStudio!'\n然后，Run uWSGI:\n\nuwsgi --http :8000 --wsgi-file test.py\n\n\n\n\n\n抵不住朋友的诱惑，今天终于入手了一台阿里云服务器，是Ubuntu 1.4 32位版本，最初考虑是用来尝尝鲜只是买了个最低配的，价格算起来与在国外买个空间的价格相当吧（可能一年才贵100多），但用起来感觉就很不错，速度那是一个字：快。\n\n自从倒戈向Linux世界后，对于一切大而全的开发框架与软件都有一种不讨喜的感觉，个人更喜欢于使用那些小而精，高性能高产生力的软件和开发框架，So 我现在的第一语言是Python和Coffee，开发框架就当然是 AngularJS (前端) + Flask (后端) ，关于 AngularJS 与 Flask 不在本文的叙述范围之内，本文解决的是 Flask 最后一公里的问题：Linux 部署。\n\n我采用的部署方案是：\n\nWeb 服务器采用 uwsgi host Flask\n用 Supervisor 引用 uwsgi 作常规启动服务\n基于 Nginx 作反向代理\n首先, 阿里云服务器可以通过 SSH 指令在本机的终端进行远程连接\n\nssh root@云服务器地址\n输入密码进入后所有的操作与本地终端完全一至。\n\n安装 Python 环境\n接下来是python , Ubuntu 的默认环境已经预装 python 2.7 所以只需要安装 python 的 pip 安装工具即可。pip 用于安装一些基于python 应用的软件工具，在下文中将会频繁使用。\n\nPIP\n如果用python 而不懂 [pip|http://pypi.python.org/] 那最好就快点脑补吧, 指令如下：\n\nsudo apt-get install pip\nVirtualEnv\n不同的项目可能会引用各种不同的依赖包，为了避免版本与和应用之间的冲突而造成的“依赖地狱”\n[Virtualenv | https://virtualenv.readthedocs.org/en/latest/] 就是我们python 项目的必须品了。VirtualEnv 可以为每个Python应用创建独立的开发环境，使他们互不影响，Virtualenv 能够做到：\n\n在没有权限的情况下安装新套件\n不同应用可以使用不同的套件版本\n套件升级不影响其他应用\n安装：\n\nsudo pip install virtualenv\n安装VirtualEnv 后只需要在项目目录内运行 virtualenv 目录名 就可以建立一个虚拟环境文件夹，然后启用 activate 指令即可启用该python虚拟环境，具体操作如下：\n\n假定我的项目目录叫 /home/www/my_flask，首先安装虚拟环境 (我习惯使用的虚拟环境目录叫 venv )\n\nmy_flask root$ virtualenv venv\n\n>> New python executable in venv/bin/python\n>> Installing setuptools, pip...done.\n在项目目录下就会建立一个新的 venv 目录，里面就是运行python 的基本环境的工具与指令，和包。 然后启用该环境，使用当前命令行状态进入虚拟环境，进入虚拟环境后，一切安装python的操作都会将包和引用装在虚拟环境内，而不会影响到全局的python 环境。\n\nmy_flask root$ source venv/bin/activate \n\n(venv)my_flask root$ \n调用 activate 指令后命令符前就会出现 (venv) 字样。 可通过 deactivate 退出虚拟环境。\n\n安装 uWSGI\nFlask 的实际生产运行环境选择并不多，比较成熟的是 [Gunicorn|http://gunicorn.org/] 和 [uWSGI|https://github.com/unbit/uwsgi] ，听说Gunicorn 的配置很简单，但可惜我一直没有配置成功过，我现采用的是 uWSGI。接下来就安装uWSGI吧。\n\n(venv)my_flask root$ pip install uwsgi\n在虚拟环境下不需要使用 sudo ，因为virtualenv 是没有权限要求的。\n\n这个安装很迅速，基本是秒成。安装完成后我们可以先放下 uWSGI 不表，在后面再回过来配置他，因为我们首先要将关键的 Flask环境和我们的项目文件传到服务器目录内。\n\n安装 Flask\n我是用清单文件一次性安装Flask和他的相关依赖的，这样会更快。我的引用清单是这样的：\nrequirements.txt\n\nFlask==0.10.1\nFlask-Login==0.2.11\nFlask-Mail==0.9.1\nFlask-Moment==0.4.0\nFlask-PageDown==0.1.5\nFlask-SQLAlchemy==2.0\nFlask-Script==2.0.5\nFlask-WTF==0.10.2\nFlask-Cache==0.13.1\nFlask-Restless==0.15.0\nFlask-Uploads==0.1.3\nJinja2==2.7.3\nMako==1.0.0\nMarkdown==2.5.1\nMarkupSafe==0.23\nSQLAlchemy==0.9.8\nWTForms==2.0.1\nWerkzeug==0.9.6\nhtml5lib==1.0b3\nitsdangerous==0.24\nsix==1.8.0\nawesome-slugify==1.6\n可以想像，如果一个一个装非疯了不可。\n安装清单文件：\n\n(venv)my_flask root$ pip install -r requirements.txt\n在此还是重重地提一下：一定要注意在运行这个安装之前启用了python 虚拟环境，否则会直接安装到全局去的！\n\n项目文件\n接下来就是上传 Flask的项目文件，之前我在各大的“转载专业户”里找了好多的资料，在这一步中大多只是在上面加个标准的Flask运行文件，虽说做个范例可以但说实在的这很让人迷惑，为什么？先看看代码吧：\n\nfrom flask import Flask\n \napp = Flask(__name__)\n \n@app.route(\"/\")\ndef hello():\n    return \"Hello World!\"\n生产环境内，谁会用这样的代码呢，这只是Flask 的最简入门范，我的Flask项目中 app 是被做在包内的，相信很多人都是这样做的，在包外我们采用 Flask Script 写一个 manage.py 文件 作为启动文件，这更方便于支持各种的项目，包括可以安装到 window下的 FastCGI 中。\n\n那么我的 这个 manage.py 是这个样子的：\n\n#!/usr/bin/env python\nimport os\n\nif os.path.exists('.env'):\n    print('Importing environment from .env...')\n    for line in open('.env'):\n        var = line.strip().split('=')\n        if len(var) == 2:\n            os.environ[var[0]] = var[1]\n\nfrom app import create_app\nfrom flask.ext.script import Manager, Shell\n\n# 通过配置创建 app \napp = create_app(os.getenv('FLASK_CONFIG') or 'default')\nmanager = Manager(app)\n\ndef make_shell_context():\n    return dict(app=app)\n\n\nmanager.add_command(\"shell\", Shell(make_context=make_shell_context))\n\n@manager.command\ndef deploy():\n    \"\"\"Run deployment tasks.\"\"\"\n    pass\n\n\nif __name__ == '__main__':\n    manager.run()\n这样做我地开发环境可以这样运行 Flask:\n\npython manage.py runserver\n更详细的做法请参考 [Flask Script|http://flask-script.readthedocs.org/en/latest/] 扩展\n\n好吧，我们可以用 支持SSH的FTP工具将Flask项目文件上传到服务器上，下面是整个项目文件结构：\n\nwww/\n└── my_flask  \n│   ├── logs\n│   └── venv  //虚拟目录\n│   │   ├── bin\n│   │   │         ├── activate\n│   │   │         ├── easy_install\n│   │   │         ├── gunicorn\n│   │   │         ├── pip\n│   │   │         └── python\n│   │   ├── include\n│   │   │          └── python2.7 -> /usr/include/python2.7\n│   │   ├── lib\n│   │   │         └── python2.7\n│   │   ├── local\n│   │   │         ├── bin -> /home/shenye/shenyefuli/bin\n│   │   │         ├── include -> /home/shenye/shenyefuli/include\n│   │   │         └── lib -> /home/shenye/shenyefuli/lib\n│   └── app  //Flask 程序目录\n│   │           └──  __init__.py //这是程序包文件。这个目录下还有其它的文件此处略过\n│   ├── manage.py   \n│   ├── requirements.txt                \n配置 uwsgi\n好了，项目的准备工作已经做完了，是时候回过头去配置 uwsgi 了，它的具体指令可以去看它的官方文档，我们在这里采用其中的一种指令方式：配置起动。我采用 .ini文件作为配置，在项目目录下创建一个 confg.ini （具体见下文）写好后可以这样执行\n\n(venv)my_flask root$ uwsgi config.ini\n我认为是最简单的方式，也容易更改。好了重要部分来了，config.ini 是这样写的：\n\n[uwsgi]\n\n# uwsgi 启动时所使用的地址与端口\nsocket = 127.0.0.1:8001 \n\n# 指向网站目录\nchdir = /home/www/my_flask\n\n# python 启动程序文件\nwsgi-file = manage.py \n\n# python 程序内用以启动的 application 变量名\ncallable = app \n\n# 处理器数\nprocesses = 4\n\n# 线程数\nthreads = 2\n\n#状态检测地址\nstats = 127.0.0.1:9191\n注意 ： callable=app 这个 app 是 manage.py 程序文件内的一个变量，这个变量的类型是 Flask的 application 类 。\n\n运行 uwsgi\n\n```\n(venv)my_flask root$ uwsgi config.ini\n\n[uWSGI] getting INI configuration from config.ini\n\n*** Starting uWSGI 2.0.8 (64bit) on [Fri Dec 19 14:34:11 2014] \n// 此处略去那些无用的启动信息\nStats server enabled on 127.0.0.1:9191 fd: 15 ***\n```\n\nOK， 此时已经正常启动 uwsgi 并将 Flask 项目载入其中了，ctrl+c 关闭程序。但这只是命令启动形式，要使其随同服务器启动并作为后台服务运行才是运营环境的实际所需要。因此接下来我们需要安装另一个工具来引导 uwsgi 。\n\n安装 Supervisor\n[Supervisor|http://supervisord.org/configuration.html]可以同时启动多个应用，最重要的是，当某个应用Crash的时候，他可以自动重启该应用，保证可用性。\n\nsudo apt-get install supervisor\nSupervisor 的全局的配置文件位置在：\n\n/etc/supervisor/supervisor.conf\n正常情况下我们并不需要去对其作出任何的改动，只需要添加一个新的 *.conf 文件放在\n\n/etc/supervisor/conf.d/\n下就可以，那么我们就新建立一个用于启动 my_flask 项目的 uwsgi 的 supervisor 配置 (命名为：my_flask_supervisor.conf)：\n\n[program:my_flask]\n# 启动命令入口\ncommand=/home/www/my_flask/venv/bin/uwsgi /home/www/my_flask/config.ini\n\n# 命令程序所在目录\ndirectory=/home/www/my_flask\n#运行命令的用户名\nuser=root\n        \nautostart=true\nautorestart=true\n#日志地址\nstdout_logfile=/home/www/my_flask/logs/uwsgi_supervisor.log        \n启动服务\nsudo service supervisor start\n终止服务\nsudo service supervisor stop\n安装 Nginx\n[Nginx|http://nginx.com/]是轻量级、性能强、占用资源少，能很好的处理高并发的反向代理软件。\n\nsudo apt-get install nginx\n配置 Nginx\nUbuntu 上配置 Nginx 也是很简单，不要去改动默认的 nginx.conf 只需要将\n\n/ext/nginx/sites-available/default\n文件替换掉就可以了。\n\n新建一个 default 文件:\n\n    server {\n      listen  80;\n      server_name XXX.XXX.XXX; #公网地址\n    \n      location / {\n        include      uwsgi_params;\n        uwsgi_pass   127.0.0.1:8001;  # 指向uwsgi 所应用的内部地址,所有请求将转发给uwsgi 处理\n        uwsgi_param UWSGI_PYHOME /home/www/my_flask/venv; # 指向虚拟环境目录\n        uwsgi_param UWSGI_CHDIR  /home/www/my_flask; # 指向网站根目录\n        uwsgi_param UWSGI_SCRIPT manage:app; # 指定启动程序\n      }\n    }\n将default配置文件替换掉就大功告成了！\n还有，更改配置还需要记得重启一下nginx:\n\nsudo service nginx restart\n总结\n阿里云的服务器运行速度很不错，加上Flask+uWSGI+nginx 这种高性能结构，整个网站响应速度极为之快，每页响应速度不到0.1s , 与之相比我之前使用 C# 部署在Avarix 上的网站（同一个程序，不同语言实现）每页响应速度至少2s 这简直是 200:1的性能，当然我还没有闲到去专们用软件去测这两者之间的差值，写本文的目的也是对此作一记录，以便以后回顾。config","source":"_posts/2016/01/07/uwsiguse.md","raw":"title: uwsiguse\ndate: 2016-01-07 14:25:49\ntags:\n---\n\n\n\n# test.py\ndef application(env, start_response):\n    start_response('200 OK', [('Content-Type','text/html')])\n    return 'Welcome to MuxiStudio!'\n然后，Run uWSGI:\n\nuwsgi --http :8000 --wsgi-file test.py\n\n\n\n\n\n抵不住朋友的诱惑，今天终于入手了一台阿里云服务器，是Ubuntu 1.4 32位版本，最初考虑是用来尝尝鲜只是买了个最低配的，价格算起来与在国外买个空间的价格相当吧（可能一年才贵100多），但用起来感觉就很不错，速度那是一个字：快。\n\n自从倒戈向Linux世界后，对于一切大而全的开发框架与软件都有一种不讨喜的感觉，个人更喜欢于使用那些小而精，高性能高产生力的软件和开发框架，So 我现在的第一语言是Python和Coffee，开发框架就当然是 AngularJS (前端) + Flask (后端) ，关于 AngularJS 与 Flask 不在本文的叙述范围之内，本文解决的是 Flask 最后一公里的问题：Linux 部署。\n\n我采用的部署方案是：\n\nWeb 服务器采用 uwsgi host Flask\n用 Supervisor 引用 uwsgi 作常规启动服务\n基于 Nginx 作反向代理\n首先, 阿里云服务器可以通过 SSH 指令在本机的终端进行远程连接\n\nssh root@云服务器地址\n输入密码进入后所有的操作与本地终端完全一至。\n\n安装 Python 环境\n接下来是python , Ubuntu 的默认环境已经预装 python 2.7 所以只需要安装 python 的 pip 安装工具即可。pip 用于安装一些基于python 应用的软件工具，在下文中将会频繁使用。\n\nPIP\n如果用python 而不懂 [pip|http://pypi.python.org/] 那最好就快点脑补吧, 指令如下：\n\nsudo apt-get install pip\nVirtualEnv\n不同的项目可能会引用各种不同的依赖包，为了避免版本与和应用之间的冲突而造成的“依赖地狱”\n[Virtualenv | https://virtualenv.readthedocs.org/en/latest/] 就是我们python 项目的必须品了。VirtualEnv 可以为每个Python应用创建独立的开发环境，使他们互不影响，Virtualenv 能够做到：\n\n在没有权限的情况下安装新套件\n不同应用可以使用不同的套件版本\n套件升级不影响其他应用\n安装：\n\nsudo pip install virtualenv\n安装VirtualEnv 后只需要在项目目录内运行 virtualenv 目录名 就可以建立一个虚拟环境文件夹，然后启用 activate 指令即可启用该python虚拟环境，具体操作如下：\n\n假定我的项目目录叫 /home/www/my_flask，首先安装虚拟环境 (我习惯使用的虚拟环境目录叫 venv )\n\nmy_flask root$ virtualenv venv\n\n>> New python executable in venv/bin/python\n>> Installing setuptools, pip...done.\n在项目目录下就会建立一个新的 venv 目录，里面就是运行python 的基本环境的工具与指令，和包。 然后启用该环境，使用当前命令行状态进入虚拟环境，进入虚拟环境后，一切安装python的操作都会将包和引用装在虚拟环境内，而不会影响到全局的python 环境。\n\nmy_flask root$ source venv/bin/activate \n\n(venv)my_flask root$ \n调用 activate 指令后命令符前就会出现 (venv) 字样。 可通过 deactivate 退出虚拟环境。\n\n安装 uWSGI\nFlask 的实际生产运行环境选择并不多，比较成熟的是 [Gunicorn|http://gunicorn.org/] 和 [uWSGI|https://github.com/unbit/uwsgi] ，听说Gunicorn 的配置很简单，但可惜我一直没有配置成功过，我现采用的是 uWSGI。接下来就安装uWSGI吧。\n\n(venv)my_flask root$ pip install uwsgi\n在虚拟环境下不需要使用 sudo ，因为virtualenv 是没有权限要求的。\n\n这个安装很迅速，基本是秒成。安装完成后我们可以先放下 uWSGI 不表，在后面再回过来配置他，因为我们首先要将关键的 Flask环境和我们的项目文件传到服务器目录内。\n\n安装 Flask\n我是用清单文件一次性安装Flask和他的相关依赖的，这样会更快。我的引用清单是这样的：\nrequirements.txt\n\nFlask==0.10.1\nFlask-Login==0.2.11\nFlask-Mail==0.9.1\nFlask-Moment==0.4.0\nFlask-PageDown==0.1.5\nFlask-SQLAlchemy==2.0\nFlask-Script==2.0.5\nFlask-WTF==0.10.2\nFlask-Cache==0.13.1\nFlask-Restless==0.15.0\nFlask-Uploads==0.1.3\nJinja2==2.7.3\nMako==1.0.0\nMarkdown==2.5.1\nMarkupSafe==0.23\nSQLAlchemy==0.9.8\nWTForms==2.0.1\nWerkzeug==0.9.6\nhtml5lib==1.0b3\nitsdangerous==0.24\nsix==1.8.0\nawesome-slugify==1.6\n可以想像，如果一个一个装非疯了不可。\n安装清单文件：\n\n(venv)my_flask root$ pip install -r requirements.txt\n在此还是重重地提一下：一定要注意在运行这个安装之前启用了python 虚拟环境，否则会直接安装到全局去的！\n\n项目文件\n接下来就是上传 Flask的项目文件，之前我在各大的“转载专业户”里找了好多的资料，在这一步中大多只是在上面加个标准的Flask运行文件，虽说做个范例可以但说实在的这很让人迷惑，为什么？先看看代码吧：\n\nfrom flask import Flask\n \napp = Flask(__name__)\n \n@app.route(\"/\")\ndef hello():\n    return \"Hello World!\"\n生产环境内，谁会用这样的代码呢，这只是Flask 的最简入门范，我的Flask项目中 app 是被做在包内的，相信很多人都是这样做的，在包外我们采用 Flask Script 写一个 manage.py 文件 作为启动文件，这更方便于支持各种的项目，包括可以安装到 window下的 FastCGI 中。\n\n那么我的 这个 manage.py 是这个样子的：\n\n#!/usr/bin/env python\nimport os\n\nif os.path.exists('.env'):\n    print('Importing environment from .env...')\n    for line in open('.env'):\n        var = line.strip().split('=')\n        if len(var) == 2:\n            os.environ[var[0]] = var[1]\n\nfrom app import create_app\nfrom flask.ext.script import Manager, Shell\n\n# 通过配置创建 app \napp = create_app(os.getenv('FLASK_CONFIG') or 'default')\nmanager = Manager(app)\n\ndef make_shell_context():\n    return dict(app=app)\n\n\nmanager.add_command(\"shell\", Shell(make_context=make_shell_context))\n\n@manager.command\ndef deploy():\n    \"\"\"Run deployment tasks.\"\"\"\n    pass\n\n\nif __name__ == '__main__':\n    manager.run()\n这样做我地开发环境可以这样运行 Flask:\n\npython manage.py runserver\n更详细的做法请参考 [Flask Script|http://flask-script.readthedocs.org/en/latest/] 扩展\n\n好吧，我们可以用 支持SSH的FTP工具将Flask项目文件上传到服务器上，下面是整个项目文件结构：\n\nwww/\n└── my_flask  \n│   ├── logs\n│   └── venv  //虚拟目录\n│   │   ├── bin\n│   │   │         ├── activate\n│   │   │         ├── easy_install\n│   │   │         ├── gunicorn\n│   │   │         ├── pip\n│   │   │         └── python\n│   │   ├── include\n│   │   │          └── python2.7 -> /usr/include/python2.7\n│   │   ├── lib\n│   │   │         └── python2.7\n│   │   ├── local\n│   │   │         ├── bin -> /home/shenye/shenyefuli/bin\n│   │   │         ├── include -> /home/shenye/shenyefuli/include\n│   │   │         └── lib -> /home/shenye/shenyefuli/lib\n│   └── app  //Flask 程序目录\n│   │           └──  __init__.py //这是程序包文件。这个目录下还有其它的文件此处略过\n│   ├── manage.py   \n│   ├── requirements.txt                \n配置 uwsgi\n好了，项目的准备工作已经做完了，是时候回过头去配置 uwsgi 了，它的具体指令可以去看它的官方文档，我们在这里采用其中的一种指令方式：配置起动。我采用 .ini文件作为配置，在项目目录下创建一个 confg.ini （具体见下文）写好后可以这样执行\n\n(venv)my_flask root$ uwsgi config.ini\n我认为是最简单的方式，也容易更改。好了重要部分来了，config.ini 是这样写的：\n\n[uwsgi]\n\n# uwsgi 启动时所使用的地址与端口\nsocket = 127.0.0.1:8001 \n\n# 指向网站目录\nchdir = /home/www/my_flask\n\n# python 启动程序文件\nwsgi-file = manage.py \n\n# python 程序内用以启动的 application 变量名\ncallable = app \n\n# 处理器数\nprocesses = 4\n\n# 线程数\nthreads = 2\n\n#状态检测地址\nstats = 127.0.0.1:9191\n注意 ： callable=app 这个 app 是 manage.py 程序文件内的一个变量，这个变量的类型是 Flask的 application 类 。\n\n运行 uwsgi\n\n```\n(venv)my_flask root$ uwsgi config.ini\n\n[uWSGI] getting INI configuration from config.ini\n\n*** Starting uWSGI 2.0.8 (64bit) on [Fri Dec 19 14:34:11 2014] \n// 此处略去那些无用的启动信息\nStats server enabled on 127.0.0.1:9191 fd: 15 ***\n```\n\nOK， 此时已经正常启动 uwsgi 并将 Flask 项目载入其中了，ctrl+c 关闭程序。但这只是命令启动形式，要使其随同服务器启动并作为后台服务运行才是运营环境的实际所需要。因此接下来我们需要安装另一个工具来引导 uwsgi 。\n\n安装 Supervisor\n[Supervisor|http://supervisord.org/configuration.html]可以同时启动多个应用，最重要的是，当某个应用Crash的时候，他可以自动重启该应用，保证可用性。\n\nsudo apt-get install supervisor\nSupervisor 的全局的配置文件位置在：\n\n/etc/supervisor/supervisor.conf\n正常情况下我们并不需要去对其作出任何的改动，只需要添加一个新的 *.conf 文件放在\n\n/etc/supervisor/conf.d/\n下就可以，那么我们就新建立一个用于启动 my_flask 项目的 uwsgi 的 supervisor 配置 (命名为：my_flask_supervisor.conf)：\n\n[program:my_flask]\n# 启动命令入口\ncommand=/home/www/my_flask/venv/bin/uwsgi /home/www/my_flask/config.ini\n\n# 命令程序所在目录\ndirectory=/home/www/my_flask\n#运行命令的用户名\nuser=root\n        \nautostart=true\nautorestart=true\n#日志地址\nstdout_logfile=/home/www/my_flask/logs/uwsgi_supervisor.log        \n启动服务\nsudo service supervisor start\n终止服务\nsudo service supervisor stop\n安装 Nginx\n[Nginx|http://nginx.com/]是轻量级、性能强、占用资源少，能很好的处理高并发的反向代理软件。\n\nsudo apt-get install nginx\n配置 Nginx\nUbuntu 上配置 Nginx 也是很简单，不要去改动默认的 nginx.conf 只需要将\n\n/ext/nginx/sites-available/default\n文件替换掉就可以了。\n\n新建一个 default 文件:\n\n    server {\n      listen  80;\n      server_name XXX.XXX.XXX; #公网地址\n    \n      location / {\n        include      uwsgi_params;\n        uwsgi_pass   127.0.0.1:8001;  # 指向uwsgi 所应用的内部地址,所有请求将转发给uwsgi 处理\n        uwsgi_param UWSGI_PYHOME /home/www/my_flask/venv; # 指向虚拟环境目录\n        uwsgi_param UWSGI_CHDIR  /home/www/my_flask; # 指向网站根目录\n        uwsgi_param UWSGI_SCRIPT manage:app; # 指定启动程序\n      }\n    }\n将default配置文件替换掉就大功告成了！\n还有，更改配置还需要记得重启一下nginx:\n\nsudo service nginx restart\n总结\n阿里云的服务器运行速度很不错，加上Flask+uWSGI+nginx 这种高性能结构，整个网站响应速度极为之快，每页响应速度不到0.1s , 与之相比我之前使用 C# 部署在Avarix 上的网站（同一个程序，不同语言实现）每页响应速度至少2s 这简直是 200:1的性能，当然我还没有闲到去专们用软件去测这两者之间的差值，写本文的目的也是对此作一记录，以便以后回顾。config","slug":"uwsiguse","published":1,"updated":"2016-06-29T15:29:25.175Z","_id":"cik3sv4st000c0s371tex3n7o","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"test-py\"><a href=\"#test-py\" class=\"headerlink\" title=\"test.py\"></a>test.py</h1><p>def application(env, start_response):<br>    start_response(‘200 OK’, [(‘Content-Type’,’text/html’)])<br>    return ‘Welcome to MuxiStudio!’<br>然后，Run uWSGI:</p>\n<p>uwsgi –http :8000 –wsgi-file test.py</p>\n<p>抵不住朋友的诱惑，今天终于入手了一台阿里云服务器，是Ubuntu 1.4 32位版本，最初考虑是用来尝尝鲜只是买了个最低配的，价格算起来与在国外买个空间的价格相当吧（可能一年才贵100多），但用起来感觉就很不错，速度那是一个字：快。</p>\n<p>自从倒戈向Linux世界后，对于一切大而全的开发框架与软件都有一种不讨喜的感觉，个人更喜欢于使用那些小而精，高性能高产生力的软件和开发框架，So 我现在的第一语言是Python和Coffee，开发框架就当然是 AngularJS (前端) + Flask (后端) ，关于 AngularJS 与 Flask 不在本文的叙述范围之内，本文解决的是 Flask 最后一公里的问题：Linux 部署。</p>\n<p>我采用的部署方案是：</p>\n<p>Web 服务器采用 uwsgi host Flask<br>用 Supervisor 引用 uwsgi 作常规启动服务<br>基于 Nginx 作反向代理<br>首先, 阿里云服务器可以通过 SSH 指令在本机的终端进行远程连接</p>\n<p>ssh root@云服务器地址<br>输入密码进入后所有的操作与本地终端完全一至。</p>\n<p>安装 Python 环境<br>接下来是python , Ubuntu 的默认环境已经预装 python 2.7 所以只需要安装 python 的 pip 安装工具即可。pip 用于安装一些基于python 应用的软件工具，在下文中将会频繁使用。</p>\n<p>PIP<br>如果用python 而不懂 [pip|<a href=\"http://pypi.python.org/\" target=\"_blank\" rel=\"external\">http://pypi.python.org/</a>] 那最好就快点脑补吧, 指令如下：</p>\n<p>sudo apt-get install pip<br>VirtualEnv<br>不同的项目可能会引用各种不同的依赖包，为了避免版本与和应用之间的冲突而造成的“依赖地狱”<br>[Virtualenv | <a href=\"https://virtualenv.readthedocs.org/en/latest/\" target=\"_blank\" rel=\"external\">https://virtualenv.readthedocs.org/en/latest/</a>] 就是我们python 项目的必须品了。VirtualEnv 可以为每个Python应用创建独立的开发环境，使他们互不影响，Virtualenv 能够做到：</p>\n<p>在没有权限的情况下安装新套件<br>不同应用可以使用不同的套件版本<br>套件升级不影响其他应用<br>安装：</p>\n<p>sudo pip install virtualenv<br>安装VirtualEnv 后只需要在项目目录内运行 virtualenv 目录名 就可以建立一个虚拟环境文件夹，然后启用 activate 指令即可启用该python虚拟环境，具体操作如下：</p>\n<p>假定我的项目目录叫 /home/www/my_flask，首先安装虚拟环境 (我习惯使用的虚拟环境目录叫 venv )</p>\n<p>my_flask root$ virtualenv venv</p>\n<blockquote>\n<blockquote>\n<p>New python executable in venv/bin/python<br>Installing setuptools, pip…done.<br>在项目目录下就会建立一个新的 venv 目录，里面就是运行python 的基本环境的工具与指令，和包。 然后启用该环境，使用当前命令行状态进入虚拟环境，进入虚拟环境后，一切安装python的操作都会将包和引用装在虚拟环境内，而不会影响到全局的python 环境。</p>\n</blockquote>\n</blockquote>\n<p>my_flask root$ source venv/bin/activate </p>\n<p>(venv)my_flask root$<br>调用 activate 指令后命令符前就会出现 (venv) 字样。 可通过 deactivate 退出虚拟环境。</p>\n<p>安装 uWSGI<br>Flask 的实际生产运行环境选择并不多，比较成熟的是 [Gunicorn|<a href=\"http://gunicorn.org/\" target=\"_blank\" rel=\"external\">http://gunicorn.org/</a>] 和 [uWSGI|<a href=\"https://github.com/unbit/uwsgi\" target=\"_blank\" rel=\"external\">https://github.com/unbit/uwsgi</a>] ，听说Gunicorn 的配置很简单，但可惜我一直没有配置成功过，我现采用的是 uWSGI。接下来就安装uWSGI吧。</p>\n<p>(venv)my_flask root$ pip install uwsgi<br>在虚拟环境下不需要使用 sudo ，因为virtualenv 是没有权限要求的。</p>\n<p>这个安装很迅速，基本是秒成。安装完成后我们可以先放下 uWSGI 不表，在后面再回过来配置他，因为我们首先要将关键的 Flask环境和我们的项目文件传到服务器目录内。</p>\n<p>安装 Flask<br>我是用清单文件一次性安装Flask和他的相关依赖的，这样会更快。我的引用清单是这样的：<br>requirements.txt</p>\n<p>Flask==0.10.1<br>Flask-Login==0.2.11<br>Flask-Mail==0.9.1<br>Flask-Moment==0.4.0<br>Flask-PageDown==0.1.5<br>Flask-SQLAlchemy==2.0<br>Flask-Script==2.0.5<br>Flask-WTF==0.10.2<br>Flask-Cache==0.13.1<br>Flask-Restless==0.15.0<br>Flask-Uploads==0.1.3<br>Jinja2==2.7.3<br>Mako==1.0.0<br>Markdown==2.5.1<br>MarkupSafe==0.23<br>SQLAlchemy==0.9.8<br>WTForms==2.0.1<br>Werkzeug==0.9.6<br>html5lib==1.0b3<br>itsdangerous==0.24<br>six==1.8.0<br>awesome-slugify==1.6<br>可以想像，如果一个一个装非疯了不可。<br>安装清单文件：</p>\n<p>(venv)my_flask root$ pip install -r requirements.txt<br>在此还是重重地提一下：一定要注意在运行这个安装之前启用了python 虚拟环境，否则会直接安装到全局去的！</p>\n<p>项目文件<br>接下来就是上传 Flask的项目文件，之前我在各大的“转载专业户”里找了好多的资料，在这一步中大多只是在上面加个标准的Flask运行文件，虽说做个范例可以但说实在的这很让人迷惑，为什么？先看看代码吧：</p>\n<p>from flask import Flask</p>\n<p>app = Flask(<strong>name</strong>)</p>\n<p>@app.route(“/“)<br>def hello():<br>    return “Hello World!”<br>生产环境内，谁会用这样的代码呢，这只是Flask 的最简入门范，我的Flask项目中 app 是被做在包内的，相信很多人都是这样做的，在包外我们采用 Flask Script 写一个 manage.py 文件 作为启动文件，这更方便于支持各种的项目，包括可以安装到 window下的 FastCGI 中。</p>\n<p>那么我的 这个 manage.py 是这个样子的：</p>\n<p>#!/usr/bin/env python<br>import os</p>\n<p>if os.path.exists(‘.env’):<br>    print(‘Importing environment from .env…’)<br>    for line in open(‘.env’):<br>        var = line.strip().split(‘=’)<br>        if len(var) == 2:<br>            os.environ[var[0]] = var[1]</p>\n<p>from app import create_app<br>from flask.ext.script import Manager, Shell</p>\n<h1 id=\"通过配置创建-app\"><a href=\"#通过配置创建-app\" class=\"headerlink\" title=\"通过配置创建 app\"></a>通过配置创建 app</h1><p>app = create_app(os.getenv(‘FLASK_CONFIG’) or ‘default’)<br>manager = Manager(app)</p>\n<p>def make_shell_context():<br>    return dict(app=app)</p>\n<p>manager.add_command(“shell”, Shell(make_context=make_shell_context))</p>\n<p>@manager.command<br>def deploy():<br>    “””Run deployment tasks.”””<br>    pass</p>\n<p>if <strong>name</strong> == ‘<strong>main</strong>‘:<br>    manager.run()<br>这样做我地开发环境可以这样运行 Flask:</p>\n<p>python manage.py runserver<br>更详细的做法请参考 [Flask Script|<a href=\"http://flask-script.readthedocs.org/en/latest/\" target=\"_blank\" rel=\"external\">http://flask-script.readthedocs.org/en/latest/</a>] 扩展</p>\n<p>好吧，我们可以用 支持SSH的FTP工具将Flask项目文件上传到服务器上，下面是整个项目文件结构：</p>\n<p>www/<br>└── my_flask<br>│   ├── logs<br>│   └── venv  //虚拟目录<br>│   │   ├── bin<br>│   │   │         ├── activate<br>│   │   │         ├── easy_install<br>│   │   │         ├── gunicorn<br>│   │   │         ├── pip<br>│   │   │         └── python<br>│   │   ├── include<br>│   │   │          └── python2.7 -&gt; /usr/include/python2.7<br>│   │   ├── lib<br>│   │   │         └── python2.7<br>│   │   ├── local<br>│   │   │         ├── bin -&gt; /home/shenye/shenyefuli/bin<br>│   │   │         ├── include -&gt; /home/shenye/shenyefuli/include<br>│   │   │         └── lib -&gt; /home/shenye/shenyefuli/lib<br>│   └── app  //Flask 程序目录<br>│   │           └──  <strong>init</strong>.py //这是程序包文件。这个目录下还有其它的文件此处略过<br>│   ├── manage.py<br>│   ├── requirements.txt<br>配置 uwsgi<br>好了，项目的准备工作已经做完了，是时候回过头去配置 uwsgi 了，它的具体指令可以去看它的官方文档，我们在这里采用其中的一种指令方式：配置起动。我采用 .ini文件作为配置，在项目目录下创建一个 confg.ini （具体见下文）写好后可以这样执行</p>\n<p>(venv)my_flask root$ uwsgi config.ini<br>我认为是最简单的方式，也容易更改。好了重要部分来了，config.ini 是这样写的：</p>\n<p>[uwsgi]</p>\n<h1 id=\"uwsgi-启动时所使用的地址与端口\"><a href=\"#uwsgi-启动时所使用的地址与端口\" class=\"headerlink\" title=\"uwsgi 启动时所使用的地址与端口\"></a>uwsgi 启动时所使用的地址与端口</h1><p>socket = 127.0.0.1:8001 </p>\n<h1 id=\"指向网站目录\"><a href=\"#指向网站目录\" class=\"headerlink\" title=\"指向网站目录\"></a>指向网站目录</h1><p>chdir = /home/www/my_flask</p>\n<h1 id=\"python-启动程序文件\"><a href=\"#python-启动程序文件\" class=\"headerlink\" title=\"python 启动程序文件\"></a>python 启动程序文件</h1><p>wsgi-file = manage.py </p>\n<h1 id=\"python-程序内用以启动的-application-变量名\"><a href=\"#python-程序内用以启动的-application-变量名\" class=\"headerlink\" title=\"python 程序内用以启动的 application 变量名\"></a>python 程序内用以启动的 application 变量名</h1><p>callable = app </p>\n<h1 id=\"处理器数\"><a href=\"#处理器数\" class=\"headerlink\" title=\"处理器数\"></a>处理器数</h1><p>processes = 4</p>\n<h1 id=\"线程数\"><a href=\"#线程数\" class=\"headerlink\" title=\"线程数\"></a>线程数</h1><p>threads = 2</p>\n<p>#状态检测地址<br>stats = 127.0.0.1:9191<br>注意 ： callable=app 这个 app 是 manage.py 程序文件内的一个变量，这个变量的类型是 Flask的 application 类 。</p>\n<p>运行 uwsgi</p>\n<figure class=\"highlight arduino\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">(venv)my_flask root$ uwsgi <span class=\"built_in\">config</span>.ini</div><div class=\"line\"></div><div class=\"line\">[uWSGI] getting INI configuration from <span class=\"built_in\">config</span>.ini</div><div class=\"line\"></div><div class=\"line\">*** Starting uWSGI <span class=\"number\">2.0</span><span class=\"number\">.8</span> (<span class=\"number\">64</span><span class=\"built_in\">bit</span>) on [Fri Dec <span class=\"number\">19</span> <span class=\"number\">14</span>:<span class=\"number\">34</span>:<span class=\"number\">11</span> <span class=\"number\">2014</span>] </div><div class=\"line\"><span class=\"comment\">// 此处略去那些无用的启动信息</span></div><div class=\"line\">Stats server enabled on <span class=\"number\">127.0</span><span class=\"number\">.0</span><span class=\"number\">.1</span>:<span class=\"number\">9191</span> fd: <span class=\"number\">15</span> ***</div></pre></td></tr></table></figure>\n<p>OK， 此时已经正常启动 uwsgi 并将 Flask 项目载入其中了，ctrl+c 关闭程序。但这只是命令启动形式，要使其随同服务器启动并作为后台服务运行才是运营环境的实际所需要。因此接下来我们需要安装另一个工具来引导 uwsgi 。</p>\n<p>安装 Supervisor<br>[Supervisor|<a href=\"http://supervisord.org/configuration.html]可以同时启动多个应用，最重要的是，当某个应用Crash的时候，他可以自动重启该应用，保证可用性。\" target=\"_blank\" rel=\"external\">http://supervisord.org/configuration.html]可以同时启动多个应用，最重要的是，当某个应用Crash的时候，他可以自动重启该应用，保证可用性。</a></p>\n<p>sudo apt-get install supervisor<br>Supervisor 的全局的配置文件位置在：</p>\n<p>/etc/supervisor/supervisor.conf<br>正常情况下我们并不需要去对其作出任何的改动，只需要添加一个新的 *.conf 文件放在</p>\n<p>/etc/supervisor/conf.d/<br>下就可以，那么我们就新建立一个用于启动 my_flask 项目的 uwsgi 的 supervisor 配置 (命名为：my_flask_supervisor.conf)：</p>\n<p>[program:my_flask]</p>\n<h1 id=\"启动命令入口\"><a href=\"#启动命令入口\" class=\"headerlink\" title=\"启动命令入口\"></a>启动命令入口</h1><p>command=/home/www/my_flask/venv/bin/uwsgi /home/www/my_flask/config.ini</p>\n<h1 id=\"命令程序所在目录\"><a href=\"#命令程序所在目录\" class=\"headerlink\" title=\"命令程序所在目录\"></a>命令程序所在目录</h1><p>directory=/home/www/my_flask</p>\n<p>#运行命令的用户名<br>user=root</p>\n<p>autostart=true<br>autorestart=true</p>\n<p>#日志地址<br>stdout_logfile=/home/www/my_flask/logs/uwsgi_supervisor.log<br>启动服务<br>sudo service supervisor start<br>终止服务<br>sudo service supervisor stop<br>安装 Nginx<br>[Nginx|<a href=\"http://nginx.com/]是轻量级、性能强、占用资源少，能很好的处理高并发的反向代理软件。\" target=\"_blank\" rel=\"external\">http://nginx.com/]是轻量级、性能强、占用资源少，能很好的处理高并发的反向代理软件。</a></p>\n<p>sudo apt-get install nginx<br>配置 Nginx<br>Ubuntu 上配置 Nginx 也是很简单，不要去改动默认的 nginx.conf 只需要将</p>\n<p>/ext/nginx/sites-available/default<br>文件替换掉就可以了。</p>\n<p>新建一个 default 文件:</p>\n<pre><code>server {\n  listen  80;\n  server_name XXX.XXX.XXX; #公网地址\n\n  location / {\n    include      uwsgi_params;\n    uwsgi_pass   127.0.0.1:8001;  # 指向uwsgi 所应用的内部地址,所有请求将转发给uwsgi 处理\n    uwsgi_param UWSGI_PYHOME /home/www/my_flask/venv; # 指向虚拟环境目录\n    uwsgi_param UWSGI_CHDIR  /home/www/my_flask; # 指向网站根目录\n    uwsgi_param UWSGI_SCRIPT manage:app; # 指定启动程序\n  }\n}\n</code></pre><p>将default配置文件替换掉就大功告成了！<br>还有，更改配置还需要记得重启一下nginx:</p>\n<p>sudo service nginx restart<br>总结<br>阿里云的服务器运行速度很不错，加上Flask+uWSGI+nginx 这种高性能结构，整个网站响应速度极为之快，每页响应速度不到0.1s , 与之相比我之前使用 C# 部署在Avarix 上的网站（同一个程序，不同语言实现）每页响应速度至少2s 这简直是 200:1的性能，当然我还没有闲到去专们用软件去测这两者之间的差值，写本文的目的也是对此作一记录，以便以后回顾。config</p>\n","excerpt":"","more":"<h1 id=\"test-py\"><a href=\"#test-py\" class=\"headerlink\" title=\"test.py\"></a>test.py</h1><p>def application(env, start_response):<br>    start_response(‘200 OK’, [(‘Content-Type’,’text/html’)])<br>    return ‘Welcome to MuxiStudio!’<br>然后，Run uWSGI:</p>\n<p>uwsgi –http :8000 –wsgi-file test.py</p>\n<p>抵不住朋友的诱惑，今天终于入手了一台阿里云服务器，是Ubuntu 1.4 32位版本，最初考虑是用来尝尝鲜只是买了个最低配的，价格算起来与在国外买个空间的价格相当吧（可能一年才贵100多），但用起来感觉就很不错，速度那是一个字：快。</p>\n<p>自从倒戈向Linux世界后，对于一切大而全的开发框架与软件都有一种不讨喜的感觉，个人更喜欢于使用那些小而精，高性能高产生力的软件和开发框架，So 我现在的第一语言是Python和Coffee，开发框架就当然是 AngularJS (前端) + Flask (后端) ，关于 AngularJS 与 Flask 不在本文的叙述范围之内，本文解决的是 Flask 最后一公里的问题：Linux 部署。</p>\n<p>我采用的部署方案是：</p>\n<p>Web 服务器采用 uwsgi host Flask<br>用 Supervisor 引用 uwsgi 作常规启动服务<br>基于 Nginx 作反向代理<br>首先, 阿里云服务器可以通过 SSH 指令在本机的终端进行远程连接</p>\n<p>ssh root@云服务器地址<br>输入密码进入后所有的操作与本地终端完全一至。</p>\n<p>安装 Python 环境<br>接下来是python , Ubuntu 的默认环境已经预装 python 2.7 所以只需要安装 python 的 pip 安装工具即可。pip 用于安装一些基于python 应用的软件工具，在下文中将会频繁使用。</p>\n<p>PIP<br>如果用python 而不懂 [pip|<a href=\"http://pypi.python.org/\">http://pypi.python.org/</a>] 那最好就快点脑补吧, 指令如下：</p>\n<p>sudo apt-get install pip<br>VirtualEnv<br>不同的项目可能会引用各种不同的依赖包，为了避免版本与和应用之间的冲突而造成的“依赖地狱”<br>[Virtualenv | <a href=\"https://virtualenv.readthedocs.org/en/latest/\">https://virtualenv.readthedocs.org/en/latest/</a>] 就是我们python 项目的必须品了。VirtualEnv 可以为每个Python应用创建独立的开发环境，使他们互不影响，Virtualenv 能够做到：</p>\n<p>在没有权限的情况下安装新套件<br>不同应用可以使用不同的套件版本<br>套件升级不影响其他应用<br>安装：</p>\n<p>sudo pip install virtualenv<br>安装VirtualEnv 后只需要在项目目录内运行 virtualenv 目录名 就可以建立一个虚拟环境文件夹，然后启用 activate 指令即可启用该python虚拟环境，具体操作如下：</p>\n<p>假定我的项目目录叫 /home/www/my_flask，首先安装虚拟环境 (我习惯使用的虚拟环境目录叫 venv )</p>\n<p>my_flask root$ virtualenv venv</p>\n<blockquote>\n<blockquote>\n<p>New python executable in venv/bin/python<br>Installing setuptools, pip…done.<br>在项目目录下就会建立一个新的 venv 目录，里面就是运行python 的基本环境的工具与指令，和包。 然后启用该环境，使用当前命令行状态进入虚拟环境，进入虚拟环境后，一切安装python的操作都会将包和引用装在虚拟环境内，而不会影响到全局的python 环境。</p>\n</blockquote>\n</blockquote>\n<p>my_flask root$ source venv/bin/activate </p>\n<p>(venv)my_flask root$<br>调用 activate 指令后命令符前就会出现 (venv) 字样。 可通过 deactivate 退出虚拟环境。</p>\n<p>安装 uWSGI<br>Flask 的实际生产运行环境选择并不多，比较成熟的是 [Gunicorn|<a href=\"http://gunicorn.org/\">http://gunicorn.org/</a>] 和 [uWSGI|<a href=\"https://github.com/unbit/uwsgi\">https://github.com/unbit/uwsgi</a>] ，听说Gunicorn 的配置很简单，但可惜我一直没有配置成功过，我现采用的是 uWSGI。接下来就安装uWSGI吧。</p>\n<p>(venv)my_flask root$ pip install uwsgi<br>在虚拟环境下不需要使用 sudo ，因为virtualenv 是没有权限要求的。</p>\n<p>这个安装很迅速，基本是秒成。安装完成后我们可以先放下 uWSGI 不表，在后面再回过来配置他，因为我们首先要将关键的 Flask环境和我们的项目文件传到服务器目录内。</p>\n<p>安装 Flask<br>我是用清单文件一次性安装Flask和他的相关依赖的，这样会更快。我的引用清单是这样的：<br>requirements.txt</p>\n<p>Flask==0.10.1<br>Flask-Login==0.2.11<br>Flask-Mail==0.9.1<br>Flask-Moment==0.4.0<br>Flask-PageDown==0.1.5<br>Flask-SQLAlchemy==2.0<br>Flask-Script==2.0.5<br>Flask-WTF==0.10.2<br>Flask-Cache==0.13.1<br>Flask-Restless==0.15.0<br>Flask-Uploads==0.1.3<br>Jinja2==2.7.3<br>Mako==1.0.0<br>Markdown==2.5.1<br>MarkupSafe==0.23<br>SQLAlchemy==0.9.8<br>WTForms==2.0.1<br>Werkzeug==0.9.6<br>html5lib==1.0b3<br>itsdangerous==0.24<br>six==1.8.0<br>awesome-slugify==1.6<br>可以想像，如果一个一个装非疯了不可。<br>安装清单文件：</p>\n<p>(venv)my_flask root$ pip install -r requirements.txt<br>在此还是重重地提一下：一定要注意在运行这个安装之前启用了python 虚拟环境，否则会直接安装到全局去的！</p>\n<p>项目文件<br>接下来就是上传 Flask的项目文件，之前我在各大的“转载专业户”里找了好多的资料，在这一步中大多只是在上面加个标准的Flask运行文件，虽说做个范例可以但说实在的这很让人迷惑，为什么？先看看代码吧：</p>\n<p>from flask import Flask</p>\n<p>app = Flask(<strong>name</strong>)</p>\n<p>@app.route(“/“)<br>def hello():<br>    return “Hello World!”<br>生产环境内，谁会用这样的代码呢，这只是Flask 的最简入门范，我的Flask项目中 app 是被做在包内的，相信很多人都是这样做的，在包外我们采用 Flask Script 写一个 manage.py 文件 作为启动文件，这更方便于支持各种的项目，包括可以安装到 window下的 FastCGI 中。</p>\n<p>那么我的 这个 manage.py 是这个样子的：</p>\n<p>#!/usr/bin/env python<br>import os</p>\n<p>if os.path.exists(‘.env’):<br>    print(‘Importing environment from .env…’)<br>    for line in open(‘.env’):<br>        var = line.strip().split(‘=’)<br>        if len(var) == 2:<br>            os.environ[var[0]] = var[1]</p>\n<p>from app import create_app<br>from flask.ext.script import Manager, Shell</p>\n<h1 id=\"通过配置创建-app\"><a href=\"#通过配置创建-app\" class=\"headerlink\" title=\"通过配置创建 app\"></a>通过配置创建 app</h1><p>app = create_app(os.getenv(‘FLASK_CONFIG’) or ‘default’)<br>manager = Manager(app)</p>\n<p>def make_shell_context():<br>    return dict(app=app)</p>\n<p>manager.add_command(“shell”, Shell(make_context=make_shell_context))</p>\n<p>@manager.command<br>def deploy():<br>    “””Run deployment tasks.”””<br>    pass</p>\n<p>if <strong>name</strong> == ‘<strong>main</strong>‘:<br>    manager.run()<br>这样做我地开发环境可以这样运行 Flask:</p>\n<p>python manage.py runserver<br>更详细的做法请参考 [Flask Script|<a href=\"http://flask-script.readthedocs.org/en/latest/\">http://flask-script.readthedocs.org/en/latest/</a>] 扩展</p>\n<p>好吧，我们可以用 支持SSH的FTP工具将Flask项目文件上传到服务器上，下面是整个项目文件结构：</p>\n<p>www/<br>└── my_flask<br>│   ├── logs<br>│   └── venv  //虚拟目录<br>│   │   ├── bin<br>│   │   │         ├── activate<br>│   │   │         ├── easy_install<br>│   │   │         ├── gunicorn<br>│   │   │         ├── pip<br>│   │   │         └── python<br>│   │   ├── include<br>│   │   │          └── python2.7 -&gt; /usr/include/python2.7<br>│   │   ├── lib<br>│   │   │         └── python2.7<br>│   │   ├── local<br>│   │   │         ├── bin -&gt; /home/shenye/shenyefuli/bin<br>│   │   │         ├── include -&gt; /home/shenye/shenyefuli/include<br>│   │   │         └── lib -&gt; /home/shenye/shenyefuli/lib<br>│   └── app  //Flask 程序目录<br>│   │           └──  <strong>init</strong>.py //这是程序包文件。这个目录下还有其它的文件此处略过<br>│   ├── manage.py<br>│   ├── requirements.txt<br>配置 uwsgi<br>好了，项目的准备工作已经做完了，是时候回过头去配置 uwsgi 了，它的具体指令可以去看它的官方文档，我们在这里采用其中的一种指令方式：配置起动。我采用 .ini文件作为配置，在项目目录下创建一个 confg.ini （具体见下文）写好后可以这样执行</p>\n<p>(venv)my_flask root$ uwsgi config.ini<br>我认为是最简单的方式，也容易更改。好了重要部分来了，config.ini 是这样写的：</p>\n<p>[uwsgi]</p>\n<h1 id=\"uwsgi-启动时所使用的地址与端口\"><a href=\"#uwsgi-启动时所使用的地址与端口\" class=\"headerlink\" title=\"uwsgi 启动时所使用的地址与端口\"></a>uwsgi 启动时所使用的地址与端口</h1><p>socket = 127.0.0.1:8001 </p>\n<h1 id=\"指向网站目录\"><a href=\"#指向网站目录\" class=\"headerlink\" title=\"指向网站目录\"></a>指向网站目录</h1><p>chdir = /home/www/my_flask</p>\n<h1 id=\"python-启动程序文件\"><a href=\"#python-启动程序文件\" class=\"headerlink\" title=\"python 启动程序文件\"></a>python 启动程序文件</h1><p>wsgi-file = manage.py </p>\n<h1 id=\"python-程序内用以启动的-application-变量名\"><a href=\"#python-程序内用以启动的-application-变量名\" class=\"headerlink\" title=\"python 程序内用以启动的 application 变量名\"></a>python 程序内用以启动的 application 变量名</h1><p>callable = app </p>\n<h1 id=\"处理器数\"><a href=\"#处理器数\" class=\"headerlink\" title=\"处理器数\"></a>处理器数</h1><p>processes = 4</p>\n<h1 id=\"线程数\"><a href=\"#线程数\" class=\"headerlink\" title=\"线程数\"></a>线程数</h1><p>threads = 2</p>\n<p>#状态检测地址<br>stats = 127.0.0.1:9191<br>注意 ： callable=app 这个 app 是 manage.py 程序文件内的一个变量，这个变量的类型是 Flask的 application 类 。</p>\n<p>运行 uwsgi</p>\n<figure class=\"highlight arduino\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">(venv)my_flask root$ uwsgi <span class=\"built_in\">config</span>.ini</div><div class=\"line\"></div><div class=\"line\">[uWSGI] getting INI configuration from <span class=\"built_in\">config</span>.ini</div><div class=\"line\"></div><div class=\"line\">*** Starting uWSGI <span class=\"number\">2.0</span><span class=\"number\">.8</span> (<span class=\"number\">64</span><span class=\"built_in\">bit</span>) on [Fri Dec <span class=\"number\">19</span> <span class=\"number\">14</span>:<span class=\"number\">34</span>:<span class=\"number\">11</span> <span class=\"number\">2014</span>] </div><div class=\"line\"><span class=\"comment\">// 此处略去那些无用的启动信息</span></div><div class=\"line\">Stats server enabled on <span class=\"number\">127.0</span><span class=\"number\">.0</span><span class=\"number\">.1</span>:<span class=\"number\">9191</span> fd: <span class=\"number\">15</span> ***</div></pre></td></tr></table></figure>\n<p>OK， 此时已经正常启动 uwsgi 并将 Flask 项目载入其中了，ctrl+c 关闭程序。但这只是命令启动形式，要使其随同服务器启动并作为后台服务运行才是运营环境的实际所需要。因此接下来我们需要安装另一个工具来引导 uwsgi 。</p>\n<p>安装 Supervisor<br>[Supervisor|<a href=\"http://supervisord.org/configuration.html]可以同时启动多个应用，最重要的是，当某个应用Crash的时候，他可以自动重启该应用，保证可用性。\">http://supervisord.org/configuration.html]可以同时启动多个应用，最重要的是，当某个应用Crash的时候，他可以自动重启该应用，保证可用性。</a></p>\n<p>sudo apt-get install supervisor<br>Supervisor 的全局的配置文件位置在：</p>\n<p>/etc/supervisor/supervisor.conf<br>正常情况下我们并不需要去对其作出任何的改动，只需要添加一个新的 *.conf 文件放在</p>\n<p>/etc/supervisor/conf.d/<br>下就可以，那么我们就新建立一个用于启动 my_flask 项目的 uwsgi 的 supervisor 配置 (命名为：my_flask_supervisor.conf)：</p>\n<p>[program:my_flask]</p>\n<h1 id=\"启动命令入口\"><a href=\"#启动命令入口\" class=\"headerlink\" title=\"启动命令入口\"></a>启动命令入口</h1><p>command=/home/www/my_flask/venv/bin/uwsgi /home/www/my_flask/config.ini</p>\n<h1 id=\"命令程序所在目录\"><a href=\"#命令程序所在目录\" class=\"headerlink\" title=\"命令程序所在目录\"></a>命令程序所在目录</h1><p>directory=/home/www/my_flask</p>\n<p>#运行命令的用户名<br>user=root</p>\n<p>autostart=true<br>autorestart=true</p>\n<p>#日志地址<br>stdout_logfile=/home/www/my_flask/logs/uwsgi_supervisor.log<br>启动服务<br>sudo service supervisor start<br>终止服务<br>sudo service supervisor stop<br>安装 Nginx<br>[Nginx|<a href=\"http://nginx.com/]是轻量级、性能强、占用资源少，能很好的处理高并发的反向代理软件。\">http://nginx.com/]是轻量级、性能强、占用资源少，能很好的处理高并发的反向代理软件。</a></p>\n<p>sudo apt-get install nginx<br>配置 Nginx<br>Ubuntu 上配置 Nginx 也是很简单，不要去改动默认的 nginx.conf 只需要将</p>\n<p>/ext/nginx/sites-available/default<br>文件替换掉就可以了。</p>\n<p>新建一个 default 文件:</p>\n<pre><code>server {\n  listen  80;\n  server_name XXX.XXX.XXX; #公网地址\n\n  location / {\n    include      uwsgi_params;\n    uwsgi_pass   127.0.0.1:8001;  # 指向uwsgi 所应用的内部地址,所有请求将转发给uwsgi 处理\n    uwsgi_param UWSGI_PYHOME /home/www/my_flask/venv; # 指向虚拟环境目录\n    uwsgi_param UWSGI_CHDIR  /home/www/my_flask; # 指向网站根目录\n    uwsgi_param UWSGI_SCRIPT manage:app; # 指定启动程序\n  }\n}\n</code></pre><p>将default配置文件替换掉就大功告成了！<br>还有，更改配置还需要记得重启一下nginx:</p>\n<p>sudo service nginx restart<br>总结<br>阿里云的服务器运行速度很不错，加上Flask+uWSGI+nginx 这种高性能结构，整个网站响应速度极为之快，每页响应速度不到0.1s , 与之相比我之前使用 C# 部署在Avarix 上的网站（同一个程序，不同语言实现）每页响应速度至少2s 这简直是 200:1的性能，当然我还没有闲到去专们用软件去测这两者之间的差值，写本文的目的也是对此作一记录，以便以后回顾。config</p>\n"},{"title":"git设置不需要设置密码","date":"2015-12-09T09:18:35.000Z","_content":"\n-\thttps方式每次都要输入密码，按照如下设置即可输入一次就不用再手输入密码的困扰而且又享受https带来的极速\n\t\n\t*\t设置记住密码（默认15分钟）：\n\t\t```\n\t\tgit config --global credential.helper cache\n\t\t```\n\t*\t如果想自己设置时间，可以这样做：\n\t\t```\n\t\tgit config credential.helper 'cache --timeout=3600'\n\t\t```\n\t\t这样就设置一个小时之后失效\n\t\n\t*\t长期存储密码：\n\t\t```\n\t\tgit config --global credential.helper store\n\t\t```\n\t\t增加远程地址的时候带上密码也是可以的。(推荐)\n\n\t\t```\n\t\t\thttp://yourname:password@git.oschina.net/name/project.git \n\t\t```\n\n-\t如果你正在使用ssh而且想体验https带来的高速，那么你可以这样做： 切换到项目目录下 ：\n\t```\n\tcd projectfile/\n\t```\n\t移除远程ssh方式的仓库地址\n\t```\n\tgit remote rm origin\n\t```\n\t增加https远程仓库地址\n\t```\n\tgit remote add origin http://yourname:password@git.oschina.net/name/project.git\n\t```\n\n-\tI had similar problem (hang after successful authentication) on HP-UX with git 1.8.5.3.\nI debugged it with GIT_TRACE=1:\n\t```\n\texport GIT_CURL_VERBOSE=1\n\texport GIT_TRACE=1\n\t```\nand the last line before hang was:\ntrace: run_command: 'git-credential-cache--daemon' '/home/user_name/.git-credential-cache/socket'\nso I disabled password caching:\n```\ngit config --global --unset credential.helper\n```\nand the problem went away.\nBut now I have to type password every time :(\n'/home/user_name/.git-credential-cache/socket' exists on my Ubuntu and it is a socket, but it is missing on HP-UX.\nAt the same time I'm having another problem related to sockets on HP-UX: vim works fine but prints warning\nconnect /tmp/.X11-unix/X0: No such file or directory\nevery time I launch it. Again, on Ubuntu \"/tmp/.X11-unix/X0\" exists and it is a socket but on HP-UX it does not exist. I worked around this problem by unsetting DISPLAY:\nunset DISPLAY\nSomeone told me that rebooting HP-UX box may solve socket problems but I can't try it since it's shared server.\nYou may try to investigate your problem with GIT_TRACE=1.","source":"_posts/2015/12/09/git设置不需要设置密码.md","raw":"title: git设置不需要设置密码\ndate: 2015-12-09 17:18:35\ncategories:\n- Git\ntags:\n- Git\n---\n\n-\thttps方式每次都要输入密码，按照如下设置即可输入一次就不用再手输入密码的困扰而且又享受https带来的极速\n\t\n\t*\t设置记住密码（默认15分钟）：\n\t\t```\n\t\tgit config --global credential.helper cache\n\t\t```\n\t*\t如果想自己设置时间，可以这样做：\n\t\t```\n\t\tgit config credential.helper 'cache --timeout=3600'\n\t\t```\n\t\t这样就设置一个小时之后失效\n\t\n\t*\t长期存储密码：\n\t\t```\n\t\tgit config --global credential.helper store\n\t\t```\n\t\t增加远程地址的时候带上密码也是可以的。(推荐)\n\n\t\t```\n\t\t\thttp://yourname:password@git.oschina.net/name/project.git \n\t\t```\n\n-\t如果你正在使用ssh而且想体验https带来的高速，那么你可以这样做： 切换到项目目录下 ：\n\t```\n\tcd projectfile/\n\t```\n\t移除远程ssh方式的仓库地址\n\t```\n\tgit remote rm origin\n\t```\n\t增加https远程仓库地址\n\t```\n\tgit remote add origin http://yourname:password@git.oschina.net/name/project.git\n\t```\n\n-\tI had similar problem (hang after successful authentication) on HP-UX with git 1.8.5.3.\nI debugged it with GIT_TRACE=1:\n\t```\n\texport GIT_CURL_VERBOSE=1\n\texport GIT_TRACE=1\n\t```\nand the last line before hang was:\ntrace: run_command: 'git-credential-cache--daemon' '/home/user_name/.git-credential-cache/socket'\nso I disabled password caching:\n```\ngit config --global --unset credential.helper\n```\nand the problem went away.\nBut now I have to type password every time :(\n'/home/user_name/.git-credential-cache/socket' exists on my Ubuntu and it is a socket, but it is missing on HP-UX.\nAt the same time I'm having another problem related to sockets on HP-UX: vim works fine but prints warning\nconnect /tmp/.X11-unix/X0: No such file or directory\nevery time I launch it. Again, on Ubuntu \"/tmp/.X11-unix/X0\" exists and it is a socket but on HP-UX it does not exist. I worked around this problem by unsetting DISPLAY:\nunset DISPLAY\nSomeone told me that rebooting HP-UX box may solve socket problems but I can't try it since it's shared server.\nYou may try to investigate your problem with GIT_TRACE=1.","slug":"git设置不需要设置密码","published":1,"updated":"2016-06-29T15:29:25.175Z","_id":"cik3sv4sw000d0s370defsiel","comments":1,"layout":"post","photos":[],"link":"","content":"<ul>\n<li><p>https方式每次都要输入密码，按照如下设置即可输入一次就不用再手输入密码的困扰而且又享受https带来的极速</p>\n<ul>\n<li><p>设置记住密码（默认15分钟）：</p>\n<figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">git config --global credential<span class=\"selector-class\">.helper</span> cache</div></pre></td></tr></table></figure>\n</li>\n<li><p>如果想自己设置时间，可以这样做：</p>\n<figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">git config credential<span class=\"selector-class\">.helper</span> <span class=\"string\">'cache --timeout=3600'</span></div></pre></td></tr></table></figure>\n<p>这样就设置一个小时之后失效</p>\n</li>\n<li><p>长期存储密码：</p>\n<figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">git config --global credential<span class=\"selector-class\">.helper</span> store</div></pre></td></tr></table></figure>\n<p>增加远程地址的时候带上密码也是可以的。(推荐)</p>\n<figure class=\"highlight dts\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"symbol\">http:</span><span class=\"comment\">//yourname:password@git.oschina.net/name/project.git</span></div></pre></td></tr></table></figure>\n</li>\n</ul>\n</li>\n<li><p>如果你正在使用ssh而且想体验https带来的高速，那么你可以这样做： 切换到项目目录下 ：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">cd</span> projectfile/</div></pre></td></tr></table></figure>\n<p>移除远程ssh方式的仓库地址</p>\n<figure class=\"highlight maxima\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">git remote rm <span class=\"built_in\">origin</span></div></pre></td></tr></table></figure>\n<p>增加https远程仓库地址</p>\n<figure class=\"highlight groovy\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">git remote add origin <span class=\"string\">http:</span><span class=\"comment\">//yourname:password@git.oschina.net/name/project.git</span></div></pre></td></tr></table></figure>\n</li>\n<li><p>I had similar problem (hang after successful authentication) on HP-UX with git 1.8.5.3.<br>I debugged it with GIT_TRACE=1:</p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">export</span> GIT_CURL_VERBOSE=<span class=\"number\">1</span></div><div class=\"line\"><span class=\"keyword\">export</span> GIT_TRACE=<span class=\"number\">1</span></div></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>and the last line before hang was:<br>trace: run_command: ‘git-credential-cache–daemon’ ‘/home/user_name/.git-credential-cache/socket’<br>so I disabled password caching:<br><figure class=\"highlight brainfuck\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">git</span> <span class=\"comment\">config</span> <span class=\"literal\">-</span><span class=\"literal\">-</span><span class=\"comment\">global</span> <span class=\"literal\">-</span><span class=\"literal\">-</span><span class=\"comment\">unset</span> <span class=\"comment\">credential</span><span class=\"string\">.</span><span class=\"comment\">helper</span></div></pre></td></tr></table></figure></p>\n<p>and the problem went away.<br>But now I have to type password every time :(<br>‘/home/user_name/.git-credential-cache/socket’ exists on my Ubuntu and it is a socket, but it is missing on HP-UX.<br>At the same time I’m having another problem related to sockets on HP-UX: vim works fine but prints warning<br>connect /tmp/.X11-unix/X0: No such file or directory<br>every time I launch it. Again, on Ubuntu “/tmp/.X11-unix/X0” exists and it is a socket but on HP-UX it does not exist. I worked around this problem by unsetting DISPLAY:<br>unset DISPLAY<br>Someone told me that rebooting HP-UX box may solve socket problems but I can’t try it since it’s shared server.<br>You may try to investigate your problem with GIT_TRACE=1.</p>\n","excerpt":"","more":"<ul>\n<li><p>https方式每次都要输入密码，按照如下设置即可输入一次就不用再手输入密码的困扰而且又享受https带来的极速</p>\n<ul>\n<li><p>设置记住密码（默认15分钟）：</p>\n<figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">git config --global credential<span class=\"selector-class\">.helper</span> cache</div></pre></td></tr></table></figure>\n</li>\n<li><p>如果想自己设置时间，可以这样做：</p>\n<figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">git config credential<span class=\"selector-class\">.helper</span> <span class=\"string\">'cache --timeout=3600'</span></div></pre></td></tr></table></figure>\n<p>这样就设置一个小时之后失效</p>\n</li>\n<li><p>长期存储密码：</p>\n<figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">git config --global credential<span class=\"selector-class\">.helper</span> store</div></pre></td></tr></table></figure>\n<p>增加远程地址的时候带上密码也是可以的。(推荐)</p>\n<figure class=\"highlight dts\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"symbol\">http:</span><span class=\"comment\">//yourname:password@git.oschina.net/name/project.git</span></div></pre></td></tr></table></figure>\n</li>\n</ul>\n</li>\n<li><p>如果你正在使用ssh而且想体验https带来的高速，那么你可以这样做： 切换到项目目录下 ：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">cd</span> projectfile/</div></pre></td></tr></table></figure>\n<p>移除远程ssh方式的仓库地址</p>\n<figure class=\"highlight maxima\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">git remote rm <span class=\"built_in\">origin</span></div></pre></td></tr></table></figure>\n<p>增加https远程仓库地址</p>\n<figure class=\"highlight groovy\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">git remote add origin <span class=\"string\">http:</span><span class=\"comment\">//yourname:password@git.oschina.net/name/project.git</span></div></pre></td></tr></table></figure>\n</li>\n<li><p>I had similar problem (hang after successful authentication) on HP-UX with git 1.8.5.3.<br>I debugged it with GIT_TRACE=1:</p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">export</span> GIT_CURL_VERBOSE=<span class=\"number\">1</span></div><div class=\"line\"><span class=\"keyword\">export</span> GIT_TRACE=<span class=\"number\">1</span></div></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>and the last line before hang was:<br>trace: run_command: ‘git-credential-cache–daemon’ ‘/home/user_name/.git-credential-cache/socket’<br>so I disabled password caching:<br><figure class=\"highlight brainfuck\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">git</span> <span class=\"comment\">config</span> <span class=\"literal\">-</span><span class=\"literal\">-</span><span class=\"comment\">global</span> <span class=\"literal\">-</span><span class=\"literal\">-</span><span class=\"comment\">unset</span> <span class=\"comment\">credential</span><span class=\"string\">.</span><span class=\"comment\">helper</span></div></pre></td></tr></table></figure></p>\n<p>and the problem went away.<br>But now I have to type password every time :(<br>‘/home/user_name/.git-credential-cache/socket’ exists on my Ubuntu and it is a socket, but it is missing on HP-UX.<br>At the same time I’m having another problem related to sockets on HP-UX: vim works fine but prints warning<br>connect /tmp/.X11-unix/X0: No such file or directory<br>every time I launch it. Again, on Ubuntu “/tmp/.X11-unix/X0” exists and it is a socket but on HP-UX it does not exist. I worked around this problem by unsetting DISPLAY:<br>unset DISPLAY<br>Someone told me that rebooting HP-UX box may solve socket problems but I can’t try it since it’s shared server.<br>You may try to investigate your problem with GIT_TRACE=1.</p>\n"},{"title":"python之nosetests","date":"2015-11-26T03:17:31.000Z","_content":"setup和teardown\nsetup:在测试用例开始时被执行\nteardown:在测试用例结束后被执行\n    nose在文件中如果找到函数setup, setup_module, setUp 或者setUpModule等，那么会在该模块的所有测试执行之前执行该函数。如果找到函数 teardown,tearDown, teardown_module或者 tearDownModule 等，那么会在该模块所有的测试执行完之后执行该函数。　\n    对于上面的代码，nose实际的执行过程是这样的：　　\nsetUp()->Testfunc1()->Testfunc2()->tearDown()\n    \n\n    nose常用参数\nnosetests  –v :debug模式，看到具体执行情况，推荐大家执行时用这个选项\nnose会捕获标准输出，调试的print代码默认不会打印。nosetest  –s 可打开output输出，否则全部通过时不打印stdout。\n默认nosetests会执行所有的case，若想单独只执行一个case，执行nosetest --tests 后跟要测试的文件(nosetests后面直接跟文件名，其实也可以直接运行该case)。\nnosetests --collect-only -v :不运行程序，只是搜集并输出各个case的名称\nnosetests -x  :一旦case失败立即停止，不执行后续case\n-w ，指定一个目录运行测试。目录可以是相对路径或绝对路径\n\n\n```\nsetup\ntest_client_is_mobile\ntear down\n.setup\ntest_client_is_not_mobile\ntear down\n.setup\ntest_get_server_name_from_url\ntear down\n\n```","source":"_posts/2015/11/26/python之nosetests.md","raw":"title: python之nosetests\ndate: 2015-11-26 11:17:31\ntags:\n- test\n- python\n---\nsetup和teardown\nsetup:在测试用例开始时被执行\nteardown:在测试用例结束后被执行\n    nose在文件中如果找到函数setup, setup_module, setUp 或者setUpModule等，那么会在该模块的所有测试执行之前执行该函数。如果找到函数 teardown,tearDown, teardown_module或者 tearDownModule 等，那么会在该模块所有的测试执行完之后执行该函数。　\n    对于上面的代码，nose实际的执行过程是这样的：　　\nsetUp()->Testfunc1()->Testfunc2()->tearDown()\n    \n\n    nose常用参数\nnosetests  –v :debug模式，看到具体执行情况，推荐大家执行时用这个选项\nnose会捕获标准输出，调试的print代码默认不会打印。nosetest  –s 可打开output输出，否则全部通过时不打印stdout。\n默认nosetests会执行所有的case，若想单独只执行一个case，执行nosetest --tests 后跟要测试的文件(nosetests后面直接跟文件名，其实也可以直接运行该case)。\nnosetests --collect-only -v :不运行程序，只是搜集并输出各个case的名称\nnosetests -x  :一旦case失败立即停止，不执行后续case\n-w ，指定一个目录运行测试。目录可以是相对路径或绝对路径\n\n\n```\nsetup\ntest_client_is_mobile\ntear down\n.setup\ntest_client_is_not_mobile\ntear down\n.setup\ntest_get_server_name_from_url\ntear down\n\n```","slug":"python之nosetests","published":1,"updated":"2016-06-29T15:29:25.175Z","_id":"cik3sv4t1000i0s37cjthep5b","comments":1,"layout":"post","photos":[],"link":"","content":"<p>setup和teardown<br>setup:在测试用例开始时被执行<br>teardown:在测试用例结束后被执行<br>    nose在文件中如果找到函数setup, setup_module, setUp 或者setUpModule等，那么会在该模块的所有测试执行之前执行该函数。如果找到函数 teardown,tearDown, teardown_module或者 tearDownModule 等，那么会在该模块所有的测试执行完之后执行该函数。　<br>    对于上面的代码，nose实际的执行过程是这样的：　　<br>setUp()-&gt;Testfunc1()-&gt;Testfunc2()-&gt;tearDown()</p>\n<pre><code>nose常用参数\n</code></pre><p>nosetests  –v :debug模式，看到具体执行情况，推荐大家执行时用这个选项<br>nose会捕获标准输出，调试的print代码默认不会打印。nosetest  –s 可打开output输出，否则全部通过时不打印stdout。<br>默认nosetests会执行所有的case，若想单独只执行一个case，执行nosetest –tests 后跟要测试的文件(nosetests后面直接跟文件名，其实也可以直接运行该case)。<br>nosetests –collect-only -v :不运行程序，只是搜集并输出各个case的名称<br>nosetests -x  :一旦case失败立即停止，不执行后续case<br>-w ，指定一个目录运行测试。目录可以是相对路径或绝对路径</p>\n<figure class=\"highlight x86asm\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">setup</div><div class=\"line\">test_client_is_mobile</div><div class=\"line\">tear <span class=\"meta\">down</span></div><div class=\"line\"><span class=\"meta\">.setup</span></div><div class=\"line\">test_client_is_not_mobile</div><div class=\"line\">tear <span class=\"meta\">down</span></div><div class=\"line\"><span class=\"meta\">.setup</span></div><div class=\"line\">test_get_server_name_from_url</div><div class=\"line\">tear <span class=\"meta\">down</span></div></pre></td></tr></table></figure>","excerpt":"","more":"<p>setup和teardown<br>setup:在测试用例开始时被执行<br>teardown:在测试用例结束后被执行<br>    nose在文件中如果找到函数setup, setup_module, setUp 或者setUpModule等，那么会在该模块的所有测试执行之前执行该函数。如果找到函数 teardown,tearDown, teardown_module或者 tearDownModule 等，那么会在该模块所有的测试执行完之后执行该函数。　<br>    对于上面的代码，nose实际的执行过程是这样的：　　<br>setUp()-&gt;Testfunc1()-&gt;Testfunc2()-&gt;tearDown()</p>\n<pre><code>nose常用参数\n</code></pre><p>nosetests  –v :debug模式，看到具体执行情况，推荐大家执行时用这个选项<br>nose会捕获标准输出，调试的print代码默认不会打印。nosetest  –s 可打开output输出，否则全部通过时不打印stdout。<br>默认nosetests会执行所有的case，若想单独只执行一个case，执行nosetest –tests 后跟要测试的文件(nosetests后面直接跟文件名，其实也可以直接运行该case)。<br>nosetests –collect-only -v :不运行程序，只是搜集并输出各个case的名称<br>nosetests -x  :一旦case失败立即停止，不执行后续case<br>-w ，指定一个目录运行测试。目录可以是相对路径或绝对路径</p>\n<figure class=\"highlight x86asm\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">setup</div><div class=\"line\">test_client_is_mobile</div><div class=\"line\">tear <span class=\"meta\">down</span></div><div class=\"line\"><span class=\"meta\">.setup</span></div><div class=\"line\">test_client_is_not_mobile</div><div class=\"line\">tear <span class=\"meta\">down</span></div><div class=\"line\"><span class=\"meta\">.setup</span></div><div class=\"line\">test_get_server_name_from_url</div><div class=\"line\">tear <span class=\"meta\">down</span></div></pre></td></tr></table></figure>"},{"title":"flask之Context","date":"2015-11-26T03:57:19.000Z","_content":"```\nIn [1]: import threa\nthread     threading  \n\nIn [1]: import threading\n\nIn [2]: storage = threading.local()\n\nIn [3]: stor\n%store   storage  \n\nIn [3]: storage.foo = 1\n\nIn [4]: print sto\n%store   storage  \n\nIn [4]: print stor\n%store   storage  \n\nIn [4]: print storage.foo\n1\n\nIn [5]: class AnotherThread(threading.T\nthreading.Thread       threading.ThreadError  threading.Timer\n\nIn [5]: class AnotherThread(threading.Th\nthreading.Thread       threading.ThreadError  \n\nIn [5]: class AnotherThread(threading.Thread):\n   ...:     def run(self):\n   ...:         storage.foo = 2\n   ...:         print storage.foo\n   ...:         \n\nIn [6]: another = AnotherThread()\n\nIn [7]: another.start()\n2\n\n\nIn [8]: print storage.foo\n1\n```","source":"_posts/2015/11/26/flask之Context.md","raw":"title: flask之Context\ndate: 2015-11-26 11:57:19\ntags:\n---\n```\nIn [1]: import threa\nthread     threading  \n\nIn [1]: import threading\n\nIn [2]: storage = threading.local()\n\nIn [3]: stor\n%store   storage  \n\nIn [3]: storage.foo = 1\n\nIn [4]: print sto\n%store   storage  \n\nIn [4]: print stor\n%store   storage  \n\nIn [4]: print storage.foo\n1\n\nIn [5]: class AnotherThread(threading.T\nthreading.Thread       threading.ThreadError  threading.Timer\n\nIn [5]: class AnotherThread(threading.Th\nthreading.Thread       threading.ThreadError  \n\nIn [5]: class AnotherThread(threading.Thread):\n   ...:     def run(self):\n   ...:         storage.foo = 2\n   ...:         print storage.foo\n   ...:         \n\nIn [6]: another = AnotherThread()\n\nIn [7]: another.start()\n2\n\n\nIn [8]: print storage.foo\n1\n```","slug":"flask之Context","published":1,"updated":"2016-06-29T15:29:25.175Z","_id":"cik3sv4tu000n0s372epwndjn","comments":1,"layout":"post","photos":[],"link":"","content":"<figure class=\"highlight stata\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">In</span> [1]: import threa</div><div class=\"line\">thread     threading  </div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">In</span> [1]: import threading</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">In</span> [2]: storage = threading.<span class=\"keyword\">local</span>()</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">In</span> [3]: stor</div><div class=\"line\">%store   storage  </div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">In</span> [3]: storage.foo = 1</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">In</span> [4]: <span class=\"keyword\">print</span> sto</div><div class=\"line\">%store   storage  </div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">In</span> [4]: <span class=\"keyword\">print</span> stor</div><div class=\"line\">%store   storage  </div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">In</span> [4]: <span class=\"keyword\">print</span> storage.foo</div><div class=\"line\">1</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">In</span> [5]: <span class=\"keyword\">class</span> AnotherThread(threading.T</div><div class=\"line\">threading.Thread       threading.ThreadError  threading.<span class=\"keyword\">Timer</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">In</span> [5]: <span class=\"keyword\">class</span> AnotherThread(threading.Th</div><div class=\"line\">threading.Thread       threading.ThreadError  </div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">In</span> [5]: <span class=\"keyword\">class</span> AnotherThread(threading.Thread):</div><div class=\"line\">   ...:     def <span class=\"keyword\">run</span>(self):</div><div class=\"line\">   ...:         storage.foo = 2</div><div class=\"line\">   ...:         <span class=\"keyword\">print</span> storage.foo</div><div class=\"line\">   ...:         </div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">In</span> [6]: another = AnotherThread()</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">In</span> [7]: another.start()</div><div class=\"line\">2</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">In</span> [8]: <span class=\"keyword\">print</span> storage.foo</div><div class=\"line\">1</div></pre></td></tr></table></figure>","excerpt":"","more":"<figure class=\"highlight stata\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">In</span> [1]: import threa</div><div class=\"line\">thread     threading  </div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">In</span> [1]: import threading</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">In</span> [2]: storage = threading.<span class=\"keyword\">local</span>()</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">In</span> [3]: stor</div><div class=\"line\">%store   storage  </div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">In</span> [3]: storage.foo = 1</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">In</span> [4]: <span class=\"keyword\">print</span> sto</div><div class=\"line\">%store   storage  </div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">In</span> [4]: <span class=\"keyword\">print</span> stor</div><div class=\"line\">%store   storage  </div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">In</span> [4]: <span class=\"keyword\">print</span> storage.foo</div><div class=\"line\">1</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">In</span> [5]: <span class=\"keyword\">class</span> AnotherThread(threading.T</div><div class=\"line\">threading.Thread       threading.ThreadError  threading.<span class=\"keyword\">Timer</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">In</span> [5]: <span class=\"keyword\">class</span> AnotherThread(threading.Th</div><div class=\"line\">threading.Thread       threading.ThreadError  </div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">In</span> [5]: <span class=\"keyword\">class</span> AnotherThread(threading.Thread):</div><div class=\"line\">   ...:     def <span class=\"keyword\">run</span>(self):</div><div class=\"line\">   ...:         storage.foo = 2</div><div class=\"line\">   ...:         <span class=\"keyword\">print</span> storage.foo</div><div class=\"line\">   ...:         </div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">In</span> [6]: another = AnotherThread()</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">In</span> [7]: another.start()</div><div class=\"line\">2</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">In</span> [8]: <span class=\"keyword\">print</span> storage.foo</div><div class=\"line\">1</div></pre></td></tr></table></figure>"},{"title":"flask之错误收集","date":"2015-11-25T04:45:01.000Z","_content":"*\tfatal error: openssl/aes.h: No such file or directory\n\n\t-\t解决方法：\n\t\t```\n\t\t\tsudo apt-get install libssl-dev\n\t\t```\n\n","source":"_posts/2015/11/25/flask之错误收集.md","raw":"title: flask之错误收集\ndate: 2015-11-25 12:45:01\ntags:\n---\n*\tfatal error: openssl/aes.h: No such file or directory\n\n\t-\t解决方法：\n\t\t```\n\t\t\tsudo apt-get install libssl-dev\n\t\t```\n\n","slug":"flask之错误收集","published":1,"updated":"2016-06-29T15:29:25.175Z","_id":"cik3sv4tx000o0s37d8jdzz92","comments":1,"layout":"post","photos":[],"link":"","content":"<ul>\n<li><p>fatal error: openssl/aes.h: No such file or directory</p>\n<ul>\n<li>解决方法：<figure class=\"highlight q\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">sudo apt-<span class=\"built_in\">get</span> install libssl-<span class=\"built_in\">dev</span></div></pre></td></tr></table></figure>\n</li>\n</ul>\n</li>\n</ul>\n","excerpt":"","more":"<ul>\n<li><p>fatal error: openssl/aes.h: No such file or directory</p>\n<ul>\n<li>解决方法：<figure class=\"highlight q\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">sudo apt-<span class=\"built_in\">get</span> install libssl-<span class=\"built_in\">dev</span></div></pre></td></tr></table></figure>\n</li>\n</ul>\n</li>\n</ul>\n"},{"title":"flask之学习安装学习1","date":"2015-11-20T08:11:19.000Z","_content":"\n\n\n1.\tpip install virtualenv\n2.\tvirtualenv ve\n3.\tsource ve/bin/activate\n4.\tpip install Flask\n\n*\t第一个demo hello.py\n\t```\n\tfrom flask import Flask\n\tapp = Flask(__name__)\n\t\n\t@app.route('/')\n\tdef hello_world():\n\t    return 'Hello World!'\n\t\n\tif __name__ == '__main__':\n\t    app.run()\n\t```\n\t\n\t*不要使用flask.py,这会与 Flask 本身发生冲突,否则如下错误*\n\t```\n\t(ve)yann@yann-computer:~/workspace/flask_workplace/demo1$ python flask.py \n\tTraceback (most recent call last):\n\t  File \"flask.py\", line 1, in <module>\n\t    from flask import Flask\n\t  File \"/home/yann/workspace/flask_workplace/demo1/flask.py\", line 1, in <module>\n\t    from flask import Flask\n\tImportError: cannot import name Flask\n\t\n\t```\n\n*\t第二个demo \n\t```\n\tfrom flask import Flask\n\tapp = Flask(__name__)\n\t\n\t@app.route('/')\n\tdef index():\n\t    return 'Index Page'\n\t\n\t@app.route('/hello')\n\tdef hello():\n\t    return 'Hello World'\n\t\n\t@app.route('/user/<username>')\n\tdef show_user_profile(username):\n\t    # show the user profile for that user\n\t    return 'User %s' % username\n\t\n\t@app.route('/post/<int:post_id>')\n\tdef show_post(post_id):\n\t    # show the post with the given id, the id is an integer\n\t    return 'Post %d' % post_id\n\t\n\tif __name__ == '__main__':\n\t    app.run(host='127.0.0.1', port=8080,debug=True) #更改端口，debug模式\n\t    #app.run()\n\t```\n\n现有的转换器有：\n\t<table>\n\t    <tr>\n\t        <td>int</td><td>接受整数</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>float</td><td>接受浮点数</td>\n\t\t</tr>\n\t<tr>\n\t\t\t<td>path</td><td>和缺省情况相同，但也接受斜杠</td>\n\t    </tr>\n\t</table>\n\n\n* 消息闪现\n\n\t[例子地址](http://dormousehole.readthedocs.org/en/latest/patterns/flashing.html#message-flashing-pattern)，消息闪现其实就是用户操作后，给用户的提示","source":"_posts/2015/11/20/flask之学习安装.md","raw":"title: flask之学习安装学习1\ndate: 2015-11-20 16:11:19\ntags:\n---\n\n\n\n1.\tpip install virtualenv\n2.\tvirtualenv ve\n3.\tsource ve/bin/activate\n4.\tpip install Flask\n\n*\t第一个demo hello.py\n\t```\n\tfrom flask import Flask\n\tapp = Flask(__name__)\n\t\n\t@app.route('/')\n\tdef hello_world():\n\t    return 'Hello World!'\n\t\n\tif __name__ == '__main__':\n\t    app.run()\n\t```\n\t\n\t*不要使用flask.py,这会与 Flask 本身发生冲突,否则如下错误*\n\t```\n\t(ve)yann@yann-computer:~/workspace/flask_workplace/demo1$ python flask.py \n\tTraceback (most recent call last):\n\t  File \"flask.py\", line 1, in <module>\n\t    from flask import Flask\n\t  File \"/home/yann/workspace/flask_workplace/demo1/flask.py\", line 1, in <module>\n\t    from flask import Flask\n\tImportError: cannot import name Flask\n\t\n\t```\n\n*\t第二个demo \n\t```\n\tfrom flask import Flask\n\tapp = Flask(__name__)\n\t\n\t@app.route('/')\n\tdef index():\n\t    return 'Index Page'\n\t\n\t@app.route('/hello')\n\tdef hello():\n\t    return 'Hello World'\n\t\n\t@app.route('/user/<username>')\n\tdef show_user_profile(username):\n\t    # show the user profile for that user\n\t    return 'User %s' % username\n\t\n\t@app.route('/post/<int:post_id>')\n\tdef show_post(post_id):\n\t    # show the post with the given id, the id is an integer\n\t    return 'Post %d' % post_id\n\t\n\tif __name__ == '__main__':\n\t    app.run(host='127.0.0.1', port=8080,debug=True) #更改端口，debug模式\n\t    #app.run()\n\t```\n\n现有的转换器有：\n\t<table>\n\t    <tr>\n\t        <td>int</td><td>接受整数</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>float</td><td>接受浮点数</td>\n\t\t</tr>\n\t<tr>\n\t\t\t<td>path</td><td>和缺省情况相同，但也接受斜杠</td>\n\t    </tr>\n\t</table>\n\n\n* 消息闪现\n\n\t[例子地址](http://dormousehole.readthedocs.org/en/latest/patterns/flashing.html#message-flashing-pattern)，消息闪现其实就是用户操作后，给用户的提示","slug":"flask之学习安装","published":1,"updated":"2016-06-29T15:29:25.175Z","_id":"cik3sv4u1000p0s37i9c9dt1p","comments":1,"layout":"post","photos":[],"link":"","content":"<ol>\n<li>pip install virtualenv</li>\n<li>virtualenv ve</li>\n<li>source ve/bin/activate</li>\n<li>pip install Flask</li>\n</ol>\n<ul>\n<li>第一个demo hello.py<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">from</span> flask <span class=\"keyword\">import</span> Flask</div><div class=\"line\">app = Flask(__name__)</div><div class=\"line\"></div><div class=\"line\"><span class=\"meta\">@app.route('/')</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">hello_world</span><span class=\"params\">()</span>:</span></div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">'Hello World!'</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">'__main__'</span>:</div><div class=\"line\">    app.run()</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<pre><code>*不要使用flask.py,这会与 Flask 本身发生冲突,否则如下错误*\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">(ve)yann@yann-computer:~/workspace/flask_workplace/demo1$ python flask.py </div><div class=\"line\">Traceback (most recent <span class=\"keyword\">call</span> <span class=\"keyword\">last</span>):</div><div class=\"line\">  <span class=\"keyword\">File</span> <span class=\"string\">\"flask.py\"</span>, line <span class=\"number\">1</span>, <span class=\"keyword\">in</span> &lt;<span class=\"keyword\">module</span>&gt;</div><div class=\"line\">    <span class=\"keyword\">from</span> flask <span class=\"keyword\">import</span> Flask</div><div class=\"line\">  <span class=\"keyword\">File</span> <span class=\"string\">\"/home/yann/workspace/flask_workplace/demo1/flask.py\"</span>, line <span class=\"number\">1</span>, <span class=\"keyword\">in</span> &lt;<span class=\"keyword\">module</span>&gt;</div><div class=\"line\">    <span class=\"keyword\">from</span> flask <span class=\"keyword\">import</span> Flask</div><div class=\"line\">ImportError: cannot <span class=\"keyword\">import</span> <span class=\"keyword\">name</span> Flask</div></pre></td></tr></table></figure>\n</code></pre><ul>\n<li>第二个demo <figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">from</span> flask <span class=\"keyword\">import</span> Flask</div><div class=\"line\">app = Flask(__name__)</div><div class=\"line\"></div><div class=\"line\"><span class=\"meta\">@app.route('/')</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">index</span><span class=\"params\">()</span>:</span></div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">'Index Page'</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"meta\">@app.route('/hello')</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">hello</span><span class=\"params\">()</span>:</span></div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">'Hello World'</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"meta\">@app.route('/user/&lt;username&gt;')</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">show_user_profile</span><span class=\"params\">(username)</span>:</span></div><div class=\"line\">    <span class=\"comment\"># show the user profile for that user</span></div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">'User %s'</span> % username</div><div class=\"line\"></div><div class=\"line\"><span class=\"meta\">@app.route('/post/&lt;int:post_id&gt;')</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">show_post</span><span class=\"params\">(post_id)</span>:</span></div><div class=\"line\">    <span class=\"comment\"># show the post with the given id, the id is an integer</span></div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">'Post %d'</span> % post_id</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">'__main__'</span>:</div><div class=\"line\">    app.run(host=<span class=\"string\">'127.0.0.1'</span>, port=<span class=\"number\">8080</span>,debug=<span class=\"keyword\">True</span>) <span class=\"comment\">#更改端口，debug模式</span></div><div class=\"line\">    <span class=\"comment\">#app.run()</span></div></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>现有的转换器有：<br>    <table><br>        <tr><br>            <td>int</td><td>接受整数</td><br>        </tr><br>        <tr><br>            <td>float</td><td>接受浮点数</td><br>        </tr><br>    <tr><br>            <td>path</td><td>和缺省情况相同，但也接受斜杠</td><br>        </tr><br>    </table></p>\n<ul>\n<li><p>消息闪现</p>\n<p>  <a href=\"http://dormousehole.readthedocs.org/en/latest/patterns/flashing.html#message-flashing-pattern\" target=\"_blank\" rel=\"external\">例子地址</a>，消息闪现其实就是用户操作后，给用户的提示</p>\n</li>\n</ul>\n","excerpt":"","more":"<ol>\n<li>pip install virtualenv</li>\n<li>virtualenv ve</li>\n<li>source ve/bin/activate</li>\n<li>pip install Flask</li>\n</ol>\n<ul>\n<li>第一个demo hello.py<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">from</span> flask <span class=\"keyword\">import</span> Flask</div><div class=\"line\">app = Flask(__name__)</div><div class=\"line\"></div><div class=\"line\"><span class=\"meta\">@app.route('/')</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">hello_world</span><span class=\"params\">()</span>:</span></div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">'Hello World!'</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">'__main__'</span>:</div><div class=\"line\">    app.run()</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<pre><code>*不要使用flask.py,这会与 Flask 本身发生冲突,否则如下错误*\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">(ve)yann@yann-computer:~/workspace/flask_workplace/demo1$ python flask.py </div><div class=\"line\">Traceback (most recent <span class=\"keyword\">call</span> <span class=\"keyword\">last</span>):</div><div class=\"line\">  <span class=\"keyword\">File</span> <span class=\"string\">\"flask.py\"</span>, line <span class=\"number\">1</span>, <span class=\"keyword\">in</span> &lt;<span class=\"keyword\">module</span>&gt;</div><div class=\"line\">    <span class=\"keyword\">from</span> flask <span class=\"keyword\">import</span> Flask</div><div class=\"line\">  <span class=\"keyword\">File</span> <span class=\"string\">\"/home/yann/workspace/flask_workplace/demo1/flask.py\"</span>, line <span class=\"number\">1</span>, <span class=\"keyword\">in</span> &lt;<span class=\"keyword\">module</span>&gt;</div><div class=\"line\">    <span class=\"keyword\">from</span> flask <span class=\"keyword\">import</span> Flask</div><div class=\"line\">ImportError: cannot <span class=\"keyword\">import</span> <span class=\"keyword\">name</span> Flask</div></pre></td></tr></table></figure>\n</code></pre><ul>\n<li>第二个demo <figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">from</span> flask <span class=\"keyword\">import</span> Flask</div><div class=\"line\">app = Flask(__name__)</div><div class=\"line\"></div><div class=\"line\"><span class=\"meta\">@app.route('/')</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">index</span><span class=\"params\">()</span>:</span></div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">'Index Page'</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"meta\">@app.route('/hello')</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">hello</span><span class=\"params\">()</span>:</span></div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">'Hello World'</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"meta\">@app.route('/user/&lt;username&gt;')</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">show_user_profile</span><span class=\"params\">(username)</span>:</span></div><div class=\"line\">    <span class=\"comment\"># show the user profile for that user</span></div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">'User %s'</span> % username</div><div class=\"line\"></div><div class=\"line\"><span class=\"meta\">@app.route('/post/&lt;int:post_id&gt;')</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">show_post</span><span class=\"params\">(post_id)</span>:</span></div><div class=\"line\">    <span class=\"comment\"># show the post with the given id, the id is an integer</span></div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">'Post %d'</span> % post_id</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">'__main__'</span>:</div><div class=\"line\">    app.run(host=<span class=\"string\">'127.0.0.1'</span>, port=<span class=\"number\">8080</span>,debug=<span class=\"keyword\">True</span>) <span class=\"comment\">#更改端口，debug模式</span></div><div class=\"line\">    <span class=\"comment\">#app.run()</span></div></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>现有的转换器有：<br>    <table><br>        <tr><br>            <td>int</td><td>接受整数</td><br>        </tr><br>        <tr><br>            <td>float</td><td>接受浮点数</td><br>        </tr><br>    <tr><br>            <td>path</td><td>和缺省情况相同，但也接受斜杠</td><br>        </tr><br>    </table></p>\n<ul>\n<li><p>消息闪现</p>\n<p>  <a href=\"http://dormousehole.readthedocs.org/en/latest/patterns/flashing.html#message-flashing-pattern\">例子地址</a>，消息闪现其实就是用户操作后，给用户的提示</p>\n</li>\n</ul>\n"},{"title":"android之oom","date":"2015-11-18T11:43:42.000Z","_content":"oom\n\n一种比较直接的方法，简单粗暴的解决是\n在Manifest.xml文件里面的<application  里面添加android:largeHeap=\"true\"\n如：\n```\n<application\n        android:name=\".app.Application\"\n        android:allowBackup=\"true\"\n        android:icon=\"@drawable/icon\"\n        android:label=\"@string/app_name\"\n        android:theme=\"@android:style/Theme.Light.NoTitleBar\"\n        android:largeHeap=\"true\"\n         >\n```\n这种方法允许应用需要耗费手机很多的内存空间，但却是最快捷的解决办法\n\n第二种是将bitmap.recycle()掉，需要了解加载viewpager的流程\n/**\n* 首先ViewPager默认加载两张图片，也就是说第一次初始化这个viewpager的时候会执行两次instantiateItem这个方法。预加载下一个viewpager的item\n */\n然后方法destroyItem会将通过“算法”destroy掉，remove掉view视图\n可以在里面bitmap.recycle()回收掉bitmap","source":"_posts/2015/11/18/android之oom.md","raw":"title: android之oom\ndate: 2015-11-18 19:43:42\ntags:\n---\noom\n\n一种比较直接的方法，简单粗暴的解决是\n在Manifest.xml文件里面的<application  里面添加android:largeHeap=\"true\"\n如：\n```\n<application\n        android:name=\".app.Application\"\n        android:allowBackup=\"true\"\n        android:icon=\"@drawable/icon\"\n        android:label=\"@string/app_name\"\n        android:theme=\"@android:style/Theme.Light.NoTitleBar\"\n        android:largeHeap=\"true\"\n         >\n```\n这种方法允许应用需要耗费手机很多的内存空间，但却是最快捷的解决办法\n\n第二种是将bitmap.recycle()掉，需要了解加载viewpager的流程\n/**\n* 首先ViewPager默认加载两张图片，也就是说第一次初始化这个viewpager的时候会执行两次instantiateItem这个方法。预加载下一个viewpager的item\n */\n然后方法destroyItem会将通过“算法”destroy掉，remove掉view视图\n可以在里面bitmap.recycle()回收掉bitmap","slug":"android之oom","published":1,"updated":"2016-06-29T15:29:25.175Z","_id":"cik3sv4u5000q0s373lrxqysj","comments":1,"layout":"post","photos":[],"link":"","content":"<p>oom</p>\n<p>一种比较直接的方法，简单粗暴的解决是<br>在Manifest.xml文件里面的<application 里面添加android:largeheap=\"true\" 如：=\"\" <figure=\"\" class=\"highlight perl\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;application</div><div class=\"line\">        android:name=<span class=\"string\">\".app.Application\"</span></div><div class=\"line\">        android:allowBackup=<span class=\"string\">\"true\"</span></div><div class=\"line\">        android:icon=<span class=\"string\">\"@drawable/icon\"</span></div><div class=\"line\">        android:label=<span class=\"string\">\"@string/app_name\"</span></div><div class=\"line\">        android:theme=<span class=\"string\">\"@android:style/Theme.Light.NoTitleBar\"</span></div><div class=\"line\">        android:largeHeap=<span class=\"string\">\"true\"</span></div><div class=\"line\">         &gt;</div></pre></td></tr></table></application></p>\n<p>这种方法允许应用需要耗费手机很多的内存空间，但却是最快捷的解决办法</p>\n<p>第二种是将bitmap.recycle()掉，需要了解加载viewpager的流程<br>/**</p>\n<ul>\n<li>首先ViewPager默认加载两张图片，也就是说第一次初始化这个viewpager的时候会执行两次instantiateItem这个方法。预加载下一个viewpager的item<br>*/<br>然后方法destroyItem会将通过“算法”destroy掉，remove掉view视图<br>可以在里面bitmap.recycle()回收掉bitmap</li>\n</ul>\n","excerpt":"","more":"<p>oom</p>\n<p>一种比较直接的方法，简单粗暴的解决是<br>在Manifest.xml文件里面的<application  里面添加android:largeHeap=\"true\"\n如：\n<figure class=\"highlight perl\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;application</div><div class=\"line\">        android:name=<span class=\"string\">\".app.Application\"</span></div><div class=\"line\">        android:allowBackup=<span class=\"string\">\"true\"</span></div><div class=\"line\">        android:icon=<span class=\"string\">\"@drawable/icon\"</span></div><div class=\"line\">        android:label=<span class=\"string\">\"@string/app_name\"</span></div><div class=\"line\">        android:theme=<span class=\"string\">\"@android:style/Theme.Light.NoTitleBar\"</span></div><div class=\"line\">        android:largeHeap=<span class=\"string\">\"true\"</span></div><div class=\"line\">         &gt;</div></pre></td></tr></table></figure></p>\n<p>这种方法允许应用需要耗费手机很多的内存空间，但却是最快捷的解决办法</p>\n<p>第二种是将bitmap.recycle()掉，需要了解加载viewpager的流程<br>/**</p>\n<ul>\n<li>首先ViewPager默认加载两张图片，也就是说第一次初始化这个viewpager的时候会执行两次instantiateItem这个方法。预加载下一个viewpager的item<br>*/<br>然后方法destroyItem会将通过“算法”destroy掉，remove掉view视图<br>可以在里面bitmap.recycle()回收掉bitmap</li>\n</ul>\n"},{"title":"android之androidStudio错误","date":"2015-11-16T02:52:57.000Z","_content":"android studio 报错 already disposed module:app\n--------------\n重启android studio\n\nAndroid studio 中导入`import org.apache.http`\n----------------\nbuild.gradle中添加\n```\nandroid {\n    useLibrary 'org.apache.http.legacy'\n}\n```","source":"_posts/2015/11/16/android之错误.md","raw":"title: android之androidStudio错误\ndate: 2015-11-16 10:52:57\ntags:\n- android\n- 错误收集\n---\nandroid studio 报错 already disposed module:app\n--------------\n重启android studio\n\nAndroid studio 中导入`import org.apache.http`\n----------------\nbuild.gradle中添加\n```\nandroid {\n    useLibrary 'org.apache.http.legacy'\n}\n```","slug":"android之错误","published":1,"updated":"2016-06-29T15:29:25.175Z","_id":"cik3sv4u7000r0s37ho4a4vw1","comments":1,"layout":"post","photos":[],"link":"","content":"<h2 id=\"android-studio-报错-already-disposed-module-app\"><a href=\"#android-studio-报错-already-disposed-module-app\" class=\"headerlink\" title=\"android studio 报错 already disposed module:app\"></a>android studio 报错 already disposed module:app</h2><p>重启android studio</p>\n<h2 id=\"Android-studio-中导入import-org-apache-http\"><a href=\"#Android-studio-中导入import-org-apache-http\" class=\"headerlink\" title=\"Android studio 中导入import org.apache.http\"></a>Android studio 中导入<code>import org.apache.http</code></h2><p>build.gradle中添加<br><figure class=\"highlight nginx\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"section\">android</span> &#123;</div><div class=\"line\">    <span class=\"attribute\">useLibrary</span> <span class=\"string\">'org.apache.http.legacy'</span></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n","excerpt":"","more":"<h2 id=\"android-studio-报错-already-disposed-module-app\"><a href=\"#android-studio-报错-already-disposed-module-app\" class=\"headerlink\" title=\"android studio 报错 already disposed module:app\"></a>android studio 报错 already disposed module:app</h2><p>重启android studio</p>\n<h2 id=\"Android-studio-中导入import-org-apache-http\"><a href=\"#Android-studio-中导入import-org-apache-http\" class=\"headerlink\" title=\"Android studio 中导入import org.apache.http\"></a>Android studio 中导入<code>import org.apache.http</code></h2><p>build.gradle中添加<br><figure class=\"highlight nginx\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"section\">android</span> &#123;</div><div class=\"line\">    <span class=\"attribute\">useLibrary</span> <span class=\"string\">'org.apache.http.legacy'</span></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n"},{"title":"android之scroll","date":"2015-11-16T11:55:10.000Z","_content":" 前些日子在开发中用到了需要ScrollView嵌套GridView的情况，由于这两款控件都自带滚动条，当他们碰到一起的时候便会出问题，即GridView会显示不全。\n解决办法，自定义一个GridView控件\n```\npublic class MyGridView extends GridView {\n    public MyGridView(Context context, AttributeSet attrs) {\n        super(context, attrs);\n    }\n\n    public MyGridView(Context context) {\n        super(context);\n    }\n\n    public MyGridView(Context context, AttributeSet attrs, int defStyle) {\n        super(context, attrs, defStyle);\n    }\n\n    @Override\n    public void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {\n\n        int expandSpec = MeasureSpec.makeMeasureSpec(\n                Integer.MAX_VALUE >> 2, MeasureSpec.AT_MOST);\n        super.onMeasure(widthMeasureSpec, expandSpec);\n    }\n}\n```\n该自定义控件只是重写了GridView的onMeasure方法，使其不会出现滚动条，ScrollView嵌套ListView也是同样的道理，不再赘述。\nXML布局代码\n```\n<ScrollView Android:layout_height=\"wrap_content\"\n        android:layout_width=\"fill_parent\" android:id=\"@+id/scroll_content\">\n        <com.yourclass.MyGridView xmlns:android=\"http://schemas.android.com/apk/res/android\"\n            android:id=\"@+id/grid_view\" android:layout_width=\"fill_parent\"\n            android:layout_height=\"wrap_content\" android:numColumns=\"auto_fit\"\n            android:horizontalSpacing=\"1dip\" android:verticalSpacing=\"1dip\"\n            android:columnWidth=\"150dip\" android:stretchMode=\"columnWidth\"\n            android:gravity=\"center\">\n            \n        </com.yourclass.MyGridView>\n    </ScrollView>\n```\nJava调用代码\n```\nMyGridView gridview = (MyGridView) findViewById(R.id.grid_view); \n```\n\n\n\n\n* scrollView 空白\n\n\t-\t此方法无效\n\t\t```\n\t\t<?xml version=\"1.0\" encoding=\"utf-8\"?>\n\t\t<ScrollView xmlns:android=\"http://schemas.android.com/apk/res/android\"\n\t\t    android:id=\"@+id/scrollView1\"\n\t\t    android:layout_width=\"fill_parent\"  // 关键设置\n\t\t    android:layout_height=\"fill_parent\"  // 关键设置  不能用match_parent\n\t\t    android:fillViewport=\"true\" \n\t\t    android:layout_alignParentBottom=\"true\" >\n\t\t    <LinearLayout\n\t\t        android:layout_width=\"match_parent\"\n\t\t        android:layout_height=\"wrap_content\"   // 关键设置\n\t\t        android:orientation=\"vertical\" >\n\t\t    </LinearLayout>\n\t\t</ScrollView>\n\t\t```\n\t-\t尝试zhong\n\t\t```\n\t\t\n\t\t很久以前发了一个问答贴，关于ScrollView里面嵌套了ListView导致高度无法计算的Bug，发现到现在也有很多朋友遇到这样的问题，在此整理下解决方法。\n\t\t\n\t\t1.此方法是国外牛人写的，只需要调用此方法就可以了，但是此方法有两个Bug，第一个就是Item的布局根标签必须是LinearLayout，第二个就是在Item里面如果TextView换行了以后高度也无法精确计算。代码如下：\n\t\t[mw_shl_code=java,true]/**\n\t\t         * 设置ListView高度自适应\n\t\t         * ListView item必须是LinearLayout\n\t\t         * 其他的Layout(如RelativeLayout)没有重写onMeasure()，所以会在onMeasure()时抛出异常\n\t\t         */\n\t\t        public static void setListViewHeightBasedOnChildren(Activity activity, int res) {\n\t\t                ListView listView = (ListView) activity.findViewById(res);\n\t\t                ListAdapter listAdapter = listView.getAdapter();\n\t\t                if (listAdapter == null) {\n\t\t                        // pre-condition\n\t\t                        return;\n\t\t                }\n\t\t                int totalHeight = 0;\n\t\t                for (int i = 0; i < listAdapter.getCount(); i++) {\n\t\t                        View listItem = listAdapter.getView(i, null, listView);\n\t\t                        listItem.measure(0, 0);\n\t\t                        totalHeight += listItem.getMeasuredHeight();\n\t\t                }\n\t\t                ViewGroup.LayoutParams params = listView.getLayoutParams();\n\t\t                params.height = totalHeight\n\t\t                                + (listView.getDividerHeight() * (listAdapter.getCount() - 1));\n\t\t                listView.setLayoutParams(params);\n\t\t        }[/mw_shl_code]\n\t\t\n\t\t2.重写ListView或GridView，使ListView失去滑动性，代码如下：\n\t\t[mw_shl_code=java,true]/**\n\t\t* ScrollView和LsitView嵌套后高度无法计算，所以重写ScrollView，使其失去滑动\n\t\t*/\n\t\tpublic class NoScrollListView extends ListView {\n\t\t        \n\t\t        public NoScrollListView(Context context, AttributeSet attrs) {\n\t\t                super(context, attrs);\n\t\t        }\n\t\t\n\t\t        public void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {\n\t\t                int mExpandSpec = MeasureSpec.makeMeasureSpec(Integer.MAX_VALUE >> 2,\n\t\t                                MeasureSpec.AT_MOST);\n\t\t                super.onMeasure(widthMeasureSpec, mExpandSpec);\n\t\t        }\n\t\t\n\t\t}[/mw_shl_code]\n\t\t```\n\t","source":"_posts/2015/11/16/android之scroll.md","raw":"title: android之scroll\ndate: 2015-11-16 19:55:10\ntags:\n---\n 前些日子在开发中用到了需要ScrollView嵌套GridView的情况，由于这两款控件都自带滚动条，当他们碰到一起的时候便会出问题，即GridView会显示不全。\n解决办法，自定义一个GridView控件\n```\npublic class MyGridView extends GridView {\n    public MyGridView(Context context, AttributeSet attrs) {\n        super(context, attrs);\n    }\n\n    public MyGridView(Context context) {\n        super(context);\n    }\n\n    public MyGridView(Context context, AttributeSet attrs, int defStyle) {\n        super(context, attrs, defStyle);\n    }\n\n    @Override\n    public void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {\n\n        int expandSpec = MeasureSpec.makeMeasureSpec(\n                Integer.MAX_VALUE >> 2, MeasureSpec.AT_MOST);\n        super.onMeasure(widthMeasureSpec, expandSpec);\n    }\n}\n```\n该自定义控件只是重写了GridView的onMeasure方法，使其不会出现滚动条，ScrollView嵌套ListView也是同样的道理，不再赘述。\nXML布局代码\n```\n<ScrollView Android:layout_height=\"wrap_content\"\n        android:layout_width=\"fill_parent\" android:id=\"@+id/scroll_content\">\n        <com.yourclass.MyGridView xmlns:android=\"http://schemas.android.com/apk/res/android\"\n            android:id=\"@+id/grid_view\" android:layout_width=\"fill_parent\"\n            android:layout_height=\"wrap_content\" android:numColumns=\"auto_fit\"\n            android:horizontalSpacing=\"1dip\" android:verticalSpacing=\"1dip\"\n            android:columnWidth=\"150dip\" android:stretchMode=\"columnWidth\"\n            android:gravity=\"center\">\n            \n        </com.yourclass.MyGridView>\n    </ScrollView>\n```\nJava调用代码\n```\nMyGridView gridview = (MyGridView) findViewById(R.id.grid_view); \n```\n\n\n\n\n* scrollView 空白\n\n\t-\t此方法无效\n\t\t```\n\t\t<?xml version=\"1.0\" encoding=\"utf-8\"?>\n\t\t<ScrollView xmlns:android=\"http://schemas.android.com/apk/res/android\"\n\t\t    android:id=\"@+id/scrollView1\"\n\t\t    android:layout_width=\"fill_parent\"  // 关键设置\n\t\t    android:layout_height=\"fill_parent\"  // 关键设置  不能用match_parent\n\t\t    android:fillViewport=\"true\" \n\t\t    android:layout_alignParentBottom=\"true\" >\n\t\t    <LinearLayout\n\t\t        android:layout_width=\"match_parent\"\n\t\t        android:layout_height=\"wrap_content\"   // 关键设置\n\t\t        android:orientation=\"vertical\" >\n\t\t    </LinearLayout>\n\t\t</ScrollView>\n\t\t```\n\t-\t尝试zhong\n\t\t```\n\t\t\n\t\t很久以前发了一个问答贴，关于ScrollView里面嵌套了ListView导致高度无法计算的Bug，发现到现在也有很多朋友遇到这样的问题，在此整理下解决方法。\n\t\t\n\t\t1.此方法是国外牛人写的，只需要调用此方法就可以了，但是此方法有两个Bug，第一个就是Item的布局根标签必须是LinearLayout，第二个就是在Item里面如果TextView换行了以后高度也无法精确计算。代码如下：\n\t\t[mw_shl_code=java,true]/**\n\t\t         * 设置ListView高度自适应\n\t\t         * ListView item必须是LinearLayout\n\t\t         * 其他的Layout(如RelativeLayout)没有重写onMeasure()，所以会在onMeasure()时抛出异常\n\t\t         */\n\t\t        public static void setListViewHeightBasedOnChildren(Activity activity, int res) {\n\t\t                ListView listView = (ListView) activity.findViewById(res);\n\t\t                ListAdapter listAdapter = listView.getAdapter();\n\t\t                if (listAdapter == null) {\n\t\t                        // pre-condition\n\t\t                        return;\n\t\t                }\n\t\t                int totalHeight = 0;\n\t\t                for (int i = 0; i < listAdapter.getCount(); i++) {\n\t\t                        View listItem = listAdapter.getView(i, null, listView);\n\t\t                        listItem.measure(0, 0);\n\t\t                        totalHeight += listItem.getMeasuredHeight();\n\t\t                }\n\t\t                ViewGroup.LayoutParams params = listView.getLayoutParams();\n\t\t                params.height = totalHeight\n\t\t                                + (listView.getDividerHeight() * (listAdapter.getCount() - 1));\n\t\t                listView.setLayoutParams(params);\n\t\t        }[/mw_shl_code]\n\t\t\n\t\t2.重写ListView或GridView，使ListView失去滑动性，代码如下：\n\t\t[mw_shl_code=java,true]/**\n\t\t* ScrollView和LsitView嵌套后高度无法计算，所以重写ScrollView，使其失去滑动\n\t\t*/\n\t\tpublic class NoScrollListView extends ListView {\n\t\t        \n\t\t        public NoScrollListView(Context context, AttributeSet attrs) {\n\t\t                super(context, attrs);\n\t\t        }\n\t\t\n\t\t        public void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {\n\t\t                int mExpandSpec = MeasureSpec.makeMeasureSpec(Integer.MAX_VALUE >> 2,\n\t\t                                MeasureSpec.AT_MOST);\n\t\t                super.onMeasure(widthMeasureSpec, mExpandSpec);\n\t\t        }\n\t\t\n\t\t}[/mw_shl_code]\n\t\t```\n\t","slug":"android之scroll","published":1,"updated":"2016-06-29T15:29:25.175Z","_id":"cik3sv4ub000w0s37yqupjhb2","comments":1,"layout":"post","photos":[],"link":"","content":"<p> 前些日子在开发中用到了需要ScrollView嵌套GridView的情况，由于这两款控件都自带滚动条，当他们碰到一起的时候便会出问题，即GridView会显示不全。<br>解决办法，自定义一个GridView控件<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyGridView</span> <span class=\"keyword\">extends</span> <span class=\"title\">GridView</span> </span>&#123;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">MyGridView</span><span class=\"params\">(Context context, AttributeSet attrs)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">super</span>(context, attrs);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">MyGridView</span><span class=\"params\">(Context context)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">super</span>(context);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">MyGridView</span><span class=\"params\">(Context context, AttributeSet attrs, <span class=\"keyword\">int</span> defStyle)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">super</span>(context, attrs, defStyle);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onMeasure</span><span class=\"params\">(<span class=\"keyword\">int</span> widthMeasureSpec, <span class=\"keyword\">int</span> heightMeasureSpec)</span> </span>&#123;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">int</span> expandSpec = MeasureSpec.makeMeasureSpec(</div><div class=\"line\">                Integer.MAX_VALUE &gt;&gt; <span class=\"number\">2</span>, MeasureSpec.AT_MOST);</div><div class=\"line\">        <span class=\"keyword\">super</span>.onMeasure(widthMeasureSpec, expandSpec);</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p>该自定义控件只是重写了GridView的onMeasure方法，使其不会出现滚动条，ScrollView嵌套ListView也是同样的道理，不再赘述。<br>XML布局代码<br><figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;ScrollView Android:layout_height=<span class=\"string\">\"wrap_content\"</span></div><div class=\"line\">        android:layout_width=<span class=\"string\">\"fill_parent\"</span> android:id=<span class=\"string\">\"@+id/scroll_content\"</span>&gt;</div><div class=\"line\">        &lt;com<span class=\"selector-class\">.yourclass</span><span class=\"selector-class\">.MyGridView</span> xmlns:android=<span class=\"string\">\"http://schemas.android.com/apk/res/android\"</span></div><div class=\"line\">            android:id=<span class=\"string\">\"@+id/grid_view\"</span> android:layout_width=<span class=\"string\">\"fill_parent\"</span></div><div class=\"line\">            android:layout_height=<span class=\"string\">\"wrap_content\"</span> android:numColumns=<span class=\"string\">\"auto_fit\"</span></div><div class=\"line\">            android:horizontalSpacing=<span class=\"string\">\"1dip\"</span> android:verticalSpacing=<span class=\"string\">\"1dip\"</span></div><div class=\"line\">            android:columnWidth=<span class=\"string\">\"150dip\"</span> android:stretchMode=<span class=\"string\">\"columnWidth\"</span></div><div class=\"line\">            android:gravity=<span class=\"string\">\"center\"</span>&gt;</div><div class=\"line\">            </div><div class=\"line\">        &lt;/com<span class=\"selector-class\">.yourclass</span><span class=\"selector-class\">.MyGridView</span>&gt;</div><div class=\"line\">    &lt;/ScrollView&gt;</div></pre></td></tr></table></figure></p>\n<p>Java调用代码<br><figure class=\"highlight lisp\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">MyGridView gridview = (<span class=\"name\">MyGridView</span>) findViewById(<span class=\"name\">R</span>.id.grid_view)<span class=\"comment\">;</span></div></pre></td></tr></table></figure></p>\n<ul>\n<li><p>scrollView 空白</p>\n<ul>\n<li><p>此方法无效</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"php\"><span class=\"meta\">&lt;?</span>xml version=<span class=\"string\">\"1.0\"</span> encoding=<span class=\"string\">\"utf-8\"</span><span class=\"meta\">?&gt;</span></span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">ScrollView</span> <span class=\"attr\">xmlns:android</span>=<span class=\"string\">\"http://schemas.android.com/apk/res/android\"</span></span></div><div class=\"line\">    <span class=\"attr\">android:id</span>=<span class=\"string\">\"@+id/scrollView1\"</span></div><div class=\"line\">    <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"fill_parent\"</span>  // 关键设置</div><div class=\"line\">    <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"fill_parent\"</span>  // 关键设置  不能用<span class=\"attr\">match_parent</span></div><div class=\"line\">    <span class=\"attr\">android:fillViewport</span>=<span class=\"string\">\"true\"</span> </div><div class=\"line\">    <span class=\"attr\">android:layout_alignParentBottom</span>=<span class=\"string\">\"true\"</span> &gt;</div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">LinearLayout</span></span></div><div class=\"line\">        <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"match_parent\"</span></div><div class=\"line\">        <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"wrap_content\"</span>   // 关键设置</div><div class=\"line\">        <span class=\"attr\">android:orientation</span>=<span class=\"string\">\"vertical\"</span> &gt;</div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">LinearLayout</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">ScrollView</span>&gt;</span></div></pre></td></tr></table></figure>\n</li>\n<li><p>尝试zhong</p>\n<figure class=\"highlight cs\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\">很久以前发了一个问答贴，关于ScrollView里面嵌套了ListView导致高度无法计算的Bug，发现到现在也有很多朋友遇到这样的问题，在此整理下解决方法。</div><div class=\"line\"></div><div class=\"line\"><span class=\"number\">1.</span>此方法是国外牛人写的，只需要调用此方法就可以了，但是此方法有两个Bug，第一个就是Item的布局根标签必须是LinearLayout，第二个就是在Item里面如果TextView换行了以后高度也无法精确计算。代码如下：</div><div class=\"line\">[mw_shl_code=java,<span class=\"literal\">true</span>]<span class=\"comment\">/**</span></div><div class=\"line\">         * 设置ListView高度自适应</div><div class=\"line\">         * ListView item必须是LinearLayout</div><div class=\"line\">         * 其他的Layout(如RelativeLayout)没有重写onMeasure()，所以会在onMeasure()时抛出异常</div><div class=\"line\">         */</div><div class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">setListViewHeightBasedOnChildren</span>(<span class=\"params\">Activity activity, <span class=\"keyword\">int</span> res</span>) </span>&#123;</div><div class=\"line\">                ListView listView = (ListView) activity.findViewById(res);</div><div class=\"line\">                ListAdapter listAdapter = listView.getAdapter();</div><div class=\"line\">                <span class=\"keyword\">if</span> (listAdapter == <span class=\"literal\">null</span>) &#123;</div><div class=\"line\">                        <span class=\"comment\">// pre-condition</span></div><div class=\"line\">                        <span class=\"keyword\">return</span>;</div><div class=\"line\">                &#125;</div><div class=\"line\">                <span class=\"keyword\">int</span> totalHeight = <span class=\"number\">0</span>;</div><div class=\"line\">                <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; listAdapter.getCount(); i++) &#123;</div><div class=\"line\">                        View listItem = listAdapter.getView(i, <span class=\"literal\">null</span>, listView);</div><div class=\"line\">                        listItem.measure(<span class=\"number\">0</span>, <span class=\"number\">0</span>);</div><div class=\"line\">                        totalHeight += listItem.getMeasuredHeight();</div><div class=\"line\">                &#125;</div><div class=\"line\">                ViewGroup.LayoutParams <span class=\"keyword\">params</span> = listView.getLayoutParams();</div><div class=\"line\">                <span class=\"keyword\">params</span>.height = totalHeight</div><div class=\"line\">                                + (listView.getDividerHeight() * (listAdapter.getCount() - <span class=\"number\">1</span>));</div><div class=\"line\">                listView.setLayoutParams(<span class=\"keyword\">params</span>);</div><div class=\"line\">        &#125;[/mw_shl_code]</div><div class=\"line\"></div><div class=\"line\"><span class=\"number\">2.</span>重写ListView或GridView，使ListView失去滑动性，代码如下：</div><div class=\"line\">[mw_shl_code=java,<span class=\"literal\">true</span>]<span class=\"comment\">/**</span></div><div class=\"line\">* ScrollView和LsitView嵌套后高度无法计算，所以重写ScrollView，使其失去滑动</div><div class=\"line\">*/</div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title\">NoScrollListView</span> <span class=\"title\">extends</span> <span class=\"title\">ListView</span> &#123;</div><div class=\"line\">        </div><div class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">NoScrollListView</span>(<span class=\"params\">Context context, AttributeSet attrs</span>) </span>&#123;</div><div class=\"line\">                super(context, attrs);</div><div class=\"line\">        &#125;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onMeasure</span>(<span class=\"params\"><span class=\"keyword\">int</span> widthMeasureSpec, <span class=\"keyword\">int</span> heightMeasureSpec</span>) </span>&#123;</div><div class=\"line\">                <span class=\"keyword\">int</span> mExpandSpec = MeasureSpec.makeMeasureSpec(Integer.MAX_VALUE &gt;&gt; <span class=\"number\">2</span>,</div><div class=\"line\">                                MeasureSpec.AT_MOST);</div><div class=\"line\">                super.onMeasure(widthMeasureSpec, mExpandSpec);</div><div class=\"line\">        &#125;</div><div class=\"line\"></div><div class=\"line\">&#125;[/mw_shl_code]</div></pre></td></tr></table></figure>\n</li>\n</ul>\n</li>\n</ul>\n","excerpt":"","more":"<p> 前些日子在开发中用到了需要ScrollView嵌套GridView的情况，由于这两款控件都自带滚动条，当他们碰到一起的时候便会出问题，即GridView会显示不全。<br>解决办法，自定义一个GridView控件<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyGridView</span> <span class=\"keyword\">extends</span> <span class=\"title\">GridView</span> </span>&#123;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">MyGridView</span><span class=\"params\">(Context context, AttributeSet attrs)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">super</span>(context, attrs);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">MyGridView</span><span class=\"params\">(Context context)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">super</span>(context);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">MyGridView</span><span class=\"params\">(Context context, AttributeSet attrs, <span class=\"keyword\">int</span> defStyle)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">super</span>(context, attrs, defStyle);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onMeasure</span><span class=\"params\">(<span class=\"keyword\">int</span> widthMeasureSpec, <span class=\"keyword\">int</span> heightMeasureSpec)</span> </span>&#123;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">int</span> expandSpec = MeasureSpec.makeMeasureSpec(</div><div class=\"line\">                Integer.MAX_VALUE &gt;&gt; <span class=\"number\">2</span>, MeasureSpec.AT_MOST);</div><div class=\"line\">        <span class=\"keyword\">super</span>.onMeasure(widthMeasureSpec, expandSpec);</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p>该自定义控件只是重写了GridView的onMeasure方法，使其不会出现滚动条，ScrollView嵌套ListView也是同样的道理，不再赘述。<br>XML布局代码<br><figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;ScrollView Android:layout_height=<span class=\"string\">\"wrap_content\"</span></div><div class=\"line\">        android:layout_width=<span class=\"string\">\"fill_parent\"</span> android:id=<span class=\"string\">\"@+id/scroll_content\"</span>&gt;</div><div class=\"line\">        &lt;com<span class=\"selector-class\">.yourclass</span><span class=\"selector-class\">.MyGridView</span> xmlns:android=<span class=\"string\">\"http://schemas.android.com/apk/res/android\"</span></div><div class=\"line\">            android:id=<span class=\"string\">\"@+id/grid_view\"</span> android:layout_width=<span class=\"string\">\"fill_parent\"</span></div><div class=\"line\">            android:layout_height=<span class=\"string\">\"wrap_content\"</span> android:numColumns=<span class=\"string\">\"auto_fit\"</span></div><div class=\"line\">            android:horizontalSpacing=<span class=\"string\">\"1dip\"</span> android:verticalSpacing=<span class=\"string\">\"1dip\"</span></div><div class=\"line\">            android:columnWidth=<span class=\"string\">\"150dip\"</span> android:stretchMode=<span class=\"string\">\"columnWidth\"</span></div><div class=\"line\">            android:gravity=<span class=\"string\">\"center\"</span>&gt;</div><div class=\"line\">            </div><div class=\"line\">        &lt;/com<span class=\"selector-class\">.yourclass</span><span class=\"selector-class\">.MyGridView</span>&gt;</div><div class=\"line\">    &lt;/ScrollView&gt;</div></pre></td></tr></table></figure></p>\n<p>Java调用代码<br><figure class=\"highlight lisp\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">MyGridView gridview = (<span class=\"name\">MyGridView</span>) findViewById(<span class=\"name\">R</span>.id.grid_view)<span class=\"comment\">;</span></div></pre></td></tr></table></figure></p>\n<ul>\n<li><p>scrollView 空白</p>\n<ul>\n<li><p>此方法无效</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"php\"><span class=\"meta\">&lt;?</span>xml version=<span class=\"string\">\"1.0\"</span> encoding=<span class=\"string\">\"utf-8\"</span><span class=\"meta\">?&gt;</span></span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">ScrollView</span> <span class=\"attr\">xmlns:android</span>=<span class=\"string\">\"http://schemas.android.com/apk/res/android\"</span></div><div class=\"line\">    <span class=\"attr\">android:id</span>=<span class=\"string\">\"@+id/scrollView1\"</span></div><div class=\"line\">    <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"fill_parent\"</span>  // 关键设置</div><div class=\"line\">    <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"fill_parent\"</span>  // 关键设置  不能用<span class=\"attr\">match_parent</span></div><div class=\"line\">    <span class=\"attr\">android:fillViewport</span>=<span class=\"string\">\"true\"</span> </div><div class=\"line\">    <span class=\"attr\">android:layout_alignParentBottom</span>=<span class=\"string\">\"true\"</span> &gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">LinearLayout</span></div><div class=\"line\">        <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"match_parent\"</span></div><div class=\"line\">        <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"wrap_content\"</span>   // 关键设置</div><div class=\"line\">        <span class=\"attr\">android:orientation</span>=<span class=\"string\">\"vertical\"</span> &gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">LinearLayout</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">ScrollView</span>&gt;</span></div></pre></td></tr></table></figure>\n</li>\n<li><p>尝试zhong</p>\n<figure class=\"highlight cs\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\">很久以前发了一个问答贴，关于ScrollView里面嵌套了ListView导致高度无法计算的Bug，发现到现在也有很多朋友遇到这样的问题，在此整理下解决方法。</div><div class=\"line\"></div><div class=\"line\"><span class=\"number\">1.</span>此方法是国外牛人写的，只需要调用此方法就可以了，但是此方法有两个Bug，第一个就是Item的布局根标签必须是LinearLayout，第二个就是在Item里面如果TextView换行了以后高度也无法精确计算。代码如下：</div><div class=\"line\">[mw_shl_code=java,<span class=\"literal\">true</span>]<span class=\"comment\">/**</div><div class=\"line\">         * 设置ListView高度自适应</div><div class=\"line\">         * ListView item必须是LinearLayout</div><div class=\"line\">         * 其他的Layout(如RelativeLayout)没有重写onMeasure()，所以会在onMeasure()时抛出异常</div><div class=\"line\">         */</span></div><div class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">setListViewHeightBasedOnChildren</span>(<span class=\"params\">Activity activity, <span class=\"keyword\">int</span> res</span>) </span>&#123;</div><div class=\"line\">                ListView listView = (ListView) activity.findViewById(res);</div><div class=\"line\">                ListAdapter listAdapter = listView.getAdapter();</div><div class=\"line\">                <span class=\"keyword\">if</span> (listAdapter == <span class=\"literal\">null</span>) &#123;</div><div class=\"line\">                        <span class=\"comment\">// pre-condition</span></div><div class=\"line\">                        <span class=\"keyword\">return</span>;</div><div class=\"line\">                &#125;</div><div class=\"line\">                <span class=\"keyword\">int</span> totalHeight = <span class=\"number\">0</span>;</div><div class=\"line\">                <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; listAdapter.getCount(); i++) &#123;</div><div class=\"line\">                        View listItem = listAdapter.getView(i, <span class=\"literal\">null</span>, listView);</div><div class=\"line\">                        listItem.measure(<span class=\"number\">0</span>, <span class=\"number\">0</span>);</div><div class=\"line\">                        totalHeight += listItem.getMeasuredHeight();</div><div class=\"line\">                &#125;</div><div class=\"line\">                ViewGroup.LayoutParams <span class=\"keyword\">params</span> = listView.getLayoutParams();</div><div class=\"line\">                <span class=\"keyword\">params</span>.height = totalHeight</div><div class=\"line\">                                + (listView.getDividerHeight() * (listAdapter.getCount() - <span class=\"number\">1</span>));</div><div class=\"line\">                listView.setLayoutParams(<span class=\"keyword\">params</span>);</div><div class=\"line\">        &#125;[/mw_shl_code]</div><div class=\"line\"></div><div class=\"line\"><span class=\"number\">2.</span>重写ListView或GridView，使ListView失去滑动性，代码如下：</div><div class=\"line\">[mw_shl_code=java,<span class=\"literal\">true</span>]<span class=\"comment\">/**</div><div class=\"line\">* ScrollView和LsitView嵌套后高度无法计算，所以重写ScrollView，使其失去滑动</div><div class=\"line\">*/</span></div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title\">NoScrollListView</span> <span class=\"title\">extends</span> <span class=\"title\">ListView</span> &#123;</div><div class=\"line\">        </div><div class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">NoScrollListView</span>(<span class=\"params\">Context context, AttributeSet attrs</span>) </span>&#123;</div><div class=\"line\">                super(context, attrs);</div><div class=\"line\">        &#125;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onMeasure</span>(<span class=\"params\"><span class=\"keyword\">int</span> widthMeasureSpec, <span class=\"keyword\">int</span> heightMeasureSpec</span>) </span>&#123;</div><div class=\"line\">                <span class=\"keyword\">int</span> mExpandSpec = MeasureSpec.makeMeasureSpec(Integer.MAX_VALUE &gt;&gt; <span class=\"number\">2</span>,</div><div class=\"line\">                                MeasureSpec.AT_MOST);</div><div class=\"line\">                super.onMeasure(widthMeasureSpec, mExpandSpec);</div><div class=\"line\">        &#125;</div><div class=\"line\"></div><div class=\"line\">&#125;[/mw_shl_code]</div></pre></td></tr></table></figure>\n</li>\n</ul>\n</li>\n</ul>\n"},{"title":"android之Gson","date":"2015-11-16T10:05:37.000Z","_content":"\nGson 嵌套使用\n\n我们要解析一个下面这种的Json：\n```\nString json = {\"a\":\"100\",\"b\":[{\"b1\":\"b_value1\",\"b2\":\"b_value2\"},{\"b1\":\"b_value1\",\"b2\":\"b_value2\"}]，\"c\":{\"c1\":\"c_value1\",\"c2\":\"c_value2\"}}\n```\n1. 首先我们需要定义一个序列化的Bean，这里采用内部类的形式，看起来会比较清晰一些：\n\t```\n\tpublic class JsonBean {\n\t    public String a;\n\t    public List<B> b;\n\t    public C c;\n\t\n\t    public static class B {\n\t        public String b1;\n\t        public String b2;\n\t    }\n\t\n\t    public static class C {\n\t        public String c1;\n\t        public String c2;\n\t    }\n\t}\n\t```\n2. 很多时候大家都是不知道这个Bean是该怎么定义，这里面需要注意几点：\n\t1. 内部嵌套的类必须是static的，要不然解析会出错；\n\t2. 类里面的属性名必须跟Json字段里面的Key是一模一样的；\n\t3. 内部嵌套的用[]括起来的部分是一个List，所以定义为<code>public List<B> b</code>，而只用{}嵌套的就定义为<code>public C c</code>\n\n3. 调用的时候\n\t```\n\tGson gson = new Gson();\n\tjava.lang.reflect.Type type = new TypeToken<JsonBean>() {}.getType();\n\tJsonBean jsonBean = gson.fromJson(json, type);\n\tLog.v(\"tag\",jsonBean.a.toString())\n\t```\n\t然后想拿数据就很简单啦，直接在jsonBean里面取就可以了！\n\t如果需要解析的Json嵌套了很多层，同样可以可以定义一个嵌套很多层内部类的Bean，需要细心的对照Json字段来定义哦。","source":"_posts/2015/11/16/android之Gson.md","raw":"title: android之Gson\ndate: 2015-11-16 18:05:37\ntags:\n- android\n---\n\nGson 嵌套使用\n\n我们要解析一个下面这种的Json：\n```\nString json = {\"a\":\"100\",\"b\":[{\"b1\":\"b_value1\",\"b2\":\"b_value2\"},{\"b1\":\"b_value1\",\"b2\":\"b_value2\"}]，\"c\":{\"c1\":\"c_value1\",\"c2\":\"c_value2\"}}\n```\n1. 首先我们需要定义一个序列化的Bean，这里采用内部类的形式，看起来会比较清晰一些：\n\t```\n\tpublic class JsonBean {\n\t    public String a;\n\t    public List<B> b;\n\t    public C c;\n\t\n\t    public static class B {\n\t        public String b1;\n\t        public String b2;\n\t    }\n\t\n\t    public static class C {\n\t        public String c1;\n\t        public String c2;\n\t    }\n\t}\n\t```\n2. 很多时候大家都是不知道这个Bean是该怎么定义，这里面需要注意几点：\n\t1. 内部嵌套的类必须是static的，要不然解析会出错；\n\t2. 类里面的属性名必须跟Json字段里面的Key是一模一样的；\n\t3. 内部嵌套的用[]括起来的部分是一个List，所以定义为<code>public List<B> b</code>，而只用{}嵌套的就定义为<code>public C c</code>\n\n3. 调用的时候\n\t```\n\tGson gson = new Gson();\n\tjava.lang.reflect.Type type = new TypeToken<JsonBean>() {}.getType();\n\tJsonBean jsonBean = gson.fromJson(json, type);\n\tLog.v(\"tag\",jsonBean.a.toString())\n\t```\n\t然后想拿数据就很简单啦，直接在jsonBean里面取就可以了！\n\t如果需要解析的Json嵌套了很多层，同样可以可以定义一个嵌套很多层内部类的Bean，需要细心的对照Json字段来定义哦。","slug":"android之Gson","published":1,"updated":"2016-06-29T15:29:25.175Z","_id":"cik3sv4uf000x0s3776eujino","comments":1,"layout":"post","photos":[],"link":"","content":"<p>Gson 嵌套使用</p>\n<p>我们要解析一个下面这种的Json：<br><figure class=\"highlight xquery\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">String json = &#123;<span class=\"string\">\"a\"</span>:<span class=\"string\">\"100\"</span>,<span class=\"string\">\"b\"</span>:[&#123;<span class=\"string\">\"b1\"</span>:<span class=\"string\">\"b_value1\"</span>,<span class=\"string\">\"b2\"</span>:<span class=\"string\">\"b_value2\"</span>&#125;,&#123;<span class=\"string\">\"b1\"</span>:<span class=\"string\">\"b_value1\"</span>,<span class=\"string\">\"b2\"</span>:<span class=\"string\">\"b_value2\"</span>&#125;]，<span class=\"string\">\"c\"</span>:&#123;<span class=\"string\">\"c1\"</span>:<span class=\"string\">\"c_value1\"</span>,<span class=\"string\">\"c2\"</span>:<span class=\"string\">\"c_value2\"</span>&#125;&#125;</div></pre></td></tr></table></figure></p>\n<ol>\n<li><p>首先我们需要定义一个序列化的Bean，这里采用内部类的形式，看起来会比较清晰一些：</p>\n <figure class=\"highlight arduino\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> JsonBean &#123;</div><div class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">String</span> a;</div><div class=\"line\">    <span class=\"keyword\">public</span> List&lt;B&gt; b;</div><div class=\"line\">    <span class=\"keyword\">public</span> C c;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">class</span> B &#123;</div><div class=\"line\">        <span class=\"keyword\">public</span> <span class=\"keyword\">String</span> b1;</div><div class=\"line\">        <span class=\"keyword\">public</span> <span class=\"keyword\">String</span> b2;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">class</span> C &#123;</div><div class=\"line\">        <span class=\"keyword\">public</span> <span class=\"keyword\">String</span> c1;</div><div class=\"line\">        <span class=\"keyword\">public</span> <span class=\"keyword\">String</span> c2;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n</li>\n<li><p>很多时候大家都是不知道这个Bean是该怎么定义，这里面需要注意几点：</p>\n<ol>\n<li>内部嵌套的类必须是static的，要不然解析会出错；</li>\n<li>类里面的属性名必须跟Json字段里面的Key是一模一样的；</li>\n<li>内部嵌套的用[]括起来的部分是一个List，所以定义为<code>public List<b> b</b></code>，而只用{}嵌套的就定义为<code>public C c</code></li>\n</ol>\n</li>\n<li><p>调用的时候</p>\n <figure class=\"highlight mipsasm\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">Gson gson = new Gson()<span class=\"comment\">;</span></div><div class=\"line\"><span class=\"keyword\">java.lang.reflect.Type </span>type = new TypeToken&lt;<span class=\"keyword\">JsonBean&gt;() </span>&#123;&#125;.getType()<span class=\"comment\">;</span></div><div class=\"line\"><span class=\"keyword\">JsonBean </span><span class=\"keyword\">jsonBean </span>= gson.fromJson(<span class=\"keyword\">json, </span>type)<span class=\"comment\">;</span></div><div class=\"line\">Log.v(<span class=\"string\">\"tag\"</span>,<span class=\"keyword\">jsonBean.a.toString())</span></div></pre></td></tr></table></figure>\n<p> 然后想拿数据就很简单啦，直接在jsonBean里面取就可以了！<br> 如果需要解析的Json嵌套了很多层，同样可以可以定义一个嵌套很多层内部类的Bean，需要细心的对照Json字段来定义哦。</p>\n</li>\n</ol>\n","excerpt":"","more":"<p>Gson 嵌套使用</p>\n<p>我们要解析一个下面这种的Json：<br><figure class=\"highlight xquery\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">String json = &#123;<span class=\"string\">\"a\"</span>:<span class=\"string\">\"100\"</span>,<span class=\"string\">\"b\"</span>:[&#123;<span class=\"string\">\"b1\"</span>:<span class=\"string\">\"b_value1\"</span>,<span class=\"string\">\"b2\"</span>:<span class=\"string\">\"b_value2\"</span>&#125;,&#123;<span class=\"string\">\"b1\"</span>:<span class=\"string\">\"b_value1\"</span>,<span class=\"string\">\"b2\"</span>:<span class=\"string\">\"b_value2\"</span>&#125;]，<span class=\"string\">\"c\"</span>:&#123;<span class=\"string\">\"c1\"</span>:<span class=\"string\">\"c_value1\"</span>,<span class=\"string\">\"c2\"</span>:<span class=\"string\">\"c_value2\"</span>&#125;&#125;</div></pre></td></tr></table></figure></p>\n<ol>\n<li><p>首先我们需要定义一个序列化的Bean，这里采用内部类的形式，看起来会比较清晰一些：</p>\n <figure class=\"highlight arduino\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> JsonBean &#123;</div><div class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">String</span> a;</div><div class=\"line\">    <span class=\"keyword\">public</span> List&lt;B&gt; b;</div><div class=\"line\">    <span class=\"keyword\">public</span> C c;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">class</span> B &#123;</div><div class=\"line\">        <span class=\"keyword\">public</span> <span class=\"keyword\">String</span> b1;</div><div class=\"line\">        <span class=\"keyword\">public</span> <span class=\"keyword\">String</span> b2;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">class</span> C &#123;</div><div class=\"line\">        <span class=\"keyword\">public</span> <span class=\"keyword\">String</span> c1;</div><div class=\"line\">        <span class=\"keyword\">public</span> <span class=\"keyword\">String</span> c2;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n</li>\n<li><p>很多时候大家都是不知道这个Bean是该怎么定义，这里面需要注意几点：</p>\n<ol>\n<li>内部嵌套的类必须是static的，要不然解析会出错；</li>\n<li>类里面的属性名必须跟Json字段里面的Key是一模一样的；</li>\n<li>内部嵌套的用[]括起来的部分是一个List，所以定义为<code>public List<B> b</code>，而只用{}嵌套的就定义为<code>public C c</code></li>\n</ol>\n</li>\n<li><p>调用的时候</p>\n <figure class=\"highlight mipsasm\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">Gson gson = new Gson()<span class=\"comment\">;</span></div><div class=\"line\"><span class=\"keyword\">java.lang.reflect.Type </span>type = new TypeToken&lt;<span class=\"keyword\">JsonBean&gt;() </span>&#123;&#125;.getType()<span class=\"comment\">;</span></div><div class=\"line\"><span class=\"keyword\">JsonBean </span><span class=\"keyword\">jsonBean </span>= gson.fromJson(<span class=\"keyword\">json, </span>type)<span class=\"comment\">;</span></div><div class=\"line\">Log.v(<span class=\"string\">\"tag\"</span>,<span class=\"keyword\">jsonBean.a.toString())</span></div></pre></td></tr></table></figure>\n<p> 然后想拿数据就很简单啦，直接在jsonBean里面取就可以了！<br> 如果需要解析的Json嵌套了很多层，同样可以可以定义一个嵌套很多层内部类的Bean，需要细心的对照Json字段来定义哦。</p>\n</li>\n</ol>\n"},{"title":"mysql之作业","date":"2015-11-11T07:54:38.000Z","_content":"在网上找了一个比较全的入门教程\n========================\n\n1. 在mysql 中建立一个数据库 test1 \n\n\t```\n\tcreate database test1 \n\t```\n2. 创建表examinfo \n\n\t```\n\tuse test1;\n\tcreate table examinfo( \n\t\tid int auto_increment not null, \n\t\tendtime datetime, \n\t\tprimary key(id) \n\t); \n\t```\n\n3. 插入数据： \n\n\t```\n\tinsert into examinfo values('1','2015-11-11 11:11:11'); \n\t```\n\n\t-\t定界符(设置数据库以//作为结束)\n\t\n\t\t```\n\t\tDELIMITER //\n\t\t```\n4. 创建存储过程test \n\t\n\t```\n\tmysql> select * from examinfo;\n\t+----+---------------------+\n\t| id | endtime             |\n\t+----+---------------------+\n\t|  1 | 2015-11-11 11:11:11 |\n\t+----+---------------------+\n\t1 row in set (0.00 sec)\n\t\n\tmysql> DELIMITER //\n\tmysql> CREATE PROCEDURE test () \n\t    -> begin\n\t    -> update examinfo set endtime=now() where id=1;\n\t    -> end;\n\t    -> //\n\tQuery OK, 0 rows affected (0.00 sec)\n\t```\n\n5. 创建event e_test \n\t```\n\tmysql> CREATE EVENT if not exists e_test \n\t    -> on schedule every 30 second \n\t    -> on completion preserve \n\t    -> do call test(); \n\t    -> //\n\tQuery OK, 0 rows affected (0.00 sec)\n\t\n\t```\n\n\n6.\n\t-\t查看event是否开启: show variables like '%sche%'; \n\t-\t将事件计划开启: set global event_scheduler=1; \n\t-\t关闭事件任务: alter event e_test ON COMPLETION PRESERVE DISABLE; \n\t-\t开启事件任务: alter event e_test ON COMPLETION PRESERVE ENABLE; \n\n7. 查看结果\n\t```\n\tmysql> select * from examinfo//\n\t+----+---------------------+\n\t| id | endtime             |\n\t+----+---------------------+\n\t|  1 | 2015-11-11 12:02:09 |\n\t+----+---------------------+\n\t1 row in set (0.00 sec)\n\t\n\tmysql> select * from examinfo//\n\t+----+---------------------+\n\t| id | endtime             |\n\t+----+---------------------+\n\t|  1 | 2015-11-11 12:02:39 |\n\t+----+---------------------+\n\t1 row in set (0.00 sec)\n\t\n\t```\n到此一个作业就算结束了，这用了存储过程\n\n查看存储过程\n-------------\n*\t方法一：\n\t```\n\tselect `name` from mysql.proc where db = 'your_db_name' and `type` = 'PROCEDURE'\n\t```\n*\t方法二：\n\t```\n\tshow procedure status;\n\t```\n\n查看存储过程或函数的创建代码\n-------------\n```\nshow create procedure proc_name;\nshow create function func_name;\n```\n创建数据库的指定字符编码\n----------------\n```\ncreate database shopmgr character set utf8 collate utf8_general_ci;\n```","source":"_posts/2015/11/11/mysql之作业.md","raw":"title: mysql之作业\ndate: 2015-11-11 15:54:38\ncategories:\n- MySql\ntags:\n- MySql\n---\n在网上找了一个比较全的入门教程\n========================\n\n1. 在mysql 中建立一个数据库 test1 \n\n\t```\n\tcreate database test1 \n\t```\n2. 创建表examinfo \n\n\t```\n\tuse test1;\n\tcreate table examinfo( \n\t\tid int auto_increment not null, \n\t\tendtime datetime, \n\t\tprimary key(id) \n\t); \n\t```\n\n3. 插入数据： \n\n\t```\n\tinsert into examinfo values('1','2015-11-11 11:11:11'); \n\t```\n\n\t-\t定界符(设置数据库以//作为结束)\n\t\n\t\t```\n\t\tDELIMITER //\n\t\t```\n4. 创建存储过程test \n\t\n\t```\n\tmysql> select * from examinfo;\n\t+----+---------------------+\n\t| id | endtime             |\n\t+----+---------------------+\n\t|  1 | 2015-11-11 11:11:11 |\n\t+----+---------------------+\n\t1 row in set (0.00 sec)\n\t\n\tmysql> DELIMITER //\n\tmysql> CREATE PROCEDURE test () \n\t    -> begin\n\t    -> update examinfo set endtime=now() where id=1;\n\t    -> end;\n\t    -> //\n\tQuery OK, 0 rows affected (0.00 sec)\n\t```\n\n5. 创建event e_test \n\t```\n\tmysql> CREATE EVENT if not exists e_test \n\t    -> on schedule every 30 second \n\t    -> on completion preserve \n\t    -> do call test(); \n\t    -> //\n\tQuery OK, 0 rows affected (0.00 sec)\n\t\n\t```\n\n\n6.\n\t-\t查看event是否开启: show variables like '%sche%'; \n\t-\t将事件计划开启: set global event_scheduler=1; \n\t-\t关闭事件任务: alter event e_test ON COMPLETION PRESERVE DISABLE; \n\t-\t开启事件任务: alter event e_test ON COMPLETION PRESERVE ENABLE; \n\n7. 查看结果\n\t```\n\tmysql> select * from examinfo//\n\t+----+---------------------+\n\t| id | endtime             |\n\t+----+---------------------+\n\t|  1 | 2015-11-11 12:02:09 |\n\t+----+---------------------+\n\t1 row in set (0.00 sec)\n\t\n\tmysql> select * from examinfo//\n\t+----+---------------------+\n\t| id | endtime             |\n\t+----+---------------------+\n\t|  1 | 2015-11-11 12:02:39 |\n\t+----+---------------------+\n\t1 row in set (0.00 sec)\n\t\n\t```\n到此一个作业就算结束了，这用了存储过程\n\n查看存储过程\n-------------\n*\t方法一：\n\t```\n\tselect `name` from mysql.proc where db = 'your_db_name' and `type` = 'PROCEDURE'\n\t```\n*\t方法二：\n\t```\n\tshow procedure status;\n\t```\n\n查看存储过程或函数的创建代码\n-------------\n```\nshow create procedure proc_name;\nshow create function func_name;\n```\n创建数据库的指定字符编码\n----------------\n```\ncreate database shopmgr character set utf8 collate utf8_general_ci;\n```","slug":"mysql之作业","published":1,"updated":"2016-06-29T15:29:25.175Z","_id":"cik3sv4v4000z0s37rsey9ig1","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"在网上找了一个比较全的入门教程\"><a href=\"#在网上找了一个比较全的入门教程\" class=\"headerlink\" title=\"在网上找了一个比较全的入门教程\"></a>在网上找了一个比较全的入门教程</h1><ol>\n<li><p>在mysql 中建立一个数据库 test1 </p>\n <figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">database</span> test1</div></pre></td></tr></table></figure>\n</li>\n<li><p>创建表examinfo </p>\n <figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">use</span> test1;</div><div class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> examinfo( </div><div class=\"line\">\t<span class=\"keyword\">id</span> <span class=\"built_in\">int</span> auto_increment <span class=\"keyword\">not</span> <span class=\"literal\">null</span>, </div><div class=\"line\">\tendtime datetime, </div><div class=\"line\">\tprimary <span class=\"keyword\">key</span>(<span class=\"keyword\">id</span>) </div><div class=\"line\">);</div></pre></td></tr></table></figure>\n</li>\n<li><p>插入数据： </p>\n <figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> examinfo <span class=\"keyword\">values</span>(<span class=\"string\">'1'</span>,<span class=\"string\">'2015-11-11 11:11:11'</span>);</div></pre></td></tr></table></figure>\n<ul>\n<li><p>定界符(设置数据库以//作为结束)</p>\n<figure class=\"highlight 1c\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">DELIMITER <span class=\"comment\">//</span></div></pre></td></tr></table></figure>\n</li>\n</ul>\n</li>\n<li><p>创建存储过程test </p>\n <figure class=\"highlight asciidoc\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"section\">mysql&gt; select * from examinfo;</span></div><div class=\"line\">+----+---------------------+</div><div class=\"line\"><span class=\"section\">| id | endtime             |</span></div><div class=\"line\">+----+---------------------+</div><div class=\"line\"><span class=\"section\">|  1 | 2015-11-11 11:11:11 |</span></div><div class=\"line\">+----+---------------------+</div><div class=\"line\">1 row in set (0.00 sec)</div><div class=\"line\"></div><div class=\"line\">mysql&gt; DELIMITER //</div><div class=\"line\">mysql&gt; CREATE PROCEDURE test () </div><div class=\"line\"><span class=\"code\">    -&gt; begin</span></div><div class=\"line\"><span class=\"code\">    -&gt; update examinfo set endtime=now() where id=1;</span></div><div class=\"line\"><span class=\"code\">    -&gt; end;</span></div><div class=\"line\"><span class=\"code\">    -&gt; //</span></div><div class=\"line\">Query OK, 0 rows affected (0.00 sec)</div></pre></td></tr></table></figure>\n</li>\n<li><p>创建event e_test </p>\n <figure class=\"highlight haml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">mysql&gt; CREATE EVENT if not exists e_test </div><div class=\"line\">    -<span class=\"ruby\">&gt; on schedule every <span class=\"number\">30</span> second </span></div><div class=\"line\">    -<span class=\"ruby\">&gt; on completion preserve </span></div><div class=\"line\">    -<span class=\"ruby\">&gt; <span class=\"keyword\">do</span> call test(); </span></div><div class=\"line\">    -<span class=\"ruby\">&gt; <span class=\"regexp\">//</span></span></div><div class=\"line\">Query OK, 0 rows affected (0.00 sec)</div></pre></td></tr></table></figure>\n</li>\n</ol>\n<p>6.</p>\n<pre><code>-    查看event是否开启: show variables like &apos;%sche%&apos;; \n-    将事件计划开启: set global event_scheduler=1; \n-    关闭事件任务: alter event e_test ON COMPLETION PRESERVE DISABLE; \n-    开启事件任务: alter event e_test ON COMPLETION PRESERVE ENABLE; \n</code></pre><ol>\n<li>查看结果 <figure class=\"highlight asciidoc\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"section\">mysql&gt; select * from examinfo//</span></div><div class=\"line\">+----+---------------------+</div><div class=\"line\"><span class=\"section\">| id | endtime             |</span></div><div class=\"line\">+----+---------------------+</div><div class=\"line\"><span class=\"section\">|  1 | 2015-11-11 12:02:09 |</span></div><div class=\"line\">+----+---------------------+</div><div class=\"line\">1 row in set (0.00 sec)</div><div class=\"line\"></div><div class=\"line\"><span class=\"section\">mysql&gt; select * from examinfo//</span></div><div class=\"line\">+----+---------------------+</div><div class=\"line\"><span class=\"section\">| id | endtime             |</span></div><div class=\"line\">+----+---------------------+</div><div class=\"line\"><span class=\"section\">|  1 | 2015-11-11 12:02:39 |</span></div><div class=\"line\">+----+---------------------+</div><div class=\"line\">1 row in set (0.00 sec)</div></pre></td></tr></table></figure>\n</li>\n</ol>\n<p>到此一个作业就算结束了，这用了存储过程</p>\n<h2 id=\"查看存储过程\"><a href=\"#查看存储过程\" class=\"headerlink\" title=\"查看存储过程\"></a>查看存储过程</h2><ul>\n<li><p>方法一：</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">select</span> <span class=\"string\">`name`</span> <span class=\"keyword\">from</span> mysql.proc <span class=\"keyword\">where</span> db = <span class=\"string\">'your_db_name'</span> <span class=\"keyword\">and</span> <span class=\"string\">`type`</span> = <span class=\"string\">'PROCEDURE'</span></div></pre></td></tr></table></figure>\n</li>\n<li><p>方法二：</p>\n<figure class=\"highlight cal\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">show <span class=\"function\"><span class=\"keyword\">procedure</span> <span class=\"title\">status</span>;</span></div></pre></td></tr></table></figure>\n</li>\n</ul>\n<h2 id=\"查看存储过程或函数的创建代码\"><a href=\"#查看存储过程或函数的创建代码\" class=\"headerlink\" title=\"查看存储过程或函数的创建代码\"></a>查看存储过程或函数的创建代码</h2><figure class=\"highlight oxygene\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">show <span class=\"keyword\">create</span> <span class=\"function\"><span class=\"keyword\">procedure</span> <span class=\"title\">proc_name</span>;</span></div><div class=\"line\">show <span class=\"keyword\">create</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">func_name</span>;</span></div></pre></td></tr></table></figure>\n<h2 id=\"创建数据库的指定字符编码\"><a href=\"#创建数据库的指定字符编码\" class=\"headerlink\" title=\"创建数据库的指定字符编码\"></a>创建数据库的指定字符编码</h2><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">database</span> shopmgr <span class=\"built_in\">character</span> <span class=\"keyword\">set</span> utf8 <span class=\"keyword\">collate</span> utf8_general_ci;</div></pre></td></tr></table></figure>","excerpt":"","more":"<h1 id=\"在网上找了一个比较全的入门教程\"><a href=\"#在网上找了一个比较全的入门教程\" class=\"headerlink\" title=\"在网上找了一个比较全的入门教程\"></a>在网上找了一个比较全的入门教程</h1><ol>\n<li><p>在mysql 中建立一个数据库 test1 </p>\n <figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">database</span> test1</div></pre></td></tr></table></figure>\n</li>\n<li><p>创建表examinfo </p>\n <figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">use</span> test1;</div><div class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">table</span> examinfo( </div><div class=\"line\">\t<span class=\"keyword\">id</span> <span class=\"built_in\">int</span> auto_increment <span class=\"keyword\">not</span> <span class=\"literal\">null</span>, </div><div class=\"line\">\tendtime datetime, </div><div class=\"line\">\tprimary <span class=\"keyword\">key</span>(<span class=\"keyword\">id</span>) </div><div class=\"line\">);</div></pre></td></tr></table></figure>\n</li>\n<li><p>插入数据： </p>\n <figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">insert</span> <span class=\"keyword\">into</span> examinfo <span class=\"keyword\">values</span>(<span class=\"string\">'1'</span>,<span class=\"string\">'2015-11-11 11:11:11'</span>);</div></pre></td></tr></table></figure>\n<ul>\n<li><p>定界符(设置数据库以//作为结束)</p>\n<figure class=\"highlight 1c\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">DELIMITER <span class=\"comment\">//</span></div></pre></td></tr></table></figure>\n</li>\n</ul>\n</li>\n<li><p>创建存储过程test </p>\n <figure class=\"highlight asciidoc\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"section\">mysql&gt; select * from examinfo;</div><div class=\"line\">+----+---------------------+</span></div><div class=\"line\"><span class=\"section\">| id | endtime             |</div><div class=\"line\">+----+---------------------+</span></div><div class=\"line\"><span class=\"section\">|  1 | 2015-11-11 11:11:11 |</div><div class=\"line\">+----+---------------------+</span></div><div class=\"line\">1 row in set (0.00 sec)</div><div class=\"line\"></div><div class=\"line\">mysql&gt; DELIMITER //</div><div class=\"line\">mysql&gt; CREATE PROCEDURE test () </div><div class=\"line\"><span class=\"code\">    -&gt; begin</span></div><div class=\"line\"><span class=\"code\">    -&gt; update examinfo set endtime=now() where id=1;</span></div><div class=\"line\"><span class=\"code\">    -&gt; end;</span></div><div class=\"line\"><span class=\"code\">    -&gt; //</span></div><div class=\"line\">Query OK, 0 rows affected (0.00 sec)</div></pre></td></tr></table></figure>\n</li>\n<li><p>创建event e_test </p>\n <figure class=\"highlight haml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">mysql&gt; CREATE EVENT if not exists e_test </div><div class=\"line\">    -<span class=\"ruby\">&gt; on schedule every <span class=\"number\">30</span> second </div><div class=\"line\"></span>    -<span class=\"ruby\">&gt; on completion preserve </div><div class=\"line\"></span>    -<span class=\"ruby\">&gt; <span class=\"keyword\">do</span> call test(); </div><div class=\"line\"></span>    -<span class=\"ruby\">&gt; <span class=\"regexp\">//</span></div><div class=\"line\"></span>Query OK, 0 rows affected (0.00 sec)</div></pre></td></tr></table></figure>\n</li>\n</ol>\n<p>6.</p>\n<pre><code>-    查看event是否开启: show variables like &apos;%sche%&apos;; \n-    将事件计划开启: set global event_scheduler=1; \n-    关闭事件任务: alter event e_test ON COMPLETION PRESERVE DISABLE; \n-    开启事件任务: alter event e_test ON COMPLETION PRESERVE ENABLE; \n</code></pre><ol>\n<li>查看结果 <figure class=\"highlight asciidoc\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"section\">mysql&gt; select * from examinfo//</div><div class=\"line\">+----+---------------------+</span></div><div class=\"line\"><span class=\"section\">| id | endtime             |</div><div class=\"line\">+----+---------------------+</span></div><div class=\"line\"><span class=\"section\">|  1 | 2015-11-11 12:02:09 |</div><div class=\"line\">+----+---------------------+</span></div><div class=\"line\">1 row in set (0.00 sec)</div><div class=\"line\"></div><div class=\"line\"><span class=\"section\">mysql&gt; select * from examinfo//</div><div class=\"line\">+----+---------------------+</span></div><div class=\"line\"><span class=\"section\">| id | endtime             |</div><div class=\"line\">+----+---------------------+</span></div><div class=\"line\"><span class=\"section\">|  1 | 2015-11-11 12:02:39 |</div><div class=\"line\">+----+---------------------+</span></div><div class=\"line\">1 row in set (0.00 sec)</div></pre></td></tr></table></figure>\n</li>\n</ol>\n<p>到此一个作业就算结束了，这用了存储过程</p>\n<h2 id=\"查看存储过程\"><a href=\"#查看存储过程\" class=\"headerlink\" title=\"查看存储过程\"></a>查看存储过程</h2><ul>\n<li><p>方法一：</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">select</span> <span class=\"string\">`name`</span> <span class=\"keyword\">from</span> mysql.proc <span class=\"keyword\">where</span> db = <span class=\"string\">'your_db_name'</span> <span class=\"keyword\">and</span> <span class=\"string\">`type`</span> = <span class=\"string\">'PROCEDURE'</span></div></pre></td></tr></table></figure>\n</li>\n<li><p>方法二：</p>\n<figure class=\"highlight cal\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">show <span class=\"function\"><span class=\"keyword\">procedure</span> <span class=\"title\">status</span>;</span></div></pre></td></tr></table></figure>\n</li>\n</ul>\n<h2 id=\"查看存储过程或函数的创建代码\"><a href=\"#查看存储过程或函数的创建代码\" class=\"headerlink\" title=\"查看存储过程或函数的创建代码\"></a>查看存储过程或函数的创建代码</h2><figure class=\"highlight oxygene\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">show <span class=\"keyword\">create</span> <span class=\"function\"><span class=\"keyword\">procedure</span> <span class=\"title\">proc_name</span>;</span></div><div class=\"line\">show <span class=\"keyword\">create</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">func_name</span>;</span></div></pre></td></tr></table></figure>\n<h2 id=\"创建数据库的指定字符编码\"><a href=\"#创建数据库的指定字符编码\" class=\"headerlink\" title=\"创建数据库的指定字符编码\"></a>创建数据库的指定字符编码</h2><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">database</span> shopmgr <span class=\"built_in\">character</span> <span class=\"keyword\">set</span> utf8 <span class=\"keyword\">collate</span> utf8_general_ci;</div></pre></td></tr></table></figure>"},{"title":"mysql之修改字段默认值","date":"2015-11-10T09:00:18.000Z","_content":"\n\nMySQL修改字段默认值\n==============\n* 解决\n\t```\n\talter table topic alter column cateId set default '2';\n\t```\n* 语法总结\n\t```\n\talter table表名alter column字段名drop default; (若本身存在默认值，则先删除)\n\talter table表名 alter column 字段名 set default默认值;(若本身不存在则可以直接设定)\n\t```","source":"_posts/2015/11/10/mysql之修改字段默认值.md","raw":"title: mysql之修改字段默认值\ndate: 2015-11-10 17:00:18\ncategories:\n- MySql\ntags:\n- MySql\n---\n\n\nMySQL修改字段默认值\n==============\n* 解决\n\t```\n\talter table topic alter column cateId set default '2';\n\t```\n* 语法总结\n\t```\n\talter table表名alter column字段名drop default; (若本身存在默认值，则先删除)\n\talter table表名 alter column 字段名 set default默认值;(若本身不存在则可以直接设定)\n\t```","slug":"mysql之修改字段默认值","published":1,"updated":"2016-06-29T15:29:25.175Z","_id":"cik3sv4vb00140s37ijyakmnl","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"MySQL修改字段默认值\"><a href=\"#MySQL修改字段默认值\" class=\"headerlink\" title=\"MySQL修改字段默认值\"></a>MySQL修改字段默认值</h1><ul>\n<li><p>解决</p>\n  <figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">alter</span> <span class=\"keyword\">table</span> topic <span class=\"keyword\">alter</span> <span class=\"keyword\">column</span> cateId <span class=\"keyword\">set</span> <span class=\"keyword\">default</span> <span class=\"string\">'2'</span>;</div></pre></td></tr></table></figure>\n</li>\n<li><p>语法总结</p>\n  <figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">alter</span> <span class=\"keyword\">table</span>表名<span class=\"keyword\">alter</span> <span class=\"keyword\">column</span>字段名<span class=\"keyword\">drop</span> <span class=\"keyword\">default</span>; (若本身存在默认值，则先删除)</div><div class=\"line\"><span class=\"keyword\">alter</span> <span class=\"keyword\">table</span>表名 <span class=\"keyword\">alter</span> <span class=\"keyword\">column</span> 字段名 <span class=\"keyword\">set</span> <span class=\"keyword\">default</span>默认值;(若本身不存在则可以直接设定)</div></pre></td></tr></table></figure></li>\n</ul>\n","excerpt":"","more":"<h1 id=\"MySQL修改字段默认值\"><a href=\"#MySQL修改字段默认值\" class=\"headerlink\" title=\"MySQL修改字段默认值\"></a>MySQL修改字段默认值</h1><ul>\n<li><p>解决</p>\n  <figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">alter</span> <span class=\"keyword\">table</span> topic <span class=\"keyword\">alter</span> <span class=\"keyword\">column</span> cateId <span class=\"keyword\">set</span> <span class=\"keyword\">default</span> <span class=\"string\">'2'</span>;</div></pre></td></tr></table></figure>\n</li>\n<li><p>语法总结</p>\n  <figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">alter</span> <span class=\"keyword\">table</span>表名<span class=\"keyword\">alter</span> <span class=\"keyword\">column</span>字段名<span class=\"keyword\">drop</span> <span class=\"keyword\">default</span>; (若本身存在默认值，则先删除)</div><div class=\"line\"><span class=\"keyword\">alter</span> <span class=\"keyword\">table</span>表名 <span class=\"keyword\">alter</span> <span class=\"keyword\">column</span> 字段名 <span class=\"keyword\">set</span> <span class=\"keyword\">default</span>默认值;(若本身不存在则可以直接设定)</div></pre></td></tr></table></figure></li>\n</ul>\n"},{"title":"django之外键的删除","date":"2015-11-10T04:04:24.000Z","_content":"\nDjango的外键使用\n===============\n* Django的models和底层的数据库联系很密切，models之间创建的关联，都直接映射到数据库，是真正的物理关联。\n\ndjango删除外键\n===============\n* Django还是采用级联的删除方式，当你删除一个外键的时候，外键关联的实体也被删除，但在创建models的时候，外键增加了一个可选参数on_delete\n\t```\n\tclass Blog（models.Model）:  \n\t\tuser = models.ForeignKey(User, blank=True, null=True, on_delete=models.SET_NULL)\n\t```\n\t当blog对应的user被删除了，blog里的user字段会设置为空值，而不是连同blog也删除掉\n\n* on_delete有多少个选项呢：\n\t-\tCASCADE:这就是默认的选项，级联删除，你无需显性指定它。\n\t-\tPROTECT: 保护模式，如果采用该选项，删除的时候，会抛出ProtectedError错误。\n\t-\tSET_NULL: 置空模式，删除的时候，外键字段被设置为空，前提就是blank=True, null=True,定义该字段的时候，允许为空。\n\t-\tSET_DEFAULT: 置默认值，删除的时候，外键字段设置为默认值，所以定义外键的时候注意加上一个默认值。\n\t-\tSET(): 自定义一个值，该值当然只能是对应的实体了，看一下代码：\t\n\t\t```\n\t\tdef get_sentinel_user():  \n\t\t    return User.objects.get_or_create(username='deleted')[0]  \n\t\t  \n\t\tclass MyModel(models.Model):  \n\t\t    user = models.ForeignKey(User, on_delete=models.SET(get_sentinel_user))\n\t\t```\n\t\t以上的代码，当删除mymodel对应的user的时候，mymodel不会删除掉，而是找到一个名叫 deleted的user，与之重建关联。\n\n手动增加外键\n===============\n\n* 作为外键的model为（该model从数据库中自动产生）：\n\t\n\t```\n\tclass People(models.Model):\n\t    name = models.TextField(primary_key=True, blank=True)  # This field type is a guess.\n\t    entrance_date = models.TextField(blank=True)  # This field type is a guess.\n\t    entrance_semester = models.TextField(blank=True)  # This field type is a guess.\n\t    degree = models.TextField(blank=True)  # This field type is a guess.\n\t    phone_number = models.TextField(blank=True)  # This field type is a guess.\n\t    email = models.TextField(blank=True)  # This field type is a guess.\n\t    qq = models.TextField(blank=True)  # This field type is a guess.\n\t    remarks = models.TextField(blank=True)  # This field type is a guess.\n\t    def __unicode__(self):\n\t        return self.name\n\t    class Meta:\n\t        db_table = u'people'\n\t```\n* 另一Model(Equipment)追加一个字段：\n\t```\n\tlab_user = models.ForeignKey(People)\n\t```\n* 数据库（sqlite3）中新加入一个字段：\n\t```\n\talter table 'equipment' add 'lab_user_id';\n\t```\n* 赋值：\n\t```\n\tupdate equipment set lab_user_id = '张山';\n\t```\n在admin中添加外键search字段\n==================\n若要被search到，search_fields 中添加 lab_user__name 。","source":"_posts/2015/11/10/django之外键的删除.md","raw":"title: django之外键的删除\ndate: 2015-11-10 12:04:24\ncategories:\n- Django\n- 转载\ntags:\n- Django\n---\n\nDjango的外键使用\n===============\n* Django的models和底层的数据库联系很密切，models之间创建的关联，都直接映射到数据库，是真正的物理关联。\n\ndjango删除外键\n===============\n* Django还是采用级联的删除方式，当你删除一个外键的时候，外键关联的实体也被删除，但在创建models的时候，外键增加了一个可选参数on_delete\n\t```\n\tclass Blog（models.Model）:  \n\t\tuser = models.ForeignKey(User, blank=True, null=True, on_delete=models.SET_NULL)\n\t```\n\t当blog对应的user被删除了，blog里的user字段会设置为空值，而不是连同blog也删除掉\n\n* on_delete有多少个选项呢：\n\t-\tCASCADE:这就是默认的选项，级联删除，你无需显性指定它。\n\t-\tPROTECT: 保护模式，如果采用该选项，删除的时候，会抛出ProtectedError错误。\n\t-\tSET_NULL: 置空模式，删除的时候，外键字段被设置为空，前提就是blank=True, null=True,定义该字段的时候，允许为空。\n\t-\tSET_DEFAULT: 置默认值，删除的时候，外键字段设置为默认值，所以定义外键的时候注意加上一个默认值。\n\t-\tSET(): 自定义一个值，该值当然只能是对应的实体了，看一下代码：\t\n\t\t```\n\t\tdef get_sentinel_user():  \n\t\t    return User.objects.get_or_create(username='deleted')[0]  \n\t\t  \n\t\tclass MyModel(models.Model):  \n\t\t    user = models.ForeignKey(User, on_delete=models.SET(get_sentinel_user))\n\t\t```\n\t\t以上的代码，当删除mymodel对应的user的时候，mymodel不会删除掉，而是找到一个名叫 deleted的user，与之重建关联。\n\n手动增加外键\n===============\n\n* 作为外键的model为（该model从数据库中自动产生）：\n\t\n\t```\n\tclass People(models.Model):\n\t    name = models.TextField(primary_key=True, blank=True)  # This field type is a guess.\n\t    entrance_date = models.TextField(blank=True)  # This field type is a guess.\n\t    entrance_semester = models.TextField(blank=True)  # This field type is a guess.\n\t    degree = models.TextField(blank=True)  # This field type is a guess.\n\t    phone_number = models.TextField(blank=True)  # This field type is a guess.\n\t    email = models.TextField(blank=True)  # This field type is a guess.\n\t    qq = models.TextField(blank=True)  # This field type is a guess.\n\t    remarks = models.TextField(blank=True)  # This field type is a guess.\n\t    def __unicode__(self):\n\t        return self.name\n\t    class Meta:\n\t        db_table = u'people'\n\t```\n* 另一Model(Equipment)追加一个字段：\n\t```\n\tlab_user = models.ForeignKey(People)\n\t```\n* 数据库（sqlite3）中新加入一个字段：\n\t```\n\talter table 'equipment' add 'lab_user_id';\n\t```\n* 赋值：\n\t```\n\tupdate equipment set lab_user_id = '张山';\n\t```\n在admin中添加外键search字段\n==================\n若要被search到，search_fields 中添加 lab_user__name 。","slug":"django之外键的删除","published":1,"updated":"2016-06-29T15:29:25.175Z","_id":"cik3sv4vg00170s37t9mbm5bd","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"Django的外键使用\"><a href=\"#Django的外键使用\" class=\"headerlink\" title=\"Django的外键使用\"></a>Django的外键使用</h1><ul>\n<li>Django的models和底层的数据库联系很密切，models之间创建的关联，都直接映射到数据库，是真正的物理关联。</li>\n</ul>\n<h1 id=\"django删除外键\"><a href=\"#django删除外键\" class=\"headerlink\" title=\"django删除外键\"></a>django删除外键</h1><ul>\n<li><p>Django还是采用级联的删除方式，当你删除一个外键的时候，外键关联的实体也被删除，但在创建models的时候，外键增加了一个可选参数on_delete</p>\n  <figure class=\"highlight haskell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"type\">Blog</span>（models.<span class=\"type\">Model</span>）:  </span></div><div class=\"line\">\tuser = models.<span class=\"type\">ForeignKey</span>(<span class=\"type\">User</span>, <span class=\"title\">blank</span>=<span class=\"type\">True</span>, <span class=\"title\">null</span>=<span class=\"type\">True</span>, <span class=\"title\">on_delete</span>=<span class=\"title\">models</span>.<span class=\"type\">SET_NULL</span>)</div></pre></td></tr></table></figure>\n<p>  当blog对应的user被删除了，blog里的user字段会设置为空值，而不是连同blog也删除掉</p>\n</li>\n<li><p>on_delete有多少个选项呢：</p>\n<ul>\n<li>CASCADE:这就是默认的选项，级联删除，你无需显性指定它。</li>\n<li>PROTECT: 保护模式，如果采用该选项，删除的时候，会抛出ProtectedError错误。</li>\n<li>SET_NULL: 置空模式，删除的时候，外键字段被设置为空，前提就是blank=True, null=True,定义该字段的时候，允许为空。</li>\n<li>SET_DEFAULT: 置默认值，删除的时候，外键字段设置为默认值，所以定义外键的时候注意加上一个默认值。</li>\n<li><p>SET(): 自定义一个值，该值当然只能是对应的实体了，看一下代码：    </p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">get_sentinel_user</span><span class=\"params\">()</span>:</span>  </div><div class=\"line\">    <span class=\"keyword\">return</span> User.objects.get_or_create(username=<span class=\"string\">'deleted'</span>)[<span class=\"number\">0</span>]  </div><div class=\"line\">  </div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyModel</span><span class=\"params\">(models.Model)</span>:</span>  </div><div class=\"line\">    user = models.ForeignKey(User, on_delete=models.SET(get_sentinel_user))</div></pre></td></tr></table></figure>\n<p>以上的代码，当删除mymodel对应的user的时候，mymodel不会删除掉，而是找到一个名叫 deleted的user，与之重建关联。</p>\n</li>\n</ul>\n</li>\n</ul>\n<h1 id=\"手动增加外键\"><a href=\"#手动增加外键\" class=\"headerlink\" title=\"手动增加外键\"></a>手动增加外键</h1><ul>\n<li><p>作为外键的model为（该model从数据库中自动产生）：</p>\n  <figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">People</span><span class=\"params\">(models.Model)</span>:</span></div><div class=\"line\">    name = models.TextField(primary_key=<span class=\"keyword\">True</span>, blank=<span class=\"keyword\">True</span>)  <span class=\"comment\"># This field type is a guess.</span></div><div class=\"line\">    entrance_date = models.TextField(blank=<span class=\"keyword\">True</span>)  <span class=\"comment\"># This field type is a guess.</span></div><div class=\"line\">    entrance_semester = models.TextField(blank=<span class=\"keyword\">True</span>)  <span class=\"comment\"># This field type is a guess.</span></div><div class=\"line\">    degree = models.TextField(blank=<span class=\"keyword\">True</span>)  <span class=\"comment\"># This field type is a guess.</span></div><div class=\"line\">    phone_number = models.TextField(blank=<span class=\"keyword\">True</span>)  <span class=\"comment\"># This field type is a guess.</span></div><div class=\"line\">    email = models.TextField(blank=<span class=\"keyword\">True</span>)  <span class=\"comment\"># This field type is a guess.</span></div><div class=\"line\">    qq = models.TextField(blank=<span class=\"keyword\">True</span>)  <span class=\"comment\"># This field type is a guess.</span></div><div class=\"line\">    remarks = models.TextField(blank=<span class=\"keyword\">True</span>)  <span class=\"comment\"># This field type is a guess.</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__unicode__</span><span class=\"params\">(self)</span>:</span></div><div class=\"line\">        <span class=\"keyword\">return</span> self.name</div><div class=\"line\">    <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Meta</span>:</span></div><div class=\"line\">        db_table = <span class=\"string\">u'people'</span></div></pre></td></tr></table></figure>\n</li>\n<li><p>另一Model(Equipment)追加一个字段：</p>\n  <figure class=\"highlight ini\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"attr\">lab_user</span> = models.ForeignKey(People)</div></pre></td></tr></table></figure>\n</li>\n<li><p>数据库（sqlite3）中新加入一个字段：</p>\n  <figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">alter</span> <span class=\"keyword\">table</span> <span class=\"string\">'equipment'</span> <span class=\"keyword\">add</span> <span class=\"string\">'lab_user_id'</span>;</div></pre></td></tr></table></figure>\n</li>\n<li><p>赋值：</p>\n  <figure class=\"highlight gams\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">update equipment <span class=\"keyword\">set</span> lab_user_id <span class=\"comment\">=</span> <span class=\"comment\">'张山'</span>;</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<h1 id=\"在admin中添加外键search字段\"><a href=\"#在admin中添加外键search字段\" class=\"headerlink\" title=\"在admin中添加外键search字段\"></a>在admin中添加外键search字段</h1><p>若要被search到，search_fields 中添加 lab_user__name 。</p>\n","excerpt":"","more":"<h1 id=\"Django的外键使用\"><a href=\"#Django的外键使用\" class=\"headerlink\" title=\"Django的外键使用\"></a>Django的外键使用</h1><ul>\n<li>Django的models和底层的数据库联系很密切，models之间创建的关联，都直接映射到数据库，是真正的物理关联。</li>\n</ul>\n<h1 id=\"django删除外键\"><a href=\"#django删除外键\" class=\"headerlink\" title=\"django删除外键\"></a>django删除外键</h1><ul>\n<li><p>Django还是采用级联的删除方式，当你删除一个外键的时候，外键关联的实体也被删除，但在创建models的时候，外键增加了一个可选参数on_delete</p>\n  <figure class=\"highlight haskell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"type\">Blog</span>（models.<span class=\"type\">Model</span>）:  </div><div class=\"line\">\tuser = models.<span class=\"type\">ForeignKey</span>(<span class=\"type\">User</span>, <span class=\"title\">blank</span>=<span class=\"type\">True</span>, <span class=\"title\">null</span>=<span class=\"type\">True</span>, <span class=\"title\">on_delete</span>=<span class=\"title\">models</span>.<span class=\"type\">SET_NULL</span>)</span></div></pre></td></tr></table></figure>\n<p>  当blog对应的user被删除了，blog里的user字段会设置为空值，而不是连同blog也删除掉</p>\n</li>\n<li><p>on_delete有多少个选项呢：</p>\n<ul>\n<li>CASCADE:这就是默认的选项，级联删除，你无需显性指定它。</li>\n<li>PROTECT: 保护模式，如果采用该选项，删除的时候，会抛出ProtectedError错误。</li>\n<li>SET_NULL: 置空模式，删除的时候，外键字段被设置为空，前提就是blank=True, null=True,定义该字段的时候，允许为空。</li>\n<li>SET_DEFAULT: 置默认值，删除的时候，外键字段设置为默认值，所以定义外键的时候注意加上一个默认值。</li>\n<li><p>SET(): 自定义一个值，该值当然只能是对应的实体了，看一下代码：    </p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">get_sentinel_user</span><span class=\"params\">()</span>:</span>  </div><div class=\"line\">    <span class=\"keyword\">return</span> User.objects.get_or_create(username=<span class=\"string\">'deleted'</span>)[<span class=\"number\">0</span>]  </div><div class=\"line\">  </div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyModel</span><span class=\"params\">(models.Model)</span>:</span>  </div><div class=\"line\">    user = models.ForeignKey(User, on_delete=models.SET(get_sentinel_user))</div></pre></td></tr></table></figure>\n<p>以上的代码，当删除mymodel对应的user的时候，mymodel不会删除掉，而是找到一个名叫 deleted的user，与之重建关联。</p>\n</li>\n</ul>\n</li>\n</ul>\n<h1 id=\"手动增加外键\"><a href=\"#手动增加外键\" class=\"headerlink\" title=\"手动增加外键\"></a>手动增加外键</h1><ul>\n<li><p>作为外键的model为（该model从数据库中自动产生）：</p>\n  <figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">People</span><span class=\"params\">(models.Model)</span>:</span></div><div class=\"line\">    name = models.TextField(primary_key=<span class=\"keyword\">True</span>, blank=<span class=\"keyword\">True</span>)  <span class=\"comment\"># This field type is a guess.</span></div><div class=\"line\">    entrance_date = models.TextField(blank=<span class=\"keyword\">True</span>)  <span class=\"comment\"># This field type is a guess.</span></div><div class=\"line\">    entrance_semester = models.TextField(blank=<span class=\"keyword\">True</span>)  <span class=\"comment\"># This field type is a guess.</span></div><div class=\"line\">    degree = models.TextField(blank=<span class=\"keyword\">True</span>)  <span class=\"comment\"># This field type is a guess.</span></div><div class=\"line\">    phone_number = models.TextField(blank=<span class=\"keyword\">True</span>)  <span class=\"comment\"># This field type is a guess.</span></div><div class=\"line\">    email = models.TextField(blank=<span class=\"keyword\">True</span>)  <span class=\"comment\"># This field type is a guess.</span></div><div class=\"line\">    qq = models.TextField(blank=<span class=\"keyword\">True</span>)  <span class=\"comment\"># This field type is a guess.</span></div><div class=\"line\">    remarks = models.TextField(blank=<span class=\"keyword\">True</span>)  <span class=\"comment\"># This field type is a guess.</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__unicode__</span><span class=\"params\">(self)</span>:</span></div><div class=\"line\">        <span class=\"keyword\">return</span> self.name</div><div class=\"line\">    <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Meta</span>:</span></div><div class=\"line\">        db_table = <span class=\"string\">u'people'</span></div></pre></td></tr></table></figure>\n</li>\n<li><p>另一Model(Equipment)追加一个字段：</p>\n  <figure class=\"highlight ini\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"attr\">lab_user</span> = models.ForeignKey(People)</div></pre></td></tr></table></figure>\n</li>\n<li><p>数据库（sqlite3）中新加入一个字段：</p>\n  <figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">alter</span> <span class=\"keyword\">table</span> <span class=\"string\">'equipment'</span> <span class=\"keyword\">add</span> <span class=\"string\">'lab_user_id'</span>;</div></pre></td></tr></table></figure>\n</li>\n<li><p>赋值：</p>\n  <figure class=\"highlight gams\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">update equipment <span class=\"keyword\">set</span> lab_user_id <span class=\"comment\">=</span> <span class=\"comment\">'张山'</span>;</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<h1 id=\"在admin中添加外键search字段\"><a href=\"#在admin中添加外键search字段\" class=\"headerlink\" title=\"在admin中添加外键search字段\"></a>在admin中添加外键search字段</h1><p>若要被search到，search_fields 中添加 lab_user__name 。</p>\n"},{"title":"mysql之update","date":"2015-11-09T02:37:12.000Z","_content":"\nSingle-table语法：\n```\nUPDATE [LOW_PRIORITY] [IGNORE] tbl_name\n    SET col_name1=expr1 [, col_name2=expr2 ...]\n    [WHERE where_definition]\n    [ORDER BY ...]\n    [LIMIT row_count]\n```\nMultiple-table语法：\n```\nUPDATE [LOW_PRIORITY] [IGNORE] table_references\n    SET col_name1=expr1 [, col_name2=expr2 ...]\n    [WHERE where_definition]\n```\nUPDATE语法可以用新值更新原有表行中的各列。SET子句指示要修改哪些列和要给予哪些值。WHERE子句指定应更新哪些行。如果没有WHERE子句，则更新所有的行。如果指定了ORDER BY子句，则按照被指定的顺序对行进行更新。LIMIT子句用于给定一个限值，限制可以被更新的行的数目。\n\n \n\n如果您在一个表达式中通过tbl_name访问一列，则UPDATE使用列中的当前值。例如，以下语句把年龄列设置为比当前值多一：\n```\nUPDATE persondata SET age=age+1;\n```\nUPDATE赋值被从左到右评估。例如，以下语句对年龄列加倍，然后再进行增加：\n```\nUPDATE persondata SET age=age*2, age=age+1;\n```\n如果您把一列设置为其当前含有的值，则MySQL会注意到这一点，但不会更新。\n\nupdate表的某些字段为null\n```\nupdate person set number=null,name=null;\n```\n如果您把被已定义为NOT NULL的列更新为NULL，则该列被设置到与列类型对应的默认值，并且累加警告数。对于数字类型，默认值为0；对于字符串类型，默认值为空字符串('')；对于日期和时间类型，默认值为“zero”值。\n\n \n\n多个表的UPDATE操作\n\nUPDATE items,month SET items.price=month.price WHERE items.id=month.id;\n以上的例子显示出了使用逗号操作符的内部联合，但是multiple-table UPDATE语句可以使用在SELECT语句中允许的任何类型的联合，比如LEFT JOIN，但是您不能把ORDER BY或LIMIT与multiple-table UPDATE同时使用。\n\n\n\n例子：\n```\nupdate product set contactor_id=57 where id = 491294 ;\n```","source":"_posts/2015/11/09/mysql之update.md","raw":"title: mysql之update\ndate: 2015-11-09 10:37:12\ncategories:\n- MySql\ntags:\n- MySql\n---\n\nSingle-table语法：\n```\nUPDATE [LOW_PRIORITY] [IGNORE] tbl_name\n    SET col_name1=expr1 [, col_name2=expr2 ...]\n    [WHERE where_definition]\n    [ORDER BY ...]\n    [LIMIT row_count]\n```\nMultiple-table语法：\n```\nUPDATE [LOW_PRIORITY] [IGNORE] table_references\n    SET col_name1=expr1 [, col_name2=expr2 ...]\n    [WHERE where_definition]\n```\nUPDATE语法可以用新值更新原有表行中的各列。SET子句指示要修改哪些列和要给予哪些值。WHERE子句指定应更新哪些行。如果没有WHERE子句，则更新所有的行。如果指定了ORDER BY子句，则按照被指定的顺序对行进行更新。LIMIT子句用于给定一个限值，限制可以被更新的行的数目。\n\n \n\n如果您在一个表达式中通过tbl_name访问一列，则UPDATE使用列中的当前值。例如，以下语句把年龄列设置为比当前值多一：\n```\nUPDATE persondata SET age=age+1;\n```\nUPDATE赋值被从左到右评估。例如，以下语句对年龄列加倍，然后再进行增加：\n```\nUPDATE persondata SET age=age*2, age=age+1;\n```\n如果您把一列设置为其当前含有的值，则MySQL会注意到这一点，但不会更新。\n\nupdate表的某些字段为null\n```\nupdate person set number=null,name=null;\n```\n如果您把被已定义为NOT NULL的列更新为NULL，则该列被设置到与列类型对应的默认值，并且累加警告数。对于数字类型，默认值为0；对于字符串类型，默认值为空字符串('')；对于日期和时间类型，默认值为“zero”值。\n\n \n\n多个表的UPDATE操作\n\nUPDATE items,month SET items.price=month.price WHERE items.id=month.id;\n以上的例子显示出了使用逗号操作符的内部联合，但是multiple-table UPDATE语句可以使用在SELECT语句中允许的任何类型的联合，比如LEFT JOIN，但是您不能把ORDER BY或LIMIT与multiple-table UPDATE同时使用。\n\n\n\n例子：\n```\nupdate product set contactor_id=57 where id = 491294 ;\n```","slug":"mysql之update","published":1,"updated":"2016-06-29T15:29:25.175Z","_id":"cik3sv4vl001c0s37tik5huph","comments":1,"layout":"post","photos":[],"link":"","content":"<p>Single-table语法：<br><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">UPDATE</span> [<span class=\"keyword\">LOW_PRIORITY</span>] [<span class=\"keyword\">IGNORE</span>] tbl_name</div><div class=\"line\">    <span class=\"keyword\">SET</span> col_name1=expr1 [, col_name2=expr2 ...]</div><div class=\"line\">    [<span class=\"keyword\">WHERE</span> where_definition]</div><div class=\"line\">    [<span class=\"keyword\">ORDER</span> <span class=\"keyword\">BY</span> ...]</div><div class=\"line\">    [<span class=\"keyword\">LIMIT</span> <span class=\"keyword\">row_count</span>]</div></pre></td></tr></table></figure></p>\n<p>Multiple-table语法：<br><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">UPDATE</span> [<span class=\"keyword\">LOW_PRIORITY</span>] [<span class=\"keyword\">IGNORE</span>] table_references</div><div class=\"line\">    <span class=\"keyword\">SET</span> col_name1=expr1 [, col_name2=expr2 ...]</div><div class=\"line\">    [<span class=\"keyword\">WHERE</span> where_definition]</div></pre></td></tr></table></figure></p>\n<p>UPDATE语法可以用新值更新原有表行中的各列。SET子句指示要修改哪些列和要给予哪些值。WHERE子句指定应更新哪些行。如果没有WHERE子句，则更新所有的行。如果指定了ORDER BY子句，则按照被指定的顺序对行进行更新。LIMIT子句用于给定一个限值，限制可以被更新的行的数目。</p>\n<p>如果您在一个表达式中通过tbl_name访问一列，则UPDATE使用列中的当前值。例如，以下语句把年龄列设置为比当前值多一：<br><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">UPDATE</span> persondata <span class=\"keyword\">SET</span> age=age+<span class=\"number\">1</span>;</div></pre></td></tr></table></figure></p>\n<p>UPDATE赋值被从左到右评估。例如，以下语句对年龄列加倍，然后再进行增加：<br><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">UPDATE</span> persondata <span class=\"keyword\">SET</span> age=age*<span class=\"number\">2</span>, age=age+<span class=\"number\">1</span>;</div></pre></td></tr></table></figure></p>\n<p>如果您把一列设置为其当前含有的值，则MySQL会注意到这一点，但不会更新。</p>\n<p>update表的某些字段为null<br><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">update</span> person <span class=\"keyword\">set</span> <span class=\"built_in\">number</span>=<span class=\"literal\">null</span>,<span class=\"keyword\">name</span>=<span class=\"literal\">null</span>;</div></pre></td></tr></table></figure></p>\n<p>如果您把被已定义为NOT NULL的列更新为NULL，则该列被设置到与列类型对应的默认值，并且累加警告数。对于数字类型，默认值为0；对于字符串类型，默认值为空字符串(‘’)；对于日期和时间类型，默认值为“zero”值。</p>\n<p>多个表的UPDATE操作</p>\n<p>UPDATE items,month SET items.price=month.price WHERE items.id=month.id;<br>以上的例子显示出了使用逗号操作符的内部联合，但是multiple-table UPDATE语句可以使用在SELECT语句中允许的任何类型的联合，比如LEFT JOIN，但是您不能把ORDER BY或LIMIT与multiple-table UPDATE同时使用。</p>\n<p>例子：<br><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">update</span> product <span class=\"keyword\">set</span> contactor_id=<span class=\"number\">57</span> <span class=\"keyword\">where</span> <span class=\"keyword\">id</span> = <span class=\"number\">491294</span> ;</div></pre></td></tr></table></figure></p>\n","excerpt":"","more":"<p>Single-table语法：<br><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">UPDATE</span> [<span class=\"keyword\">LOW_PRIORITY</span>] [<span class=\"keyword\">IGNORE</span>] tbl_name</div><div class=\"line\">    <span class=\"keyword\">SET</span> col_name1=expr1 [, col_name2=expr2 ...]</div><div class=\"line\">    [<span class=\"keyword\">WHERE</span> where_definition]</div><div class=\"line\">    [<span class=\"keyword\">ORDER</span> <span class=\"keyword\">BY</span> ...]</div><div class=\"line\">    [<span class=\"keyword\">LIMIT</span> <span class=\"keyword\">row_count</span>]</div></pre></td></tr></table></figure></p>\n<p>Multiple-table语法：<br><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">UPDATE</span> [<span class=\"keyword\">LOW_PRIORITY</span>] [<span class=\"keyword\">IGNORE</span>] table_references</div><div class=\"line\">    <span class=\"keyword\">SET</span> col_name1=expr1 [, col_name2=expr2 ...]</div><div class=\"line\">    [<span class=\"keyword\">WHERE</span> where_definition]</div></pre></td></tr></table></figure></p>\n<p>UPDATE语法可以用新值更新原有表行中的各列。SET子句指示要修改哪些列和要给予哪些值。WHERE子句指定应更新哪些行。如果没有WHERE子句，则更新所有的行。如果指定了ORDER BY子句，则按照被指定的顺序对行进行更新。LIMIT子句用于给定一个限值，限制可以被更新的行的数目。</p>\n<p>如果您在一个表达式中通过tbl_name访问一列，则UPDATE使用列中的当前值。例如，以下语句把年龄列设置为比当前值多一：<br><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">UPDATE</span> persondata <span class=\"keyword\">SET</span> age=age+<span class=\"number\">1</span>;</div></pre></td></tr></table></figure></p>\n<p>UPDATE赋值被从左到右评估。例如，以下语句对年龄列加倍，然后再进行增加：<br><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">UPDATE</span> persondata <span class=\"keyword\">SET</span> age=age*<span class=\"number\">2</span>, age=age+<span class=\"number\">1</span>;</div></pre></td></tr></table></figure></p>\n<p>如果您把一列设置为其当前含有的值，则MySQL会注意到这一点，但不会更新。</p>\n<p>update表的某些字段为null<br><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">update</span> person <span class=\"keyword\">set</span> <span class=\"built_in\">number</span>=<span class=\"literal\">null</span>,<span class=\"keyword\">name</span>=<span class=\"literal\">null</span>;</div></pre></td></tr></table></figure></p>\n<p>如果您把被已定义为NOT NULL的列更新为NULL，则该列被设置到与列类型对应的默认值，并且累加警告数。对于数字类型，默认值为0；对于字符串类型，默认值为空字符串(‘’)；对于日期和时间类型，默认值为“zero”值。</p>\n<p>多个表的UPDATE操作</p>\n<p>UPDATE items,month SET items.price=month.price WHERE items.id=month.id;<br>以上的例子显示出了使用逗号操作符的内部联合，但是multiple-table UPDATE语句可以使用在SELECT语句中允许的任何类型的联合，比如LEFT JOIN，但是您不能把ORDER BY或LIMIT与multiple-table UPDATE同时使用。</p>\n<p>例子：<br><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">update</span> product <span class=\"keyword\">set</span> contactor_id=<span class=\"number\">57</span> <span class=\"keyword\">where</span> <span class=\"keyword\">id</span> = <span class=\"number\">491294</span> ;</div></pre></td></tr></table></figure></p>\n"},{"title":"vim之格式化代码","date":"2015-11-07T02:37:21.000Z","_content":"格式化全文： gg=G\n\n自动缩进当前行： ==\n\n这个是原文节选：\n\n14.6. How do I format/indent an entire file?\n\nYou can format/indent an entire file using the gg=G command, where\n\n     gg - Goto the beginning of the file\n     =   - apply indentation\n     G   - till end of file\n\nFor more information, read\n\n     :help gg\n     :help =\n     :help G\n     :help 'formatprg'\n     :help C-indenting\n\n 原文地址 http://hi.baidu.com/seesea8/blog/item/b96c8e51eb8f352743a75b41.html\n另转：\n\n最近在逛CSDN论坛时经常会苦恼一个问题——有些网友贴上去的代码没有用规范的格式贴上去，我贴到VIM里常常会需要手动调整格式，非常麻烦。每当这个时候就异常怀念以前用VC6.0时的ALT+F8……想下VIM作为一个程序员们最贴心的编辑器，显然不会对此坐视不理。经过一番的Search，果然就找到了一些最常用的简单技巧，笔记一下以备后来不时之需。 \nVIM格式化代码： \n格式化全文指令 gg=G \n自动缩进当前行指令 == \n      格式化当前光标接下来的8行 8= \n      格式化选定的行 v 选中需要格式化的代码段 = \n      备注： \ngg —— 到达文件最开始 \n= —— 要求缩进 \nG     —— 直到文件尾 \n注释代码：(这个原理上就是使用VIM的正则替换) \n以C++和Python为例。 \n注释连续行： \n指令格式 :起始行,终止行s/要替换的字符/替换为字符/g \n如， \n      C++源文件中注释掉10~20行，指令为： \n:10,20s/^/////g \nPython源文件中注释掉10~20行，指令为： \n:10,20s/^/#/g \n取消连续行注释： \n指令格式同上。只是要替换字符与替换为字符要互换： \n如， \n      取消C++源文件中的10~20行的注释，指令为： \n:10,20s/^//////g \n取消Python源文件中的10~20行的注释，指令为： \n:10,20s/^#//g\n","source":"_posts/2015/11/07/vim之格式化代码.md","raw":"title: vim之格式化代码\ndate: 2015-11-07 10:37:21\ncategories:\n- Vim\ntags:\n- Vim\n---\n格式化全文： gg=G\n\n自动缩进当前行： ==\n\n这个是原文节选：\n\n14.6. How do I format/indent an entire file?\n\nYou can format/indent an entire file using the gg=G command, where\n\n     gg - Goto the beginning of the file\n     =   - apply indentation\n     G   - till end of file\n\nFor more information, read\n\n     :help gg\n     :help =\n     :help G\n     :help 'formatprg'\n     :help C-indenting\n\n 原文地址 http://hi.baidu.com/seesea8/blog/item/b96c8e51eb8f352743a75b41.html\n另转：\n\n最近在逛CSDN论坛时经常会苦恼一个问题——有些网友贴上去的代码没有用规范的格式贴上去，我贴到VIM里常常会需要手动调整格式，非常麻烦。每当这个时候就异常怀念以前用VC6.0时的ALT+F8……想下VIM作为一个程序员们最贴心的编辑器，显然不会对此坐视不理。经过一番的Search，果然就找到了一些最常用的简单技巧，笔记一下以备后来不时之需。 \nVIM格式化代码： \n格式化全文指令 gg=G \n自动缩进当前行指令 == \n      格式化当前光标接下来的8行 8= \n      格式化选定的行 v 选中需要格式化的代码段 = \n      备注： \ngg —— 到达文件最开始 \n= —— 要求缩进 \nG     —— 直到文件尾 \n注释代码：(这个原理上就是使用VIM的正则替换) \n以C++和Python为例。 \n注释连续行： \n指令格式 :起始行,终止行s/要替换的字符/替换为字符/g \n如， \n      C++源文件中注释掉10~20行，指令为： \n:10,20s/^/////g \nPython源文件中注释掉10~20行，指令为： \n:10,20s/^/#/g \n取消连续行注释： \n指令格式同上。只是要替换字符与替换为字符要互换： \n如， \n      取消C++源文件中的10~20行的注释，指令为： \n:10,20s/^//////g \n取消Python源文件中的10~20行的注释，指令为： \n:10,20s/^#//g\n","slug":"vim之格式化代码","published":1,"updated":"2016-06-29T15:29:25.175Z","_id":"cik3sv4vo001f0s37u6ap3e6n","comments":1,"layout":"post","photos":[],"link":"","content":"<p>格式化全文： gg=G</p>\n<p>自动缩进当前行： ==</p>\n<p>这个是原文节选：</p>\n<p>14.6. How do I format/indent an entire file?</p>\n<p>You can format/indent an entire file using the gg=G command, where</p>\n<pre><code>gg - Goto the beginning of the file\n=   - apply indentation\nG   - till end of file\n</code></pre><p>For more information, read</p>\n<pre><code>:help gg\n:help =\n:help G\n:help &apos;formatprg&apos;\n:help C-indenting\n</code></pre><p> 原文地址 <a href=\"http://hi.baidu.com/seesea8/blog/item/b96c8e51eb8f352743a75b41.html\" target=\"_blank\" rel=\"external\">http://hi.baidu.com/seesea8/blog/item/b96c8e51eb8f352743a75b41.html</a><br>另转：</p>\n<p>最近在逛CSDN论坛时经常会苦恼一个问题——有些网友贴上去的代码没有用规范的格式贴上去，我贴到VIM里常常会需要手动调整格式，非常麻烦。每当这个时候就异常怀念以前用VC6.0时的ALT+F8……想下VIM作为一个程序员们最贴心的编辑器，显然不会对此坐视不理。经过一番的Search，果然就找到了一些最常用的简单技巧，笔记一下以备后来不时之需。<br>VIM格式化代码：<br>格式化全文指令 gg=G<br>自动缩进当前行指令 ==<br>      格式化当前光标接下来的8行 8=<br>      格式化选定的行 v 选中需要格式化的代码段 =<br>      备注：<br>gg —— 到达文件最开始<br>= —— 要求缩进<br>G     —— 直到文件尾<br>注释代码：(这个原理上就是使用VIM的正则替换)<br>以C++和Python为例。<br>注释连续行：<br>指令格式 :起始行,终止行s/要替换的字符/替换为字符/g<br>如，<br>      C++源文件中注释掉10~20行，指令为：<br>:10,20s/^/////g<br>Python源文件中注释掉10~20行，指令为：<br>:10,20s/^/#/g<br>取消连续行注释：<br>指令格式同上。只是要替换字符与替换为字符要互换：<br>如，<br>      取消C++源文件中的10~20行的注释，指令为：<br>:10,20s/^//////g<br>取消Python源文件中的10~20行的注释，指令为：<br>:10,20s/^#//g</p>\n","excerpt":"","more":"<p>格式化全文： gg=G</p>\n<p>自动缩进当前行： ==</p>\n<p>这个是原文节选：</p>\n<p>14.6. How do I format/indent an entire file?</p>\n<p>You can format/indent an entire file using the gg=G command, where</p>\n<pre><code>gg - Goto the beginning of the file\n=   - apply indentation\nG   - till end of file\n</code></pre><p>For more information, read</p>\n<pre><code>:help gg\n:help =\n:help G\n:help &apos;formatprg&apos;\n:help C-indenting\n</code></pre><p> 原文地址 <a href=\"http://hi.baidu.com/seesea8/blog/item/b96c8e51eb8f352743a75b41.html\">http://hi.baidu.com/seesea8/blog/item/b96c8e51eb8f352743a75b41.html</a><br>另转：</p>\n<p>最近在逛CSDN论坛时经常会苦恼一个问题——有些网友贴上去的代码没有用规范的格式贴上去，我贴到VIM里常常会需要手动调整格式，非常麻烦。每当这个时候就异常怀念以前用VC6.0时的ALT+F8……想下VIM作为一个程序员们最贴心的编辑器，显然不会对此坐视不理。经过一番的Search，果然就找到了一些最常用的简单技巧，笔记一下以备后来不时之需。<br>VIM格式化代码：<br>格式化全文指令 gg=G<br>自动缩进当前行指令 ==<br>      格式化当前光标接下来的8行 8=<br>      格式化选定的行 v 选中需要格式化的代码段 =<br>      备注：<br>gg —— 到达文件最开始<br>= —— 要求缩进<br>G     —— 直到文件尾<br>注释代码：(这个原理上就是使用VIM的正则替换)<br>以C++和Python为例。<br>注释连续行：<br>指令格式 :起始行,终止行s/要替换的字符/替换为字符/g<br>如，<br>      C++源文件中注释掉10~20行，指令为：<br>:10,20s/^/////g<br>Python源文件中注释掉10~20行，指令为：<br>:10,20s/^/#/g<br>取消连续行注释：<br>指令格式同上。只是要替换字符与替换为字符要互换：<br>如，<br>      取消C++源文件中的10~20行的注释，指令为：<br>:10,20s/^//////g<br>取消Python源文件中的10~20行的注释，指令为：<br>:10,20s/^#//g</p>\n"},{"title":"django之温故知新1","date":"2015-11-07T01:58:02.000Z","_content":"\nPython基础\n=========\n- 注释 —— #\n\n- 变量和赋值\n\t- python 的变量类型是会不断变化的\n\t```\n\tIn [1]: a = \"str\"\n\t\n\tIn [2]: type(a)\n\tOut[2]: str\n\t\n\tIn [3]: a = 1\n\t\n\tIn [4]: type(a)\n\tOut[4]: int\n\t```","source":"_posts/2015/11/07/django之温故知新1.md","raw":"title: django之温故知新1\ndate: 2015-11-07 09:58:02\ncategories:\n- Django\n- 温故知新\ntags:\n- Django\n---\n\nPython基础\n=========\n- 注释 —— #\n\n- 变量和赋值\n\t- python 的变量类型是会不断变化的\n\t```\n\tIn [1]: a = \"str\"\n\t\n\tIn [2]: type(a)\n\tOut[2]: str\n\t\n\tIn [3]: a = 1\n\t\n\tIn [4]: type(a)\n\tOut[4]: int\n\t```","slug":"django之温故知新1","published":1,"updated":"2016-06-29T15:29:25.175Z","_id":"cik3sv4wk001k0s37depz56da","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"Python基础\"><a href=\"#Python基础\" class=\"headerlink\" title=\"Python基础\"></a>Python基础</h1><ul>\n<li><p>注释 —— #</p>\n</li>\n<li><p>变量和赋值</p>\n<ul>\n<li>python 的变量类型是会不断变化的<figure class=\"highlight ada\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">In</span> [<span class=\"number\">1</span>]: a = <span class=\"string\">\"str\"</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">In</span> [<span class=\"number\">2</span>]: <span class=\"keyword\">type</span>(a)</div><div class=\"line\"><span class=\"keyword\">Out</span>[<span class=\"number\">2</span>]: str</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">In</span> [<span class=\"number\">3</span>]: a = <span class=\"number\">1</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">In</span> [<span class=\"number\">4</span>]: <span class=\"keyword\">type</span>(a)</div><div class=\"line\"><span class=\"keyword\">Out</span>[<span class=\"number\">4</span>]: int</div></pre></td></tr></table></figure></li>\n</ul>\n</li>\n</ul>\n","excerpt":"","more":"<h1 id=\"Python基础\"><a href=\"#Python基础\" class=\"headerlink\" title=\"Python基础\"></a>Python基础</h1><ul>\n<li><p>注释 —— #</p>\n</li>\n<li><p>变量和赋值</p>\n<ul>\n<li>python 的变量类型是会不断变化的<figure class=\"highlight ada\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">In</span> [<span class=\"number\">1</span>]: a = <span class=\"string\">\"str\"</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">In</span> [<span class=\"number\">2</span>]: <span class=\"keyword\">type</span>(a)</div><div class=\"line\"><span class=\"keyword\">Out</span>[<span class=\"number\">2</span>]: str</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">In</span> [<span class=\"number\">3</span>]: a = <span class=\"number\">1</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">In</span> [<span class=\"number\">4</span>]: <span class=\"keyword\">type</span>(a)</div><div class=\"line\"><span class=\"keyword\">Out</span>[<span class=\"number\">4</span>]: int</div></pre></td></tr></table></figure></li>\n</ul>\n</li>\n</ul>\n"},{"title":"vim之使用","date":"2015-11-06T02:36:00.000Z","_content":"Vim安装\n=============\n```\nwget -qO- https://raw.github.com/ma6174/vim/master/setup.sh | sh\n```\n```\n#!/bin/bash\necho \"安装将花费一定时间，请耐心等待直到安装完成^_^\"\nif which apt-get >/dev/null; then\n\tsudo apt-get install -y vim vim-gnome ctags xclip astyle python-setuptools python-dev git\nelif which yum >/dev/null; then\n\tsudo yum install -y gcc vim git ctags xclip astyle python-setuptools python-devel\t\nfi\n\n##Add HomeBrew support on  Mac OS\nif which brew >/dev/null;then\n    echo \"You are using HomeBrew tool\"\n    brew install vim ctags git astyle\nfi\n\nsudo easy_install -ZU autopep8 \nsudo ln -s /usr/bin/ctags /usr/local/bin/ctags\nmv -f ~/vim ~/vim_old\ncd ~/ && git clone https://github.com/ma6174/vim.git\nmv -f ~/.vim ~/.vim_old\nmv -f ~/vim ~/.vim\nmv -f ~/.vimrc ~/.vimrc_old\nmv -f ~/.vim/.vimrc ~/\ngit clone https://github.com/gmarik/vundle.git ~/.vim/bundle/vundle\necho \"ma6174正在努力为您安装bundle程序\" > ma6174\necho \"安装完毕将自动退出\" >> ma6174\necho \"请耐心等待\" >> ma6174\nvim ma6174 -c \"BundleInstall\" -c \"q\" -c \"q\"\nrm ma6174\necho \"安装完成\"\n```\n\nVim 使用\n===============\n* :Tlist  #概略图  \n\t- 快捷开关键 <code style=\"color:green\">tl</code>\n* :%d     #清空缓存区\n\n* 格式化全文： gg=G\n\n* 自动缩进当前行： ==\n\n* 关键字搜索\n\t- 用/和？的区别\n\n\t\t/后跟查找的字符串。vim会显示文本中第一个出现的字符串。\n\n\t\t?后跟查找的字符串。vim会显示文本中最后一个出现的字符串。\n\t- 注意事项：\n\n\t\t不管用/还是？查找到第一个字符串后，按回车，vim会高亮所有的匹配文\n\t\t系统新氧ubuntu下默认的是incsearch模式，就是输完命令后，会自动显示第一个（或最后一个）匹配。\n\t\t如果输入：set noincsearch 会转到普通模式，不会自动显示第一个匹配，回车后显示所有匹配。\n\t\t高亮所有的匹配后，按<span style=\"color:red\">n键</span>转到下一个匹配，按N键转到上一个匹配。\n\n[vim 使用](https://github.com/qiwsir/vim/blob/master/tips.md)\n\n\n\n\n\nvim 使用tip\n--------------\n编写python程序\n\n自动插入头信息：\n```\n#!/usr/bin/env python\n# coding=utf-8\n```\n输入.或按TAB键会触发代码补全功能\n\n:w保存代码之后会自动检查代码错误与规范\n\n按F6可以按pep8格式对代码格式优化\n按F5可以一键执行代码\nF3: documents tree\n多窗口操作\n\n* 使用:sp + 文件名可以水平分割窗口\n* 使用:vs + 文件名可以垂直分割窗口\n* 使用Ctrl + w可以快速在窗口间切换\n\n编写markdown文件\n\n编写markdown文件(*.md)的时候，在normal模式下按 md 即可在当前目录下生成相应的html文件\n生成之后还是在normal模式按fi可以使用firefox打开相应的html文件预览\n当然也可以使用万能的F5键来一键转换并打开预览\n如果打开过程中屏幕出现一些混乱信息，可以按Ctrl + l来恢复\n快速注释\n\n按\\ 可以根据文件类型自动注释","source":"_posts/2015/11/06/vim之使用.md","raw":"title: vim之使用\ndate: 2015-11-06 10:36:00\ncategories:\n- Linux\ntags:\n- Linux\n- Vim\n---\nVim安装\n=============\n```\nwget -qO- https://raw.github.com/ma6174/vim/master/setup.sh | sh\n```\n```\n#!/bin/bash\necho \"安装将花费一定时间，请耐心等待直到安装完成^_^\"\nif which apt-get >/dev/null; then\n\tsudo apt-get install -y vim vim-gnome ctags xclip astyle python-setuptools python-dev git\nelif which yum >/dev/null; then\n\tsudo yum install -y gcc vim git ctags xclip astyle python-setuptools python-devel\t\nfi\n\n##Add HomeBrew support on  Mac OS\nif which brew >/dev/null;then\n    echo \"You are using HomeBrew tool\"\n    brew install vim ctags git astyle\nfi\n\nsudo easy_install -ZU autopep8 \nsudo ln -s /usr/bin/ctags /usr/local/bin/ctags\nmv -f ~/vim ~/vim_old\ncd ~/ && git clone https://github.com/ma6174/vim.git\nmv -f ~/.vim ~/.vim_old\nmv -f ~/vim ~/.vim\nmv -f ~/.vimrc ~/.vimrc_old\nmv -f ~/.vim/.vimrc ~/\ngit clone https://github.com/gmarik/vundle.git ~/.vim/bundle/vundle\necho \"ma6174正在努力为您安装bundle程序\" > ma6174\necho \"安装完毕将自动退出\" >> ma6174\necho \"请耐心等待\" >> ma6174\nvim ma6174 -c \"BundleInstall\" -c \"q\" -c \"q\"\nrm ma6174\necho \"安装完成\"\n```\n\nVim 使用\n===============\n* :Tlist  #概略图  \n\t- 快捷开关键 <code style=\"color:green\">tl</code>\n* :%d     #清空缓存区\n\n* 格式化全文： gg=G\n\n* 自动缩进当前行： ==\n\n* 关键字搜索\n\t- 用/和？的区别\n\n\t\t/后跟查找的字符串。vim会显示文本中第一个出现的字符串。\n\n\t\t?后跟查找的字符串。vim会显示文本中最后一个出现的字符串。\n\t- 注意事项：\n\n\t\t不管用/还是？查找到第一个字符串后，按回车，vim会高亮所有的匹配文\n\t\t系统新氧ubuntu下默认的是incsearch模式，就是输完命令后，会自动显示第一个（或最后一个）匹配。\n\t\t如果输入：set noincsearch 会转到普通模式，不会自动显示第一个匹配，回车后显示所有匹配。\n\t\t高亮所有的匹配后，按<span style=\"color:red\">n键</span>转到下一个匹配，按N键转到上一个匹配。\n\n[vim 使用](https://github.com/qiwsir/vim/blob/master/tips.md)\n\n\n\n\n\nvim 使用tip\n--------------\n编写python程序\n\n自动插入头信息：\n```\n#!/usr/bin/env python\n# coding=utf-8\n```\n输入.或按TAB键会触发代码补全功能\n\n:w保存代码之后会自动检查代码错误与规范\n\n按F6可以按pep8格式对代码格式优化\n按F5可以一键执行代码\nF3: documents tree\n多窗口操作\n\n* 使用:sp + 文件名可以水平分割窗口\n* 使用:vs + 文件名可以垂直分割窗口\n* 使用Ctrl + w可以快速在窗口间切换\n\n编写markdown文件\n\n编写markdown文件(*.md)的时候，在normal模式下按 md 即可在当前目录下生成相应的html文件\n生成之后还是在normal模式按fi可以使用firefox打开相应的html文件预览\n当然也可以使用万能的F5键来一键转换并打开预览\n如果打开过程中屏幕出现一些混乱信息，可以按Ctrl + l来恢复\n快速注释\n\n按\\ 可以根据文件类型自动注释","slug":"vim之使用","published":1,"updated":"2016-06-29T15:29:25.175Z","_id":"cik3sv4wx001p0s37iasxv0yv","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"Vim安装\"><a href=\"#Vim安装\" class=\"headerlink\" title=\"Vim安装\"></a>Vim安装</h1><figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">wget -qO- http<span class=\"variable\">s:</span>//raw.github.<span class=\"keyword\">com</span>/ma6174/<span class=\"keyword\">vim</span>/master/setup.<span class=\"keyword\">sh</span> | <span class=\"keyword\">sh</span></div></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">#!/bin/bash</span></div><div class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"安装将花费一定时间，请耐心等待直到安装完成^_^\"</span></div><div class=\"line\"><span class=\"keyword\">if</span> <span class=\"built_in\">which</span> apt-get &gt;/dev/null; <span class=\"keyword\">then</span></div><div class=\"line\">\tsudo apt-get install -y vim vim-gnome ctags xclip astyle python-setuptools python-dev git</div><div class=\"line\"><span class=\"keyword\">elif</span> <span class=\"built_in\">which</span> yum &gt;/dev/null; <span class=\"keyword\">then</span></div><div class=\"line\">\tsudo yum install -y gcc vim git ctags xclip astyle python-setuptools python-devel\t</div><div class=\"line\"><span class=\"keyword\">fi</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">##Add HomeBrew support on  Mac OS</span></div><div class=\"line\"><span class=\"keyword\">if</span> <span class=\"built_in\">which</span> brew &gt;/dev/null;<span class=\"keyword\">then</span></div><div class=\"line\">    <span class=\"built_in\">echo</span> <span class=\"string\">\"You are using HomeBrew tool\"</span></div><div class=\"line\">    brew install vim ctags git astyle</div><div class=\"line\"><span class=\"keyword\">fi</span></div><div class=\"line\"></div><div class=\"line\">sudo easy_install -ZU autopep8 </div><div class=\"line\">sudo ln <span class=\"_\">-s</span> /usr/bin/ctags /usr/<span class=\"built_in\">local</span>/bin/ctags</div><div class=\"line\">mv <span class=\"_\">-f</span> ~/vim ~/vim_old</div><div class=\"line\"><span class=\"built_in\">cd</span> ~/ &amp;&amp; git <span class=\"built_in\">clone</span> https://github.com/ma6174/vim.git</div><div class=\"line\">mv <span class=\"_\">-f</span> ~/.vim ~/.vim_old</div><div class=\"line\">mv <span class=\"_\">-f</span> ~/vim ~/.vim</div><div class=\"line\">mv <span class=\"_\">-f</span> ~/.vimrc ~/.vimrc_old</div><div class=\"line\">mv <span class=\"_\">-f</span> ~/.vim/.vimrc ~/</div><div class=\"line\">git <span class=\"built_in\">clone</span> https://github.com/gmarik/vundle.git ~/.vim/bundle/vundle</div><div class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"ma6174正在努力为您安装bundle程序\"</span> &gt; ma6174</div><div class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"安装完毕将自动退出\"</span> &gt;&gt; ma6174</div><div class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"请耐心等待\"</span> &gt;&gt; ma6174</div><div class=\"line\">vim ma6174 -c <span class=\"string\">\"BundleInstall\"</span> -c <span class=\"string\">\"q\"</span> -c <span class=\"string\">\"q\"</span></div><div class=\"line\">rm ma6174</div><div class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"安装完成\"</span></div></pre></td></tr></table></figure>\n<h1 id=\"Vim-使用\"><a href=\"#Vim-使用\" class=\"headerlink\" title=\"Vim 使用\"></a>Vim 使用</h1><ul>\n<li>:Tlist  #概略图  <ul>\n<li>快捷开关键 <code style=\"color:green\">tl</code></li>\n</ul>\n</li>\n<li><p>:%d     #清空缓存区</p>\n</li>\n<li><p>格式化全文： gg=G</p>\n</li>\n<li><p>自动缩进当前行： ==</p>\n</li>\n<li><p>关键字搜索</p>\n<ul>\n<li><p>用/和？的区别</p>\n<p>  /后跟查找的字符串。vim会显示文本中第一个出现的字符串。</p>\n<p>  ?后跟查找的字符串。vim会显示文本中最后一个出现的字符串。</p>\n</li>\n<li><p>注意事项：</p>\n<p>  不管用/还是？查找到第一个字符串后，按回车，vim会高亮所有的匹配文<br>  系统新氧ubuntu下默认的是incsearch模式，就是输完命令后，会自动显示第一个（或最后一个）匹配。<br>  如果输入：set noincsearch 会转到普通模式，不会自动显示第一个匹配，回车后显示所有匹配。<br>  高亮所有的匹配后，按<span style=\"color:red\">n键</span>转到下一个匹配，按N键转到上一个匹配。</p>\n</li>\n</ul>\n</li>\n</ul>\n<p><a href=\"https://github.com/qiwsir/vim/blob/master/tips.md\" target=\"_blank\" rel=\"external\">vim 使用</a></p>\n<h2 id=\"vim-使用tip\"><a href=\"#vim-使用tip\" class=\"headerlink\" title=\"vim 使用tip\"></a>vim 使用tip</h2><p>编写python程序</p>\n<p>自动插入头信息：<br><figure class=\"highlight d\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">#!/usr/bin/env python</span></div><div class=\"line\"># coding=utf-<span class=\"number\">8</span></div></pre></td></tr></table></figure></p>\n<p>输入.或按TAB键会触发代码补全功能</p>\n<p>:w保存代码之后会自动检查代码错误与规范</p>\n<p>按F6可以按pep8格式对代码格式优化<br>按F5可以一键执行代码<br>F3: documents tree<br>多窗口操作</p>\n<ul>\n<li>使用:sp + 文件名可以水平分割窗口</li>\n<li>使用:vs + 文件名可以垂直分割窗口</li>\n<li>使用Ctrl + w可以快速在窗口间切换</li>\n</ul>\n<p>编写markdown文件</p>\n<p>编写markdown文件(*.md)的时候，在normal模式下按 md 即可在当前目录下生成相应的html文件<br>生成之后还是在normal模式按fi可以使用firefox打开相应的html文件预览<br>当然也可以使用万能的F5键来一键转换并打开预览<br>如果打开过程中屏幕出现一些混乱信息，可以按Ctrl + l来恢复<br>快速注释</p>\n<p>按\\ 可以根据文件类型自动注释</p>\n","excerpt":"","more":"<h1 id=\"Vim安装\"><a href=\"#Vim安装\" class=\"headerlink\" title=\"Vim安装\"></a>Vim安装</h1><figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">wget -qO- http<span class=\"variable\">s:</span>//raw.github.<span class=\"keyword\">com</span>/ma6174/<span class=\"keyword\">vim</span>/master/setup.<span class=\"keyword\">sh</span> | <span class=\"keyword\">sh</span></div></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">#!/bin/bash</span></div><div class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"安装将花费一定时间，请耐心等待直到安装完成^_^\"</span></div><div class=\"line\"><span class=\"keyword\">if</span> <span class=\"built_in\">which</span> apt-get &gt;/dev/null; <span class=\"keyword\">then</span></div><div class=\"line\">\tsudo apt-get install -y vim vim-gnome ctags xclip astyle python-setuptools python-dev git</div><div class=\"line\"><span class=\"keyword\">elif</span> <span class=\"built_in\">which</span> yum &gt;/dev/null; <span class=\"keyword\">then</span></div><div class=\"line\">\tsudo yum install -y gcc vim git ctags xclip astyle python-setuptools python-devel\t</div><div class=\"line\"><span class=\"keyword\">fi</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">##Add HomeBrew support on  Mac OS</span></div><div class=\"line\"><span class=\"keyword\">if</span> <span class=\"built_in\">which</span> brew &gt;/dev/null;<span class=\"keyword\">then</span></div><div class=\"line\">    <span class=\"built_in\">echo</span> <span class=\"string\">\"You are using HomeBrew tool\"</span></div><div class=\"line\">    brew install vim ctags git astyle</div><div class=\"line\"><span class=\"keyword\">fi</span></div><div class=\"line\"></div><div class=\"line\">sudo easy_install -ZU autopep8 </div><div class=\"line\">sudo ln <span class=\"_\">-s</span> /usr/bin/ctags /usr/<span class=\"built_in\">local</span>/bin/ctags</div><div class=\"line\">mv <span class=\"_\">-f</span> ~/vim ~/vim_old</div><div class=\"line\"><span class=\"built_in\">cd</span> ~/ &amp;&amp; git <span class=\"built_in\">clone</span> https://github.com/ma6174/vim.git</div><div class=\"line\">mv <span class=\"_\">-f</span> ~/.vim ~/.vim_old</div><div class=\"line\">mv <span class=\"_\">-f</span> ~/vim ~/.vim</div><div class=\"line\">mv <span class=\"_\">-f</span> ~/.vimrc ~/.vimrc_old</div><div class=\"line\">mv <span class=\"_\">-f</span> ~/.vim/.vimrc ~/</div><div class=\"line\">git <span class=\"built_in\">clone</span> https://github.com/gmarik/vundle.git ~/.vim/bundle/vundle</div><div class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"ma6174正在努力为您安装bundle程序\"</span> &gt; ma6174</div><div class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"安装完毕将自动退出\"</span> &gt;&gt; ma6174</div><div class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"请耐心等待\"</span> &gt;&gt; ma6174</div><div class=\"line\">vim ma6174 -c <span class=\"string\">\"BundleInstall\"</span> -c <span class=\"string\">\"q\"</span> -c <span class=\"string\">\"q\"</span></div><div class=\"line\">rm ma6174</div><div class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"安装完成\"</span></div></pre></td></tr></table></figure>\n<h1 id=\"Vim-使用\"><a href=\"#Vim-使用\" class=\"headerlink\" title=\"Vim 使用\"></a>Vim 使用</h1><ul>\n<li>:Tlist  #概略图  <ul>\n<li>快捷开关键 <code style=\"color:green\">tl</code></li>\n</ul>\n</li>\n<li><p>:%d     #清空缓存区</p>\n</li>\n<li><p>格式化全文： gg=G</p>\n</li>\n<li><p>自动缩进当前行： ==</p>\n</li>\n<li><p>关键字搜索</p>\n<ul>\n<li><p>用/和？的区别</p>\n<p>  /后跟查找的字符串。vim会显示文本中第一个出现的字符串。</p>\n<p>  ?后跟查找的字符串。vim会显示文本中最后一个出现的字符串。</p>\n</li>\n<li><p>注意事项：</p>\n<p>  不管用/还是？查找到第一个字符串后，按回车，vim会高亮所有的匹配文<br>  系统新氧ubuntu下默认的是incsearch模式，就是输完命令后，会自动显示第一个（或最后一个）匹配。<br>  如果输入：set noincsearch 会转到普通模式，不会自动显示第一个匹配，回车后显示所有匹配。<br>  高亮所有的匹配后，按<span style=\"color:red\">n键</span>转到下一个匹配，按N键转到上一个匹配。</p>\n</li>\n</ul>\n</li>\n</ul>\n<p><a href=\"https://github.com/qiwsir/vim/blob/master/tips.md\">vim 使用</a></p>\n<h2 id=\"vim-使用tip\"><a href=\"#vim-使用tip\" class=\"headerlink\" title=\"vim 使用tip\"></a>vim 使用tip</h2><p>编写python程序</p>\n<p>自动插入头信息：<br><figure class=\"highlight d\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">#!/usr/bin/env python</span></div><div class=\"line\"># coding=utf-<span class=\"number\">8</span></div></pre></td></tr></table></figure></p>\n<p>输入.或按TAB键会触发代码补全功能</p>\n<p>:w保存代码之后会自动检查代码错误与规范</p>\n<p>按F6可以按pep8格式对代码格式优化<br>按F5可以一键执行代码<br>F3: documents tree<br>多窗口操作</p>\n<ul>\n<li>使用:sp + 文件名可以水平分割窗口</li>\n<li>使用:vs + 文件名可以垂直分割窗口</li>\n<li>使用Ctrl + w可以快速在窗口间切换</li>\n</ul>\n<p>编写markdown文件</p>\n<p>编写markdown文件(*.md)的时候，在normal模式下按 md 即可在当前目录下生成相应的html文件<br>生成之后还是在normal模式按fi可以使用firefox打开相应的html文件预览<br>当然也可以使用万能的F5键来一键转换并打开预览<br>如果打开过程中屏幕出现一些混乱信息，可以按Ctrl + l来恢复<br>快速注释</p>\n<p>按\\ 可以根据文件类型自动注释</p>\n"},{"title":"Linux下释放内存的方法(转载)","date":"2015-11-06T05:41:15.000Z","_content":"\n释放缓存原因\n================\n- 有些单位自动检测内存，当内存使用率在90%以上时，会报警；\n- 当内存被缓存占满时，当处理一些新信息时就会使用Swap，影响性能。\n \nLinux的缓存机制：Linux会针对dentry（用于VFS，加速文件路径名到inode的转换）、Buffer Cache（针对磁盘块的读写）和Page Cache（针对文件inode的读写）进行缓存操作。\n \n操作步骤\n=================\n1. 查询当前内存使用情况和释放缓存的参数\n\t```\n\t#free -m\n\t#cat /proc/sys/vm/drop_caches\n\t```\n2. 使用sync命令，将系统缓存区中的脏数据写入磁盘中，包括已修改的i-node、已延迟的块I/O和读写映射文件。\n\t```\n\t#sync\n\t```\n3. 配置文件/proc/sys/vm/drop_caches中记录了缓存释放的参数，\n\t\n\t含义：默认0—不释放，1—释放pagecache，2—释放dentries和inodes，3—释放所有缓存\n\t```\n\t#sudo su\n\t#echo 3 > /proc/sys/vm/drop_caches //需要管理员权限\n\t```","source":"_posts/2015/11/06/linux之缓存.md","raw":"title: Linux下释放内存的方法(转载)\ndate: 2015-11-06 13:41:15\ncategories:\n- Linux\n- Ubuntu\ntags:\n- Linux\n---\n\n释放缓存原因\n================\n- 有些单位自动检测内存，当内存使用率在90%以上时，会报警；\n- 当内存被缓存占满时，当处理一些新信息时就会使用Swap，影响性能。\n \nLinux的缓存机制：Linux会针对dentry（用于VFS，加速文件路径名到inode的转换）、Buffer Cache（针对磁盘块的读写）和Page Cache（针对文件inode的读写）进行缓存操作。\n \n操作步骤\n=================\n1. 查询当前内存使用情况和释放缓存的参数\n\t```\n\t#free -m\n\t#cat /proc/sys/vm/drop_caches\n\t```\n2. 使用sync命令，将系统缓存区中的脏数据写入磁盘中，包括已修改的i-node、已延迟的块I/O和读写映射文件。\n\t```\n\t#sync\n\t```\n3. 配置文件/proc/sys/vm/drop_caches中记录了缓存释放的参数，\n\t\n\t含义：默认0—不释放，1—释放pagecache，2—释放dentries和inodes，3—释放所有缓存\n\t```\n\t#sudo su\n\t#echo 3 > /proc/sys/vm/drop_caches //需要管理员权限\n\t```","slug":"linux之缓存","published":1,"updated":"2016-06-29T15:29:25.175Z","_id":"cik3sv4xt001v0s37ixr8hqa4","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"释放缓存原因\"><a href=\"#释放缓存原因\" class=\"headerlink\" title=\"释放缓存原因\"></a>释放缓存原因</h1><ul>\n<li>有些单位自动检测内存，当内存使用率在90%以上时，会报警；</li>\n<li>当内存被缓存占满时，当处理一些新信息时就会使用Swap，影响性能。</li>\n</ul>\n<p>Linux的缓存机制：Linux会针对dentry（用于VFS，加速文件路径名到inode的转换）、Buffer Cache（针对磁盘块的读写）和Page Cache（针对文件inode的读写）进行缓存操作。</p>\n<h1 id=\"操作步骤\"><a href=\"#操作步骤\" class=\"headerlink\" title=\"操作步骤\"></a>操作步骤</h1><ol>\n<li><p>查询当前内存使用情况和释放缓存的参数</p>\n <figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-id\">#free</span> -m</div><div class=\"line\"><span class=\"selector-id\">#cat</span> /proc/sys/vm/drop_caches</div></pre></td></tr></table></figure>\n</li>\n<li><p>使用sync命令，将系统缓存区中的脏数据写入磁盘中，包括已修改的i-node、已延迟的块I/O和读写映射文件。</p>\n <figure class=\"highlight vala\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">#sync</span></div></pre></td></tr></table></figure>\n</li>\n<li><p>配置文件/proc/sys/vm/drop_caches中记录了缓存释放的参数，</p>\n<p> 含义：默认0—不释放，1—释放pagecache，2—释放dentries和inodes，3—释放所有缓存</p>\n <figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-id\">#sudo</span> su</div><div class=\"line\"><span class=\"selector-id\">#echo</span> <span class=\"number\">3</span> &gt; /proc/sys/vm/drop_caches <span class=\"comment\">//需要管理员权限</span></div></pre></td></tr></table></figure></li>\n</ol>\n","excerpt":"","more":"<h1 id=\"释放缓存原因\"><a href=\"#释放缓存原因\" class=\"headerlink\" title=\"释放缓存原因\"></a>释放缓存原因</h1><ul>\n<li>有些单位自动检测内存，当内存使用率在90%以上时，会报警；</li>\n<li>当内存被缓存占满时，当处理一些新信息时就会使用Swap，影响性能。</li>\n</ul>\n<p>Linux的缓存机制：Linux会针对dentry（用于VFS，加速文件路径名到inode的转换）、Buffer Cache（针对磁盘块的读写）和Page Cache（针对文件inode的读写）进行缓存操作。</p>\n<h1 id=\"操作步骤\"><a href=\"#操作步骤\" class=\"headerlink\" title=\"操作步骤\"></a>操作步骤</h1><ol>\n<li><p>查询当前内存使用情况和释放缓存的参数</p>\n <figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-id\">#free</span> -m</div><div class=\"line\"><span class=\"selector-id\">#cat</span> /proc/sys/vm/drop_caches</div></pre></td></tr></table></figure>\n</li>\n<li><p>使用sync命令，将系统缓存区中的脏数据写入磁盘中，包括已修改的i-node、已延迟的块I/O和读写映射文件。</p>\n <figure class=\"highlight vala\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">#sync</span></div></pre></td></tr></table></figure>\n</li>\n<li><p>配置文件/proc/sys/vm/drop_caches中记录了缓存释放的参数，</p>\n<p> 含义：默认0—不释放，1—释放pagecache，2—释放dentries和inodes，3—释放所有缓存</p>\n <figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-id\">#sudo</span> su</div><div class=\"line\"><span class=\"selector-id\">#echo</span> <span class=\"number\">3</span> &gt; /proc/sys/vm/drop_caches <span class=\"comment\">//需要管理员权限</span></div></pre></td></tr></table></figure></li>\n</ol>\n"},{"title":"django之related_name(转载)","date":"2015-11-06T09:54:18.000Z","_content":"[转载地址](http://www.tuicool.com/articles/IZruEfQ)\n\n提供了三种最为通用的数据库关系模型\n\n1. mang-to- many(对对多关系)\n2. many-to- one(多对一关系)\n3. one-to-one(一对一关系)\n\n一、多对一关系：\n=========\n用 ForeignKey 来定义多对一的关系。用法和其他的 Field 是一样的,把它放到模型中类的属性定义中就行了。ForeignKey 需要一个与之相关联的类作为\n位置参数。在这里我用django book中的一个比较经典的实例来和大家一起分享一下：首先，定义了三个模型分别为：Publisher(出版商),Author(作者)和Book(书)\n```\nclass Publisher(models.Model):\n    name = models.CharField(max_length=30)\n    address = models.CharField(max_length=50)\n    city = models.CharField(max_length=60)\n    state_province = models.CharField(max_length=30)\n    country = models.CharField(max_length=50)\n    website = models.URLField()\n\n    def __unicode__(self):\n        return self.name\n\n\nclass Meta:\n    ordering = ['name']\n\n\nclass Author(models.Model):\n    first_name = models.CharField(max_length=30)\n    last_name = models.CharField(max_length=40)\n    email = models.EmailField(blank=True)\n\n    def __unicode__(self):\n        return u'%s %s' % (self.first_name, self.last_name)\n\n\nclass Book(models.Model):\n    title = models.CharField(max_length=100)\n    authors = models.ManyToManyField(Author)\n    publisher = models.ForeignKey(Publisher, related_name=\"publisher_set\")\n    publication_date = models.DateField(blank=True, verbose_name='e-mail')\n    num_pages = models.IntegerField(blank=True, null=True)\n    # objects = BookManager()\n    objects = models.Manager()  # The default manager.\n    dahl_objects = DahlBookManager()  # The Dahl-specific manager\n\n    # .\n    def __unicode__(self):\n        return self.title\n```\n\n\n\n要建立一个递归的关系，即一个对象和自身的多对一关系，你可以这样写：\n```\nmodels.ForeignKey('self') :\n\n1 class Employee(models.Model): 2 manager = models.ForeignKey( ' self ' )\n```\n\n如果你创建关系时,所需的模型还没有被定义,你可以不使用模型对象本身,而是使用那个模型的名字。\n\n```\nclass Car(models.Model):\n    manufacturer = models.ForeignKey('Manufacturer')\n    ...\n\nclass Manufacturer(models.Model):\n```\n但是,你要记住,只能对在同一个 models.py 文件中的模型使用字符串引用,对于其他应用程序中的模型或者从其他地方导入\n\n的模型是不能使用名字对其做引用的。\n\nDjango在数据库中使用的列名称是对应的字段的名称后追加 _id 得到的字符串。再前面的那个例子中, Car 模型对应的数据库\n\n表中会有一个名字是 manufacturer_id 的列,(你可以通过指定 db_column 来显式改变这个名字,参见前面\n\n的db_column一节)但是,如果你不需要写定制的SQL语句的话,你永远不要去处理数据库列名,只需要处理你的模型对象中的\n\n字段名称。\n\n在这里有几个概念要讲清楚，当初我就是载在这上面的，希望有同感的朋友可以看到， ForeignKey选项\n\n\n1. edit_inline：\n\n\t如果不设为 False 的话,它对应的对象就可以在页面上内联编辑,就是说这个对象有自 己独立的\n\t\n\t管理界面。如果设为 models.TABULAR 或者 models.STACKED 的话,这个内 联编辑对象分别显\n\t\n\t示成一个表格或者一些字段的集合。\n\n2. limit_choices_to：\n\n\t可以限定对象的值的范围的一个参数和值的字典。结合Python的 datetime 模块的\n\t\n\t函数可以根据日期来限定对象。例如,下面的代码: \n\tlimit_choices_to = {'pub_date__lte': datetime.now} \n\t把可选对象限定到 pub_date 早于当前时间的对象中。 \n\t除字典外,这里也可以是一个可以执行更复杂的查询的 Q 对象 \n\t这个选项和 edit_inline 是不兼容的。\n\t\n3. max_num_in_admin\n\t于内联编辑对象,这个是要在管理界面里显示的相关对象的最多个数。所以,如果披萨最多 只会\n\t\n\t有10种配料, max_num_in_admin=10 会保证用户最多输入10种配料。\n\t\n\t记住,本项并不保证不会创建10种以上的配料,他只是控制管理界面,而不是在Python的API 层和\n\t\n\t数据库层做什么限制。\n\n4. min_num_in_admin\n\t\n\t在管理界面中要显示的相关的对象的最少个数。通常,在创建的时候,显示的内联对象的个数 为\n\t\n\tnum_in_admin 个,在编辑的时候,在当前的基础上又会多显示 num_extra_on_change 个空对\n\t\n\t象,但是显示的对象个数不会少于 min_num_in_admin 个。\n\n5. num_extra_on_change\n\n\t修改对象时要额外显示的对象数目。\n\n6. num_in_admin\n\n\t添加对象时要显示的内联对象的默认个数。\n\n7. raw_id_admin\n\n\t为要键入的整数显示一个文本框,而不是一个下拉列表。在关联对象有很多行时,这个比显示 一个\n\t\n\t列表选择框更实用。\n\t\n\t使用 edit_inline 时,本项无效。\n\n8. related_name\n\n\t关联对象反向引用描述符。\n\n9. to_field\n\n\t关联对象的用于关联的字段,Django默认使用关联对象的主键。\n\t\n\t要学习ForeignKey并了解深刻的话，可以先对以上ForeignKey的这些选项有一定的了解。这样可以加深你对ForeignKey的印象。\n\t\n\t万事俱备，现在，假如你想通过Book这张表去访问Publisher和Author都是可以直接访问的，因为Book这张表中有外键和这两张\n\t\n\t表关联，因此可以直接通过语句去访问Book和Publisher表。\n\n\t```\n\tdef get_info(request, id):\n\t    books = Book.objects.filter(publisher__id=id).all()\n\t    return render_to_response(\"showdb_info.html\", {\n\t        \"books\": books}, context_instance=RequestContext(request))\n\t```\n\t这一步相信大家都是知道的，即使不知道，等你看了笔者的这篇博客之后肯定也会一目了然的。但是，假如反过来该怎么去查询呢？\n\t\n\t（通过Publisher或者Author表查询Book表中的内容）在这里就要用到一个相当重要的 ForeignKey 选项，通过该选项你可以随便访问Books\n\t\n\t中的任意字段。\n\t```\n\tdef get_book_info(request, id):\n\t    publisher = Publisher.objects.filter(publisher_set__id = id)\n\t    return render_to_response(\"showdb_info.html\",{\n\t        \"publisher\": publisher,\n\t    },\n\t     context_instance=RequestContext(request))\n\t```","source":"_posts/2015/11/06/django之related-name.md","raw":"title: django之related_name(转载)\ndate: 2015-11-06 17:54:18\ncategories:\n- Django\n- 转载\ntags:\n- Django\n---\n[转载地址](http://www.tuicool.com/articles/IZruEfQ)\n\n提供了三种最为通用的数据库关系模型\n\n1. mang-to- many(对对多关系)\n2. many-to- one(多对一关系)\n3. one-to-one(一对一关系)\n\n一、多对一关系：\n=========\n用 ForeignKey 来定义多对一的关系。用法和其他的 Field 是一样的,把它放到模型中类的属性定义中就行了。ForeignKey 需要一个与之相关联的类作为\n位置参数。在这里我用django book中的一个比较经典的实例来和大家一起分享一下：首先，定义了三个模型分别为：Publisher(出版商),Author(作者)和Book(书)\n```\nclass Publisher(models.Model):\n    name = models.CharField(max_length=30)\n    address = models.CharField(max_length=50)\n    city = models.CharField(max_length=60)\n    state_province = models.CharField(max_length=30)\n    country = models.CharField(max_length=50)\n    website = models.URLField()\n\n    def __unicode__(self):\n        return self.name\n\n\nclass Meta:\n    ordering = ['name']\n\n\nclass Author(models.Model):\n    first_name = models.CharField(max_length=30)\n    last_name = models.CharField(max_length=40)\n    email = models.EmailField(blank=True)\n\n    def __unicode__(self):\n        return u'%s %s' % (self.first_name, self.last_name)\n\n\nclass Book(models.Model):\n    title = models.CharField(max_length=100)\n    authors = models.ManyToManyField(Author)\n    publisher = models.ForeignKey(Publisher, related_name=\"publisher_set\")\n    publication_date = models.DateField(blank=True, verbose_name='e-mail')\n    num_pages = models.IntegerField(blank=True, null=True)\n    # objects = BookManager()\n    objects = models.Manager()  # The default manager.\n    dahl_objects = DahlBookManager()  # The Dahl-specific manager\n\n    # .\n    def __unicode__(self):\n        return self.title\n```\n\n\n\n要建立一个递归的关系，即一个对象和自身的多对一关系，你可以这样写：\n```\nmodels.ForeignKey('self') :\n\n1 class Employee(models.Model): 2 manager = models.ForeignKey( ' self ' )\n```\n\n如果你创建关系时,所需的模型还没有被定义,你可以不使用模型对象本身,而是使用那个模型的名字。\n\n```\nclass Car(models.Model):\n    manufacturer = models.ForeignKey('Manufacturer')\n    ...\n\nclass Manufacturer(models.Model):\n```\n但是,你要记住,只能对在同一个 models.py 文件中的模型使用字符串引用,对于其他应用程序中的模型或者从其他地方导入\n\n的模型是不能使用名字对其做引用的。\n\nDjango在数据库中使用的列名称是对应的字段的名称后追加 _id 得到的字符串。再前面的那个例子中, Car 模型对应的数据库\n\n表中会有一个名字是 manufacturer_id 的列,(你可以通过指定 db_column 来显式改变这个名字,参见前面\n\n的db_column一节)但是,如果你不需要写定制的SQL语句的话,你永远不要去处理数据库列名,只需要处理你的模型对象中的\n\n字段名称。\n\n在这里有几个概念要讲清楚，当初我就是载在这上面的，希望有同感的朋友可以看到， ForeignKey选项\n\n\n1. edit_inline：\n\n\t如果不设为 False 的话,它对应的对象就可以在页面上内联编辑,就是说这个对象有自 己独立的\n\t\n\t管理界面。如果设为 models.TABULAR 或者 models.STACKED 的话,这个内 联编辑对象分别显\n\t\n\t示成一个表格或者一些字段的集合。\n\n2. limit_choices_to：\n\n\t可以限定对象的值的范围的一个参数和值的字典。结合Python的 datetime 模块的\n\t\n\t函数可以根据日期来限定对象。例如,下面的代码: \n\tlimit_choices_to = {'pub_date__lte': datetime.now} \n\t把可选对象限定到 pub_date 早于当前时间的对象中。 \n\t除字典外,这里也可以是一个可以执行更复杂的查询的 Q 对象 \n\t这个选项和 edit_inline 是不兼容的。\n\t\n3. max_num_in_admin\n\t于内联编辑对象,这个是要在管理界面里显示的相关对象的最多个数。所以,如果披萨最多 只会\n\t\n\t有10种配料, max_num_in_admin=10 会保证用户最多输入10种配料。\n\t\n\t记住,本项并不保证不会创建10种以上的配料,他只是控制管理界面,而不是在Python的API 层和\n\t\n\t数据库层做什么限制。\n\n4. min_num_in_admin\n\t\n\t在管理界面中要显示的相关的对象的最少个数。通常,在创建的时候,显示的内联对象的个数 为\n\t\n\tnum_in_admin 个,在编辑的时候,在当前的基础上又会多显示 num_extra_on_change 个空对\n\t\n\t象,但是显示的对象个数不会少于 min_num_in_admin 个。\n\n5. num_extra_on_change\n\n\t修改对象时要额外显示的对象数目。\n\n6. num_in_admin\n\n\t添加对象时要显示的内联对象的默认个数。\n\n7. raw_id_admin\n\n\t为要键入的整数显示一个文本框,而不是一个下拉列表。在关联对象有很多行时,这个比显示 一个\n\t\n\t列表选择框更实用。\n\t\n\t使用 edit_inline 时,本项无效。\n\n8. related_name\n\n\t关联对象反向引用描述符。\n\n9. to_field\n\n\t关联对象的用于关联的字段,Django默认使用关联对象的主键。\n\t\n\t要学习ForeignKey并了解深刻的话，可以先对以上ForeignKey的这些选项有一定的了解。这样可以加深你对ForeignKey的印象。\n\t\n\t万事俱备，现在，假如你想通过Book这张表去访问Publisher和Author都是可以直接访问的，因为Book这张表中有外键和这两张\n\t\n\t表关联，因此可以直接通过语句去访问Book和Publisher表。\n\n\t```\n\tdef get_info(request, id):\n\t    books = Book.objects.filter(publisher__id=id).all()\n\t    return render_to_response(\"showdb_info.html\", {\n\t        \"books\": books}, context_instance=RequestContext(request))\n\t```\n\t这一步相信大家都是知道的，即使不知道，等你看了笔者的这篇博客之后肯定也会一目了然的。但是，假如反过来该怎么去查询呢？\n\t\n\t（通过Publisher或者Author表查询Book表中的内容）在这里就要用到一个相当重要的 ForeignKey 选项，通过该选项你可以随便访问Books\n\t\n\t中的任意字段。\n\t```\n\tdef get_book_info(request, id):\n\t    publisher = Publisher.objects.filter(publisher_set__id = id)\n\t    return render_to_response(\"showdb_info.html\",{\n\t        \"publisher\": publisher,\n\t    },\n\t     context_instance=RequestContext(request))\n\t```","slug":"django之related-name","published":1,"updated":"2016-06-29T15:29:25.175Z","_id":"cik3sv4xy00200s37by30vxsi","comments":1,"layout":"post","photos":[],"link":"","content":"<p><a href=\"http://www.tuicool.com/articles/IZruEfQ\" target=\"_blank\" rel=\"external\">转载地址</a></p>\n<p>提供了三种最为通用的数据库关系模型</p>\n<ol>\n<li>mang-to- many(对对多关系)</li>\n<li>many-to- one(多对一关系)</li>\n<li>one-to-one(一对一关系)</li>\n</ol>\n<h1 id=\"一、多对一关系：\"><a href=\"#一、多对一关系：\" class=\"headerlink\" title=\"一、多对一关系：\"></a>一、多对一关系：</h1><p>用 ForeignKey 来定义多对一的关系。用法和其他的 Field 是一样的,把它放到模型中类的属性定义中就行了。ForeignKey 需要一个与之相关联的类作为<br>位置参数。在这里我用django book中的一个比较经典的实例来和大家一起分享一下：首先，定义了三个模型分别为：Publisher(出版商),Author(作者)和Book(书)<br><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Publisher</span><span class=\"params\">(models.Model)</span>:</span></div><div class=\"line\">    name = models.CharField(max_length=<span class=\"number\">30</span>)</div><div class=\"line\">    address = models.CharField(max_length=<span class=\"number\">50</span>)</div><div class=\"line\">    city = models.CharField(max_length=<span class=\"number\">60</span>)</div><div class=\"line\">    state_province = models.CharField(max_length=<span class=\"number\">30</span>)</div><div class=\"line\">    country = models.CharField(max_length=<span class=\"number\">50</span>)</div><div class=\"line\">    website = models.URLField()</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__unicode__</span><span class=\"params\">(self)</span>:</span></div><div class=\"line\">        <span class=\"keyword\">return</span> self.name</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Meta</span>:</span></div><div class=\"line\">    ordering = [<span class=\"string\">'name'</span>]</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Author</span><span class=\"params\">(models.Model)</span>:</span></div><div class=\"line\">    first_name = models.CharField(max_length=<span class=\"number\">30</span>)</div><div class=\"line\">    last_name = models.CharField(max_length=<span class=\"number\">40</span>)</div><div class=\"line\">    email = models.EmailField(blank=<span class=\"keyword\">True</span>)</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__unicode__</span><span class=\"params\">(self)</span>:</span></div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">u'%s %s'</span> % (self.first_name, self.last_name)</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Book</span><span class=\"params\">(models.Model)</span>:</span></div><div class=\"line\">    title = models.CharField(max_length=<span class=\"number\">100</span>)</div><div class=\"line\">    authors = models.ManyToManyField(Author)</div><div class=\"line\">    publisher = models.ForeignKey(Publisher, related_name=<span class=\"string\">\"publisher_set\"</span>)</div><div class=\"line\">    publication_date = models.DateField(blank=<span class=\"keyword\">True</span>, verbose_name=<span class=\"string\">'e-mail'</span>)</div><div class=\"line\">    num_pages = models.IntegerField(blank=<span class=\"keyword\">True</span>, null=<span class=\"keyword\">True</span>)</div><div class=\"line\">    <span class=\"comment\"># objects = BookManager()</span></div><div class=\"line\">    objects = models.Manager()  <span class=\"comment\"># The default manager.</span></div><div class=\"line\">    dahl_objects = DahlBookManager()  <span class=\"comment\"># The Dahl-specific manager</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\"># .</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__unicode__</span><span class=\"params\">(self)</span>:</span></div><div class=\"line\">        <span class=\"keyword\">return</span> self.title</div></pre></td></tr></table></figure></p>\n<p>要建立一个递归的关系，即一个对象和自身的多对一关系，你可以这样写：<br><figure class=\"highlight gams\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">models</span>.ForeignKey(<span class=\"string\">'self'</span>) :</div><div class=\"line\"></div><div class=\"line\"><span class=\"number\">1</span> class Employee(<span class=\"keyword\">models</span>.<span class=\"keyword\">Model</span>): <span class=\"number\">2</span> manager = <span class=\"keyword\">models</span>.ForeignKey( <span class=\"string\">' self '</span> )</div></pre></td></tr></table></figure></p>\n<p>如果你创建关系时,所需的模型还没有被定义,你可以不使用模型对象本身,而是使用那个模型的名字。</p>\n<figure class=\"highlight haskell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"type\">Car</span>(<span class=\"title\">models</span>.<span class=\"type\">Model</span>):</span></div><div class=\"line\">    manufacturer = models.<span class=\"type\">ForeignKey</span>('<span class=\"type\">Manufacturer</span>')</div><div class=\"line\">    ...</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">class</span> <span class=\"type\">Manufacturer</span>(<span class=\"title\">models</span>.<span class=\"type\">Model</span>):</div></pre></td></tr></table></figure>\n<p>但是,你要记住,只能对在同一个 models.py 文件中的模型使用字符串引用,对于其他应用程序中的模型或者从其他地方导入</p>\n<p>的模型是不能使用名字对其做引用的。</p>\n<p>Django在数据库中使用的列名称是对应的字段的名称后追加 _id 得到的字符串。再前面的那个例子中, Car 模型对应的数据库</p>\n<p>表中会有一个名字是 manufacturer_id 的列,(你可以通过指定 db_column 来显式改变这个名字,参见前面</p>\n<p>的db_column一节)但是,如果你不需要写定制的SQL语句的话,你永远不要去处理数据库列名,只需要处理你的模型对象中的</p>\n<p>字段名称。</p>\n<p>在这里有几个概念要讲清楚，当初我就是载在这上面的，希望有同感的朋友可以看到， ForeignKey选项</p>\n<ol>\n<li><p>edit_inline：</p>\n<p> 如果不设为 False 的话,它对应的对象就可以在页面上内联编辑,就是说这个对象有自 己独立的</p>\n<p> 管理界面。如果设为 models.TABULAR 或者 models.STACKED 的话,这个内 联编辑对象分别显</p>\n<p> 示成一个表格或者一些字段的集合。</p>\n</li>\n<li><p>limit_choices_to：</p>\n<p> 可以限定对象的值的范围的一个参数和值的字典。结合Python的 datetime 模块的</p>\n<p> 函数可以根据日期来限定对象。例如,下面的代码:<br> limit_choices_to = {‘pub_date__lte’: datetime.now}<br> 把可选对象限定到 pub_date 早于当前时间的对象中。<br> 除字典外,这里也可以是一个可以执行更复杂的查询的 Q 对象<br> 这个选项和 edit_inline 是不兼容的。</p>\n</li>\n<li><p>max_num_in_admin<br> 于内联编辑对象,这个是要在管理界面里显示的相关对象的最多个数。所以,如果披萨最多 只会</p>\n<p> 有10种配料, max_num_in_admin=10 会保证用户最多输入10种配料。</p>\n<p> 记住,本项并不保证不会创建10种以上的配料,他只是控制管理界面,而不是在Python的API 层和</p>\n<p> 数据库层做什么限制。</p>\n</li>\n<li><p>min_num_in_admin</p>\n<p> 在管理界面中要显示的相关的对象的最少个数。通常,在创建的时候,显示的内联对象的个数 为</p>\n<p> num_in_admin 个,在编辑的时候,在当前的基础上又会多显示 num_extra_on_change 个空对</p>\n<p> 象,但是显示的对象个数不会少于 min_num_in_admin 个。</p>\n</li>\n<li><p>num_extra_on_change</p>\n<p> 修改对象时要额外显示的对象数目。</p>\n</li>\n<li><p>num_in_admin</p>\n<p> 添加对象时要显示的内联对象的默认个数。</p>\n</li>\n<li><p>raw_id_admin</p>\n<p> 为要键入的整数显示一个文本框,而不是一个下拉列表。在关联对象有很多行时,这个比显示 一个</p>\n<p> 列表选择框更实用。</p>\n<p> 使用 edit_inline 时,本项无效。</p>\n</li>\n<li><p>related_name</p>\n<p> 关联对象反向引用描述符。</p>\n</li>\n<li><p>to_field</p>\n<p> 关联对象的用于关联的字段,Django默认使用关联对象的主键。</p>\n<p> 要学习ForeignKey并了解深刻的话，可以先对以上ForeignKey的这些选项有一定的了解。这样可以加深你对ForeignKey的印象。</p>\n<p> 万事俱备，现在，假如你想通过Book这张表去访问Publisher和Author都是可以直接访问的，因为Book这张表中有外键和这两张</p>\n<p> 表关联，因此可以直接通过语句去访问Book和Publisher表。</p>\n <figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">get_info</span><span class=\"params\">(request, id)</span>:</span></div><div class=\"line\">    books = Book.objects.filter(publisher__id=id).all()</div><div class=\"line\">    <span class=\"keyword\">return</span> render_to_response(<span class=\"string\">\"showdb_info.html\"</span>, &#123;</div><div class=\"line\">        <span class=\"string\">\"books\"</span>: books&#125;, context_instance=RequestContext(request))</div></pre></td></tr></table></figure>\n<p> 这一步相信大家都是知道的，即使不知道，等你看了笔者的这篇博客之后肯定也会一目了然的。但是，假如反过来该怎么去查询呢？</p>\n<p> （通过Publisher或者Author表查询Book表中的内容）在这里就要用到一个相当重要的 ForeignKey 选项，通过该选项你可以随便访问Books</p>\n<p> 中的任意字段。</p>\n <figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">get_book_info</span><span class=\"params\">(request, id)</span>:</span></div><div class=\"line\">    publisher = Publisher.objects.filter(publisher_set__id = id)</div><div class=\"line\">    <span class=\"keyword\">return</span> render_to_response(<span class=\"string\">\"showdb_info.html\"</span>,&#123;</div><div class=\"line\">        <span class=\"string\">\"publisher\"</span>: publisher,</div><div class=\"line\">    &#125;,</div><div class=\"line\">     context_instance=RequestContext(request))</div></pre></td></tr></table></figure></li>\n</ol>\n","excerpt":"","more":"<p><a href=\"http://www.tuicool.com/articles/IZruEfQ\">转载地址</a></p>\n<p>提供了三种最为通用的数据库关系模型</p>\n<ol>\n<li>mang-to- many(对对多关系)</li>\n<li>many-to- one(多对一关系)</li>\n<li>one-to-one(一对一关系)</li>\n</ol>\n<h1 id=\"一、多对一关系：\"><a href=\"#一、多对一关系：\" class=\"headerlink\" title=\"一、多对一关系：\"></a>一、多对一关系：</h1><p>用 ForeignKey 来定义多对一的关系。用法和其他的 Field 是一样的,把它放到模型中类的属性定义中就行了。ForeignKey 需要一个与之相关联的类作为<br>位置参数。在这里我用django book中的一个比较经典的实例来和大家一起分享一下：首先，定义了三个模型分别为：Publisher(出版商),Author(作者)和Book(书)<br><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Publisher</span><span class=\"params\">(models.Model)</span>:</span></div><div class=\"line\">    name = models.CharField(max_length=<span class=\"number\">30</span>)</div><div class=\"line\">    address = models.CharField(max_length=<span class=\"number\">50</span>)</div><div class=\"line\">    city = models.CharField(max_length=<span class=\"number\">60</span>)</div><div class=\"line\">    state_province = models.CharField(max_length=<span class=\"number\">30</span>)</div><div class=\"line\">    country = models.CharField(max_length=<span class=\"number\">50</span>)</div><div class=\"line\">    website = models.URLField()</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__unicode__</span><span class=\"params\">(self)</span>:</span></div><div class=\"line\">        <span class=\"keyword\">return</span> self.name</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Meta</span>:</span></div><div class=\"line\">    ordering = [<span class=\"string\">'name'</span>]</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Author</span><span class=\"params\">(models.Model)</span>:</span></div><div class=\"line\">    first_name = models.CharField(max_length=<span class=\"number\">30</span>)</div><div class=\"line\">    last_name = models.CharField(max_length=<span class=\"number\">40</span>)</div><div class=\"line\">    email = models.EmailField(blank=<span class=\"keyword\">True</span>)</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__unicode__</span><span class=\"params\">(self)</span>:</span></div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">u'%s %s'</span> % (self.first_name, self.last_name)</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Book</span><span class=\"params\">(models.Model)</span>:</span></div><div class=\"line\">    title = models.CharField(max_length=<span class=\"number\">100</span>)</div><div class=\"line\">    authors = models.ManyToManyField(Author)</div><div class=\"line\">    publisher = models.ForeignKey(Publisher, related_name=<span class=\"string\">\"publisher_set\"</span>)</div><div class=\"line\">    publication_date = models.DateField(blank=<span class=\"keyword\">True</span>, verbose_name=<span class=\"string\">'e-mail'</span>)</div><div class=\"line\">    num_pages = models.IntegerField(blank=<span class=\"keyword\">True</span>, null=<span class=\"keyword\">True</span>)</div><div class=\"line\">    <span class=\"comment\"># objects = BookManager()</span></div><div class=\"line\">    objects = models.Manager()  <span class=\"comment\"># The default manager.</span></div><div class=\"line\">    dahl_objects = DahlBookManager()  <span class=\"comment\"># The Dahl-specific manager</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\"># .</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__unicode__</span><span class=\"params\">(self)</span>:</span></div><div class=\"line\">        <span class=\"keyword\">return</span> self.title</div></pre></td></tr></table></figure></p>\n<p>要建立一个递归的关系，即一个对象和自身的多对一关系，你可以这样写：<br><figure class=\"highlight gams\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">models</span>.ForeignKey(<span class=\"string\">'self'</span>) :</div><div class=\"line\"></div><div class=\"line\"><span class=\"number\">1</span> class Employee(<span class=\"keyword\">models</span>.<span class=\"keyword\">Model</span>): <span class=\"number\">2</span> manager = <span class=\"keyword\">models</span>.ForeignKey( <span class=\"string\">' self '</span> )</div></pre></td></tr></table></figure></p>\n<p>如果你创建关系时,所需的模型还没有被定义,你可以不使用模型对象本身,而是使用那个模型的名字。</p>\n<figure class=\"highlight haskell\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"type\">Car</span>(<span class=\"title\">models</span>.<span class=\"type\">Model</span>):</div><div class=\"line\">    manufacturer = models.<span class=\"type\">ForeignKey</span>('<span class=\"type\">Manufacturer</span>')</div><div class=\"line\">    ...</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">class</span> <span class=\"type\">Manufacturer</span>(<span class=\"title\">models</span>.<span class=\"type\">Model</span>):</span></div></pre></td></tr></table></figure>\n<p>但是,你要记住,只能对在同一个 models.py 文件中的模型使用字符串引用,对于其他应用程序中的模型或者从其他地方导入</p>\n<p>的模型是不能使用名字对其做引用的。</p>\n<p>Django在数据库中使用的列名称是对应的字段的名称后追加 _id 得到的字符串。再前面的那个例子中, Car 模型对应的数据库</p>\n<p>表中会有一个名字是 manufacturer_id 的列,(你可以通过指定 db_column 来显式改变这个名字,参见前面</p>\n<p>的db_column一节)但是,如果你不需要写定制的SQL语句的话,你永远不要去处理数据库列名,只需要处理你的模型对象中的</p>\n<p>字段名称。</p>\n<p>在这里有几个概念要讲清楚，当初我就是载在这上面的，希望有同感的朋友可以看到， ForeignKey选项</p>\n<ol>\n<li><p>edit_inline：</p>\n<p> 如果不设为 False 的话,它对应的对象就可以在页面上内联编辑,就是说这个对象有自 己独立的</p>\n<p> 管理界面。如果设为 models.TABULAR 或者 models.STACKED 的话,这个内 联编辑对象分别显</p>\n<p> 示成一个表格或者一些字段的集合。</p>\n</li>\n<li><p>limit_choices_to：</p>\n<p> 可以限定对象的值的范围的一个参数和值的字典。结合Python的 datetime 模块的</p>\n<p> 函数可以根据日期来限定对象。例如,下面的代码:<br> limit_choices_to = {‘pub_date__lte’: datetime.now}<br> 把可选对象限定到 pub_date 早于当前时间的对象中。<br> 除字典外,这里也可以是一个可以执行更复杂的查询的 Q 对象<br> 这个选项和 edit_inline 是不兼容的。</p>\n</li>\n<li><p>max_num_in_admin<br> 于内联编辑对象,这个是要在管理界面里显示的相关对象的最多个数。所以,如果披萨最多 只会</p>\n<p> 有10种配料, max_num_in_admin=10 会保证用户最多输入10种配料。</p>\n<p> 记住,本项并不保证不会创建10种以上的配料,他只是控制管理界面,而不是在Python的API 层和</p>\n<p> 数据库层做什么限制。</p>\n</li>\n<li><p>min_num_in_admin</p>\n<p> 在管理界面中要显示的相关的对象的最少个数。通常,在创建的时候,显示的内联对象的个数 为</p>\n<p> num_in_admin 个,在编辑的时候,在当前的基础上又会多显示 num_extra_on_change 个空对</p>\n<p> 象,但是显示的对象个数不会少于 min_num_in_admin 个。</p>\n</li>\n<li><p>num_extra_on_change</p>\n<p> 修改对象时要额外显示的对象数目。</p>\n</li>\n<li><p>num_in_admin</p>\n<p> 添加对象时要显示的内联对象的默认个数。</p>\n</li>\n<li><p>raw_id_admin</p>\n<p> 为要键入的整数显示一个文本框,而不是一个下拉列表。在关联对象有很多行时,这个比显示 一个</p>\n<p> 列表选择框更实用。</p>\n<p> 使用 edit_inline 时,本项无效。</p>\n</li>\n<li><p>related_name</p>\n<p> 关联对象反向引用描述符。</p>\n</li>\n<li><p>to_field</p>\n<p> 关联对象的用于关联的字段,Django默认使用关联对象的主键。</p>\n<p> 要学习ForeignKey并了解深刻的话，可以先对以上ForeignKey的这些选项有一定的了解。这样可以加深你对ForeignKey的印象。</p>\n<p> 万事俱备，现在，假如你想通过Book这张表去访问Publisher和Author都是可以直接访问的，因为Book这张表中有外键和这两张</p>\n<p> 表关联，因此可以直接通过语句去访问Book和Publisher表。</p>\n <figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">get_info</span><span class=\"params\">(request, id)</span>:</span></div><div class=\"line\">    books = Book.objects.filter(publisher__id=id).all()</div><div class=\"line\">    <span class=\"keyword\">return</span> render_to_response(<span class=\"string\">\"showdb_info.html\"</span>, &#123;</div><div class=\"line\">        <span class=\"string\">\"books\"</span>: books&#125;, context_instance=RequestContext(request))</div></pre></td></tr></table></figure>\n<p> 这一步相信大家都是知道的，即使不知道，等你看了笔者的这篇博客之后肯定也会一目了然的。但是，假如反过来该怎么去查询呢？</p>\n<p> （通过Publisher或者Author表查询Book表中的内容）在这里就要用到一个相当重要的 ForeignKey 选项，通过该选项你可以随便访问Books</p>\n<p> 中的任意字段。</p>\n <figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">get_book_info</span><span class=\"params\">(request, id)</span>:</span></div><div class=\"line\">    publisher = Publisher.objects.filter(publisher_set__id = id)</div><div class=\"line\">    <span class=\"keyword\">return</span> render_to_response(<span class=\"string\">\"showdb_info.html\"</span>,&#123;</div><div class=\"line\">        <span class=\"string\">\"publisher\"</span>: publisher,</div><div class=\"line\">    &#125;,</div><div class=\"line\">     context_instance=RequestContext(request))</div></pre></td></tr></table></figure></li>\n</ol>\n"},{"title":"ubuntu之装机必备","date":"2015-11-05T02:19:22.000Z","_content":"我的装机必备软件（持续更新～）\n=============\n* 系统\n\t- 更换源\n\t- synergy 多电脑共享\n\t- Lantern \n\t- sudo apt-get install mysql-server\n\t- sudo apt-get install git\n\t- sudo apt-get install vim\n\t- sudo apt-get install curl  \n\t\n* Node\n\t- 安装 Node.js\n\t\t安装 Node.js 的最佳方式是使用 nvm。\n\t\t\n\t- cURL:\n\t\t\n\t\t$ curl https://raw.github.com/creationix/nvm/master/install.sh | sh\n\t- Wget:\n\t\t\n\t\t$ wget -qO- https://raw.github.com/creationix/nvm/master/install.sh | sh\n\t\t安装完成后，重启终端并执行下列命令即可安装 Node.js。\n\t\t\n\t- $ nvm install 0.12.0\n* virtualenv\n\t- sudo apt-get install python-pip # 包管理\n\t- pip install virtualenv\n\n* hexo\n\t- npm install --unsafe-perm -g hexo-cli  \n\t- npm install hexo-server --save\n\t- npm config set user 0\n\t- npm config set unsafe-perm true\n\n\n* sudo apt-get install ipython  #高级的交互解释器","source":"_posts/2015/11/05/ubuntu之装机必备.md","raw":"title: ubuntu之装机必备\ndate: 2015-11-05 10:19:22\ncategories:\n- Linux\n- Ubuntu\ntags:\n- Linux\n---\n我的装机必备软件（持续更新～）\n=============\n* 系统\n\t- 更换源\n\t- synergy 多电脑共享\n\t- Lantern \n\t- sudo apt-get install mysql-server\n\t- sudo apt-get install git\n\t- sudo apt-get install vim\n\t- sudo apt-get install curl  \n\t\n* Node\n\t- 安装 Node.js\n\t\t安装 Node.js 的最佳方式是使用 nvm。\n\t\t\n\t- cURL:\n\t\t\n\t\t$ curl https://raw.github.com/creationix/nvm/master/install.sh | sh\n\t- Wget:\n\t\t\n\t\t$ wget -qO- https://raw.github.com/creationix/nvm/master/install.sh | sh\n\t\t安装完成后，重启终端并执行下列命令即可安装 Node.js。\n\t\t\n\t- $ nvm install 0.12.0\n* virtualenv\n\t- sudo apt-get install python-pip # 包管理\n\t- pip install virtualenv\n\n* hexo\n\t- npm install --unsafe-perm -g hexo-cli  \n\t- npm install hexo-server --save\n\t- npm config set user 0\n\t- npm config set unsafe-perm true\n\n\n* sudo apt-get install ipython  #高级的交互解释器","slug":"ubuntu之装机必备","published":1,"updated":"2016-06-29T15:29:25.175Z","_id":"cik3sv4y300240s377918e29u","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"我的装机必备软件（持续更新～）\"><a href=\"#我的装机必备软件（持续更新～）\" class=\"headerlink\" title=\"我的装机必备软件（持续更新～）\"></a>我的装机必备软件（持续更新～）</h1><ul>\n<li><p>系统</p>\n<ul>\n<li>更换源</li>\n<li>synergy 多电脑共享</li>\n<li>Lantern </li>\n<li>sudo apt-get install mysql-server</li>\n<li>sudo apt-get install git</li>\n<li>sudo apt-get install vim</li>\n<li>sudo apt-get install curl  </li>\n</ul>\n</li>\n<li><p>Node</p>\n<ul>\n<li><p>安装 Node.js<br>  安装 Node.js 的最佳方式是使用 nvm。</p>\n</li>\n<li><p>cURL:</p>\n<p>  $ curl <a href=\"https://raw.github.com/creationix/nvm/master/install.sh\" target=\"_blank\" rel=\"external\">https://raw.github.com/creationix/nvm/master/install.sh</a> | sh</p>\n</li>\n<li><p>Wget:</p>\n<p>  $ wget -qO- <a href=\"https://raw.github.com/creationix/nvm/master/install.sh\" target=\"_blank\" rel=\"external\">https://raw.github.com/creationix/nvm/master/install.sh</a> | sh<br>  安装完成后，重启终端并执行下列命令即可安装 Node.js。</p>\n</li>\n<li><p>$ nvm install 0.12.0</p>\n</li>\n</ul>\n</li>\n<li><p>virtualenv</p>\n<ul>\n<li>sudo apt-get install python-pip # 包管理</li>\n<li>pip install virtualenv</li>\n</ul>\n</li>\n<li><p>hexo</p>\n<ul>\n<li>npm install –unsafe-perm -g hexo-cli  </li>\n<li>npm install hexo-server –save</li>\n<li>npm config set user 0</li>\n<li>npm config set unsafe-perm true</li>\n</ul>\n</li>\n</ul>\n<ul>\n<li>sudo apt-get install ipython  #高级的交互解释器</li>\n</ul>\n","excerpt":"","more":"<h1 id=\"我的装机必备软件（持续更新～）\"><a href=\"#我的装机必备软件（持续更新～）\" class=\"headerlink\" title=\"我的装机必备软件（持续更新～）\"></a>我的装机必备软件（持续更新～）</h1><ul>\n<li><p>系统</p>\n<ul>\n<li>更换源</li>\n<li>synergy 多电脑共享</li>\n<li>Lantern </li>\n<li>sudo apt-get install mysql-server</li>\n<li>sudo apt-get install git</li>\n<li>sudo apt-get install vim</li>\n<li>sudo apt-get install curl  </li>\n</ul>\n</li>\n<li><p>Node</p>\n<ul>\n<li><p>安装 Node.js<br>  安装 Node.js 的最佳方式是使用 nvm。</p>\n</li>\n<li><p>cURL:</p>\n<p>  $ curl <a href=\"https://raw.github.com/creationix/nvm/master/install.sh\">https://raw.github.com/creationix/nvm/master/install.sh</a> | sh</p>\n</li>\n<li><p>Wget:</p>\n<p>  $ wget -qO- <a href=\"https://raw.github.com/creationix/nvm/master/install.sh\">https://raw.github.com/creationix/nvm/master/install.sh</a> | sh<br>  安装完成后，重启终端并执行下列命令即可安装 Node.js。</p>\n</li>\n<li><p>$ nvm install 0.12.0</p>\n</li>\n</ul>\n</li>\n<li><p>virtualenv</p>\n<ul>\n<li>sudo apt-get install python-pip # 包管理</li>\n<li>pip install virtualenv</li>\n</ul>\n</li>\n<li><p>hexo</p>\n<ul>\n<li>npm install –unsafe-perm -g hexo-cli  </li>\n<li>npm install hexo-server –save</li>\n<li>npm config set user 0</li>\n<li>npm config set unsafe-perm true</li>\n</ul>\n</li>\n</ul>\n<ul>\n<li>sudo apt-get install ipython  #高级的交互解释器</li>\n</ul>\n"},{"title":"js之闭包","date":"2015-11-05T13:34:42.000Z","_content":"js闭包(转载)\n=============\n\n一、什么是闭包？ \n-------------\n“官方”的解释是：闭包是一个拥有许多变量和绑定了这些变量的环境的表达式（通常是一个函数），因而这些变量也是该表达式的一部分。 \n\n相信很少有人能直接看懂这句话，因为他描述的太学术。其实这句话通俗的来说就是：JavaScript中所有的function都是一个闭包。不过一般来说，嵌套的function所产生的闭包更为强大，也是大部分时候我们所谓的“闭包”。看下面这段代码： \n```\nfunction a() { \n    var i = 0; \n    function b() { \n        alert(++i); \n    } \n    return b; \n} \nvar c = a(); \nc(); \n```\n这段代码有两个特点： \n\n函数b嵌套在函数a内部； \n函数a返回函数b。 \n\n这样在执行完var c=a()后，变量c实际上是指向了函数b，b中用到了变量i，再执行c()后就会弹出一个窗口显示i的值(第一次为1)。这段代码其实就创建了一个闭包，为什么？因为函数a外的变量c引用了函数a内的函数b，就是说： \n\n\n当函数a的内部函数b被函数a外的一个变量引用的时候，就创建了一个我们通常所谓的“闭包”。 \n\n让我们说的更透彻一些。所谓“闭包”，就是在构造函数体内定义另外的函数作为目标对象的方法函数，而这个对象的方法函数反过来引用外层外层函数体中的临时变量。这使得只要目标 对象在生存期内始终能保持其方法，就能间接保持原构造函数体当时用到的临时变量值。尽管最开始的构造函数调用已经结束，临时变量的名称也都消失了，但在目 标对象的方法内却始终能引用到该变量的值，而且该值只能通这种方法来访问。即使再次调用相同的构造函数，但只会生成新对象和方法，新的临时变量只是对应新 的值，和上次那次调用的是各自独立的。 \n\n为了更深刻的理解闭包，下面让我们继续探索闭包的作用和效果。 \n\n二、闭包有什么作用和效果？ \n===============\n简而言之，闭包的作用就是在a执行完并返回后，闭包使得Javascript的垃圾回收机制GC不会收回a所占用的资源，因为a的内部函数b的执行需要依赖a中的变量。这是对闭包作用的非常直白的描述，不专业也不严谨，但大概意思就是这样，理解闭包需要循序渐进的过程。 \n在上面的例子中，由于闭包的存在使得函数a返回后，a中的i始终存在，这样每次执行c()，i都是自加1后alert出i的值。 \n\n那么我们来想象另一种情况，如果a返回的不是函数b，情况就完全不同了。因为a执行完后，b没有被返回给a的外界，只是被a所引用，而此时a也只会被b引用，因此函数a和b互相引用但又不被外界打扰(被外界引用)，函数a和b就会被GC回收。(关于Javascript的垃圾回收机制将在后面详细介绍) \n\n三、闭包的微观世界 \n如果要更加深入的了解闭包以及函数a和嵌套函数b的关系，我们需要引入另外几个概念：函数的执行环境(excution context)、活动对象(call object)、作用域(scope)、作用域链(scope chain)。以函数a从定义到执行的过程为例阐述这几个概念。 \n\n当定义函数a的时候，js解释器会将函数a的作用域链(scope chain)设置为定义a时a所在的“环境”，如果a是一个全局函数，则scope chain中只有window对象。 \n当执行函数a的时候，a会进入相应的执行环境(excution context)。 \n在创建执行环境的过程中，首先会为a添加一个scope属性，即a的作用域，其值就为第1步中的scope chain。即a.scope=a的作用域链。 \n然后执行环境会创建一个活动对象(call object)。活动对象也是一个拥有属性的对象，但它不具有原型而且不能通过JavaScript代码直接访问。创建完活动对象后，把活动对象添加到a的作用域链的最顶端。此时a的作用域链包含了两个对象：a的活动对象和window对象。 \n下一步是在活动对象上添加一个arguments属性，它保存着调用函数a时所传递的参数。 \n最后把所有函数a的形参和内部的函数b的引用也添加到a的活动对象上。在这一步中，完成了函数b的的定义，因此如同第3步，函数b的作用域链被设置为b所被定义的环境，即a的作用域。 \n到此，整个函数a从定义到执行的步骤就完成了。此时a返回函数b的引用给c，又函数b的作用域链包含了对函数a的活动对象的引用，也就是说b可以访问到a中定义的所有变量和函数。函数b被c引用，函数b又依赖函数a，因此函数a在返回后不会被GC回收。 \n四、闭包的应用场景 \n保护函数内的变量安全。以最开始的例子为例，函数a中i只有函数b才能访问，而无法通过其他途径访问到，因此保护了i的安全性。 \n在内存中维持一个变量。依然如前例，由于闭包，函数a中i的一直存在于内存中，因此每次执行c()，都会给i自加1。 \n通过保护变量的安全实现JS私有属性和私有方法（不能被外部访问）推荐阅读：http://javascript.crockford.com/private.html \n私有属性和方法在Constructor外是无法被访问的 \n\nfunction Constructor(...) { \n    var that = this; \n    var membername = value; \n    function membername(...) {...} \n} \n以上3点是闭包最基本的应用场景，很多经典案例都源于此。\n \n//******************************************************************************\n复制代码\n//返回价格列表\nvar loadPriceList = Class($_$, {\n    creat: function () { },\n    loadPriceList: function () {\n        var J = $(\"div[lang]\").get(),\n   _J = J.length,\n   K = Math.ceil(_J / 5),\n   L = [],\n   TT = [],\n   M, N, O, A;\n        for (M = 0; M < K; M++) {\n            if (M < K) {\n                N = J.slice(0, 5);\n                L.push(N);\n                J.splice(0, 5)\n            }\n        }        \n        for (O = 0; O < K; O++) {\n            var B;\n            for (B = 0; B < L[O].length; B++) {\n                var P = L[O][B].lang;\n                ajaxPList(P)\n            }\n        }\n    }\n})\nfunction ajaxPList(P) {\n    var aArr = P.split(\"|\");   \n    $.ajax({\n    async: true,\n    type: \"GET\",\n    url: aArr[1],\n    dataType: 'html',\n    cache: false,\n    error: function () {\n    },\n    success: function (html) {\n        $(\"#price_\" + aArr[0]).html(html);\n    }\n  });   \n}\n复制代码","source":"_posts/2015/11/05/js之闭包.md","raw":"title: js之闭包\ndate: 2015-11-05 21:34:42\ncategories:\n- Js\n- 前端\ntags:\n- Js\n---\njs闭包(转载)\n=============\n\n一、什么是闭包？ \n-------------\n“官方”的解释是：闭包是一个拥有许多变量和绑定了这些变量的环境的表达式（通常是一个函数），因而这些变量也是该表达式的一部分。 \n\n相信很少有人能直接看懂这句话，因为他描述的太学术。其实这句话通俗的来说就是：JavaScript中所有的function都是一个闭包。不过一般来说，嵌套的function所产生的闭包更为强大，也是大部分时候我们所谓的“闭包”。看下面这段代码： \n```\nfunction a() { \n    var i = 0; \n    function b() { \n        alert(++i); \n    } \n    return b; \n} \nvar c = a(); \nc(); \n```\n这段代码有两个特点： \n\n函数b嵌套在函数a内部； \n函数a返回函数b。 \n\n这样在执行完var c=a()后，变量c实际上是指向了函数b，b中用到了变量i，再执行c()后就会弹出一个窗口显示i的值(第一次为1)。这段代码其实就创建了一个闭包，为什么？因为函数a外的变量c引用了函数a内的函数b，就是说： \n\n\n当函数a的内部函数b被函数a外的一个变量引用的时候，就创建了一个我们通常所谓的“闭包”。 \n\n让我们说的更透彻一些。所谓“闭包”，就是在构造函数体内定义另外的函数作为目标对象的方法函数，而这个对象的方法函数反过来引用外层外层函数体中的临时变量。这使得只要目标 对象在生存期内始终能保持其方法，就能间接保持原构造函数体当时用到的临时变量值。尽管最开始的构造函数调用已经结束，临时变量的名称也都消失了，但在目 标对象的方法内却始终能引用到该变量的值，而且该值只能通这种方法来访问。即使再次调用相同的构造函数，但只会生成新对象和方法，新的临时变量只是对应新 的值，和上次那次调用的是各自独立的。 \n\n为了更深刻的理解闭包，下面让我们继续探索闭包的作用和效果。 \n\n二、闭包有什么作用和效果？ \n===============\n简而言之，闭包的作用就是在a执行完并返回后，闭包使得Javascript的垃圾回收机制GC不会收回a所占用的资源，因为a的内部函数b的执行需要依赖a中的变量。这是对闭包作用的非常直白的描述，不专业也不严谨，但大概意思就是这样，理解闭包需要循序渐进的过程。 \n在上面的例子中，由于闭包的存在使得函数a返回后，a中的i始终存在，这样每次执行c()，i都是自加1后alert出i的值。 \n\n那么我们来想象另一种情况，如果a返回的不是函数b，情况就完全不同了。因为a执行完后，b没有被返回给a的外界，只是被a所引用，而此时a也只会被b引用，因此函数a和b互相引用但又不被外界打扰(被外界引用)，函数a和b就会被GC回收。(关于Javascript的垃圾回收机制将在后面详细介绍) \n\n三、闭包的微观世界 \n如果要更加深入的了解闭包以及函数a和嵌套函数b的关系，我们需要引入另外几个概念：函数的执行环境(excution context)、活动对象(call object)、作用域(scope)、作用域链(scope chain)。以函数a从定义到执行的过程为例阐述这几个概念。 \n\n当定义函数a的时候，js解释器会将函数a的作用域链(scope chain)设置为定义a时a所在的“环境”，如果a是一个全局函数，则scope chain中只有window对象。 \n当执行函数a的时候，a会进入相应的执行环境(excution context)。 \n在创建执行环境的过程中，首先会为a添加一个scope属性，即a的作用域，其值就为第1步中的scope chain。即a.scope=a的作用域链。 \n然后执行环境会创建一个活动对象(call object)。活动对象也是一个拥有属性的对象，但它不具有原型而且不能通过JavaScript代码直接访问。创建完活动对象后，把活动对象添加到a的作用域链的最顶端。此时a的作用域链包含了两个对象：a的活动对象和window对象。 \n下一步是在活动对象上添加一个arguments属性，它保存着调用函数a时所传递的参数。 \n最后把所有函数a的形参和内部的函数b的引用也添加到a的活动对象上。在这一步中，完成了函数b的的定义，因此如同第3步，函数b的作用域链被设置为b所被定义的环境，即a的作用域。 \n到此，整个函数a从定义到执行的步骤就完成了。此时a返回函数b的引用给c，又函数b的作用域链包含了对函数a的活动对象的引用，也就是说b可以访问到a中定义的所有变量和函数。函数b被c引用，函数b又依赖函数a，因此函数a在返回后不会被GC回收。 \n四、闭包的应用场景 \n保护函数内的变量安全。以最开始的例子为例，函数a中i只有函数b才能访问，而无法通过其他途径访问到，因此保护了i的安全性。 \n在内存中维持一个变量。依然如前例，由于闭包，函数a中i的一直存在于内存中，因此每次执行c()，都会给i自加1。 \n通过保护变量的安全实现JS私有属性和私有方法（不能被外部访问）推荐阅读：http://javascript.crockford.com/private.html \n私有属性和方法在Constructor外是无法被访问的 \n\nfunction Constructor(...) { \n    var that = this; \n    var membername = value; \n    function membername(...) {...} \n} \n以上3点是闭包最基本的应用场景，很多经典案例都源于此。\n \n//******************************************************************************\n复制代码\n//返回价格列表\nvar loadPriceList = Class($_$, {\n    creat: function () { },\n    loadPriceList: function () {\n        var J = $(\"div[lang]\").get(),\n   _J = J.length,\n   K = Math.ceil(_J / 5),\n   L = [],\n   TT = [],\n   M, N, O, A;\n        for (M = 0; M < K; M++) {\n            if (M < K) {\n                N = J.slice(0, 5);\n                L.push(N);\n                J.splice(0, 5)\n            }\n        }        \n        for (O = 0; O < K; O++) {\n            var B;\n            for (B = 0; B < L[O].length; B++) {\n                var P = L[O][B].lang;\n                ajaxPList(P)\n            }\n        }\n    }\n})\nfunction ajaxPList(P) {\n    var aArr = P.split(\"|\");   \n    $.ajax({\n    async: true,\n    type: \"GET\",\n    url: aArr[1],\n    dataType: 'html',\n    cache: false,\n    error: function () {\n    },\n    success: function (html) {\n        $(\"#price_\" + aArr[0]).html(html);\n    }\n  });   \n}\n复制代码","slug":"js之闭包","published":1,"updated":"2016-06-29T15:29:25.175Z","_id":"cik3sv4y800280s37l56269ho","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"js闭包-转载\"><a href=\"#js闭包-转载\" class=\"headerlink\" title=\"js闭包(转载)\"></a>js闭包(转载)</h1><h2 id=\"一、什么是闭包？\"><a href=\"#一、什么是闭包？\" class=\"headerlink\" title=\"一、什么是闭包？ \"></a>一、什么是闭包？ </h2><p>“官方”的解释是：闭包是一个拥有许多变量和绑定了这些变量的环境的表达式（通常是一个函数），因而这些变量也是该表达式的一部分。 </p>\n<p>相信很少有人能直接看懂这句话，因为他描述的太学术。其实这句话通俗的来说就是：JavaScript中所有的function都是一个闭包。不过一般来说，嵌套的function所产生的闭包更为强大，也是大部分时候我们所谓的“闭包”。看下面这段代码：<br><figure class=\"highlight actionscript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">a</span><span class=\"params\">()</span> </span>&#123; </div><div class=\"line\">    <span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; </div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">b</span><span class=\"params\">()</span> </span>&#123; </div><div class=\"line\">        alert(++i); </div><div class=\"line\">    &#125; </div><div class=\"line\">    <span class=\"keyword\">return</span> b; </div><div class=\"line\">&#125; </div><div class=\"line\"><span class=\"keyword\">var</span> c = a(); </div><div class=\"line\">c();</div></pre></td></tr></table></figure></p>\n<p>这段代码有两个特点： </p>\n<p>函数b嵌套在函数a内部；<br>函数a返回函数b。 </p>\n<p>这样在执行完var c=a()后，变量c实际上是指向了函数b，b中用到了变量i，再执行c()后就会弹出一个窗口显示i的值(第一次为1)。这段代码其实就创建了一个闭包，为什么？因为函数a外的变量c引用了函数a内的函数b，就是说： </p>\n<p>当函数a的内部函数b被函数a外的一个变量引用的时候，就创建了一个我们通常所谓的“闭包”。 </p>\n<p>让我们说的更透彻一些。所谓“闭包”，就是在构造函数体内定义另外的函数作为目标对象的方法函数，而这个对象的方法函数反过来引用外层外层函数体中的临时变量。这使得只要目标 对象在生存期内始终能保持其方法，就能间接保持原构造函数体当时用到的临时变量值。尽管最开始的构造函数调用已经结束，临时变量的名称也都消失了，但在目 标对象的方法内却始终能引用到该变量的值，而且该值只能通这种方法来访问。即使再次调用相同的构造函数，但只会生成新对象和方法，新的临时变量只是对应新 的值，和上次那次调用的是各自独立的。 </p>\n<p>为了更深刻的理解闭包，下面让我们继续探索闭包的作用和效果。 </p>\n<h1 id=\"二、闭包有什么作用和效果？\"><a href=\"#二、闭包有什么作用和效果？\" class=\"headerlink\" title=\"二、闭包有什么作用和效果？ \"></a>二、闭包有什么作用和效果？ </h1><p>简而言之，闭包的作用就是在a执行完并返回后，闭包使得Javascript的垃圾回收机制GC不会收回a所占用的资源，因为a的内部函数b的执行需要依赖a中的变量。这是对闭包作用的非常直白的描述，不专业也不严谨，但大概意思就是这样，理解闭包需要循序渐进的过程。<br>在上面的例子中，由于闭包的存在使得函数a返回后，a中的i始终存在，这样每次执行c()，i都是自加1后alert出i的值。 </p>\n<p>那么我们来想象另一种情况，如果a返回的不是函数b，情况就完全不同了。因为a执行完后，b没有被返回给a的外界，只是被a所引用，而此时a也只会被b引用，因此函数a和b互相引用但又不被外界打扰(被外界引用)，函数a和b就会被GC回收。(关于Javascript的垃圾回收机制将在后面详细介绍) </p>\n<p>三、闭包的微观世界<br>如果要更加深入的了解闭包以及函数a和嵌套函数b的关系，我们需要引入另外几个概念：函数的执行环境(excution context)、活动对象(call object)、作用域(scope)、作用域链(scope chain)。以函数a从定义到执行的过程为例阐述这几个概念。 </p>\n<p>当定义函数a的时候，js解释器会将函数a的作用域链(scope chain)设置为定义a时a所在的“环境”，如果a是一个全局函数，则scope chain中只有window对象。<br>当执行函数a的时候，a会进入相应的执行环境(excution context)。<br>在创建执行环境的过程中，首先会为a添加一个scope属性，即a的作用域，其值就为第1步中的scope chain。即a.scope=a的作用域链。<br>然后执行环境会创建一个活动对象(call object)。活动对象也是一个拥有属性的对象，但它不具有原型而且不能通过JavaScript代码直接访问。创建完活动对象后，把活动对象添加到a的作用域链的最顶端。此时a的作用域链包含了两个对象：a的活动对象和window对象。<br>下一步是在活动对象上添加一个arguments属性，它保存着调用函数a时所传递的参数。<br>最后把所有函数a的形参和内部的函数b的引用也添加到a的活动对象上。在这一步中，完成了函数b的的定义，因此如同第3步，函数b的作用域链被设置为b所被定义的环境，即a的作用域。<br>到此，整个函数a从定义到执行的步骤就完成了。此时a返回函数b的引用给c，又函数b的作用域链包含了对函数a的活动对象的引用，也就是说b可以访问到a中定义的所有变量和函数。函数b被c引用，函数b又依赖函数a，因此函数a在返回后不会被GC回收。<br>四、闭包的应用场景<br>保护函数内的变量安全。以最开始的例子为例，函数a中i只有函数b才能访问，而无法通过其他途径访问到，因此保护了i的安全性。<br>在内存中维持一个变量。依然如前例，由于闭包，函数a中i的一直存在于内存中，因此每次执行c()，都会给i自加1。<br>通过保护变量的安全实现JS私有属性和私有方法（不能被外部访问）推荐阅读：<a href=\"http://javascript.crockford.com/private.html\" target=\"_blank\" rel=\"external\">http://javascript.crockford.com/private.html</a><br>私有属性和方法在Constructor外是无法被访问的 </p>\n<p>function Constructor(…) {<br>    var that = this;<br>    var membername = value;<br>    function membername(…) {…}<br>}<br>以上3点是闭包最基本的应用场景，很多经典案例都源于此。</p>\n<p>//<strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong>**</strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong><br>复制代码<br>//返回价格列表<br>var loadPriceList = Class($_$, {<br>    creat: function () { },<br>    loadPriceList: function () {<br>        var J = $(“div[lang]”).get(),<br>   _J = J.length,<br>   K = Math.ceil(<em>J / 5),<br>   L = [],<br>   TT = [],<br>   M, N, O, A;<br>        for (M = 0; M &lt; K; M++) {<br>            if (M &lt; K) {<br>                N = J.slice(0, 5);<br>                L.push(N);<br>                J.splice(0, 5)<br>            }<br>        }<br>        for (O = 0; O &lt; K; O++) {<br>            var B;<br>            for (B = 0; B &lt; L[O].length; B++) {<br>                var P = L[O][B].lang;<br>                ajaxPList(P)<br>            }<br>        }<br>    }<br>})<br>function ajaxPList(P) {<br>    var aArr = P.split(“|”);<br>    $.ajax({<br>    async: true,<br>    type: “GET”,<br>    url: aArr[1],<br>    dataType: ‘html’,<br>    cache: false,<br>    error: function () {<br>    },<br>    success: function (html) {<br>        $(“#price</em>“ + aArr[0]).html(html);<br>    }<br>  });<br>}<br>复制代码</p>\n","excerpt":"","more":"<h1 id=\"js闭包-转载\"><a href=\"#js闭包-转载\" class=\"headerlink\" title=\"js闭包(转载)\"></a>js闭包(转载)</h1><h2 id=\"一、什么是闭包？\"><a href=\"#一、什么是闭包？\" class=\"headerlink\" title=\"一、什么是闭包？ \"></a>一、什么是闭包？ </h2><p>“官方”的解释是：闭包是一个拥有许多变量和绑定了这些变量的环境的表达式（通常是一个函数），因而这些变量也是该表达式的一部分。 </p>\n<p>相信很少有人能直接看懂这句话，因为他描述的太学术。其实这句话通俗的来说就是：JavaScript中所有的function都是一个闭包。不过一般来说，嵌套的function所产生的闭包更为强大，也是大部分时候我们所谓的“闭包”。看下面这段代码：<br><figure class=\"highlight actionscript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">a</span><span class=\"params\">()</span> </span>&#123; </div><div class=\"line\">    <span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; </div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">b</span><span class=\"params\">()</span> </span>&#123; </div><div class=\"line\">        alert(++i); </div><div class=\"line\">    &#125; </div><div class=\"line\">    <span class=\"keyword\">return</span> b; </div><div class=\"line\">&#125; </div><div class=\"line\"><span class=\"keyword\">var</span> c = a(); </div><div class=\"line\">c();</div></pre></td></tr></table></figure></p>\n<p>这段代码有两个特点： </p>\n<p>函数b嵌套在函数a内部；<br>函数a返回函数b。 </p>\n<p>这样在执行完var c=a()后，变量c实际上是指向了函数b，b中用到了变量i，再执行c()后就会弹出一个窗口显示i的值(第一次为1)。这段代码其实就创建了一个闭包，为什么？因为函数a外的变量c引用了函数a内的函数b，就是说： </p>\n<p>当函数a的内部函数b被函数a外的一个变量引用的时候，就创建了一个我们通常所谓的“闭包”。 </p>\n<p>让我们说的更透彻一些。所谓“闭包”，就是在构造函数体内定义另外的函数作为目标对象的方法函数，而这个对象的方法函数反过来引用外层外层函数体中的临时变量。这使得只要目标 对象在生存期内始终能保持其方法，就能间接保持原构造函数体当时用到的临时变量值。尽管最开始的构造函数调用已经结束，临时变量的名称也都消失了，但在目 标对象的方法内却始终能引用到该变量的值，而且该值只能通这种方法来访问。即使再次调用相同的构造函数，但只会生成新对象和方法，新的临时变量只是对应新 的值，和上次那次调用的是各自独立的。 </p>\n<p>为了更深刻的理解闭包，下面让我们继续探索闭包的作用和效果。 </p>\n<h1 id=\"二、闭包有什么作用和效果？\"><a href=\"#二、闭包有什么作用和效果？\" class=\"headerlink\" title=\"二、闭包有什么作用和效果？ \"></a>二、闭包有什么作用和效果？ </h1><p>简而言之，闭包的作用就是在a执行完并返回后，闭包使得Javascript的垃圾回收机制GC不会收回a所占用的资源，因为a的内部函数b的执行需要依赖a中的变量。这是对闭包作用的非常直白的描述，不专业也不严谨，但大概意思就是这样，理解闭包需要循序渐进的过程。<br>在上面的例子中，由于闭包的存在使得函数a返回后，a中的i始终存在，这样每次执行c()，i都是自加1后alert出i的值。 </p>\n<p>那么我们来想象另一种情况，如果a返回的不是函数b，情况就完全不同了。因为a执行完后，b没有被返回给a的外界，只是被a所引用，而此时a也只会被b引用，因此函数a和b互相引用但又不被外界打扰(被外界引用)，函数a和b就会被GC回收。(关于Javascript的垃圾回收机制将在后面详细介绍) </p>\n<p>三、闭包的微观世界<br>如果要更加深入的了解闭包以及函数a和嵌套函数b的关系，我们需要引入另外几个概念：函数的执行环境(excution context)、活动对象(call object)、作用域(scope)、作用域链(scope chain)。以函数a从定义到执行的过程为例阐述这几个概念。 </p>\n<p>当定义函数a的时候，js解释器会将函数a的作用域链(scope chain)设置为定义a时a所在的“环境”，如果a是一个全局函数，则scope chain中只有window对象。<br>当执行函数a的时候，a会进入相应的执行环境(excution context)。<br>在创建执行环境的过程中，首先会为a添加一个scope属性，即a的作用域，其值就为第1步中的scope chain。即a.scope=a的作用域链。<br>然后执行环境会创建一个活动对象(call object)。活动对象也是一个拥有属性的对象，但它不具有原型而且不能通过JavaScript代码直接访问。创建完活动对象后，把活动对象添加到a的作用域链的最顶端。此时a的作用域链包含了两个对象：a的活动对象和window对象。<br>下一步是在活动对象上添加一个arguments属性，它保存着调用函数a时所传递的参数。<br>最后把所有函数a的形参和内部的函数b的引用也添加到a的活动对象上。在这一步中，完成了函数b的的定义，因此如同第3步，函数b的作用域链被设置为b所被定义的环境，即a的作用域。<br>到此，整个函数a从定义到执行的步骤就完成了。此时a返回函数b的引用给c，又函数b的作用域链包含了对函数a的活动对象的引用，也就是说b可以访问到a中定义的所有变量和函数。函数b被c引用，函数b又依赖函数a，因此函数a在返回后不会被GC回收。<br>四、闭包的应用场景<br>保护函数内的变量安全。以最开始的例子为例，函数a中i只有函数b才能访问，而无法通过其他途径访问到，因此保护了i的安全性。<br>在内存中维持一个变量。依然如前例，由于闭包，函数a中i的一直存在于内存中，因此每次执行c()，都会给i自加1。<br>通过保护变量的安全实现JS私有属性和私有方法（不能被外部访问）推荐阅读：<a href=\"http://javascript.crockford.com/private.html\">http://javascript.crockford.com/private.html</a><br>私有属性和方法在Constructor外是无法被访问的 </p>\n<p>function Constructor(…) {<br>    var that = this;<br>    var membername = value;<br>    function membername(…) {…}<br>}<br>以上3点是闭包最基本的应用场景，很多经典案例都源于此。</p>\n<p>//<strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong>**</strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong><br>复制代码<br>//返回价格列表<br>var loadPriceList = Class($_$, {<br>    creat: function () { },<br>    loadPriceList: function () {<br>        var J = $(“div[lang]”).get(),<br>   _J = J.length,<br>   K = Math.ceil(<em>J / 5),<br>   L = [],<br>   TT = [],<br>   M, N, O, A;<br>        for (M = 0; M &lt; K; M++) {<br>            if (M &lt; K) {<br>                N = J.slice(0, 5);<br>                L.push(N);<br>                J.splice(0, 5)<br>            }<br>        }<br>        for (O = 0; O &lt; K; O++) {<br>            var B;<br>            for (B = 0; B &lt; L[O].length; B++) {<br>                var P = L[O][B].lang;<br>                ajaxPList(P)<br>            }<br>        }<br>    }<br>})<br>function ajaxPList(P) {<br>    var aArr = P.split(“|”);<br>    $.ajax({<br>    async: true,<br>    type: “GET”,<br>    url: aArr[1],<br>    dataType: ‘html’,<br>    cache: false,<br>    error: function () {<br>    },<br>    success: function (html) {<br>        $(“#price</em>“ + aArr[0]).html(html);<br>    }<br>  });<br>}<br>复制代码</p>\n"},{"title":"mysql之1292","date":"2015-11-03T01:15:41.000Z","_content":"\nmysql 1292错误：Warning 1292 Truncated incorrect DOUBLE value:\n===================\n\nLook at this line \"where PremiseID = \" + str(premiseID) + \" ; \"])\". The comparison is happening on different types and when MySQL compares different datatypes they are cast to DOUBLE internally before comparison. So you can try putting single quote around or cast around to solve the issue. So it's not try catch but the quotes which resolve the issue.","source":"_posts/2015/11/03/mysql之1292.md","raw":"title: mysql之1292\ndate: 2015-11-03 09:15:41\ncategories:\n- Mysql\ntags: \n- Mysql\n---\n\nmysql 1292错误：Warning 1292 Truncated incorrect DOUBLE value:\n===================\n\nLook at this line \"where PremiseID = \" + str(premiseID) + \" ; \"])\". The comparison is happening on different types and when MySQL compares different datatypes they are cast to DOUBLE internally before comparison. So you can try putting single quote around or cast around to solve the issue. So it's not try catch but the quotes which resolve the issue.","slug":"mysql之1292","published":1,"updated":"2016-06-29T15:29:25.175Z","_id":"cik3sv4yb002f0s37h7ye4kua","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"mysql-1292错误：Warning-1292-Truncated-incorrect-DOUBLE-value\"><a href=\"#mysql-1292错误：Warning-1292-Truncated-incorrect-DOUBLE-value\" class=\"headerlink\" title=\"mysql 1292错误：Warning 1292 Truncated incorrect DOUBLE value:\"></a>mysql 1292错误：Warning 1292 Truncated incorrect DOUBLE value:</h1><p>Look at this line “where PremiseID = “ + str(premiseID) + “ ; “])”. The comparison is happening on different types and when MySQL compares different datatypes they are cast to DOUBLE internally before comparison. So you can try putting single quote around or cast around to solve the issue. So it’s not try catch but the quotes which resolve the issue.</p>\n","excerpt":"","more":"<h1 id=\"mysql-1292错误：Warning-1292-Truncated-incorrect-DOUBLE-value\"><a href=\"#mysql-1292错误：Warning-1292-Truncated-incorrect-DOUBLE-value\" class=\"headerlink\" title=\"mysql 1292错误：Warning 1292 Truncated incorrect DOUBLE value:\"></a>mysql 1292错误：Warning 1292 Truncated incorrect DOUBLE value:</h1><p>Look at this line “where PremiseID = “ + str(premiseID) + “ ; “])”. The comparison is happening on different types and when MySQL compares different datatypes they are cast to DOUBLE internally before comparison. So you can try putting single quote around or cast around to solve the issue. So it’s not try catch but the quotes which resolve the issue.</p>\n"},{"title":"python之input","date":"2015-11-02T01:40:58.000Z","_content":"\n\nraw_input() 与 input()\n=====================\n\n这两个均是 python 的内建函数，通过读取控制台的输入与用户实现交互。但他们的功能不尽相同。举两个小例子。\n\n* 例子1\n\t``` \n\t>>> raw_input_A = raw_input(\"raw_input: \")\n\traw_input: test\n\t>>> input_A = input(\"Input: \")\n\tInput: abc\n\tTraceback (most recent call last):\n\t  File \"<stdin>\", line 1, in <module>\n\t  File \"<string>\", line 1, in <module>\n\tNameError: name 'abc' is not defined\n\t```\n* 例子2\n\t```\n\t>>> raw_input_B = raw_input(\"raw_input: \")\n\traw_input: 123\n\t>>> type(raw_input_B)\n\t<type 'str'>\n\t>>> input_B = input(\"input: \")\n\tinput: 123\n\t>>> type(input_B)\n\t<type 'int'>\n\t```\n例子1 可以看到：这两个函数均能接收 字符串 ，但 raw_input() 直接读取控制台的输入（任何类型的输入它都可以接收）。而对于 input() ，它希望能够读取一个合法的 python 表达式，即你输入字符串的时候必须使用引号将它括起来，否则它会引发一个 SyntaxError 。\n\n例子2 可以看到：raw_input() 将所有输入作为字符串看待，返回字符串类型。而 input() 在对待纯数字输入时具有自己的特性，它返回所输入的数字的类型（ int, float ）；同时在例子 1 知道，input() 可接受合法的 python 表达式，举例：input( 1 + 3 ) 会返回 int 型的 4 。\n\n查看 [Built-in Functions](https://docs.python.org/2/library/functions.html#built-in-functions) ，得知：\n```\ninput([prompt])\n    Equivalent to eval(raw_input(prompt)) \n```\n\ninput() 本质上还是使用 raw_input() 来实现的，只是调用完 raw_input() 之后再调用 eval() 函数，所以，你甚至可以将表达式作为 input() 的参数，并且它会计算表达式的值并返回它。\n\n不过在 Built-in Functions 里有一句话是这样写的：Consider using the raw_input() function for general input from users.\n\n除非对 input() 有特别需要，否则一般情况下我们都是推荐使用 raw_input() 来与用户交互。\n\n-------\n![python](http://huangyan.qiniudn.com/python-cha.jpg?imageMogr2/thumbnail/400x200 \"python\")\n使用了 raw_input() 接受整数（返回的是字符串）并再用一行语句返回整型数据。\n\n","source":"_posts/2015/11/02/python之input.md","raw":"title: python之input\ndate: 2015-11-02 09:40:58\ncategories:\n- Python\ntags: \n- Python\n---\n\n\nraw_input() 与 input()\n=====================\n\n这两个均是 python 的内建函数，通过读取控制台的输入与用户实现交互。但他们的功能不尽相同。举两个小例子。\n\n* 例子1\n\t``` \n\t>>> raw_input_A = raw_input(\"raw_input: \")\n\traw_input: test\n\t>>> input_A = input(\"Input: \")\n\tInput: abc\n\tTraceback (most recent call last):\n\t  File \"<stdin>\", line 1, in <module>\n\t  File \"<string>\", line 1, in <module>\n\tNameError: name 'abc' is not defined\n\t```\n* 例子2\n\t```\n\t>>> raw_input_B = raw_input(\"raw_input: \")\n\traw_input: 123\n\t>>> type(raw_input_B)\n\t<type 'str'>\n\t>>> input_B = input(\"input: \")\n\tinput: 123\n\t>>> type(input_B)\n\t<type 'int'>\n\t```\n例子1 可以看到：这两个函数均能接收 字符串 ，但 raw_input() 直接读取控制台的输入（任何类型的输入它都可以接收）。而对于 input() ，它希望能够读取一个合法的 python 表达式，即你输入字符串的时候必须使用引号将它括起来，否则它会引发一个 SyntaxError 。\n\n例子2 可以看到：raw_input() 将所有输入作为字符串看待，返回字符串类型。而 input() 在对待纯数字输入时具有自己的特性，它返回所输入的数字的类型（ int, float ）；同时在例子 1 知道，input() 可接受合法的 python 表达式，举例：input( 1 + 3 ) 会返回 int 型的 4 。\n\n查看 [Built-in Functions](https://docs.python.org/2/library/functions.html#built-in-functions) ，得知：\n```\ninput([prompt])\n    Equivalent to eval(raw_input(prompt)) \n```\n\ninput() 本质上还是使用 raw_input() 来实现的，只是调用完 raw_input() 之后再调用 eval() 函数，所以，你甚至可以将表达式作为 input() 的参数，并且它会计算表达式的值并返回它。\n\n不过在 Built-in Functions 里有一句话是这样写的：Consider using the raw_input() function for general input from users.\n\n除非对 input() 有特别需要，否则一般情况下我们都是推荐使用 raw_input() 来与用户交互。\n\n-------\n![python](http://huangyan.qiniudn.com/python-cha.jpg?imageMogr2/thumbnail/400x200 \"python\")\n使用了 raw_input() 接受整数（返回的是字符串）并再用一行语句返回整型数据。\n\n","slug":"python之input","published":1,"updated":"2016-06-29T15:29:25.175Z","_id":"cik3sv4ye002k0s37xtms3m5s","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"raw-input-与-input\"><a href=\"#raw-input-与-input\" class=\"headerlink\" title=\"raw_input() 与 input()\"></a>raw_input() 与 input()</h1><p>这两个均是 python 的内建函数，通过读取控制台的输入与用户实现交互。但他们的功能不尽相同。举两个小例子。</p>\n<ul>\n<li><p>例子1</p>\n  <figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">&gt;&gt;</span>&gt; raw_input_A = raw_input(<span class=\"string\">\"raw_input: \"</span>)</div><div class=\"line\"><span class=\"symbol\">raw_input:</span> test</div><div class=\"line\"><span class=\"meta\">&gt;&gt;</span>&gt; input_A = input(<span class=\"string\">\"Input: \"</span>)</div><div class=\"line\"><span class=\"symbol\">Input:</span> abc</div><div class=\"line\">Traceback (most recent call last):</div><div class=\"line\">  File <span class=\"string\">\"&lt;stdin&gt;\"</span>, line <span class=\"number\">1</span>, <span class=\"keyword\">in</span> &lt;<span class=\"class\"><span class=\"keyword\">module</span>&gt;</span></div><div class=\"line\">  File <span class=\"string\">\"&lt;string&gt;\"</span>, line <span class=\"number\">1</span>, <span class=\"keyword\">in</span> &lt;<span class=\"class\"><span class=\"keyword\">module</span>&gt;</span></div><div class=\"line\"><span class=\"symbol\">NameError:</span> name <span class=\"string\">'abc'</span> is <span class=\"keyword\">not</span> <span class=\"keyword\">defined</span></div></pre></td></tr></table></figure>\n</li>\n<li><p>例子2</p>\n  <figure class=\"highlight elm\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">&gt;&gt;&gt; raw_input_B = raw_input(<span class=\"string\">\"raw_input: \"</span>)</div><div class=\"line\"><span class=\"title\">raw_input</span>: <span class=\"number\">123</span></div><div class=\"line\">&gt;&gt;&gt; <span class=\"keyword\">type</span>(raw_input_B)</div><div class=\"line\">&lt;<span class=\"keyword\">type</span> 'str'&gt;</div><div class=\"line\">&gt;&gt;&gt; input_B = input(<span class=\"string\">\"input: \"</span>)</div><div class=\"line\"><span class=\"title\">input</span>: <span class=\"number\">123</span></div><div class=\"line\">&gt;&gt;&gt; <span class=\"keyword\">type</span>(input_B)</div><div class=\"line\">&lt;<span class=\"keyword\">type</span> 'int'&gt;</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>例子1 可以看到：这两个函数均能接收 字符串 ，但 raw_input() 直接读取控制台的输入（任何类型的输入它都可以接收）。而对于 input() ，它希望能够读取一个合法的 python 表达式，即你输入字符串的时候必须使用引号将它括起来，否则它会引发一个 SyntaxError 。</p>\n<p>例子2 可以看到：raw_input() 将所有输入作为字符串看待，返回字符串类型。而 input() 在对待纯数字输入时具有自己的特性，它返回所输入的数字的类型（ int, float ）；同时在例子 1 知道，input() 可接受合法的 python 表达式，举例：input( 1 + 3 ) 会返回 int 型的 4 。</p>\n<p>查看 <a href=\"https://docs.python.org/2/library/functions.html#built-in-functions\" target=\"_blank\" rel=\"external\">Built-in Functions</a> ，得知：<br><figure class=\"highlight lisp\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">input([prompt])</div><div class=\"line\">    Equivalent to eval(<span class=\"name\">raw_input</span>(<span class=\"name\">prompt</span>))</div></pre></td></tr></table></figure></p>\n<p>input() 本质上还是使用 raw_input() 来实现的，只是调用完 raw_input() 之后再调用 eval() 函数，所以，你甚至可以将表达式作为 input() 的参数，并且它会计算表达式的值并返回它。</p>\n<p>不过在 Built-in Functions 里有一句话是这样写的：Consider using the raw_input() function for general input from users.</p>\n<p>除非对 input() 有特别需要，否则一般情况下我们都是推荐使用 raw_input() 来与用户交互。</p>\n<hr>\n<p><img src=\"http://huangyan.qiniudn.com/python-cha.jpg?imageMogr2/thumbnail/400x200\" alt=\"python\" title=\"python\"><br>使用了 raw_input() 接受整数（返回的是字符串）并再用一行语句返回整型数据。</p>\n","excerpt":"","more":"<h1 id=\"raw-input-与-input\"><a href=\"#raw-input-与-input\" class=\"headerlink\" title=\"raw_input() 与 input()\"></a>raw_input() 与 input()</h1><p>这两个均是 python 的内建函数，通过读取控制台的输入与用户实现交互。但他们的功能不尽相同。举两个小例子。</p>\n<ul>\n<li><p>例子1</p>\n  <figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">&gt;&gt;</span>&gt; raw_input_A = raw_input(<span class=\"string\">\"raw_input: \"</span>)</div><div class=\"line\"><span class=\"symbol\">raw_input:</span> test</div><div class=\"line\"><span class=\"meta\">&gt;&gt;</span>&gt; input_A = input(<span class=\"string\">\"Input: \"</span>)</div><div class=\"line\"><span class=\"symbol\">Input:</span> abc</div><div class=\"line\">Traceback (most recent call last):</div><div class=\"line\">  File <span class=\"string\">\"&lt;stdin&gt;\"</span>, line <span class=\"number\">1</span>, <span class=\"keyword\">in</span> &lt;<span class=\"class\"><span class=\"keyword\">module</span>&gt;</span></div><div class=\"line\">  File <span class=\"string\">\"&lt;string&gt;\"</span>, line <span class=\"number\">1</span>, <span class=\"keyword\">in</span> &lt;<span class=\"class\"><span class=\"keyword\">module</span>&gt;</span></div><div class=\"line\"><span class=\"symbol\">NameError:</span> name <span class=\"string\">'abc'</span> is <span class=\"keyword\">not</span> <span class=\"keyword\">defined</span></div></pre></td></tr></table></figure>\n</li>\n<li><p>例子2</p>\n  <figure class=\"highlight elm\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">&gt;&gt;&gt; raw_input_B = raw_input(<span class=\"string\">\"raw_input: \"</span>)</div><div class=\"line\"><span class=\"title\">raw_input</span>: <span class=\"number\">123</span></div><div class=\"line\">&gt;&gt;&gt; <span class=\"keyword\">type</span>(raw_input_B)</div><div class=\"line\">&lt;<span class=\"keyword\">type</span> 'str'&gt;</div><div class=\"line\">&gt;&gt;&gt; input_B = input(<span class=\"string\">\"input: \"</span>)</div><div class=\"line\"><span class=\"title\">input</span>: <span class=\"number\">123</span></div><div class=\"line\">&gt;&gt;&gt; <span class=\"keyword\">type</span>(input_B)</div><div class=\"line\">&lt;<span class=\"keyword\">type</span> 'int'&gt;</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>例子1 可以看到：这两个函数均能接收 字符串 ，但 raw_input() 直接读取控制台的输入（任何类型的输入它都可以接收）。而对于 input() ，它希望能够读取一个合法的 python 表达式，即你输入字符串的时候必须使用引号将它括起来，否则它会引发一个 SyntaxError 。</p>\n<p>例子2 可以看到：raw_input() 将所有输入作为字符串看待，返回字符串类型。而 input() 在对待纯数字输入时具有自己的特性，它返回所输入的数字的类型（ int, float ）；同时在例子 1 知道，input() 可接受合法的 python 表达式，举例：input( 1 + 3 ) 会返回 int 型的 4 。</p>\n<p>查看 <a href=\"https://docs.python.org/2/library/functions.html#built-in-functions\">Built-in Functions</a> ，得知：<br><figure class=\"highlight lisp\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">input([prompt])</div><div class=\"line\">    Equivalent to eval(<span class=\"name\">raw_input</span>(<span class=\"name\">prompt</span>))</div></pre></td></tr></table></figure></p>\n<p>input() 本质上还是使用 raw_input() 来实现的，只是调用完 raw_input() 之后再调用 eval() 函数，所以，你甚至可以将表达式作为 input() 的参数，并且它会计算表达式的值并返回它。</p>\n<p>不过在 Built-in Functions 里有一句话是这样写的：Consider using the raw_input() function for general input from users.</p>\n<p>除非对 input() 有特别需要，否则一般情况下我们都是推荐使用 raw_input() 来与用户交互。</p>\n<hr>\n<p><img src=\"http://huangyan.qiniudn.com/python-cha.jpg?imageMogr2/thumbnail/400x200\" alt=\"python\" title=\"python\"><br>使用了 raw_input() 接受整数（返回的是字符串）并再用一行语句返回整型数据。</p>\n"},{"title":"python列表解析","date":"2015-10-30T09:51:36.000Z","_content":"\n\n列表解析\n===================\n简单介绍\n--------------\n在一个序列的值上应用一个任意表达式，将其结果收集到一个新的列表中并返回。它的基本形式是一个方括号里面包含一个for语句对一个iterable对象迭代\n```\n>>> res=[ord(x) for x in 'spam']\n>>> res  \n[115, 112, 97, 109]  \n>>> [x**2 for x in range(10)]  \n[0, 1, 4, 9, 16, 25, 36, 49, 64, 81]  \n```\n[--ord函数](http://cyan-blue.github.io/2015/10/30/python之ord/)\n\n增加判断语句和嵌套循环\n--------------\n<code style=\"color:green\">[expression for target1 in iterable1 [if condition1]...\n                      for targetn in iterablen [if conditionn] ]</code>\n\n上面是列表解析中，任意数量嵌套的for循环同时关联可选的if 测试，其中if 表示测试语句是可选的，如果没有的话，就是我们上面的例子，注意for上下之间表示的是一个嵌套关系。\n第一个是表达式，比较形式[(x,y), [0,2,4],[1,3]]与下面形式的区别\n```\nIn [1]: [(x,y) for x in range(5) if x % 2==0 for y in range(5) if y % 2 ==1] \nOut[1]: [(0, 1), (0, 3), (2, 1), (2, 3), (4, 1), (4, 3)] \n```\nmap、lambda、filter的组合同样会达到一个进行测试的效果，但是如何实现嵌套我现在不太清楚\n```\nIn [4]: list(map((lambda x:x**2),filter((lambda x:x%2==0),range(10))))  \nOut[4]: [0, 4, 16, 36, 64] \n```\n因为map的逻辑是每次都从后面序列中取出一个，以最少的为标准。\n```\nIn [12]: list(map((lambda x,y:(x,y)),filter((lambda x:x%2==0),range(5)),filter((lambda y:y%2==0),range(5))))\nOut[12]: [(0, 0), (2, 2), (4, 4)]\n\nIn [13]: list(map((lambda x,y:(x,y)),filter((lambda x:x%2==1),range(5)),filter((lambda y:y%2==1),range(5))))\nOut[13]: [(1, 1), (3, 3)] \n```\n\n\n<span style=\"color:red\">列表解析map和列表解析是在解释器中以c语言的速度来运行，比python的for循环代码在pvm中运行要快的多。</span>\n```\nIn [25]: open(\"test.txt\").readlines()\nOut[25]: ['aaa\\n', 'bbb\\n', 'ccc\\n']\n\nIn [27]: [line.rstrip() for line in open(\"test.txt\").readlines()]  #消除文件中的换行  \nOut[27]: ['aaa', 'bbb', 'ccc']\n\nIn [28]: [line.rstrip() for line in open(\"test.txt\")]\nOut[28]: ['aaa', 'bbb', 'ccc']\n\nIn [29]: list(map((lambda line: line.rstrip()), open(\"test.txt\")))\nOut[29]: ['aaa', 'bbb', 'ccc']\n \n```\n\n* 第一种方式：因为readlines()方法，把整个文件都放入到内存中。然后对string进行解析\n* 第二种方式：使用了文件迭代器，进行列表解析。\n* 第三种方式：Map同样使用了文件迭代器，但是它不是列表解析，因为它两边不是[]引起来的。\n上面二，三方式使用了迭代器，都不会一次性构建列表，所以节省了内存空间。\n\n\n![python](http://huangyan.qiniudn.com/xiigua.jpg?imageMogr2/thumbnail/400x200 \"python\")","source":"_posts/2015/10/30/python列表解析.md","raw":"title: python列表解析\ndate: 2015-10-30 17:51:36\ncategories:\n- Python\ntags:\n- Python\n---\n\n\n列表解析\n===================\n简单介绍\n--------------\n在一个序列的值上应用一个任意表达式，将其结果收集到一个新的列表中并返回。它的基本形式是一个方括号里面包含一个for语句对一个iterable对象迭代\n```\n>>> res=[ord(x) for x in 'spam']\n>>> res  \n[115, 112, 97, 109]  \n>>> [x**2 for x in range(10)]  \n[0, 1, 4, 9, 16, 25, 36, 49, 64, 81]  \n```\n[--ord函数](http://cyan-blue.github.io/2015/10/30/python之ord/)\n\n增加判断语句和嵌套循环\n--------------\n<code style=\"color:green\">[expression for target1 in iterable1 [if condition1]...\n                      for targetn in iterablen [if conditionn] ]</code>\n\n上面是列表解析中，任意数量嵌套的for循环同时关联可选的if 测试，其中if 表示测试语句是可选的，如果没有的话，就是我们上面的例子，注意for上下之间表示的是一个嵌套关系。\n第一个是表达式，比较形式[(x,y), [0,2,4],[1,3]]与下面形式的区别\n```\nIn [1]: [(x,y) for x in range(5) if x % 2==0 for y in range(5) if y % 2 ==1] \nOut[1]: [(0, 1), (0, 3), (2, 1), (2, 3), (4, 1), (4, 3)] \n```\nmap、lambda、filter的组合同样会达到一个进行测试的效果，但是如何实现嵌套我现在不太清楚\n```\nIn [4]: list(map((lambda x:x**2),filter((lambda x:x%2==0),range(10))))  \nOut[4]: [0, 4, 16, 36, 64] \n```\n因为map的逻辑是每次都从后面序列中取出一个，以最少的为标准。\n```\nIn [12]: list(map((lambda x,y:(x,y)),filter((lambda x:x%2==0),range(5)),filter((lambda y:y%2==0),range(5))))\nOut[12]: [(0, 0), (2, 2), (4, 4)]\n\nIn [13]: list(map((lambda x,y:(x,y)),filter((lambda x:x%2==1),range(5)),filter((lambda y:y%2==1),range(5))))\nOut[13]: [(1, 1), (3, 3)] \n```\n\n\n<span style=\"color:red\">列表解析map和列表解析是在解释器中以c语言的速度来运行，比python的for循环代码在pvm中运行要快的多。</span>\n```\nIn [25]: open(\"test.txt\").readlines()\nOut[25]: ['aaa\\n', 'bbb\\n', 'ccc\\n']\n\nIn [27]: [line.rstrip() for line in open(\"test.txt\").readlines()]  #消除文件中的换行  \nOut[27]: ['aaa', 'bbb', 'ccc']\n\nIn [28]: [line.rstrip() for line in open(\"test.txt\")]\nOut[28]: ['aaa', 'bbb', 'ccc']\n\nIn [29]: list(map((lambda line: line.rstrip()), open(\"test.txt\")))\nOut[29]: ['aaa', 'bbb', 'ccc']\n \n```\n\n* 第一种方式：因为readlines()方法，把整个文件都放入到内存中。然后对string进行解析\n* 第二种方式：使用了文件迭代器，进行列表解析。\n* 第三种方式：Map同样使用了文件迭代器，但是它不是列表解析，因为它两边不是[]引起来的。\n上面二，三方式使用了迭代器，都不会一次性构建列表，所以节省了内存空间。\n\n\n![python](http://huangyan.qiniudn.com/xiigua.jpg?imageMogr2/thumbnail/400x200 \"python\")","slug":"python列表解析","published":1,"updated":"2016-06-29T15:29:25.175Z","_id":"cik3sv4yq002p0s37i4j3jjup","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"列表解析\"><a href=\"#列表解析\" class=\"headerlink\" title=\"列表解析\"></a>列表解析</h1><h2 id=\"简单介绍\"><a href=\"#简单介绍\" class=\"headerlink\" title=\"简单介绍\"></a>简单介绍</h2><p>在一个序列的值上应用一个任意表达式，将其结果收集到一个新的列表中并返回。它的基本形式是一个方括号里面包含一个for语句对一个iterable对象迭代<br><figure class=\"highlight lsl\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">&gt;&gt;&gt; res=[ord(x) for x in 'spam']</div><div class=\"line\">&gt;&gt;&gt; res  </div><div class=\"line\">[<span class=\"number\">115</span>, <span class=\"number\">112</span>, <span class=\"number\">97</span>, <span class=\"number\">109</span>]  </div><div class=\"line\">&gt;&gt;&gt; [x**<span class=\"number\">2</span> for x in range(<span class=\"number\">10</span>)]  </div><div class=\"line\">[<span class=\"number\">0</span>, <span class=\"number\">1</span>, <span class=\"number\">4</span>, <span class=\"number\">9</span>, <span class=\"number\">16</span>, <span class=\"number\">25</span>, <span class=\"number\">36</span>, <span class=\"number\">49</span>, <span class=\"number\">64</span>, <span class=\"number\">81</span>]</div></pre></td></tr></table></figure></p>\n<p><a href=\"http://cyan-blue.github.io/2015/10/30/python之ord/\">–ord函数</a></p>\n<h2 id=\"增加判断语句和嵌套循环\"><a href=\"#增加判断语句和嵌套循环\" class=\"headerlink\" title=\"增加判断语句和嵌套循环\"></a>增加判断语句和嵌套循环</h2><p><code style=\"color:green\">[expression for target1 in iterable1 [if condition1]…<br>                      for targetn in iterablen [if conditionn] ]</code></p>\n<p>上面是列表解析中，任意数量嵌套的for循环同时关联可选的if 测试，其中if 表示测试语句是可选的，如果没有的话，就是我们上面的例子，注意for上下之间表示的是一个嵌套关系。<br>第一个是表达式，比较形式[(x,y), [0,2,4],[1,3]]与下面形式的区别<br><figure class=\"highlight ada\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">In</span> [<span class=\"number\">1</span>]: [(x,y) <span class=\"keyword\">for</span> x <span class=\"keyword\">in</span> <span class=\"keyword\">range</span>(<span class=\"number\">5</span>) <span class=\"keyword\">if</span> x % <span class=\"number\">2</span>==<span class=\"number\">0</span> <span class=\"keyword\">for</span> y <span class=\"keyword\">in</span> <span class=\"keyword\">range</span>(<span class=\"number\">5</span>) <span class=\"keyword\">if</span> y % <span class=\"number\">2</span> ==<span class=\"number\">1</span>] </div><div class=\"line\"><span class=\"keyword\">Out</span>[<span class=\"number\">1</span>]: [(<span class=\"number\">0</span>, <span class=\"number\">1</span>), (<span class=\"number\">0</span>, <span class=\"number\">3</span>), (<span class=\"number\">2</span>, <span class=\"number\">1</span>), (<span class=\"number\">2</span>, <span class=\"number\">3</span>), (<span class=\"number\">4</span>, <span class=\"number\">1</span>), (<span class=\"number\">4</span>, <span class=\"number\">3</span>)]</div></pre></td></tr></table></figure></p>\n<p>map、lambda、filter的组合同样会达到一个进行测试的效果，但是如何实现嵌套我现在不太清楚<br><figure class=\"highlight less\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">In <span class=\"selector-attr\">[4]</span>: <span class=\"selector-tag\">list</span>(map((lambda <span class=\"attribute\">x</span>:x**<span class=\"number\">2</span>),filter((lambda <span class=\"attribute\">x</span>:x%<span class=\"number\">2</span>==<span class=\"number\">0</span>),range(<span class=\"number\">10</span>))))  </div><div class=\"line\"><span class=\"selector-tag\">Out</span><span class=\"selector-attr\">[4]</span>: <span class=\"selector-attr\">[0, 4, 16, 36, 64]</span></div></pre></td></tr></table></figure></p>\n<p>因为map的逻辑是每次都从后面序列中取出一个，以最少的为标准。<br><figure class=\"highlight less\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">In <span class=\"selector-attr\">[12]</span>: <span class=\"selector-tag\">list</span>(map((lambda x,<span class=\"attribute\">y</span>:(x,y)),filter((lambda <span class=\"attribute\">x</span>:x%<span class=\"number\">2</span>==<span class=\"number\">0</span>),range(<span class=\"number\">5</span>)),filter((lambda <span class=\"attribute\">y</span>:y%<span class=\"number\">2</span>==<span class=\"number\">0</span>),range(<span class=\"number\">5</span>))))</div><div class=\"line\"><span class=\"selector-tag\">Out</span><span class=\"selector-attr\">[12]</span>: <span class=\"selector-attr\">[(0, 0), (2, 2), (4, 4)]</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"selector-tag\">In</span> <span class=\"selector-attr\">[13]</span>: <span class=\"selector-tag\">list</span>(map((lambda x,<span class=\"attribute\">y</span>:(x,y)),filter((lambda <span class=\"attribute\">x</span>:x%<span class=\"number\">2</span>==<span class=\"number\">1</span>),range(<span class=\"number\">5</span>)),filter((lambda <span class=\"attribute\">y</span>:y%<span class=\"number\">2</span>==<span class=\"number\">1</span>),range(<span class=\"number\">5</span>))))</div><div class=\"line\"><span class=\"selector-tag\">Out</span><span class=\"selector-attr\">[13]</span>: <span class=\"selector-attr\">[(1, 1), (3, 3)]</span></div></pre></td></tr></table></figure></p>\n<p><span style=\"color:red\">列表解析map和列表解析是在解释器中以c语言的速度来运行，比python的for循环代码在pvm中运行要快的多。</span><br><figure class=\"highlight vhdl\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">In</span> [<span class=\"number\">25</span>]: <span class=\"keyword\">open</span>(<span class=\"string\">\"test.txt\"</span>).readlines()</div><div class=\"line\"><span class=\"keyword\">Out</span>[<span class=\"number\">25</span>]: [<span class=\"symbol\">'aaa\\n</span>', <span class=\"symbol\">'bbb\\n</span>', <span class=\"symbol\">'ccc\\n</span>']</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">In</span> [<span class=\"number\">27</span>]: [line.rstrip() <span class=\"keyword\">for</span> line <span class=\"keyword\">in</span> <span class=\"keyword\">open</span>(<span class=\"string\">\"test.txt\"</span>).readlines()]  #消除文件中的换行  </div><div class=\"line\"><span class=\"keyword\">Out</span>[<span class=\"number\">27</span>]: [<span class=\"symbol\">'aaa</span>', <span class=\"symbol\">'bbb</span>', <span class=\"symbol\">'ccc</span>']</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">In</span> [<span class=\"number\">28</span>]: [line.rstrip() <span class=\"keyword\">for</span> line <span class=\"keyword\">in</span> <span class=\"keyword\">open</span>(<span class=\"string\">\"test.txt\"</span>)]</div><div class=\"line\"><span class=\"keyword\">Out</span>[<span class=\"number\">28</span>]: [<span class=\"symbol\">'aaa</span>', <span class=\"symbol\">'bbb</span>', <span class=\"symbol\">'ccc</span>']</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">In</span> [<span class=\"number\">29</span>]: list(<span class=\"keyword\">map</span>((lambda line: line.rstrip()), <span class=\"keyword\">open</span>(<span class=\"string\">\"test.txt\"</span>)))</div><div class=\"line\"><span class=\"keyword\">Out</span>[<span class=\"number\">29</span>]: [<span class=\"symbol\">'aaa</span>', <span class=\"symbol\">'bbb</span>', <span class=\"symbol\">'ccc</span>']</div></pre></td></tr></table></figure></p>\n<ul>\n<li>第一种方式：因为readlines()方法，把整个文件都放入到内存中。然后对string进行解析</li>\n<li>第二种方式：使用了文件迭代器，进行列表解析。</li>\n<li>第三种方式：Map同样使用了文件迭代器，但是它不是列表解析，因为它两边不是[]引起来的。<br>上面二，三方式使用了迭代器，都不会一次性构建列表，所以节省了内存空间。</li>\n</ul>\n<p><img src=\"http://huangyan.qiniudn.com/xiigua.jpg?imageMogr2/thumbnail/400x200\" alt=\"python\" title=\"python\"></p>\n","excerpt":"","more":"<h1 id=\"列表解析\"><a href=\"#列表解析\" class=\"headerlink\" title=\"列表解析\"></a>列表解析</h1><h2 id=\"简单介绍\"><a href=\"#简单介绍\" class=\"headerlink\" title=\"简单介绍\"></a>简单介绍</h2><p>在一个序列的值上应用一个任意表达式，将其结果收集到一个新的列表中并返回。它的基本形式是一个方括号里面包含一个for语句对一个iterable对象迭代<br><figure class=\"highlight lsl\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">&gt;&gt;&gt; res=[ord(x) for x in 'spam']</div><div class=\"line\">&gt;&gt;&gt; res  </div><div class=\"line\">[<span class=\"number\">115</span>, <span class=\"number\">112</span>, <span class=\"number\">97</span>, <span class=\"number\">109</span>]  </div><div class=\"line\">&gt;&gt;&gt; [x**<span class=\"number\">2</span> for x in range(<span class=\"number\">10</span>)]  </div><div class=\"line\">[<span class=\"number\">0</span>, <span class=\"number\">1</span>, <span class=\"number\">4</span>, <span class=\"number\">9</span>, <span class=\"number\">16</span>, <span class=\"number\">25</span>, <span class=\"number\">36</span>, <span class=\"number\">49</span>, <span class=\"number\">64</span>, <span class=\"number\">81</span>]</div></pre></td></tr></table></figure></p>\n<p><a href=\"http://cyan-blue.github.io/2015/10/30/python之ord/\">–ord函数</a></p>\n<h2 id=\"增加判断语句和嵌套循环\"><a href=\"#增加判断语句和嵌套循环\" class=\"headerlink\" title=\"增加判断语句和嵌套循环\"></a>增加判断语句和嵌套循环</h2><p><code style=\"color:green\">[expression for target1 in iterable1 [if condition1]…<br>                      for targetn in iterablen [if conditionn] ]</code></p>\n<p>上面是列表解析中，任意数量嵌套的for循环同时关联可选的if 测试，其中if 表示测试语句是可选的，如果没有的话，就是我们上面的例子，注意for上下之间表示的是一个嵌套关系。<br>第一个是表达式，比较形式[(x,y), [0,2,4],[1,3]]与下面形式的区别<br><figure class=\"highlight ada\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">In</span> [<span class=\"number\">1</span>]: [(x,y) <span class=\"keyword\">for</span> x <span class=\"keyword\">in</span> <span class=\"keyword\">range</span>(<span class=\"number\">5</span>) <span class=\"keyword\">if</span> x % <span class=\"number\">2</span>==<span class=\"number\">0</span> <span class=\"keyword\">for</span> y <span class=\"keyword\">in</span> <span class=\"keyword\">range</span>(<span class=\"number\">5</span>) <span class=\"keyword\">if</span> y % <span class=\"number\">2</span> ==<span class=\"number\">1</span>] </div><div class=\"line\"><span class=\"keyword\">Out</span>[<span class=\"number\">1</span>]: [(<span class=\"number\">0</span>, <span class=\"number\">1</span>), (<span class=\"number\">0</span>, <span class=\"number\">3</span>), (<span class=\"number\">2</span>, <span class=\"number\">1</span>), (<span class=\"number\">2</span>, <span class=\"number\">3</span>), (<span class=\"number\">4</span>, <span class=\"number\">1</span>), (<span class=\"number\">4</span>, <span class=\"number\">3</span>)]</div></pre></td></tr></table></figure></p>\n<p>map、lambda、filter的组合同样会达到一个进行测试的效果，但是如何实现嵌套我现在不太清楚<br><figure class=\"highlight less\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">In <span class=\"selector-attr\">[4]</span>: <span class=\"selector-tag\">list</span>(map((lambda <span class=\"attribute\">x</span>:x**<span class=\"number\">2</span>),filter((lambda <span class=\"attribute\">x</span>:x%<span class=\"number\">2</span>==<span class=\"number\">0</span>),range(<span class=\"number\">10</span>))))  </div><div class=\"line\"><span class=\"selector-tag\">Out</span><span class=\"selector-attr\">[4]</span>: <span class=\"selector-attr\">[0, 4, 16, 36, 64]</span></div></pre></td></tr></table></figure></p>\n<p>因为map的逻辑是每次都从后面序列中取出一个，以最少的为标准。<br><figure class=\"highlight less\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">In <span class=\"selector-attr\">[12]</span>: <span class=\"selector-tag\">list</span>(map((lambda x,<span class=\"attribute\">y</span>:(x,y)),filter((lambda <span class=\"attribute\">x</span>:x%<span class=\"number\">2</span>==<span class=\"number\">0</span>),range(<span class=\"number\">5</span>)),filter((lambda <span class=\"attribute\">y</span>:y%<span class=\"number\">2</span>==<span class=\"number\">0</span>),range(<span class=\"number\">5</span>))))</div><div class=\"line\"><span class=\"selector-tag\">Out</span><span class=\"selector-attr\">[12]</span>: <span class=\"selector-attr\">[(0, 0), (2, 2), (4, 4)]</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"selector-tag\">In</span> <span class=\"selector-attr\">[13]</span>: <span class=\"selector-tag\">list</span>(map((lambda x,<span class=\"attribute\">y</span>:(x,y)),filter((lambda <span class=\"attribute\">x</span>:x%<span class=\"number\">2</span>==<span class=\"number\">1</span>),range(<span class=\"number\">5</span>)),filter((lambda <span class=\"attribute\">y</span>:y%<span class=\"number\">2</span>==<span class=\"number\">1</span>),range(<span class=\"number\">5</span>))))</div><div class=\"line\"><span class=\"selector-tag\">Out</span><span class=\"selector-attr\">[13]</span>: <span class=\"selector-attr\">[(1, 1), (3, 3)]</span></div></pre></td></tr></table></figure></p>\n<p><span style=\"color:red\">列表解析map和列表解析是在解释器中以c语言的速度来运行，比python的for循环代码在pvm中运行要快的多。</span><br><figure class=\"highlight vhdl\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">In</span> [<span class=\"number\">25</span>]: <span class=\"keyword\">open</span>(<span class=\"string\">\"test.txt\"</span>).readlines()</div><div class=\"line\"><span class=\"keyword\">Out</span>[<span class=\"number\">25</span>]: [<span class=\"symbol\">'aaa\\n</span>', <span class=\"symbol\">'bbb\\n</span>', <span class=\"symbol\">'ccc\\n</span>']</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">In</span> [<span class=\"number\">27</span>]: [line.rstrip() <span class=\"keyword\">for</span> line <span class=\"keyword\">in</span> <span class=\"keyword\">open</span>(<span class=\"string\">\"test.txt\"</span>).readlines()]  #消除文件中的换行  </div><div class=\"line\"><span class=\"keyword\">Out</span>[<span class=\"number\">27</span>]: [<span class=\"symbol\">'aaa</span>', <span class=\"symbol\">'bbb</span>', <span class=\"symbol\">'ccc</span>']</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">In</span> [<span class=\"number\">28</span>]: [line.rstrip() <span class=\"keyword\">for</span> line <span class=\"keyword\">in</span> <span class=\"keyword\">open</span>(<span class=\"string\">\"test.txt\"</span>)]</div><div class=\"line\"><span class=\"keyword\">Out</span>[<span class=\"number\">28</span>]: [<span class=\"symbol\">'aaa</span>', <span class=\"symbol\">'bbb</span>', <span class=\"symbol\">'ccc</span>']</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">In</span> [<span class=\"number\">29</span>]: list(<span class=\"keyword\">map</span>((lambda line: line.rstrip()), <span class=\"keyword\">open</span>(<span class=\"string\">\"test.txt\"</span>)))</div><div class=\"line\"><span class=\"keyword\">Out</span>[<span class=\"number\">29</span>]: [<span class=\"symbol\">'aaa</span>', <span class=\"symbol\">'bbb</span>', <span class=\"symbol\">'ccc</span>']</div></pre></td></tr></table></figure></p>\n<ul>\n<li>第一种方式：因为readlines()方法，把整个文件都放入到内存中。然后对string进行解析</li>\n<li>第二种方式：使用了文件迭代器，进行列表解析。</li>\n<li>第三种方式：Map同样使用了文件迭代器，但是它不是列表解析，因为它两边不是[]引起来的。<br>上面二，三方式使用了迭代器，都不会一次性构建列表，所以节省了内存空间。</li>\n</ul>\n<p><img src=\"http://huangyan.qiniudn.com/xiigua.jpg?imageMogr2/thumbnail/400x200\" alt=\"python\" title=\"python\"></p>\n"},{"title":"python之ord&unichr&chr","date":"2015-10-30T11:54:32.000Z","_content":"\n\nchr()、unichr()和ord()\n==================\nchr()\n---------------\n* chr()函数用一个范围在range（256）内的（就是0～255）整数作参数，返回一个对应的字符。\n\t\n\t```\n\tIn [6]: chr(65)\n\tOut[6]: 'A'\n\t\n\t```\n* 如果参数超过255,则会出现一下情况：\n\t```\n\tIn [7]: chr(256)\n\t---------------------------------------------------------------------------\n\tValueError                                Traceback (most recent call last)\n\t/home/yann/<ipython-input-7-d39eeb802699> in <module>()\n\t----> 1 chr(1230312)\n\t\n\tValueError: chr() arg not in range(256)\n\t\n\t```\nunichr()\n----------------\nunichr()跟它一样，只不过返回的是Unicode字符，这个从Python 2.0才加入的unichr()的参数范围依赖于你的Python是如何被编译的。\n* 如果是配置为USC2的Unicode，那么它的允许范围就是range（65536）或0x0000-0xFFFF；\n* 如果配置为UCS4，那么这个值应该是range（1114112）或0x000000-0x110000。如果提供的参数不在允许的范围内，也会报一个ValueError的异常。\n\t```\n\tIn [20]: unichr(1114111)\n\tOut[20]: u'\\U0010ffff'\n\t\n\tIn [21]: unichr(1114112)\n\t---------------------------------------------------------------------------\n\tValueError                                Traceback (most recent call last)\n\t/home/yann/<ipython-input-21-37377890b3ae> in <module>()\n\t----> 1 unichr(1114112)\n\t\n\tValueError: unichr() arg not in range(0x110000) (wide Python build)\n\t\n\t```\n\nord()\n--------------\nord()函数是chr()函数（对于8位的ASCII字符串）或unichr()函数（对于Unicode对象）的配对函数，它以一个字符（长度为1的字符串）作为参数，返回对应的ASCII数值，或者Unicode数值，如果所给的Unicode字符超出了你的Python定义范围，则会引发一个TypeError的异常。\n```\nIn [39]: ord(u'\\uffff')\nOut[39]: 65535\n\nIn [40]: ord(u'\\ufffff')\n---------------------------------------------------------------------------\nTypeError                                 Traceback (most recent call last)\n/home/yann/<ipython-input-40-a3e8d80a6141> in <module>()\n----> 1 ord(u'\\ufffff')\n\nTypeError: ord() expected a character, but string of length 2 found\n\n```\n\n![python](http://huangyan.qiniudn.com/bird.jpg?imageMogr2/thumbnail/400x200 \"python\")","source":"_posts/2015/10/30/python之ord.md","raw":"title: python之ord&unichr&chr\ndate: 2015-10-30 19:54:32\ncategories:\n- Python\ntags: Python\n---\n\n\nchr()、unichr()和ord()\n==================\nchr()\n---------------\n* chr()函数用一个范围在range（256）内的（就是0～255）整数作参数，返回一个对应的字符。\n\t\n\t```\n\tIn [6]: chr(65)\n\tOut[6]: 'A'\n\t\n\t```\n* 如果参数超过255,则会出现一下情况：\n\t```\n\tIn [7]: chr(256)\n\t---------------------------------------------------------------------------\n\tValueError                                Traceback (most recent call last)\n\t/home/yann/<ipython-input-7-d39eeb802699> in <module>()\n\t----> 1 chr(1230312)\n\t\n\tValueError: chr() arg not in range(256)\n\t\n\t```\nunichr()\n----------------\nunichr()跟它一样，只不过返回的是Unicode字符，这个从Python 2.0才加入的unichr()的参数范围依赖于你的Python是如何被编译的。\n* 如果是配置为USC2的Unicode，那么它的允许范围就是range（65536）或0x0000-0xFFFF；\n* 如果配置为UCS4，那么这个值应该是range（1114112）或0x000000-0x110000。如果提供的参数不在允许的范围内，也会报一个ValueError的异常。\n\t```\n\tIn [20]: unichr(1114111)\n\tOut[20]: u'\\U0010ffff'\n\t\n\tIn [21]: unichr(1114112)\n\t---------------------------------------------------------------------------\n\tValueError                                Traceback (most recent call last)\n\t/home/yann/<ipython-input-21-37377890b3ae> in <module>()\n\t----> 1 unichr(1114112)\n\t\n\tValueError: unichr() arg not in range(0x110000) (wide Python build)\n\t\n\t```\n\nord()\n--------------\nord()函数是chr()函数（对于8位的ASCII字符串）或unichr()函数（对于Unicode对象）的配对函数，它以一个字符（长度为1的字符串）作为参数，返回对应的ASCII数值，或者Unicode数值，如果所给的Unicode字符超出了你的Python定义范围，则会引发一个TypeError的异常。\n```\nIn [39]: ord(u'\\uffff')\nOut[39]: 65535\n\nIn [40]: ord(u'\\ufffff')\n---------------------------------------------------------------------------\nTypeError                                 Traceback (most recent call last)\n/home/yann/<ipython-input-40-a3e8d80a6141> in <module>()\n----> 1 ord(u'\\ufffff')\n\nTypeError: ord() expected a character, but string of length 2 found\n\n```\n\n![python](http://huangyan.qiniudn.com/bird.jpg?imageMogr2/thumbnail/400x200 \"python\")","slug":"python之ord","published":1,"updated":"2016-06-29T15:29:25.175Z","_id":"cik3sv4yy002s0s370gkop9xc","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"chr-、unichr-和ord\"><a href=\"#chr-、unichr-和ord\" class=\"headerlink\" title=\"chr()、unichr()和ord()\"></a>chr()、unichr()和ord()</h1><h2 id=\"chr\"><a href=\"#chr\" class=\"headerlink\" title=\"chr()\"></a>chr()</h2><ul>\n<li><p>chr()函数用一个范围在range（256）内的（就是0～255）整数作参数，返回一个对应的字符。</p>\n  <figure class=\"highlight ada\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">In</span> [<span class=\"number\">6</span>]: chr(<span class=\"number\">65</span>)</div><div class=\"line\"><span class=\"keyword\">Out</span>[<span class=\"number\">6</span>]: <span class=\"string\">'A'</span></div></pre></td></tr></table></figure>\n</li>\n<li><p>如果参数超过255,则会出现一下情况：</p>\n  <figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">In [7]: chr(256)</div><div class=\"line\"><span class=\"comment\">---------------------------------------------------------------------------</span></div><div class=\"line\">ValueError                                Traceback (most recent <span class=\"keyword\">call</span> <span class=\"keyword\">last</span>)</div><div class=\"line\">/home/yann/&lt;ipython-<span class=\"keyword\">input</span><span class=\"number\">-7</span>-d39eeb802699&gt; <span class=\"keyword\">in</span> &lt;<span class=\"keyword\">module</span>&gt;()</div><div class=\"line\"><span class=\"comment\">----&gt; 1 chr(1230312)</span></div><div class=\"line\"></div><div class=\"line\">ValueError: <span class=\"keyword\">chr</span>() arg <span class=\"keyword\">not</span> <span class=\"keyword\">in</span> <span class=\"keyword\">range</span>(<span class=\"number\">256</span>)</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<h2 id=\"unichr\"><a href=\"#unichr\" class=\"headerlink\" title=\"unichr()\"></a>unichr()</h2><p>unichr()跟它一样，只不过返回的是Unicode字符，这个从Python 2.0才加入的unichr()的参数范围依赖于你的Python是如何被编译的。</p>\n<ul>\n<li>如果是配置为USC2的Unicode，那么它的允许范围就是range（65536）或0x0000-0xFFFF；</li>\n<li>如果配置为UCS4，那么这个值应该是range（1114112）或0x000000-0x110000。如果提供的参数不在允许的范围内，也会报一个ValueError的异常。  <figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">In [20]: unichr(1114111)</div><div class=\"line\">Out[20]: u'\\U0010ffff'</div><div class=\"line\"></div><div class=\"line\">In [21]: unichr(1114112)</div><div class=\"line\"><span class=\"comment\">---------------------------------------------------------------------------</span></div><div class=\"line\">ValueError                                Traceback (most recent <span class=\"keyword\">call</span> <span class=\"keyword\">last</span>)</div><div class=\"line\">/home/yann/&lt;ipython-<span class=\"keyword\">input</span><span class=\"number\">-21</span><span class=\"number\">-37377890</span>b3ae&gt; <span class=\"keyword\">in</span> &lt;<span class=\"keyword\">module</span>&gt;()</div><div class=\"line\"><span class=\"comment\">----&gt; 1 unichr(1114112)</span></div><div class=\"line\"></div><div class=\"line\">ValueError: unichr() arg <span class=\"keyword\">not</span> <span class=\"keyword\">in</span> <span class=\"keyword\">range</span>(<span class=\"number\">0x110000</span>) (wide Python <span class=\"keyword\">build</span>)</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<h2 id=\"ord\"><a href=\"#ord\" class=\"headerlink\" title=\"ord()\"></a>ord()</h2><p>ord()函数是chr()函数（对于8位的ASCII字符串）或unichr()函数（对于Unicode对象）的配对函数，它以一个字符（长度为1的字符串）作为参数，返回对应的ASCII数值，或者Unicode数值，如果所给的Unicode字符超出了你的Python定义范围，则会引发一个TypeError的异常。<br><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">In [39]: ord(u'\\uffff')</div><div class=\"line\">Out[39]: 65535</div><div class=\"line\"></div><div class=\"line\">In [40]: ord(u'\\ufffff')</div><div class=\"line\"><span class=\"comment\">---------------------------------------------------------------------------</span></div><div class=\"line\">TypeError                                 Traceback (most recent <span class=\"keyword\">call</span> <span class=\"keyword\">last</span>)</div><div class=\"line\">/home/yann/&lt;ipython-<span class=\"keyword\">input</span><span class=\"number\">-40</span>-a3e8d80a6141&gt; <span class=\"keyword\">in</span> &lt;<span class=\"keyword\">module</span>&gt;()</div><div class=\"line\"><span class=\"comment\">----&gt; 1 ord(u'\\ufffff')</span></div><div class=\"line\"></div><div class=\"line\">TypeError: <span class=\"keyword\">ord</span>() expected a <span class=\"built_in\">character</span>, but <span class=\"keyword\">string</span> <span class=\"keyword\">of</span> <span class=\"keyword\">length</span> <span class=\"number\">2</span> <span class=\"keyword\">found</span></div></pre></td></tr></table></figure></p>\n<p><img src=\"http://huangyan.qiniudn.com/bird.jpg?imageMogr2/thumbnail/400x200\" alt=\"python\" title=\"python\"></p>\n","excerpt":"","more":"<h1 id=\"chr-、unichr-和ord\"><a href=\"#chr-、unichr-和ord\" class=\"headerlink\" title=\"chr()、unichr()和ord()\"></a>chr()、unichr()和ord()</h1><h2 id=\"chr\"><a href=\"#chr\" class=\"headerlink\" title=\"chr()\"></a>chr()</h2><ul>\n<li><p>chr()函数用一个范围在range（256）内的（就是0～255）整数作参数，返回一个对应的字符。</p>\n  <figure class=\"highlight ada\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">In</span> [<span class=\"number\">6</span>]: chr(<span class=\"number\">65</span>)</div><div class=\"line\"><span class=\"keyword\">Out</span>[<span class=\"number\">6</span>]: <span class=\"string\">'A'</span></div></pre></td></tr></table></figure>\n</li>\n<li><p>如果参数超过255,则会出现一下情况：</p>\n  <figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">In [7]: chr(256)</div><div class=\"line\"><span class=\"comment\">---------------------------------------------------------------------------</span></div><div class=\"line\">ValueError                                Traceback (most recent <span class=\"keyword\">call</span> <span class=\"keyword\">last</span>)</div><div class=\"line\">/home/yann/&lt;ipython-<span class=\"keyword\">input</span><span class=\"number\">-7</span>-d39eeb802699&gt; <span class=\"keyword\">in</span> &lt;<span class=\"keyword\">module</span>&gt;()</div><div class=\"line\"><span class=\"comment\">----&gt; 1 chr(1230312)</span></div><div class=\"line\"></div><div class=\"line\">ValueError: <span class=\"keyword\">chr</span>() arg <span class=\"keyword\">not</span> <span class=\"keyword\">in</span> <span class=\"keyword\">range</span>(<span class=\"number\">256</span>)</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<h2 id=\"unichr\"><a href=\"#unichr\" class=\"headerlink\" title=\"unichr()\"></a>unichr()</h2><p>unichr()跟它一样，只不过返回的是Unicode字符，这个从Python 2.0才加入的unichr()的参数范围依赖于你的Python是如何被编译的。</p>\n<ul>\n<li>如果是配置为USC2的Unicode，那么它的允许范围就是range（65536）或0x0000-0xFFFF；</li>\n<li>如果配置为UCS4，那么这个值应该是range（1114112）或0x000000-0x110000。如果提供的参数不在允许的范围内，也会报一个ValueError的异常。  <figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">In [20]: unichr(1114111)</div><div class=\"line\">Out[20]: u'\\U0010ffff'</div><div class=\"line\"></div><div class=\"line\">In [21]: unichr(1114112)</div><div class=\"line\"><span class=\"comment\">---------------------------------------------------------------------------</span></div><div class=\"line\">ValueError                                Traceback (most recent <span class=\"keyword\">call</span> <span class=\"keyword\">last</span>)</div><div class=\"line\">/home/yann/&lt;ipython-<span class=\"keyword\">input</span><span class=\"number\">-21</span><span class=\"number\">-37377890</span>b3ae&gt; <span class=\"keyword\">in</span> &lt;<span class=\"keyword\">module</span>&gt;()</div><div class=\"line\"><span class=\"comment\">----&gt; 1 unichr(1114112)</span></div><div class=\"line\"></div><div class=\"line\">ValueError: unichr() arg <span class=\"keyword\">not</span> <span class=\"keyword\">in</span> <span class=\"keyword\">range</span>(<span class=\"number\">0x110000</span>) (wide Python <span class=\"keyword\">build</span>)</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<h2 id=\"ord\"><a href=\"#ord\" class=\"headerlink\" title=\"ord()\"></a>ord()</h2><p>ord()函数是chr()函数（对于8位的ASCII字符串）或unichr()函数（对于Unicode对象）的配对函数，它以一个字符（长度为1的字符串）作为参数，返回对应的ASCII数值，或者Unicode数值，如果所给的Unicode字符超出了你的Python定义范围，则会引发一个TypeError的异常。<br><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">In [39]: ord(u'\\uffff')</div><div class=\"line\">Out[39]: 65535</div><div class=\"line\"></div><div class=\"line\">In [40]: ord(u'\\ufffff')</div><div class=\"line\"><span class=\"comment\">---------------------------------------------------------------------------</span></div><div class=\"line\">TypeError                                 Traceback (most recent <span class=\"keyword\">call</span> <span class=\"keyword\">last</span>)</div><div class=\"line\">/home/yann/&lt;ipython-<span class=\"keyword\">input</span><span class=\"number\">-40</span>-a3e8d80a6141&gt; <span class=\"keyword\">in</span> &lt;<span class=\"keyword\">module</span>&gt;()</div><div class=\"line\"><span class=\"comment\">----&gt; 1 ord(u'\\ufffff')</span></div><div class=\"line\"></div><div class=\"line\">TypeError: <span class=\"keyword\">ord</span>() expected a <span class=\"built_in\">character</span>, but <span class=\"keyword\">string</span> <span class=\"keyword\">of</span> <span class=\"keyword\">length</span> <span class=\"number\">2</span> <span class=\"keyword\">found</span></div></pre></td></tr></table></figure></p>\n<p><img src=\"http://huangyan.qiniudn.com/bird.jpg?imageMogr2/thumbnail/400x200\" alt=\"python\" title=\"python\"></p>\n"},{"title":"html5之checkbox","date":"2015-10-30T11:34:03.000Z","_content":"","source":"_posts/2015/10/30/html5之checkbox.md","raw":"title: html5之checkbox\ndate: 2015-10-30 19:34:03\ntags:\n---\n","slug":"html5之checkbox","published":1,"updated":"2016-06-29T15:29:25.175Z","_id":"cik3sv4z1002v0s37uoglkou5","comments":1,"layout":"post","photos":[],"link":"","content":"","excerpt":"","more":""},{"title":"deleteLinux历史记录","date":"2015-10-30T08:03:07.000Z","_content":"\n![GEEK](http://huangyan.qiniudn.com/geek.jpg?imageMogr2/thumbnail/300x200 \"GEEK\")\n\n删除Linux系统下history记录的方法\n=================\n\n \n入侵时目标如果是linux服务器，看切忌清理痕迹的时候别忘记history命令的记录哦 \n \n1. 修改/etc/profile将HISTSIZE=1000改成0或1 \n \n清除用户home路径下。bash_history \n \n2. 立即清空里的history当前历史命令的记录 \n```\nhistory -c \n```\n \n3. bash执行命令时不是马上把命令名称写入history文件的，而是存放在内部的buffer中，等bash退出时会一并写入。 \n \n不过，可以调用'history -w'命令要求bash立即更新history文件。 \n```\nhistory -w\n```","source":"_posts/2015/10/30/deleteLinux历史记录.md","raw":"title: deleteLinux历史记录\ndate: 2015-10-30 16:03:07\ncategories:\n- Linux\ntags:\n- Linux\n---\n\n![GEEK](http://huangyan.qiniudn.com/geek.jpg?imageMogr2/thumbnail/300x200 \"GEEK\")\n\n删除Linux系统下history记录的方法\n=================\n\n \n入侵时目标如果是linux服务器，看切忌清理痕迹的时候别忘记history命令的记录哦 \n \n1. 修改/etc/profile将HISTSIZE=1000改成0或1 \n \n清除用户home路径下。bash_history \n \n2. 立即清空里的history当前历史命令的记录 \n```\nhistory -c \n```\n \n3. bash执行命令时不是马上把命令名称写入history文件的，而是存放在内部的buffer中，等bash退出时会一并写入。 \n \n不过，可以调用'history -w'命令要求bash立即更新history文件。 \n```\nhistory -w\n```","slug":"deleteLinux历史记录","published":1,"updated":"2016-06-29T15:29:25.175Z","_id":"cik3sv4z5002w0s37uxj26959","comments":1,"layout":"post","photos":[],"link":"","content":"<p><img src=\"http://huangyan.qiniudn.com/geek.jpg?imageMogr2/thumbnail/300x200\" alt=\"GEEK\" title=\"GEEK\"></p>\n<h1 id=\"删除Linux系统下history记录的方法\"><a href=\"#删除Linux系统下history记录的方法\" class=\"headerlink\" title=\"删除Linux系统下history记录的方法\"></a>删除Linux系统下history记录的方法</h1><p>入侵时目标如果是linux服务器，看切忌清理痕迹的时候别忘记history命令的记录哦 </p>\n<ol>\n<li>修改/etc/profile将HISTSIZE=1000改成0或1 </li>\n</ol>\n<p>清除用户home路径下。bash_history </p>\n<ol>\n<li>立即清空里的history当前历史命令的记录 <figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">history</span> -c</div></pre></td></tr></table></figure>\n</li>\n</ol>\n<ol>\n<li>bash执行命令时不是马上把命令名称写入history文件的，而是存放在内部的buffer中，等bash退出时会一并写入。 </li>\n</ol>\n<p>不过，可以调用’history -w’命令要求bash立即更新history文件。<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">history</span> -w</div></pre></td></tr></table></figure></p>\n","excerpt":"","more":"<p><img src=\"http://huangyan.qiniudn.com/geek.jpg?imageMogr2/thumbnail/300x200\" alt=\"GEEK\" title=\"GEEK\"></p>\n<h1 id=\"删除Linux系统下history记录的方法\"><a href=\"#删除Linux系统下history记录的方法\" class=\"headerlink\" title=\"删除Linux系统下history记录的方法\"></a>删除Linux系统下history记录的方法</h1><p>入侵时目标如果是linux服务器，看切忌清理痕迹的时候别忘记history命令的记录哦 </p>\n<ol>\n<li>修改/etc/profile将HISTSIZE=1000改成0或1 </li>\n</ol>\n<p>清除用户home路径下。bash_history </p>\n<ol>\n<li>立即清空里的history当前历史命令的记录 <figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">history</span> -c</div></pre></td></tr></table></figure>\n</li>\n</ol>\n<ol>\n<li>bash执行命令时不是马上把命令名称写入history文件的，而是存放在内部的buffer中，等bash退出时会一并写入。 </li>\n</ol>\n<p>不过，可以调用’history -w’命令要求bash立即更新history文件。<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">history</span> -w</div></pre></td></tr></table></figure></p>\n"},{"title":"Django中favicon.ico文件的配置","date":"2015-10-29T12:39:58.000Z","_content":"\nDjango中favicon.ico文件的配置\n=============\n\n默认情况下，浏览器访问一个网站的时候，同时还会向服务器请求“/favicon.ico”这个URL，目的是获取网站的图标。默认情况下，Django会返回404错误的，只是这个错误不会打印出来，并且浏览器接收到这个404错误后，也无伤大雅，因为没有图标就用默认的图标，所以这个错误也没有跟通常的404错误一样在网页上显示出来。\n不过我们还是应该给网站配置一个图标，这样用户体验会更好一些。\n配置favicon.ico文件，可以在url.py文件中这样配置：\n```\n# favicon.cio\nurl(r'^favicon\\.ico$', 'django.views.generic.simple.redirect_to', {'url':'/static/images/favicon.ico'}),\n```\n不过这个有个前提是在Django中，配置静态文件的支持。\n \n然后在static/images目录下放一个名为favicon.ico的图片就大功告成了。\n\n\n![一起使用django](http://huangyan.qiniudn.com/django-learn.png?imageMogr2/thumbnail/600x400 \"一起使用django\")","source":"_posts/2015/10/29/django-favicon.md","raw":"title: Django中favicon.ico文件的配置\ndate: 2015-10-29 20:39:58\ncategories:\n- Django\ntags:\n- Django\n---\n\nDjango中favicon.ico文件的配置\n=============\n\n默认情况下，浏览器访问一个网站的时候，同时还会向服务器请求“/favicon.ico”这个URL，目的是获取网站的图标。默认情况下，Django会返回404错误的，只是这个错误不会打印出来，并且浏览器接收到这个404错误后，也无伤大雅，因为没有图标就用默认的图标，所以这个错误也没有跟通常的404错误一样在网页上显示出来。\n不过我们还是应该给网站配置一个图标，这样用户体验会更好一些。\n配置favicon.ico文件，可以在url.py文件中这样配置：\n```\n# favicon.cio\nurl(r'^favicon\\.ico$', 'django.views.generic.simple.redirect_to', {'url':'/static/images/favicon.ico'}),\n```\n不过这个有个前提是在Django中，配置静态文件的支持。\n \n然后在static/images目录下放一个名为favicon.ico的图片就大功告成了。\n\n\n![一起使用django](http://huangyan.qiniudn.com/django-learn.png?imageMogr2/thumbnail/600x400 \"一起使用django\")","slug":"django-favicon","published":1,"updated":"2016-06-29T15:29:25.175Z","_id":"cik3sv4za002z0s37n2iuunlw","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"Django中favicon-ico文件的配置\"><a href=\"#Django中favicon-ico文件的配置\" class=\"headerlink\" title=\"Django中favicon.ico文件的配置\"></a>Django中favicon.ico文件的配置</h1><p>默认情况下，浏览器访问一个网站的时候，同时还会向服务器请求“/favicon.ico”这个URL，目的是获取网站的图标。默认情况下，Django会返回404错误的，只是这个错误不会打印出来，并且浏览器接收到这个404错误后，也无伤大雅，因为没有图标就用默认的图标，所以这个错误也没有跟通常的404错误一样在网页上显示出来。<br>不过我们还是应该给网站配置一个图标，这样用户体验会更好一些。<br>配置favicon.ico文件，可以在url.py文件中这样配置：<br><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># favicon.cio</span></div><div class=\"line\">url(<span class=\"string\">r'^favicon\\.ico$'</span>, <span class=\"string\">'django.views.generic.simple.redirect_to'</span>, &#123;<span class=\"string\">'url'</span>:<span class=\"string\">'/static/images/favicon.ico'</span>&#125;),</div></pre></td></tr></table></figure></p>\n<p>不过这个有个前提是在Django中，配置静态文件的支持。</p>\n<p>然后在static/images目录下放一个名为favicon.ico的图片就大功告成了。</p>\n<p><img src=\"http://huangyan.qiniudn.com/django-learn.png?imageMogr2/thumbnail/600x400\" alt=\"一起使用django\" title=\"一起使用django\"></p>\n","excerpt":"","more":"<h1 id=\"Django中favicon-ico文件的配置\"><a href=\"#Django中favicon-ico文件的配置\" class=\"headerlink\" title=\"Django中favicon.ico文件的配置\"></a>Django中favicon.ico文件的配置</h1><p>默认情况下，浏览器访问一个网站的时候，同时还会向服务器请求“/favicon.ico”这个URL，目的是获取网站的图标。默认情况下，Django会返回404错误的，只是这个错误不会打印出来，并且浏览器接收到这个404错误后，也无伤大雅，因为没有图标就用默认的图标，所以这个错误也没有跟通常的404错误一样在网页上显示出来。<br>不过我们还是应该给网站配置一个图标，这样用户体验会更好一些。<br>配置favicon.ico文件，可以在url.py文件中这样配置：<br><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># favicon.cio</span></div><div class=\"line\">url(<span class=\"string\">r'^favicon\\.ico$'</span>, <span class=\"string\">'django.views.generic.simple.redirect_to'</span>, &#123;<span class=\"string\">'url'</span>:<span class=\"string\">'/static/images/favicon.ico'</span>&#125;),</div></pre></td></tr></table></figure></p>\n<p>不过这个有个前提是在Django中，配置静态文件的支持。</p>\n<p>然后在static/images目录下放一个名为favicon.ico的图片就大功告成了。</p>\n<p><img src=\"http://huangyan.qiniudn.com/django-learn.png?imageMogr2/thumbnail/600x400\" alt=\"一起使用django\" title=\"一起使用django\"></p>\n"},{"title":"nodejs","date":"2015-10-24T10:02:24.000Z","_content":"安装\n=============\n安装 Node.js 的最佳方式是使用 nvm。\n\ncURL:\n```\n$ curl https://raw.github.com/creationix/nvm/master/install.sh | sh\n```\nWget:\n```\n\n$ wget -qO- https://raw.github.com/creationix/nvm/master/install.sh | sh\n```\n安装完成后，重启终端并执行下列命令即可安装 Node.js。\n```\n\n$ nvm install 0.10\n```\n\n","source":"_posts/2015/10/24/nodejs.md","raw":"title: nodejs\ndate: 2015-10-24 18:02:24\ncategories:\n- 前端\ntags:\n- NodeJs\n---\n安装\n=============\n安装 Node.js 的最佳方式是使用 nvm。\n\ncURL:\n```\n$ curl https://raw.github.com/creationix/nvm/master/install.sh | sh\n```\nWget:\n```\n\n$ wget -qO- https://raw.github.com/creationix/nvm/master/install.sh | sh\n```\n安装完成后，重启终端并执行下列命令即可安装 Node.js。\n```\n\n$ nvm install 0.10\n```\n\n","slug":"nodejs","published":1,"updated":"2016-06-29T15:29:25.175Z","_id":"cik3sv4zf00320s375srihzqs","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h1><p>安装 Node.js 的最佳方式是使用 nvm。</p>\n<p>cURL:<br><figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">$ curl http<span class=\"variable\">s:</span>//raw.github.<span class=\"keyword\">com</span>/creationix/nvm/master/install.<span class=\"keyword\">sh</span> | <span class=\"keyword\">sh</span></div></pre></td></tr></table></figure></p>\n<p>Wget:<br><figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\">$ wget -qO- http<span class=\"variable\">s:</span>//raw.github.<span class=\"keyword\">com</span>/creationix/nvm/master/install.<span class=\"keyword\">sh</span> | <span class=\"keyword\">sh</span></div></pre></td></tr></table></figure></p>\n<p>安装完成后，重启终端并执行下列命令即可安装 Node.js。<br><figure class=\"highlight cmake\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\">$ nvm <span class=\"keyword\">install</span> <span class=\"number\">0.10</span></div></pre></td></tr></table></figure></p>\n","excerpt":"","more":"<h1 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h1><p>安装 Node.js 的最佳方式是使用 nvm。</p>\n<p>cURL:<br><figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">$ curl http<span class=\"variable\">s:</span>//raw.github.<span class=\"keyword\">com</span>/creationix/nvm/master/install.<span class=\"keyword\">sh</span> | <span class=\"keyword\">sh</span></div></pre></td></tr></table></figure></p>\n<p>Wget:<br><figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\">$ wget -qO- http<span class=\"variable\">s:</span>//raw.github.<span class=\"keyword\">com</span>/creationix/nvm/master/install.<span class=\"keyword\">sh</span> | <span class=\"keyword\">sh</span></div></pre></td></tr></table></figure></p>\n<p>安装完成后，重启终端并执行下列命令即可安装 Node.js。<br><figure class=\"highlight cmake\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\">$ nvm <span class=\"keyword\">install</span> <span class=\"number\">0.10</span></div></pre></td></tr></table></figure></p>\n"},{"title":"ubuntu 使用mysql的简单操作","date":"2015-10-24T06:21:03.000Z","_content":"\n\nubuntu上安装mysql非常简单只需要几条命令就可以完成。\n\n　　1. 'sudo apt-get install mysql-server'\n \n　　2. apt-get install mysql-client\n \n　　3.  sudo apt-get install libmysqlclient-dev\n \n　　安装过程中会提示设置密码什么的，注意设置了不要忘了，安装完成之后可以使用如下命令来检查是否安装成功：\n \n　　sudo netstat -tap | grep mysql\n \n　　通过上述命令检查之后，如果看到有mysql 的socket处于 listen 状态则表示安装成功。\n \n　　登陆mysql数据库可以通过如下命令：\n \n　　mysql -u root -p \n\n\ncreate database dbname；\n\n\n\n遇到的问题：\n\nmysql-server : Depends: mysql-server-5.5 but it is not going to be installed\nE: Unable to correct problems, you have held broken packages.\n\n```\nsudo apt-get purge mysql-client-core-5.6\nsudo apt-get autoremove\nsudo apt-get autoclean\nsudo apt-get install mysql-client-core-5.5\nsudo apt-get install mysql-server \n```\n然并卵,\n后面试了一下[aptitude](http://baike.baidu.com/link?url=tUAAth_0e71ZBGWOArrnufdAk3Hg3frsWXq6VsxOFIIdjP-0ngvFDV5MOdOxUf-5vZ-K-7dPMKqnQpqWeTVtLq)\n后面觉得应该是源使用错误的问题，要对应相同版本的源，<code>lsb_release -a</code>查看","source":"_posts/2015/10/24/mysql-use.md","raw":"title: ubuntu 使用mysql的简单操作\ndate: 2015-10-24 14:21:03\ncategories:\n- 数据库\ntags:\n- Mysql\n---\n\n\nubuntu上安装mysql非常简单只需要几条命令就可以完成。\n\n　　1. 'sudo apt-get install mysql-server'\n \n　　2. apt-get install mysql-client\n \n　　3.  sudo apt-get install libmysqlclient-dev\n \n　　安装过程中会提示设置密码什么的，注意设置了不要忘了，安装完成之后可以使用如下命令来检查是否安装成功：\n \n　　sudo netstat -tap | grep mysql\n \n　　通过上述命令检查之后，如果看到有mysql 的socket处于 listen 状态则表示安装成功。\n \n　　登陆mysql数据库可以通过如下命令：\n \n　　mysql -u root -p \n\n\ncreate database dbname；\n\n\n\n遇到的问题：\n\nmysql-server : Depends: mysql-server-5.5 but it is not going to be installed\nE: Unable to correct problems, you have held broken packages.\n\n```\nsudo apt-get purge mysql-client-core-5.6\nsudo apt-get autoremove\nsudo apt-get autoclean\nsudo apt-get install mysql-client-core-5.5\nsudo apt-get install mysql-server \n```\n然并卵,\n后面试了一下[aptitude](http://baike.baidu.com/link?url=tUAAth_0e71ZBGWOArrnufdAk3Hg3frsWXq6VsxOFIIdjP-0ngvFDV5MOdOxUf-5vZ-K-7dPMKqnQpqWeTVtLq)\n后面觉得应该是源使用错误的问题，要对应相同版本的源，<code>lsb_release -a</code>查看","slug":"mysql-use","published":1,"updated":"2016-06-29T15:29:25.175Z","_id":"cik3sv4zk00370s37i3cvo3f0","comments":1,"layout":"post","photos":[],"link":"","content":"<p>ubuntu上安装mysql非常简单只需要几条命令就可以完成。</p>\n<p>　　1. ‘sudo apt-get install mysql-server’</p>\n<p>　　2. apt-get install mysql-client</p>\n<p>　　3.  sudo apt-get install libmysqlclient-dev</p>\n<p>　　安装过程中会提示设置密码什么的，注意设置了不要忘了，安装完成之后可以使用如下命令来检查是否安装成功：</p>\n<p>　　sudo netstat -tap | grep mysql</p>\n<p>　　通过上述命令检查之后，如果看到有mysql 的socket处于 listen 状态则表示安装成功。</p>\n<p>　　登陆mysql数据库可以通过如下命令：</p>\n<p>　　mysql -u root -p </p>\n<p>create database dbname；</p>\n<p>遇到的问题：</p>\n<p>mysql-server : Depends: mysql-server-5.5 but it is not going to be installed<br>E: Unable to correct problems, you have held broken packages.</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">sudo apt-get <span class=\"keyword\">purge</span> mysql-<span class=\"keyword\">client</span>-core<span class=\"number\">-5.6</span></div><div class=\"line\">sudo apt-<span class=\"keyword\">get</span> autoremove</div><div class=\"line\">sudo apt-<span class=\"keyword\">get</span> autoclean</div><div class=\"line\">sudo apt-<span class=\"keyword\">get</span> <span class=\"keyword\">install</span> mysql-<span class=\"keyword\">client</span>-core<span class=\"number\">-5.5</span></div><div class=\"line\">sudo apt-<span class=\"keyword\">get</span> <span class=\"keyword\">install</span> mysql-<span class=\"keyword\">server</span></div></pre></td></tr></table></figure>\n<p>然并卵,<br>后面试了一下<a href=\"http://baike.baidu.com/link?url=tUAAth_0e71ZBGWOArrnufdAk3Hg3frsWXq6VsxOFIIdjP-0ngvFDV5MOdOxUf-5vZ-K-7dPMKqnQpqWeTVtLq\" target=\"_blank\" rel=\"external\">aptitude</a><br>后面觉得应该是源使用错误的问题，要对应相同版本的源，<code>lsb_release -a</code>查看</p>\n","excerpt":"","more":"<p>ubuntu上安装mysql非常简单只需要几条命令就可以完成。</p>\n<p>　　1. ‘sudo apt-get install mysql-server’</p>\n<p>　　2. apt-get install mysql-client</p>\n<p>　　3.  sudo apt-get install libmysqlclient-dev</p>\n<p>　　安装过程中会提示设置密码什么的，注意设置了不要忘了，安装完成之后可以使用如下命令来检查是否安装成功：</p>\n<p>　　sudo netstat -tap | grep mysql</p>\n<p>　　通过上述命令检查之后，如果看到有mysql 的socket处于 listen 状态则表示安装成功。</p>\n<p>　　登陆mysql数据库可以通过如下命令：</p>\n<p>　　mysql -u root -p </p>\n<p>create database dbname；</p>\n<p>遇到的问题：</p>\n<p>mysql-server : Depends: mysql-server-5.5 but it is not going to be installed<br>E: Unable to correct problems, you have held broken packages.</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">sudo apt-get <span class=\"keyword\">purge</span> mysql-<span class=\"keyword\">client</span>-core<span class=\"number\">-5.6</span></div><div class=\"line\">sudo apt-<span class=\"keyword\">get</span> autoremove</div><div class=\"line\">sudo apt-<span class=\"keyword\">get</span> autoclean</div><div class=\"line\">sudo apt-<span class=\"keyword\">get</span> <span class=\"keyword\">install</span> mysql-<span class=\"keyword\">client</span>-core<span class=\"number\">-5.5</span></div><div class=\"line\">sudo apt-<span class=\"keyword\">get</span> <span class=\"keyword\">install</span> mysql-<span class=\"keyword\">server</span></div></pre></td></tr></table></figure>\n<p>然并卵,<br>后面试了一下<a href=\"http://baike.baidu.com/link?url=tUAAth_0e71ZBGWOArrnufdAk3Hg3frsWXq6VsxOFIIdjP-0ngvFDV5MOdOxUf-5vZ-K-7dPMKqnQpqWeTVtLq\">aptitude</a><br>后面觉得应该是源使用错误的问题，要对应相同版本的源，<code>lsb_release -a</code>查看</p>\n"},{"title":"项目问题汇总","date":"2015-10-21T02:52:45.000Z","_content":"\n安装django项目问题汇总\n============\n\nenvironmenterror mysql_config not found\n------------\n```\nsudo apt-get install libmysqlclient-dev\n\nsudo apt-get install mysql-server\n\nsudo apt-get install libmysqld-dev\n```\npip 超时\n------------\n建个文件 ~/.pip/pip.conf, 内容如下\n```\n[global]\ntimeout = 6000\nindex-url = http://pypi.douban.com/simple/\n[install]\nuse-mirrors = true\nmirrors = http://b.pypi.python.org\ntrusted-host = pypi.douban.com\n```\n\n或者尝试下 v2ex 的源\n```\n\n[global]\nindex-url = http://pypi.v2ex.com/simple\n```\n\nInstalling lxml in virtualenv via pip install error: command 'x86_64-linux-gnu-gcc' failed\n--------------------\n安装这些依赖，我在ubuntu 15.10上是有效的\n```\nsudo apt-get install python-dev\nsudo apt-get install libxml2-dev libxslt1-dev\n```\n\nvalueerror --enable-jpeg request but jpeg not found\n--------------------\n```\nsudo apt-get install libjpeg-dev\n```\n\ndjango下运行报\"SyntaxError: Non-ASCII character\n--------------\n[pep](http://python.org/dev/peps/pep-0263/)\n找了半天原因在于，没有把声明coding 的代码放在第一位\n\n* 尝试了第一种方法，没有成功 \nIf you're using virtualenv you can change (or create if doesn't exist) env/lib/python2.7/sitecustomize.py and add:\n```\nimport sys\nsys.setdefaultencoding('utf-8')\n```\n> or, if you are in a production system, you can do the same to /usr/lib/python2.7/sitecustomize.py\n\n\nerror: [Errno 104] Connection reset by peer\n----------------------------\n网络的问题，重新试一次就好了\n\nubuntu 源的问题\n==============\n\n1、安装软件时候，找不到软件包\n-------------\n<B>问题描述:</B>\nE: 未发现软件包 ****\n\n<B>解决方法:</B>\n```\nsudo apt-get update\n```\n\n2、无法更新系统软件\n--------------\n<B>问题描述:</B>Some index files failed to download. They have been ignored, or old ones used instead after apt-get update\n\n这是参考链接 [askubuntu](http://askubuntu.com/questions/329450/e-some-index-files-failed-to-download-they-have-been-ignored-or-old-ones-used) .\n\n<B>解决方法:</B>\n```\nsudo cp /etc/apt/sources.list ~/   #备份\nsudo wget \"http://pastebin.com/raw.php?i=uzhrtg5M\" -O /etc/apt/sources.list #替换\nsudo apt-get update #更新\nsudo rm /etc/apt/sources.list.d/ubuntu-extras.list\nsudo apt-get update\n```\n\n* This solution is not general. It is specific to the sources.list file of the Original Poster.\n* The second command which starts with wget downloads and replaces the sources.list file with a specific for Precise (Ubuntu 12.04,我的是ubuntu14.10) sources.list file. See the file in raw format by visiting this [page](http://pastebin.com/raw.php?i=uzhrtg5M).\n* The fourth command removes the ubuntu-extras.list file which had an impact/conflict with another file of the same, so we removed it to avoid the error\n```\nW: Duplicate sources.list entry\n```\n3、无法安装软件\n------------\n<B>问题描述:</B>\n列软件包有未满足的依赖关系：\n vim : 依赖: vim-common (= 2:7.4.052-1ubuntu3) 但是 2:7.4.273-2ubuntu4 正要被安装\n\n<B>解决方法:</B>\n```\nsudo apt-get remove vim-common\nsudo apt-get install vim\n```\n4、无法安装pip\n------------\n<B>问题描述:</B>\n\nthe following packages have unmet dependencies:\n python-pip : Depends: python-setuptools (>= 0.6c1) but it is not going to be installed\n              Recommends: python-dev-all (>= 2.6) but it is not installable\n<B>解决方法:</B>\n```\nFirst remove the python-pkg-resources completely using\n\n sudo apt-get purge python-pkg-resources\nOnce completed successfully, first run\n\n  sudo apt-get -f install\nthen\n\n   sudo apt-get install python-pip\n```\n","source":"_posts/2015/10/21/django-install-problem.md","raw":"title: 项目问题汇总\ndate: 2015-10-21 10:52:45\ncategories:\n- Django\n- Ubuntu\ntags:\n- Django\n---\n\n安装django项目问题汇总\n============\n\nenvironmenterror mysql_config not found\n------------\n```\nsudo apt-get install libmysqlclient-dev\n\nsudo apt-get install mysql-server\n\nsudo apt-get install libmysqld-dev\n```\npip 超时\n------------\n建个文件 ~/.pip/pip.conf, 内容如下\n```\n[global]\ntimeout = 6000\nindex-url = http://pypi.douban.com/simple/\n[install]\nuse-mirrors = true\nmirrors = http://b.pypi.python.org\ntrusted-host = pypi.douban.com\n```\n\n或者尝试下 v2ex 的源\n```\n\n[global]\nindex-url = http://pypi.v2ex.com/simple\n```\n\nInstalling lxml in virtualenv via pip install error: command 'x86_64-linux-gnu-gcc' failed\n--------------------\n安装这些依赖，我在ubuntu 15.10上是有效的\n```\nsudo apt-get install python-dev\nsudo apt-get install libxml2-dev libxslt1-dev\n```\n\nvalueerror --enable-jpeg request but jpeg not found\n--------------------\n```\nsudo apt-get install libjpeg-dev\n```\n\ndjango下运行报\"SyntaxError: Non-ASCII character\n--------------\n[pep](http://python.org/dev/peps/pep-0263/)\n找了半天原因在于，没有把声明coding 的代码放在第一位\n\n* 尝试了第一种方法，没有成功 \nIf you're using virtualenv you can change (or create if doesn't exist) env/lib/python2.7/sitecustomize.py and add:\n```\nimport sys\nsys.setdefaultencoding('utf-8')\n```\n> or, if you are in a production system, you can do the same to /usr/lib/python2.7/sitecustomize.py\n\n\nerror: [Errno 104] Connection reset by peer\n----------------------------\n网络的问题，重新试一次就好了\n\nubuntu 源的问题\n==============\n\n1、安装软件时候，找不到软件包\n-------------\n<B>问题描述:</B>\nE: 未发现软件包 ****\n\n<B>解决方法:</B>\n```\nsudo apt-get update\n```\n\n2、无法更新系统软件\n--------------\n<B>问题描述:</B>Some index files failed to download. They have been ignored, or old ones used instead after apt-get update\n\n这是参考链接 [askubuntu](http://askubuntu.com/questions/329450/e-some-index-files-failed-to-download-they-have-been-ignored-or-old-ones-used) .\n\n<B>解决方法:</B>\n```\nsudo cp /etc/apt/sources.list ~/   #备份\nsudo wget \"http://pastebin.com/raw.php?i=uzhrtg5M\" -O /etc/apt/sources.list #替换\nsudo apt-get update #更新\nsudo rm /etc/apt/sources.list.d/ubuntu-extras.list\nsudo apt-get update\n```\n\n* This solution is not general. It is specific to the sources.list file of the Original Poster.\n* The second command which starts with wget downloads and replaces the sources.list file with a specific for Precise (Ubuntu 12.04,我的是ubuntu14.10) sources.list file. See the file in raw format by visiting this [page](http://pastebin.com/raw.php?i=uzhrtg5M).\n* The fourth command removes the ubuntu-extras.list file which had an impact/conflict with another file of the same, so we removed it to avoid the error\n```\nW: Duplicate sources.list entry\n```\n3、无法安装软件\n------------\n<B>问题描述:</B>\n列软件包有未满足的依赖关系：\n vim : 依赖: vim-common (= 2:7.4.052-1ubuntu3) 但是 2:7.4.273-2ubuntu4 正要被安装\n\n<B>解决方法:</B>\n```\nsudo apt-get remove vim-common\nsudo apt-get install vim\n```\n4、无法安装pip\n------------\n<B>问题描述:</B>\n\nthe following packages have unmet dependencies:\n python-pip : Depends: python-setuptools (>= 0.6c1) but it is not going to be installed\n              Recommends: python-dev-all (>= 2.6) but it is not installable\n<B>解决方法:</B>\n```\nFirst remove the python-pkg-resources completely using\n\n sudo apt-get purge python-pkg-resources\nOnce completed successfully, first run\n\n  sudo apt-get -f install\nthen\n\n   sudo apt-get install python-pip\n```\n","slug":"django-install-problem","published":1,"updated":"2016-06-29T15:29:25.175Z","_id":"cik3sv4zn003b0s37s2ckmibt","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"安装django项目问题汇总\"><a href=\"#安装django项目问题汇总\" class=\"headerlink\" title=\"安装django项目问题汇总\"></a>安装django项目问题汇总</h1><h2 id=\"environmenterror-mysql-config-not-found\"><a href=\"#environmenterror-mysql-config-not-found\" class=\"headerlink\" title=\"environmenterror mysql_config not found\"></a>environmenterror mysql_config not found</h2><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">sudo apt-get <span class=\"keyword\">install</span> libmysqlclient-dev</div><div class=\"line\"></div><div class=\"line\">sudo apt-<span class=\"keyword\">get</span> <span class=\"keyword\">install</span> mysql-<span class=\"keyword\">server</span></div><div class=\"line\"></div><div class=\"line\">sudo apt-<span class=\"keyword\">get</span> <span class=\"keyword\">install</span> libmysqld-dev</div></pre></td></tr></table></figure>\n<h2 id=\"pip-超时\"><a href=\"#pip-超时\" class=\"headerlink\" title=\"pip 超时\"></a>pip 超时</h2><p>建个文件 ~/.pip/pip.conf, 内容如下<br><figure class=\"highlight ini\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"section\">[global]</span></div><div class=\"line\"><span class=\"attr\">timeout</span> = <span class=\"number\">6000</span></div><div class=\"line\"><span class=\"attr\">index-url</span> = http://pypi.douban.com/simple/</div><div class=\"line\"><span class=\"section\">[install]</span></div><div class=\"line\"><span class=\"attr\">use-mirrors</span> = <span class=\"literal\">true</span></div><div class=\"line\"><span class=\"attr\">mirrors</span> = http://b.pypi.python.org</div><div class=\"line\"><span class=\"attr\">trusted-host</span> = pypi.douban.com</div></pre></td></tr></table></figure></p>\n<p>或者尝试下 v2ex 的源<br><figure class=\"highlight ini\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"section\"></span></div><div class=\"line\">[global]</div><div class=\"line\"><span class=\"attr\">index-url</span> = http://pypi.v2ex.com/simple</div></pre></td></tr></table></figure></p>\n<h2 id=\"Installing-lxml-in-virtualenv-via-pip-install-error-command-‘x86-64-linux-gnu-gcc’-failed\"><a href=\"#Installing-lxml-in-virtualenv-via-pip-install-error-command-‘x86-64-linux-gnu-gcc’-failed\" class=\"headerlink\" title=\"Installing lxml in virtualenv via pip install error: command ‘x86_64-linux-gnu-gcc’ failed\"></a>Installing lxml in virtualenv via pip install error: command ‘x86_64-linux-gnu-gcc’ failed</h2><p>安装这些依赖，我在ubuntu 15.10上是有效的<br><figure class=\"highlight q\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">sudo apt-<span class=\"built_in\">get</span> install python-<span class=\"built_in\">dev</span></div><div class=\"line\">sudo apt-<span class=\"built_in\">get</span> install libxml2-<span class=\"built_in\">dev</span> libxslt1-<span class=\"built_in\">dev</span></div></pre></td></tr></table></figure></p>\n<h2 id=\"valueerror-–enable-jpeg-request-but-jpeg-not-found\"><a href=\"#valueerror-–enable-jpeg-request-but-jpeg-not-found\" class=\"headerlink\" title=\"valueerror –enable-jpeg request but jpeg not found\"></a>valueerror –enable-jpeg request but jpeg not found</h2><figure class=\"highlight q\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">sudo apt-<span class=\"built_in\">get</span> install libjpeg-<span class=\"built_in\">dev</span></div></pre></td></tr></table></figure>\n<h2 id=\"django下运行报”SyntaxError-Non-ASCII-character\"><a href=\"#django下运行报”SyntaxError-Non-ASCII-character\" class=\"headerlink\" title=\"django下运行报”SyntaxError: Non-ASCII character\"></a>django下运行报”SyntaxError: Non-ASCII character</h2><p><a href=\"http://python.org/dev/peps/pep-0263/\" target=\"_blank\" rel=\"external\">pep</a><br>找了半天原因在于，没有把声明coding 的代码放在第一位</p>\n<ul>\n<li>尝试了第一种方法，没有成功<br>If you’re using virtualenv you can change (or create if doesn’t exist) env/lib/python2.7/sitecustomize.py and add:<figure class=\"highlight xl\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">import</span> sys</div><div class=\"line\">sys.setdefaultencoding(<span class=\"string\">'utf-8'</span>)</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<blockquote>\n<p>or, if you are in a production system, you can do the same to /usr/lib/python2.7/sitecustomize.py</p>\n</blockquote>\n<h2 id=\"error-Errno-104-Connection-reset-by-peer\"><a href=\"#error-Errno-104-Connection-reset-by-peer\" class=\"headerlink\" title=\"error: [Errno 104] Connection reset by peer\"></a>error: [Errno 104] Connection reset by peer</h2><p>网络的问题，重新试一次就好了</p>\n<h1 id=\"ubuntu-源的问题\"><a href=\"#ubuntu-源的问题\" class=\"headerlink\" title=\"ubuntu 源的问题\"></a>ubuntu 源的问题</h1><h2 id=\"1、安装软件时候，找不到软件包\"><a href=\"#1、安装软件时候，找不到软件包\" class=\"headerlink\" title=\"1、安装软件时候，找不到软件包\"></a>1、安装软件时候，找不到软件包</h2><b>问题描述:</b><br>E: 未发现软件包 <em>**</em><br><br><b>解决方法:</b><br><figure class=\"highlight q\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">sudo apt-<span class=\"built_in\">get</span> <span class=\"keyword\">update</span></div></pre></td></tr></table></figure><br><br>2、无法更新系统软件<br>————–<br><b>问题描述:</b>Some index files failed to download. They have been ignored, or old ones used instead after apt-get update<br><br>这是参考链接 <a href=\"http://askubuntu.com/questions/329450/e-some-index-files-failed-to-download-they-have-been-ignored-or-old-ones-used\" target=\"_blank\" rel=\"external\">askubuntu</a> .<br><br><b>解决方法:</b><br><figure class=\"highlight applescript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">sudo cp /etc/apt/sources.<span class=\"built_in\">list</span> ~/   <span class=\"comment\">#备份</span></div><div class=\"line\">sudo wget <span class=\"string\">\"http://pastebin.com/raw.php?i=uzhrtg5M\"</span> -O /etc/apt/sources.<span class=\"built_in\">list</span> <span class=\"comment\">#替换</span></div><div class=\"line\">sudo apt-<span class=\"keyword\">get</span> update <span class=\"comment\">#更新</span></div><div class=\"line\">sudo rm /etc/apt/sources.<span class=\"built_in\">list</span>.d/ubuntu-extras.<span class=\"built_in\">list</span></div><div class=\"line\">sudo apt-<span class=\"keyword\">get</span> update</div></pre></td></tr></table></figure><br><br><em> This solution is not general. It is specific to the sources.list file of the Original Poster.\n</em> The second command which starts with wget downloads and replaces the sources.list file with a specific for Precise (Ubuntu 12.04,我的是ubuntu14.10) sources.list file. See the file in raw format by visiting this <a href=\"http://pastebin.com/raw.php?i=uzhrtg5M\" target=\"_blank\" rel=\"external\">page</a>.<br>* The fourth command removes the ubuntu-extras.list file which had an impact/conflict with another file of the same, so we removed it to avoid the error<br><figure class=\"highlight avrasm\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"symbol\">W:</span> Duplicate sources<span class=\"meta\">.list</span> entry</div></pre></td></tr></table></figure><br><br>3、无法安装软件<br>————<br><b>问题描述:</b><br>列软件包有未满足的依赖关系：<br> vim : 依赖: vim-common (= 2:7.4.052-1ubuntu3) 但是 2:7.4.273-2ubuntu4 正要被安装<br><br><b>解决方法:</b><br><figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">sudo apt-<span class=\"built_in\">get</span> <span class=\"built_in\">remove</span> <span class=\"keyword\">vim</span>-common</div><div class=\"line\">sudo apt-<span class=\"built_in\">get</span> install <span class=\"keyword\">vim</span></div></pre></td></tr></table></figure><br><br>4、无法安装pip<br>————<br><b>问题描述:</b>\n\n<p>the following packages have unmet dependencies:<br> python-pip : Depends: python-setuptools (&gt;= 0.6c1) but it is not going to be installed<br>              Recommends: python-dev-all (&gt;= 2.6) but it is not installable</p>\n<p><b>解决方法:</b><br><figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">First <span class=\"built_in\">remove</span> the <span class=\"keyword\">python</span>-pkg-resources completely using</div><div class=\"line\"></div><div class=\"line\"> sudo apt-<span class=\"built_in\">get</span> purge <span class=\"keyword\">python</span>-pkg-resources</div><div class=\"line\">Once completed successfully, <span class=\"keyword\">first</span> run</div><div class=\"line\"></div><div class=\"line\">  sudo apt-<span class=\"built_in\">get</span> -<span class=\"keyword\">f</span> install</div><div class=\"line\">then</div><div class=\"line\"></div><div class=\"line\">   sudo apt-<span class=\"built_in\">get</span> install <span class=\"keyword\">python</span>-pip</div></pre></td></tr></table></figure></p>\n","excerpt":"","more":"<h1 id=\"安装django项目问题汇总\"><a href=\"#安装django项目问题汇总\" class=\"headerlink\" title=\"安装django项目问题汇总\"></a>安装django项目问题汇总</h1><h2 id=\"environmenterror-mysql-config-not-found\"><a href=\"#environmenterror-mysql-config-not-found\" class=\"headerlink\" title=\"environmenterror mysql_config not found\"></a>environmenterror mysql_config not found</h2><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">sudo apt-get <span class=\"keyword\">install</span> libmysqlclient-dev</div><div class=\"line\"></div><div class=\"line\">sudo apt-<span class=\"keyword\">get</span> <span class=\"keyword\">install</span> mysql-<span class=\"keyword\">server</span></div><div class=\"line\"></div><div class=\"line\">sudo apt-<span class=\"keyword\">get</span> <span class=\"keyword\">install</span> libmysqld-dev</div></pre></td></tr></table></figure>\n<h2 id=\"pip-超时\"><a href=\"#pip-超时\" class=\"headerlink\" title=\"pip 超时\"></a>pip 超时</h2><p>建个文件 ~/.pip/pip.conf, 内容如下<br><figure class=\"highlight ini\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"section\">[global]</span></div><div class=\"line\"><span class=\"attr\">timeout</span> = <span class=\"number\">6000</span></div><div class=\"line\"><span class=\"attr\">index-url</span> = http://pypi.douban.com/simple/</div><div class=\"line\"><span class=\"section\">[install]</span></div><div class=\"line\"><span class=\"attr\">use-mirrors</span> = <span class=\"literal\">true</span></div><div class=\"line\"><span class=\"attr\">mirrors</span> = http://b.pypi.python.org</div><div class=\"line\"><span class=\"attr\">trusted-host</span> = pypi.douban.com</div></pre></td></tr></table></figure></p>\n<p>或者尝试下 v2ex 的源<br><figure class=\"highlight ini\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"section\"></div><div class=\"line\">[global]</span></div><div class=\"line\"><span class=\"attr\">index-url</span> = http://pypi.v2ex.com/simple</div></pre></td></tr></table></figure></p>\n<h2 id=\"Installing-lxml-in-virtualenv-via-pip-install-error-command-‘x86-64-linux-gnu-gcc’-failed\"><a href=\"#Installing-lxml-in-virtualenv-via-pip-install-error-command-‘x86-64-linux-gnu-gcc’-failed\" class=\"headerlink\" title=\"Installing lxml in virtualenv via pip install error: command ‘x86_64-linux-gnu-gcc’ failed\"></a>Installing lxml in virtualenv via pip install error: command ‘x86_64-linux-gnu-gcc’ failed</h2><p>安装这些依赖，我在ubuntu 15.10上是有效的<br><figure class=\"highlight q\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">sudo apt-<span class=\"built_in\">get</span> install python-<span class=\"built_in\">dev</span></div><div class=\"line\">sudo apt-<span class=\"built_in\">get</span> install libxml2-<span class=\"built_in\">dev</span> libxslt1-<span class=\"built_in\">dev</span></div></pre></td></tr></table></figure></p>\n<h2 id=\"valueerror-–enable-jpeg-request-but-jpeg-not-found\"><a href=\"#valueerror-–enable-jpeg-request-but-jpeg-not-found\" class=\"headerlink\" title=\"valueerror –enable-jpeg request but jpeg not found\"></a>valueerror –enable-jpeg request but jpeg not found</h2><figure class=\"highlight q\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">sudo apt-<span class=\"built_in\">get</span> install libjpeg-<span class=\"built_in\">dev</span></div></pre></td></tr></table></figure>\n<h2 id=\"django下运行报”SyntaxError-Non-ASCII-character\"><a href=\"#django下运行报”SyntaxError-Non-ASCII-character\" class=\"headerlink\" title=\"django下运行报”SyntaxError: Non-ASCII character\"></a>django下运行报”SyntaxError: Non-ASCII character</h2><p><a href=\"http://python.org/dev/peps/pep-0263/\">pep</a><br>找了半天原因在于，没有把声明coding 的代码放在第一位</p>\n<ul>\n<li>尝试了第一种方法，没有成功<br>If you’re using virtualenv you can change (or create if doesn’t exist) env/lib/python2.7/sitecustomize.py and add:<figure class=\"highlight xl\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">import</span> sys</div><div class=\"line\">sys.setdefaultencoding(<span class=\"string\">'utf-8'</span>)</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<blockquote>\n<p>or, if you are in a production system, you can do the same to /usr/lib/python2.7/sitecustomize.py</p>\n</blockquote>\n<h2 id=\"error-Errno-104-Connection-reset-by-peer\"><a href=\"#error-Errno-104-Connection-reset-by-peer\" class=\"headerlink\" title=\"error: [Errno 104] Connection reset by peer\"></a>error: [Errno 104] Connection reset by peer</h2><p>网络的问题，重新试一次就好了</p>\n<h1 id=\"ubuntu-源的问题\"><a href=\"#ubuntu-源的问题\" class=\"headerlink\" title=\"ubuntu 源的问题\"></a>ubuntu 源的问题</h1><h2 id=\"1、安装软件时候，找不到软件包\"><a href=\"#1、安装软件时候，找不到软件包\" class=\"headerlink\" title=\"1、安装软件时候，找不到软件包\"></a>1、安装软件时候，找不到软件包</h2><B>问题描述:</B><br>E: 未发现软件包 <em>**</em><br><br><B>解决方法:</B><br><figure class=\"highlight q\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">sudo apt-<span class=\"built_in\">get</span> <span class=\"keyword\">update</span></div></pre></td></tr></table></figure><br><br>2、无法更新系统软件<br>————–<br><B>问题描述:</B>Some index files failed to download. They have been ignored, or old ones used instead after apt-get update<br><br>这是参考链接 <a href=\"http://askubuntu.com/questions/329450/e-some-index-files-failed-to-download-they-have-been-ignored-or-old-ones-used\">askubuntu</a> .<br><br><B>解决方法:</B><br><figure class=\"highlight applescript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">sudo cp /etc/apt/sources.<span class=\"built_in\">list</span> ~/   <span class=\"comment\">#备份</span></div><div class=\"line\">sudo wget <span class=\"string\">\"http://pastebin.com/raw.php?i=uzhrtg5M\"</span> -O /etc/apt/sources.<span class=\"built_in\">list</span> <span class=\"comment\">#替换</span></div><div class=\"line\">sudo apt-<span class=\"keyword\">get</span> update <span class=\"comment\">#更新</span></div><div class=\"line\">sudo rm /etc/apt/sources.<span class=\"built_in\">list</span>.d/ubuntu-extras.<span class=\"built_in\">list</span></div><div class=\"line\">sudo apt-<span class=\"keyword\">get</span> update</div></pre></td></tr></table></figure><br><br><em> This solution is not general. It is specific to the sources.list file of the Original Poster.\n</em> The second command which starts with wget downloads and replaces the sources.list file with a specific for Precise (Ubuntu 12.04,我的是ubuntu14.10) sources.list file. See the file in raw format by visiting this <a href=\"http://pastebin.com/raw.php?i=uzhrtg5M\">page</a>.<br>* The fourth command removes the ubuntu-extras.list file which had an impact/conflict with another file of the same, so we removed it to avoid the error<br><figure class=\"highlight avrasm\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"symbol\">W:</span> Duplicate sources<span class=\"meta\">.list</span> entry</div></pre></td></tr></table></figure><br><br>3、无法安装软件<br>————<br><B>问题描述:</B><br>列软件包有未满足的依赖关系：<br> vim : 依赖: vim-common (= 2:7.4.052-1ubuntu3) 但是 2:7.4.273-2ubuntu4 正要被安装<br><br><B>解决方法:</B><br><figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">sudo apt-<span class=\"built_in\">get</span> <span class=\"built_in\">remove</span> <span class=\"keyword\">vim</span>-common</div><div class=\"line\">sudo apt-<span class=\"built_in\">get</span> install <span class=\"keyword\">vim</span></div></pre></td></tr></table></figure><br><br>4、无法安装pip<br>————<br><B>问题描述:</B>\n\n<p>the following packages have unmet dependencies:<br> python-pip : Depends: python-setuptools (&gt;= 0.6c1) but it is not going to be installed<br>              Recommends: python-dev-all (&gt;= 2.6) but it is not installable</p>\n<p><B>解决方法:</B><br><figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">First <span class=\"built_in\">remove</span> the <span class=\"keyword\">python</span>-pkg-resources completely using</div><div class=\"line\"></div><div class=\"line\"> sudo apt-<span class=\"built_in\">get</span> purge <span class=\"keyword\">python</span>-pkg-resources</div><div class=\"line\">Once completed successfully, <span class=\"keyword\">first</span> run</div><div class=\"line\"></div><div class=\"line\">  sudo apt-<span class=\"built_in\">get</span> -<span class=\"keyword\">f</span> install</div><div class=\"line\">then</div><div class=\"line\"></div><div class=\"line\">   sudo apt-<span class=\"built_in\">get</span> install <span class=\"keyword\">python</span>-pip</div></pre></td></tr></table></figure></p>\n"},{"title":"python-date","date":"2015-10-20T10:28:44.000Z","_content":"\npython 时间戳 datetime string 转换\n==============================\n```\nimport datetime\nimport time\n```\n\ndatetime转时间戳\n--------------\n\n```\nIn [1]: now = datetime.datetime.now()\nIn [2]: time.mktime(now.timetuple())\nOut[2]: 1433501775.0\n```\n\n \ndatetime转string\n---------------\n\n```\nIn [3]: now.strftime('%Y-%m-%d')\nOut[3]: '2015-06-05'\n\nIn [4]: type(now.strftime('%Y-%m-%d'))\nOut[4]: str\n```\n\n\nstring转datetime\n---------------\n\n```\nIn [5]: time_str = '2015-05-01 12:00:01'\n\nIn [5]: date_time = datetime.datetime.strptime(time_str,'%Y-%m-%d %H:%M:%S')\n\nIn [6]: date_time\nOut[6]: datetime.datetime(2015, 5, 1, 12, 0, 1)\n\n```\n\n\n时间戳转string**\n--------------\n\n```\nIn [17]: time.strftime('%Y-%m-%d',time.localtime(aa))\nOut[17]: '2015-06-05'\n\n```","source":"_posts/2015/10/20/python-date.md","raw":"title: python-date\ndate: 2015-10-20 18:28:44\ncategories:\n- Python\ntags:\n- Python\n---\n\npython 时间戳 datetime string 转换\n==============================\n```\nimport datetime\nimport time\n```\n\ndatetime转时间戳\n--------------\n\n```\nIn [1]: now = datetime.datetime.now()\nIn [2]: time.mktime(now.timetuple())\nOut[2]: 1433501775.0\n```\n\n \ndatetime转string\n---------------\n\n```\nIn [3]: now.strftime('%Y-%m-%d')\nOut[3]: '2015-06-05'\n\nIn [4]: type(now.strftime('%Y-%m-%d'))\nOut[4]: str\n```\n\n\nstring转datetime\n---------------\n\n```\nIn [5]: time_str = '2015-05-01 12:00:01'\n\nIn [5]: date_time = datetime.datetime.strptime(time_str,'%Y-%m-%d %H:%M:%S')\n\nIn [6]: date_time\nOut[6]: datetime.datetime(2015, 5, 1, 12, 0, 1)\n\n```\n\n\n时间戳转string**\n--------------\n\n```\nIn [17]: time.strftime('%Y-%m-%d',time.localtime(aa))\nOut[17]: '2015-06-05'\n\n```","slug":"python-date","published":1,"updated":"2016-06-29T15:29:25.175Z","_id":"cik3sv50g003g0s37l72v6uc8","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"python-时间戳-datetime-string-转换\"><a href=\"#python-时间戳-datetime-string-转换\" class=\"headerlink\" title=\"python 时间戳 datetime string 转换\"></a>python 时间戳 datetime string 转换</h1><figure class=\"highlight xl\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">import</span> datetime</div><div class=\"line\"><span class=\"keyword\">import</span> <span class=\"built_in\">time</span></div></pre></td></tr></table></figure>\n<h2 id=\"datetime转时间戳\"><a href=\"#datetime转时间戳\" class=\"headerlink\" title=\"datetime转时间戳\"></a>datetime转时间戳</h2><figure class=\"highlight vbscript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">In</span> [<span class=\"number\">1</span>]: <span class=\"built_in\">now</span> = datetime.datetime.<span class=\"built_in\">now</span>()</div><div class=\"line\"><span class=\"keyword\">In</span> [<span class=\"number\">2</span>]: <span class=\"built_in\">time</span>.mktime(<span class=\"built_in\">now</span>.timetuple())</div><div class=\"line\">Out[<span class=\"number\">2</span>]: <span class=\"number\">1433501775.0</span></div></pre></td></tr></table></figure>\n<h2 id=\"datetime转string\"><a href=\"#datetime转string\" class=\"headerlink\" title=\"datetime转string\"></a>datetime转string</h2><figure class=\"highlight delphi\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">In</span> [<span class=\"number\">3</span>]: now.strftime(<span class=\"string\">'%Y-%m-%d'</span>)</div><div class=\"line\"><span class=\"keyword\">Out</span>[<span class=\"number\">3</span>]: <span class=\"string\">'2015-06-05'</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">In</span> [<span class=\"number\">4</span>]: <span class=\"keyword\">type</span>(now.strftime(<span class=\"string\">'%Y-%m-%d'</span>))</div><div class=\"line\"><span class=\"keyword\">Out</span>[<span class=\"number\">4</span>]: str</div></pre></td></tr></table></figure>\n<h2 id=\"string转datetime\"><a href=\"#string转datetime\" class=\"headerlink\" title=\"string转datetime\"></a>string转datetime</h2><figure class=\"highlight cos\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">In [<span class=\"number\">5</span>]: time_str = '<span class=\"number\">2015</span>-<span class=\"number\">05</span>-<span class=\"number\">01</span> <span class=\"number\">12</span>:<span class=\"number\">00</span>:<span class=\"number\">01</span>'</div><div class=\"line\"></div><div class=\"line\">In [<span class=\"number\">5</span>]: date_time = datetime.datetime.strptime(time_str,'<span class=\"built_in\">%Y</span>-<span class=\"built_in\">%m</span>-<span class=\"built_in\">%d</span> <span class=\"built_in\">%H</span>:<span class=\"built_in\">%M</span>:<span class=\"built_in\">%S</span>')</div><div class=\"line\"></div><div class=\"line\">In [<span class=\"number\">6</span>]: date_time</div><div class=\"line\">Out[<span class=\"number\">6</span>]: datetime.datetime(<span class=\"number\">2015</span>, <span class=\"number\">5</span>, <span class=\"number\">1</span>, <span class=\"number\">12</span>, <span class=\"number\">0</span>, <span class=\"number\">1</span>)</div></pre></td></tr></table></figure>\n<h2 id=\"时间戳转string\"><a href=\"#时间戳转string\" class=\"headerlink\" title=\"时间戳转string**\"></a>时间戳转string**</h2><figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">In [<span class=\"number\">17</span>]: <span class=\"selector-tag\">time</span>.strftime(<span class=\"string\">'%Y-%m-%d'</span>,<span class=\"selector-tag\">time</span>.localtime(aa))</div><div class=\"line\">Out[<span class=\"number\">17</span>]: <span class=\"string\">'2015-06-05'</span></div></pre></td></tr></table></figure>","excerpt":"","more":"<h1 id=\"python-时间戳-datetime-string-转换\"><a href=\"#python-时间戳-datetime-string-转换\" class=\"headerlink\" title=\"python 时间戳 datetime string 转换\"></a>python 时间戳 datetime string 转换</h1><figure class=\"highlight xl\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">import</span> datetime</div><div class=\"line\"><span class=\"keyword\">import</span> <span class=\"built_in\">time</span></div></pre></td></tr></table></figure>\n<h2 id=\"datetime转时间戳\"><a href=\"#datetime转时间戳\" class=\"headerlink\" title=\"datetime转时间戳\"></a>datetime转时间戳</h2><figure class=\"highlight vbscript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">In</span> [<span class=\"number\">1</span>]: <span class=\"built_in\">now</span> = datetime.datetime.<span class=\"built_in\">now</span>()</div><div class=\"line\"><span class=\"keyword\">In</span> [<span class=\"number\">2</span>]: <span class=\"built_in\">time</span>.mktime(<span class=\"built_in\">now</span>.timetuple())</div><div class=\"line\">Out[<span class=\"number\">2</span>]: <span class=\"number\">1433501775.0</span></div></pre></td></tr></table></figure>\n<h2 id=\"datetime转string\"><a href=\"#datetime转string\" class=\"headerlink\" title=\"datetime转string\"></a>datetime转string</h2><figure class=\"highlight delphi\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">In</span> [<span class=\"number\">3</span>]: now.strftime(<span class=\"string\">'%Y-%m-%d'</span>)</div><div class=\"line\"><span class=\"keyword\">Out</span>[<span class=\"number\">3</span>]: <span class=\"string\">'2015-06-05'</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">In</span> [<span class=\"number\">4</span>]: <span class=\"keyword\">type</span>(now.strftime(<span class=\"string\">'%Y-%m-%d'</span>))</div><div class=\"line\"><span class=\"keyword\">Out</span>[<span class=\"number\">4</span>]: str</div></pre></td></tr></table></figure>\n<h2 id=\"string转datetime\"><a href=\"#string转datetime\" class=\"headerlink\" title=\"string转datetime\"></a>string转datetime</h2><figure class=\"highlight cos\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">In [<span class=\"number\">5</span>]: time_str = '<span class=\"number\">2015</span>-<span class=\"number\">05</span>-<span class=\"number\">01</span> <span class=\"number\">12</span>:<span class=\"number\">00</span>:<span class=\"number\">01</span>'</div><div class=\"line\"></div><div class=\"line\">In [<span class=\"number\">5</span>]: date_time = datetime.datetime.strptime(time_str,'<span class=\"built_in\">%Y</span>-<span class=\"built_in\">%m</span>-<span class=\"built_in\">%d</span> <span class=\"built_in\">%H</span>:<span class=\"built_in\">%M</span>:<span class=\"built_in\">%S</span>')</div><div class=\"line\"></div><div class=\"line\">In [<span class=\"number\">6</span>]: date_time</div><div class=\"line\">Out[<span class=\"number\">6</span>]: datetime.datetime(<span class=\"number\">2015</span>, <span class=\"number\">5</span>, <span class=\"number\">1</span>, <span class=\"number\">12</span>, <span class=\"number\">0</span>, <span class=\"number\">1</span>)</div></pre></td></tr></table></figure>\n<h2 id=\"时间戳转string\"><a href=\"#时间戳转string\" class=\"headerlink\" title=\"时间戳转string**\"></a>时间戳转string**</h2><figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">In [<span class=\"number\">17</span>]: <span class=\"selector-tag\">time</span>.strftime(<span class=\"string\">'%Y-%m-%d'</span>,<span class=\"selector-tag\">time</span>.localtime(aa))</div><div class=\"line\">Out[<span class=\"number\">17</span>]: <span class=\"string\">'2015-06-05'</span></div></pre></td></tr></table></figure>"},{"title":"python复制（深浅）","date":"2015-10-17T12:15:35.000Z","_content":"\n关于python list对象的使用\n=============\n需求\n-------------\n如果这时候有需求是，复制一个list对象，然后_改变这个复制的对象内容_，_原来的内容不变_，该怎么做？\n\n使用过程\n-------------\n在使用python时候，一个list对象赋值给另外一个，或者是list作为参数传递给函数进行操作，这个list对象的id始终没有变化,如下：\n```\nIn [59]: list_a = [1,2,3]\n\nIn [60]: id(list_a)\nOut[60]: 47743920\n\nIn [61]: list_b = list_a\n\nIn [62]: id(list_b)\nOut[62]: 47743920\n\nIn [63]: def check_list(one_list):\n   ....:     print id(one_list)\n   ....:     \n\nIn [64]: check_list(list_b)\n47743920\n\n\n```\n总结\n-------------\n在Python中,无论你把对象作为参数传递,还是作为函数返回值,都是引用传递的.\n\n\ncopy库\n-------------\n标准库中的copy模块提供了两个方法来实现拷贝.一个方法是copy,它返回和参数包含内容一样的对象.\n```\nIn [65]: import copy\n\nIn [66]: existing_list = [1,2,3,4]\n\nIn [67]: new_list = copy.copy(existing_list)\n\nIn [68]: id(existing_list),id(new_list)\nOut[68]: (48317144, 48317576)\n```\n有些时候,你希望对象中的属性也被复制,可以使用deepcopy方法:\n```\nIn [69]: new_list_deep = copy.deepcopy(existing_list)\nIn [70]: id(existing_list),id(new_list_deep)\nOut[70]: (48317144, 47701816)\n\n```\n\n这时候发现，复制的list对象的地址不一样了，那么改变复制后的list内容，会发生什么？\n```\nIn [71]: new_list\nOut[71]: [1, 2, 3, 4]\n\nIn [72]: new_list[0]=2\n\nIn [73]: new_list\nOut[73]: [2, 2, 3, 4]\n\nIn [74]: existing_list\nOut[74]: [1, 2, 3, 4]\n\nIn [75]: new_list_deep\nOut[75]: [1, 2, 3, 4]\n\nIn [76]: new_list_deep[2] = 1\n\nIn [77]: new_list_deep\nOut[77]: [1, 2, 1, 4]\n\nIn [78]: existing_list\nOut[78]: [1, 2, 3, 4]\n```\n似乎已经满足我们最初的需求了，但是如果list对象是这样的，<code>list_of_lists = [ ['a'], [1, 2], ['z', 23] ]</code>,来实验一下\n```\nIn [85]: list_of_lists = [ ['a'], [1, 2], ['z', 23] ]\n\nIn [86]: copy_qian = copy.copy(list_of_lists)\n\nIn [87]: copy_qian[1].append(\"zoo\")\n\nIn [88]: print list_of_lists,copy_qian,id(list_of_lists),id(copy_qian)\n[['a'], [1, 2, 'zoo'], ['z', 23]] [['a'], [1, 2, 'zoo'], ['z', 23]] 46542432 48334464\n\n```\n发现原来的list里面的内容也被改变了，_其实是因为list_of_lists中有引用了其他的list，copy.copy只是浅复制。因为它们中的元素还是共享引用.\n\n如果你希望复制一个容器对象,以及它里面的所有元素(包含元素的子元素),使用copy.deepcopy,这个方法会消耗一些时间和空间,不过,如果你需要完全复制,这是唯一的方法.\n\n```\nIn [90]: list_of_lists = [ ['a'], [1, 2], ['z', 23] ]\n\nIn [91]: copy_deep = copy.deepcopy(list_of_lists)\n\nIn [92]: copy_deep.append(\"zoo\")\n\nIn [93]: print list_of_lists,\";\",copy_deep,\";\",id(list_of_lists),\";\",id(copy_deep)\n[['a'], [1, 2], ['z', 23]] ; [['a'], [1, 2], ['z', 23], 'zoo']; 48319664; 48333096\n```\n\n","source":"_posts/2015/10/17/python复制.md","raw":"title: python复制（深浅）\ndate: 2015-10-17 20:15:35\ncategories:\n- Python\ntags:\n- Python\n---\n\n关于python list对象的使用\n=============\n需求\n-------------\n如果这时候有需求是，复制一个list对象，然后_改变这个复制的对象内容_，_原来的内容不变_，该怎么做？\n\n使用过程\n-------------\n在使用python时候，一个list对象赋值给另外一个，或者是list作为参数传递给函数进行操作，这个list对象的id始终没有变化,如下：\n```\nIn [59]: list_a = [1,2,3]\n\nIn [60]: id(list_a)\nOut[60]: 47743920\n\nIn [61]: list_b = list_a\n\nIn [62]: id(list_b)\nOut[62]: 47743920\n\nIn [63]: def check_list(one_list):\n   ....:     print id(one_list)\n   ....:     \n\nIn [64]: check_list(list_b)\n47743920\n\n\n```\n总结\n-------------\n在Python中,无论你把对象作为参数传递,还是作为函数返回值,都是引用传递的.\n\n\ncopy库\n-------------\n标准库中的copy模块提供了两个方法来实现拷贝.一个方法是copy,它返回和参数包含内容一样的对象.\n```\nIn [65]: import copy\n\nIn [66]: existing_list = [1,2,3,4]\n\nIn [67]: new_list = copy.copy(existing_list)\n\nIn [68]: id(existing_list),id(new_list)\nOut[68]: (48317144, 48317576)\n```\n有些时候,你希望对象中的属性也被复制,可以使用deepcopy方法:\n```\nIn [69]: new_list_deep = copy.deepcopy(existing_list)\nIn [70]: id(existing_list),id(new_list_deep)\nOut[70]: (48317144, 47701816)\n\n```\n\n这时候发现，复制的list对象的地址不一样了，那么改变复制后的list内容，会发生什么？\n```\nIn [71]: new_list\nOut[71]: [1, 2, 3, 4]\n\nIn [72]: new_list[0]=2\n\nIn [73]: new_list\nOut[73]: [2, 2, 3, 4]\n\nIn [74]: existing_list\nOut[74]: [1, 2, 3, 4]\n\nIn [75]: new_list_deep\nOut[75]: [1, 2, 3, 4]\n\nIn [76]: new_list_deep[2] = 1\n\nIn [77]: new_list_deep\nOut[77]: [1, 2, 1, 4]\n\nIn [78]: existing_list\nOut[78]: [1, 2, 3, 4]\n```\n似乎已经满足我们最初的需求了，但是如果list对象是这样的，<code>list_of_lists = [ ['a'], [1, 2], ['z', 23] ]</code>,来实验一下\n```\nIn [85]: list_of_lists = [ ['a'], [1, 2], ['z', 23] ]\n\nIn [86]: copy_qian = copy.copy(list_of_lists)\n\nIn [87]: copy_qian[1].append(\"zoo\")\n\nIn [88]: print list_of_lists,copy_qian,id(list_of_lists),id(copy_qian)\n[['a'], [1, 2, 'zoo'], ['z', 23]] [['a'], [1, 2, 'zoo'], ['z', 23]] 46542432 48334464\n\n```\n发现原来的list里面的内容也被改变了，_其实是因为list_of_lists中有引用了其他的list，copy.copy只是浅复制。因为它们中的元素还是共享引用.\n\n如果你希望复制一个容器对象,以及它里面的所有元素(包含元素的子元素),使用copy.deepcopy,这个方法会消耗一些时间和空间,不过,如果你需要完全复制,这是唯一的方法.\n\n```\nIn [90]: list_of_lists = [ ['a'], [1, 2], ['z', 23] ]\n\nIn [91]: copy_deep = copy.deepcopy(list_of_lists)\n\nIn [92]: copy_deep.append(\"zoo\")\n\nIn [93]: print list_of_lists,\";\",copy_deep,\";\",id(list_of_lists),\";\",id(copy_deep)\n[['a'], [1, 2], ['z', 23]] ; [['a'], [1, 2], ['z', 23], 'zoo']; 48319664; 48333096\n```\n\n","slug":"python复制","published":1,"updated":"2016-06-29T15:29:25.175Z","_id":"cik3sv50l003j0s372mudckkk","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"关于python-list对象的使用\"><a href=\"#关于python-list对象的使用\" class=\"headerlink\" title=\"关于python list对象的使用\"></a>关于python list对象的使用</h1><h2 id=\"需求\"><a href=\"#需求\" class=\"headerlink\" title=\"需求\"></a>需求</h2><p>如果这时候有需求是，复制一个list对象，然后<em>改变这个复制的对象内容</em>，<em>原来的内容不变</em>，该怎么做？</p>\n<h2 id=\"使用过程\"><a href=\"#使用过程\" class=\"headerlink\" title=\"使用过程\"></a>使用过程</h2><p>在使用python时候，一个list对象赋值给另外一个，或者是list作为参数传递给函数进行操作，这个list对象的id始终没有变化,如下：<br><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\">In [<span class=\"number\">59</span>]: list_a = [<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>]</div><div class=\"line\"></div><div class=\"line\">In [<span class=\"number\">60</span>]: id(list_a)</div><div class=\"line\">Out[<span class=\"number\">60</span>]: <span class=\"number\">47743920</span></div><div class=\"line\"></div><div class=\"line\">In [<span class=\"number\">61</span>]: list_b = list_a</div><div class=\"line\"></div><div class=\"line\">In [<span class=\"number\">62</span>]: id(list_b)</div><div class=\"line\">Out[<span class=\"number\">62</span>]: <span class=\"number\">47743920</span></div><div class=\"line\"></div><div class=\"line\">In [<span class=\"number\">63</span>]: <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">check_list</span><span class=\"params\">(one_list)</span>:</span></div><div class=\"line\">   ....:     <span class=\"keyword\">print</span> id(one_list)</div><div class=\"line\">   ....:     </div><div class=\"line\"></div><div class=\"line\">In [<span class=\"number\">64</span>]: check_list(list_b)</div><div class=\"line\"><span class=\"number\">47743920</span></div></pre></td></tr></table></figure></p>\n<h2 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h2><p>在Python中,无论你把对象作为参数传递,还是作为函数返回值,都是引用传递的.</p>\n<h2 id=\"copy库\"><a href=\"#copy库\" class=\"headerlink\" title=\"copy库\"></a>copy库</h2><p>标准库中的copy模块提供了两个方法来实现拷贝.一个方法是copy,它返回和参数包含内容一样的对象.<br><figure class=\"highlight stata\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">In</span> [65]: import <span class=\"keyword\">copy</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">In</span> [66]: existing_list = [1,2,3,4]</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">In</span> [67]: new_list = <span class=\"keyword\">copy</span>.<span class=\"keyword\">copy</span>(existing_list)</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">In</span> [68]: id(existing_list),id(new_list)</div><div class=\"line\"><span class=\"keyword\">Out</span>[68]: (48317144, 48317576)</div></pre></td></tr></table></figure></p>\n<p>有些时候,你希望对象中的属性也被复制,可以使用deepcopy方法:<br><figure class=\"highlight oxygene\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">In</span> [<span class=\"number\">69</span>]: new_list_deep = <span class=\"keyword\">copy</span>.deepcopy(existing_list)</div><div class=\"line\"><span class=\"keyword\">In</span> [<span class=\"number\">70</span>]: id(existing_list),id(new_list_deep)</div><div class=\"line\"><span class=\"keyword\">Out</span>[<span class=\"number\">70</span>]: (<span class=\"number\">48317144</span>, <span class=\"number\">47701816</span>)</div></pre></td></tr></table></figure></p>\n<p>这时候发现，复制的list对象的地址不一样了，那么改变复制后的list内容，会发生什么？<br><figure class=\"highlight accesslog\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div></pre></td><td class=\"code\"><pre><div class=\"line\">In <span class=\"string\">[71]</span>: new_list</div><div class=\"line\">Out<span class=\"string\">[71]</span>: <span class=\"string\">[1, 2, 3, 4]</span></div><div class=\"line\"></div><div class=\"line\">In <span class=\"string\">[72]</span>: new_list<span class=\"string\">[0]</span>=<span class=\"number\">2</span></div><div class=\"line\"></div><div class=\"line\">In <span class=\"string\">[73]</span>: new_list</div><div class=\"line\">Out<span class=\"string\">[73]</span>: <span class=\"string\">[2, 2, 3, 4]</span></div><div class=\"line\"></div><div class=\"line\">In <span class=\"string\">[74]</span>: existing_list</div><div class=\"line\">Out<span class=\"string\">[74]</span>: <span class=\"string\">[1, 2, 3, 4]</span></div><div class=\"line\"></div><div class=\"line\">In <span class=\"string\">[75]</span>: new_list_deep</div><div class=\"line\">Out<span class=\"string\">[75]</span>: <span class=\"string\">[1, 2, 3, 4]</span></div><div class=\"line\"></div><div class=\"line\">In <span class=\"string\">[76]</span>: new_list_deep<span class=\"string\">[2]</span> = <span class=\"number\">1</span></div><div class=\"line\"></div><div class=\"line\">In <span class=\"string\">[77]</span>: new_list_deep</div><div class=\"line\">Out<span class=\"string\">[77]</span>: <span class=\"string\">[1, 2, 1, 4]</span></div><div class=\"line\"></div><div class=\"line\">In <span class=\"string\">[78]</span>: existing_list</div><div class=\"line\">Out<span class=\"string\">[78]</span>: <span class=\"string\">[1, 2, 3, 4]</span></div></pre></td></tr></table></figure></p>\n<p>似乎已经满足我们最初的需求了，但是如果list对象是这样的，<code>list_of_lists = [ [‘a’], [1, 2], [‘z’, 23] ]</code>,来实验一下<br><figure class=\"highlight prolog\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"symbol\">In</span> [<span class=\"number\">85</span>]: list_of_lists = [ [<span class=\"string\">'a'</span>], [<span class=\"number\">1</span>, <span class=\"number\">2</span>], [<span class=\"string\">'z'</span>, <span class=\"number\">23</span>] ]</div><div class=\"line\"></div><div class=\"line\"><span class=\"symbol\">In</span> [<span class=\"number\">86</span>]: copy_qian = copy.copy(list_of_lists)</div><div class=\"line\"></div><div class=\"line\"><span class=\"symbol\">In</span> [<span class=\"number\">87</span>]: copy_qian[<span class=\"number\">1</span>].append(<span class=\"string\">\"zoo\"</span>)</div><div class=\"line\"></div><div class=\"line\"><span class=\"symbol\">In</span> [<span class=\"number\">88</span>]: print list_of_lists,copy_qian,id(list_of_lists),id(copy_qian)</div><div class=\"line\">[[<span class=\"string\">'a'</span>], [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"string\">'zoo'</span>], [<span class=\"string\">'z'</span>, <span class=\"number\">23</span>]] [[<span class=\"string\">'a'</span>], [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"string\">'zoo'</span>], [<span class=\"string\">'z'</span>, <span class=\"number\">23</span>]] <span class=\"number\">46542432</span> <span class=\"number\">48334464</span></div></pre></td></tr></table></figure></p>\n<p>发现原来的list里面的内容也被改变了，_其实是因为list_of_lists中有引用了其他的list，copy.copy只是浅复制。因为它们中的元素还是共享引用.</p>\n<p>如果你希望复制一个容器对象,以及它里面的所有元素(包含元素的子元素),使用copy.deepcopy,这个方法会消耗一些时间和空间,不过,如果你需要完全复制,这是唯一的方法.</p>\n<figure class=\"highlight prolog\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"symbol\">In</span> [<span class=\"number\">90</span>]: list_of_lists = [ [<span class=\"string\">'a'</span>], [<span class=\"number\">1</span>, <span class=\"number\">2</span>], [<span class=\"string\">'z'</span>, <span class=\"number\">23</span>] ]</div><div class=\"line\"></div><div class=\"line\"><span class=\"symbol\">In</span> [<span class=\"number\">91</span>]: copy_deep = copy.deepcopy(list_of_lists)</div><div class=\"line\"></div><div class=\"line\"><span class=\"symbol\">In</span> [<span class=\"number\">92</span>]: copy_deep.append(<span class=\"string\">\"zoo\"</span>)</div><div class=\"line\"></div><div class=\"line\"><span class=\"symbol\">In</span> [<span class=\"number\">93</span>]: print list_of_lists,<span class=\"string\">\";\"</span>,copy_deep,<span class=\"string\">\";\"</span>,id(list_of_lists),<span class=\"string\">\";\"</span>,id(copy_deep)</div><div class=\"line\">[[<span class=\"string\">'a'</span>], [<span class=\"number\">1</span>, <span class=\"number\">2</span>], [<span class=\"string\">'z'</span>, <span class=\"number\">23</span>]] ; [[<span class=\"string\">'a'</span>], [<span class=\"number\">1</span>, <span class=\"number\">2</span>], [<span class=\"string\">'z'</span>, <span class=\"number\">23</span>], <span class=\"string\">'zoo'</span>]; <span class=\"number\">48319664</span>; <span class=\"number\">48333096</span></div></pre></td></tr></table></figure>\n","excerpt":"","more":"<h1 id=\"关于python-list对象的使用\"><a href=\"#关于python-list对象的使用\" class=\"headerlink\" title=\"关于python list对象的使用\"></a>关于python list对象的使用</h1><h2 id=\"需求\"><a href=\"#需求\" class=\"headerlink\" title=\"需求\"></a>需求</h2><p>如果这时候有需求是，复制一个list对象，然后<em>改变这个复制的对象内容</em>，<em>原来的内容不变</em>，该怎么做？</p>\n<h2 id=\"使用过程\"><a href=\"#使用过程\" class=\"headerlink\" title=\"使用过程\"></a>使用过程</h2><p>在使用python时候，一个list对象赋值给另外一个，或者是list作为参数传递给函数进行操作，这个list对象的id始终没有变化,如下：<br><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\">In [<span class=\"number\">59</span>]: list_a = [<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>]</div><div class=\"line\"></div><div class=\"line\">In [<span class=\"number\">60</span>]: id(list_a)</div><div class=\"line\">Out[<span class=\"number\">60</span>]: <span class=\"number\">47743920</span></div><div class=\"line\"></div><div class=\"line\">In [<span class=\"number\">61</span>]: list_b = list_a</div><div class=\"line\"></div><div class=\"line\">In [<span class=\"number\">62</span>]: id(list_b)</div><div class=\"line\">Out[<span class=\"number\">62</span>]: <span class=\"number\">47743920</span></div><div class=\"line\"></div><div class=\"line\">In [<span class=\"number\">63</span>]: <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">check_list</span><span class=\"params\">(one_list)</span>:</span></div><div class=\"line\">   ....:     <span class=\"keyword\">print</span> id(one_list)</div><div class=\"line\">   ....:     </div><div class=\"line\"></div><div class=\"line\">In [<span class=\"number\">64</span>]: check_list(list_b)</div><div class=\"line\"><span class=\"number\">47743920</span></div></pre></td></tr></table></figure></p>\n<h2 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h2><p>在Python中,无论你把对象作为参数传递,还是作为函数返回值,都是引用传递的.</p>\n<h2 id=\"copy库\"><a href=\"#copy库\" class=\"headerlink\" title=\"copy库\"></a>copy库</h2><p>标准库中的copy模块提供了两个方法来实现拷贝.一个方法是copy,它返回和参数包含内容一样的对象.<br><figure class=\"highlight stata\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">In</span> [65]: import <span class=\"keyword\">copy</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">In</span> [66]: existing_list = [1,2,3,4]</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">In</span> [67]: new_list = <span class=\"keyword\">copy</span>.<span class=\"keyword\">copy</span>(existing_list)</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">In</span> [68]: id(existing_list),id(new_list)</div><div class=\"line\"><span class=\"keyword\">Out</span>[68]: (48317144, 48317576)</div></pre></td></tr></table></figure></p>\n<p>有些时候,你希望对象中的属性也被复制,可以使用deepcopy方法:<br><figure class=\"highlight oxygene\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">In</span> [<span class=\"number\">69</span>]: new_list_deep = <span class=\"keyword\">copy</span>.deepcopy(existing_list)</div><div class=\"line\"><span class=\"keyword\">In</span> [<span class=\"number\">70</span>]: id(existing_list),id(new_list_deep)</div><div class=\"line\"><span class=\"keyword\">Out</span>[<span class=\"number\">70</span>]: (<span class=\"number\">48317144</span>, <span class=\"number\">47701816</span>)</div></pre></td></tr></table></figure></p>\n<p>这时候发现，复制的list对象的地址不一样了，那么改变复制后的list内容，会发生什么？<br><figure class=\"highlight accesslog\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div></pre></td><td class=\"code\"><pre><div class=\"line\">In <span class=\"string\">[71]</span>: new_list</div><div class=\"line\">Out<span class=\"string\">[71]</span>: <span class=\"string\">[1, 2, 3, 4]</span></div><div class=\"line\"></div><div class=\"line\">In <span class=\"string\">[72]</span>: new_list<span class=\"string\">[0]</span>=<span class=\"number\">2</span></div><div class=\"line\"></div><div class=\"line\">In <span class=\"string\">[73]</span>: new_list</div><div class=\"line\">Out<span class=\"string\">[73]</span>: <span class=\"string\">[2, 2, 3, 4]</span></div><div class=\"line\"></div><div class=\"line\">In <span class=\"string\">[74]</span>: existing_list</div><div class=\"line\">Out<span class=\"string\">[74]</span>: <span class=\"string\">[1, 2, 3, 4]</span></div><div class=\"line\"></div><div class=\"line\">In <span class=\"string\">[75]</span>: new_list_deep</div><div class=\"line\">Out<span class=\"string\">[75]</span>: <span class=\"string\">[1, 2, 3, 4]</span></div><div class=\"line\"></div><div class=\"line\">In <span class=\"string\">[76]</span>: new_list_deep<span class=\"string\">[2]</span> = <span class=\"number\">1</span></div><div class=\"line\"></div><div class=\"line\">In <span class=\"string\">[77]</span>: new_list_deep</div><div class=\"line\">Out<span class=\"string\">[77]</span>: <span class=\"string\">[1, 2, 1, 4]</span></div><div class=\"line\"></div><div class=\"line\">In <span class=\"string\">[78]</span>: existing_list</div><div class=\"line\">Out<span class=\"string\">[78]</span>: <span class=\"string\">[1, 2, 3, 4]</span></div></pre></td></tr></table></figure></p>\n<p>似乎已经满足我们最初的需求了，但是如果list对象是这样的，<code>list_of_lists = [ [‘a’], [1, 2], [‘z’, 23] ]</code>,来实验一下<br><figure class=\"highlight prolog\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"symbol\">In</span> [<span class=\"number\">85</span>]: list_of_lists = [ [<span class=\"string\">'a'</span>], [<span class=\"number\">1</span>, <span class=\"number\">2</span>], [<span class=\"string\">'z'</span>, <span class=\"number\">23</span>] ]</div><div class=\"line\"></div><div class=\"line\"><span class=\"symbol\">In</span> [<span class=\"number\">86</span>]: copy_qian = copy.copy(list_of_lists)</div><div class=\"line\"></div><div class=\"line\"><span class=\"symbol\">In</span> [<span class=\"number\">87</span>]: copy_qian[<span class=\"number\">1</span>].append(<span class=\"string\">\"zoo\"</span>)</div><div class=\"line\"></div><div class=\"line\"><span class=\"symbol\">In</span> [<span class=\"number\">88</span>]: print list_of_lists,copy_qian,id(list_of_lists),id(copy_qian)</div><div class=\"line\">[[<span class=\"string\">'a'</span>], [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"string\">'zoo'</span>], [<span class=\"string\">'z'</span>, <span class=\"number\">23</span>]] [[<span class=\"string\">'a'</span>], [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"string\">'zoo'</span>], [<span class=\"string\">'z'</span>, <span class=\"number\">23</span>]] <span class=\"number\">46542432</span> <span class=\"number\">48334464</span></div></pre></td></tr></table></figure></p>\n<p>发现原来的list里面的内容也被改变了，_其实是因为list_of_lists中有引用了其他的list，copy.copy只是浅复制。因为它们中的元素还是共享引用.</p>\n<p>如果你希望复制一个容器对象,以及它里面的所有元素(包含元素的子元素),使用copy.deepcopy,这个方法会消耗一些时间和空间,不过,如果你需要完全复制,这是唯一的方法.</p>\n<figure class=\"highlight prolog\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"symbol\">In</span> [<span class=\"number\">90</span>]: list_of_lists = [ [<span class=\"string\">'a'</span>], [<span class=\"number\">1</span>, <span class=\"number\">2</span>], [<span class=\"string\">'z'</span>, <span class=\"number\">23</span>] ]</div><div class=\"line\"></div><div class=\"line\"><span class=\"symbol\">In</span> [<span class=\"number\">91</span>]: copy_deep = copy.deepcopy(list_of_lists)</div><div class=\"line\"></div><div class=\"line\"><span class=\"symbol\">In</span> [<span class=\"number\">92</span>]: copy_deep.append(<span class=\"string\">\"zoo\"</span>)</div><div class=\"line\"></div><div class=\"line\"><span class=\"symbol\">In</span> [<span class=\"number\">93</span>]: print list_of_lists,<span class=\"string\">\";\"</span>,copy_deep,<span class=\"string\">\";\"</span>,id(list_of_lists),<span class=\"string\">\";\"</span>,id(copy_deep)</div><div class=\"line\">[[<span class=\"string\">'a'</span>], [<span class=\"number\">1</span>, <span class=\"number\">2</span>], [<span class=\"string\">'z'</span>, <span class=\"number\">23</span>]] ; [[<span class=\"string\">'a'</span>], [<span class=\"number\">1</span>, <span class=\"number\">2</span>], [<span class=\"string\">'z'</span>, <span class=\"number\">23</span>], <span class=\"string\">'zoo'</span>]; <span class=\"number\">48319664</span>; <span class=\"number\">48333096</span></div></pre></td></tr></table></figure>\n"},{"title":"pre 使用","date":"2015-10-15T03:55:40.000Z","_content":"\n问题描述\n===========\n今天遇到一个问题，在table td中使用pre标签后，整个td被撑宽了，设置了td 和pre 的宽度也不起作用，代码如下：\n```\n<td>\n    <pre>1234567890123456789012345678901234567890</pre>\n</td>\n```\n于是乎，上网找解决方法\n\n这是参考链接 [segmentfault](http://segmentfault.com/q/1010000000271095) [stackoverflow](http://stackoverflow.com/questions/17408815/fieldset-resizes-wrong-appears-to-have-unremovable-min-width-min-content/17863685#17863685).\n\n1、fieldset或者td的设置宽度以后，为何会被撑宽？\n-----------\n\nfieldset在没有内部元素时，是以block方式解析的，即外部100%宽度自适应；但设置width以后，本应当维持这个宽度了，为何会被撑宽呢？\n\n因为它的min-width属性，在CSS的属性的权重中，min-width > width，在chrome里面：\n```\nfieldset { min-width: -webkit-min-content; }\n```\n改变它的min-width就可以，复写它的值，或者改为inherit（考虑到是手机端开发，inherit是全支持的）都可以。\n```\nfieldset { min-width: inherit; }\n/*or*/\nfieldset { min-width: 100px; }\n```\n\n\n\n2、pre元素为何会自动撑宽?\n-----------\n\n因为其white-space属性：\n```\npre { white-space: pre; }\n```\npre的语义既是预保留格式，这意味着（外部标签无法决定pre标签的宽度，pre标签自动包裹内部的文本节点，不忽略空白//有误，见下）。\n\npre标签的宽度是由如下机制进行的：\n\n在内部内容不宽过父容器时，其宽度自适应于父容器；\n在内部内容比父容器宽的时候，其宽度包裹内部内容。\n这个机制类似于min-width，但比min-width还多了对于换行/空白符的处理，下面是w3school对于white-space属性值的解释：\n```\nnormal  默认。空白会被浏览器忽略。\npre 空白会被浏览器保留。其行为方式类似 HTML 中的 <pre> 标签。\nnowrap  文本不会换行，文本会在在同一行上继续，直到遇到 <br> 标签为止。\npre-wrap    保留空白符序列，但是正常地进行换行。\npre-line    合并空白符序列，但是保留换行符。\ninherit 规定应该从父元素继承 white-space 属性的值。\n```\n把white-space改为除了nowrap和pre以外的值即可符合你的要求。不过我想问，__你真的需要修改pre标签的默认行为吗？__改变pre标签的默认行为，即意味着你放弃了pre标签的原本语义。\n\n所以我们看看撑宽的路线：\n\npre内部文本节点宽度—(<icode>white-space:pre</icode>撑宽机制)—>pre宽度—(<icode style=\"color: #c7254e;\">min-width</icode>自动包裹内部内容撑宽机制)—>fieldset宽度。\n\n而我们想要的自适应宽度的路线：\n\nfieldset宽度—(定宽机制)—>pre宽度—(<icode>white-space:非pre/非nowrap排版</icode>)—>pre内部文本节点宽度。\n\n所以，有两种解决方案：\n\n* 破坏fieldset的min-width包裹机制，破坏pre的white-space撑宽机制，放弃pre标签的语义。\n* 破坏fieldset的min-width包裹机制，保留pre的white-space撑宽机制，给外层加上overflow，如下：\n```\n    fieldset {\n      overflow:scroll;\n      -webkit-overflow-scrolling:touch;\n      -moz-overflow-scrolling:touch;\n      -o-overflow-scrolling:touch ;\n    }\n```\n\n","source":"_posts/2015/10/15/html.md","raw":"title: pre 使用\ndate: 2015-10-15 11:55:40\ncategories:\n- 前端\ntags:\n- Html\n---\n\n问题描述\n===========\n今天遇到一个问题，在table td中使用pre标签后，整个td被撑宽了，设置了td 和pre 的宽度也不起作用，代码如下：\n```\n<td>\n    <pre>1234567890123456789012345678901234567890</pre>\n</td>\n```\n于是乎，上网找解决方法\n\n这是参考链接 [segmentfault](http://segmentfault.com/q/1010000000271095) [stackoverflow](http://stackoverflow.com/questions/17408815/fieldset-resizes-wrong-appears-to-have-unremovable-min-width-min-content/17863685#17863685).\n\n1、fieldset或者td的设置宽度以后，为何会被撑宽？\n-----------\n\nfieldset在没有内部元素时，是以block方式解析的，即外部100%宽度自适应；但设置width以后，本应当维持这个宽度了，为何会被撑宽呢？\n\n因为它的min-width属性，在CSS的属性的权重中，min-width > width，在chrome里面：\n```\nfieldset { min-width: -webkit-min-content; }\n```\n改变它的min-width就可以，复写它的值，或者改为inherit（考虑到是手机端开发，inherit是全支持的）都可以。\n```\nfieldset { min-width: inherit; }\n/*or*/\nfieldset { min-width: 100px; }\n```\n\n\n\n2、pre元素为何会自动撑宽?\n-----------\n\n因为其white-space属性：\n```\npre { white-space: pre; }\n```\npre的语义既是预保留格式，这意味着（外部标签无法决定pre标签的宽度，pre标签自动包裹内部的文本节点，不忽略空白//有误，见下）。\n\npre标签的宽度是由如下机制进行的：\n\n在内部内容不宽过父容器时，其宽度自适应于父容器；\n在内部内容比父容器宽的时候，其宽度包裹内部内容。\n这个机制类似于min-width，但比min-width还多了对于换行/空白符的处理，下面是w3school对于white-space属性值的解释：\n```\nnormal  默认。空白会被浏览器忽略。\npre 空白会被浏览器保留。其行为方式类似 HTML 中的 <pre> 标签。\nnowrap  文本不会换行，文本会在在同一行上继续，直到遇到 <br> 标签为止。\npre-wrap    保留空白符序列，但是正常地进行换行。\npre-line    合并空白符序列，但是保留换行符。\ninherit 规定应该从父元素继承 white-space 属性的值。\n```\n把white-space改为除了nowrap和pre以外的值即可符合你的要求。不过我想问，__你真的需要修改pre标签的默认行为吗？__改变pre标签的默认行为，即意味着你放弃了pre标签的原本语义。\n\n所以我们看看撑宽的路线：\n\npre内部文本节点宽度—(<icode>white-space:pre</icode>撑宽机制)—>pre宽度—(<icode style=\"color: #c7254e;\">min-width</icode>自动包裹内部内容撑宽机制)—>fieldset宽度。\n\n而我们想要的自适应宽度的路线：\n\nfieldset宽度—(定宽机制)—>pre宽度—(<icode>white-space:非pre/非nowrap排版</icode>)—>pre内部文本节点宽度。\n\n所以，有两种解决方案：\n\n* 破坏fieldset的min-width包裹机制，破坏pre的white-space撑宽机制，放弃pre标签的语义。\n* 破坏fieldset的min-width包裹机制，保留pre的white-space撑宽机制，给外层加上overflow，如下：\n```\n    fieldset {\n      overflow:scroll;\n      -webkit-overflow-scrolling:touch;\n      -moz-overflow-scrolling:touch;\n      -o-overflow-scrolling:touch ;\n    }\n```\n\n","slug":"html","published":1,"updated":"2016-06-29T15:29:25.175Z","_id":"cik3sv50p003m0s37r0ebl1ex","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"问题描述\"><a href=\"#问题描述\" class=\"headerlink\" title=\"问题描述\"></a>问题描述</h1><p>今天遇到一个问题，在table td中使用pre标签后，整个td被撑宽了，设置了td 和pre 的宽度也不起作用，代码如下：<br><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">td</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">pre</span>&gt;</span>1234567890123456789012345678901234567890<span class=\"tag\">&lt;/<span class=\"name\">pre</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></div></pre></td></tr></table></figure></p>\n<p>于是乎，上网找解决方法</p>\n<p>这是参考链接 <a href=\"http://segmentfault.com/q/1010000000271095\" target=\"_blank\" rel=\"external\">segmentfault</a> <a href=\"http://stackoverflow.com/questions/17408815/fieldset-resizes-wrong-appears-to-have-unremovable-min-width-min-content/17863685#17863685\" target=\"_blank\" rel=\"external\">stackoverflow</a>.</p>\n<h2 id=\"1、fieldset或者td的设置宽度以后，为何会被撑宽？\"><a href=\"#1、fieldset或者td的设置宽度以后，为何会被撑宽？\" class=\"headerlink\" title=\"1、fieldset或者td的设置宽度以后，为何会被撑宽？\"></a>1、fieldset或者td的设置宽度以后，为何会被撑宽？</h2><p>fieldset在没有内部元素时，是以block方式解析的，即外部100%宽度自适应；但设置width以后，本应当维持这个宽度了，为何会被撑宽呢？</p>\n<p>因为它的min-width属性，在CSS的属性的权重中，min-width &gt; width，在chrome里面：<br><figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-tag\">fieldset</span> &#123; <span class=\"attribute\">min-width</span>: -webkit-min-content; &#125;</div></pre></td></tr></table></figure></p>\n<p>改变它的min-width就可以，复写它的值，或者改为inherit（考虑到是手机端开发，inherit是全支持的）都可以。<br><figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-tag\">fieldset</span> &#123; <span class=\"attribute\">min-width</span>: inherit; &#125;</div><div class=\"line\"><span class=\"comment\">/*or*/</span></div><div class=\"line\"><span class=\"selector-tag\">fieldset</span> &#123; <span class=\"attribute\">min-width</span>: <span class=\"number\">100px</span>; &#125;</div></pre></td></tr></table></figure></p>\n<h2 id=\"2、pre元素为何会自动撑宽\"><a href=\"#2、pre元素为何会自动撑宽\" class=\"headerlink\" title=\"2、pre元素为何会自动撑宽?\"></a>2、pre元素为何会自动撑宽?</h2><p>因为其white-space属性：<br><figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-tag\">pre</span> &#123; <span class=\"attribute\">white-space</span>: pre; &#125;</div></pre></td></tr></table></figure></p>\n<p>pre的语义既是预保留格式，这意味着（外部标签无法决定pre标签的宽度，pre标签自动包裹内部的文本节点，不忽略空白//有误，见下）。</p>\n<p>pre标签的宽度是由如下机制进行的：</p>\n<p>在内部内容不宽过父容器时，其宽度自适应于父容器；<br>在内部内容比父容器宽的时候，其宽度包裹内部内容。<br>这个机制类似于min-width，但比min-width还多了对于换行/空白符的处理，下面是w3school对于white-space属性值的解释：<br><figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">normal</span>  默认。空白会被浏览器忽略。</div><div class=\"line\"><span class=\"keyword\">pre</span> 空白会被浏览器保留。其行为方式类似 HTML 中的 <span class=\"symbol\">&lt;pre&gt;</span> 标签。</div><div class=\"line\">nowrap  文本不会换行，文本会在在同一行上继续，直到遇到 <span class=\"symbol\">&lt;br&gt;</span> 标签为止。</div><div class=\"line\"><span class=\"keyword\">pre</span>-wrap    保留空白符序列，但是正常地进行换行。</div><div class=\"line\"><span class=\"keyword\">pre</span>-<span class=\"built_in\">line</span>    合并空白符序列，但是保留换行符。</div><div class=\"line\">inherit 规定应该从父元素继承 white-space 属性的值。</div></pre></td></tr></table></figure></p>\n<p>把white-space改为除了nowrap和pre以外的值即可符合你的要求。不过我想问，<strong>你真的需要修改pre标签的默认行为吗？</strong>改变pre标签的默认行为，即意味着你放弃了pre标签的原本语义。</p>\n<p>所以我们看看撑宽的路线：</p>\n<p>pre内部文本节点宽度—(<icode>white-space:pre</icode>撑宽机制)—&gt;pre宽度—(<icode style=\"color: #c7254e;\">min-width</icode>自动包裹内部内容撑宽机制)—&gt;fieldset宽度。</p>\n<p>而我们想要的自适应宽度的路线：</p>\n<p>fieldset宽度—(定宽机制)—&gt;pre宽度—(<icode>white-space:非pre/非nowrap排版</icode>)—&gt;pre内部文本节点宽度。</p>\n<p>所以，有两种解决方案：</p>\n<ul>\n<li>破坏fieldset的min-width包裹机制，破坏pre的white-space撑宽机制，放弃pre标签的语义。</li>\n<li>破坏fieldset的min-width包裹机制，保留pre的white-space撑宽机制，给外层加上overflow，如下：<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-tag\">fieldset</span> &#123;</div><div class=\"line\">  <span class=\"attribute\">overflow</span>:scroll;</div><div class=\"line\">  <span class=\"attribute\">-webkit-overflow-scrolling</span>:touch;</div><div class=\"line\">  <span class=\"attribute\">-moz-overflow-scrolling</span>:touch;</div><div class=\"line\">  <span class=\"attribute\">-o-overflow-scrolling</span>:touch ;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n</li>\n</ul>\n","excerpt":"","more":"<h1 id=\"问题描述\"><a href=\"#问题描述\" class=\"headerlink\" title=\"问题描述\"></a>问题描述</h1><p>今天遇到一个问题，在table td中使用pre标签后，整个td被撑宽了，设置了td 和pre 的宽度也不起作用，代码如下：<br><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">td</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">pre</span>&gt;</span>1234567890123456789012345678901234567890<span class=\"tag\">&lt;/<span class=\"name\">pre</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></div></pre></td></tr></table></figure></p>\n<p>于是乎，上网找解决方法</p>\n<p>这是参考链接 <a href=\"http://segmentfault.com/q/1010000000271095\">segmentfault</a> <a href=\"http://stackoverflow.com/questions/17408815/fieldset-resizes-wrong-appears-to-have-unremovable-min-width-min-content/17863685#17863685\">stackoverflow</a>.</p>\n<h2 id=\"1、fieldset或者td的设置宽度以后，为何会被撑宽？\"><a href=\"#1、fieldset或者td的设置宽度以后，为何会被撑宽？\" class=\"headerlink\" title=\"1、fieldset或者td的设置宽度以后，为何会被撑宽？\"></a>1、fieldset或者td的设置宽度以后，为何会被撑宽？</h2><p>fieldset在没有内部元素时，是以block方式解析的，即外部100%宽度自适应；但设置width以后，本应当维持这个宽度了，为何会被撑宽呢？</p>\n<p>因为它的min-width属性，在CSS的属性的权重中，min-width &gt; width，在chrome里面：<br><figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-tag\">fieldset</span> &#123; <span class=\"attribute\">min-width</span>: -webkit-min-content; &#125;</div></pre></td></tr></table></figure></p>\n<p>改变它的min-width就可以，复写它的值，或者改为inherit（考虑到是手机端开发，inherit是全支持的）都可以。<br><figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-tag\">fieldset</span> &#123; <span class=\"attribute\">min-width</span>: inherit; &#125;</div><div class=\"line\"><span class=\"comment\">/*or*/</span></div><div class=\"line\"><span class=\"selector-tag\">fieldset</span> &#123; <span class=\"attribute\">min-width</span>: <span class=\"number\">100px</span>; &#125;</div></pre></td></tr></table></figure></p>\n<h2 id=\"2、pre元素为何会自动撑宽\"><a href=\"#2、pre元素为何会自动撑宽\" class=\"headerlink\" title=\"2、pre元素为何会自动撑宽?\"></a>2、pre元素为何会自动撑宽?</h2><p>因为其white-space属性：<br><figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-tag\">pre</span> &#123; <span class=\"attribute\">white-space</span>: pre; &#125;</div></pre></td></tr></table></figure></p>\n<p>pre的语义既是预保留格式，这意味着（外部标签无法决定pre标签的宽度，pre标签自动包裹内部的文本节点，不忽略空白//有误，见下）。</p>\n<p>pre标签的宽度是由如下机制进行的：</p>\n<p>在内部内容不宽过父容器时，其宽度自适应于父容器；<br>在内部内容比父容器宽的时候，其宽度包裹内部内容。<br>这个机制类似于min-width，但比min-width还多了对于换行/空白符的处理，下面是w3school对于white-space属性值的解释：<br><figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">normal</span>  默认。空白会被浏览器忽略。</div><div class=\"line\"><span class=\"keyword\">pre</span> 空白会被浏览器保留。其行为方式类似 HTML 中的 <span class=\"symbol\">&lt;pre&gt;</span> 标签。</div><div class=\"line\">nowrap  文本不会换行，文本会在在同一行上继续，直到遇到 <span class=\"symbol\">&lt;br&gt;</span> 标签为止。</div><div class=\"line\"><span class=\"keyword\">pre</span>-wrap    保留空白符序列，但是正常地进行换行。</div><div class=\"line\"><span class=\"keyword\">pre</span>-<span class=\"built_in\">line</span>    合并空白符序列，但是保留换行符。</div><div class=\"line\">inherit 规定应该从父元素继承 white-space 属性的值。</div></pre></td></tr></table></figure></p>\n<p>把white-space改为除了nowrap和pre以外的值即可符合你的要求。不过我想问，<strong>你真的需要修改pre标签的默认行为吗？</strong>改变pre标签的默认行为，即意味着你放弃了pre标签的原本语义。</p>\n<p>所以我们看看撑宽的路线：</p>\n<p>pre内部文本节点宽度—(<icode>white-space:pre</icode>撑宽机制)—&gt;pre宽度—(<icode style=\"color: #c7254e;\">min-width</icode>自动包裹内部内容撑宽机制)—&gt;fieldset宽度。</p>\n<p>而我们想要的自适应宽度的路线：</p>\n<p>fieldset宽度—(定宽机制)—&gt;pre宽度—(<icode>white-space:非pre/非nowrap排版</icode>)—&gt;pre内部文本节点宽度。</p>\n<p>所以，有两种解决方案：</p>\n<ul>\n<li>破坏fieldset的min-width包裹机制，破坏pre的white-space撑宽机制，放弃pre标签的语义。</li>\n<li>破坏fieldset的min-width包裹机制，保留pre的white-space撑宽机制，给外层加上overflow，如下：<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-tag\">fieldset</span> &#123;</div><div class=\"line\">  <span class=\"attribute\">overflow</span>:scroll;</div><div class=\"line\">  <span class=\"attribute\">-webkit-overflow-scrolling</span>:touch;</div><div class=\"line\">  <span class=\"attribute\">-moz-overflow-scrolling</span>:touch;</div><div class=\"line\">  <span class=\"attribute\">-o-overflow-scrolling</span>:touch ;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n</li>\n</ul>\n"},{"title":"linux 使用集锦","date":"2015-10-14T02:54:54.000Z","_content":"![一起使用linux](http://huangyan.qiniudn.com/linux.jpg?imageMogr2/thumbnail/600x400 \"一起使用linux\")\n\n\n\nGREP\n=============\n问题\n-------------\ngrep 搜索时忽略 目录\n在整个项目搜索某个关键字的时候，有些目录或者文件需要排除掉，我们可以采用以下方法：\n讲解\n-------------\n首先可以grep --help，来查看使用说明\n``` bash\ngrep --help\n用法: grep [选项]... PATTERN [FILE]...\n在每个 FILE 或是标准输入中查找 PATTERN。\n默认的 PATTERN 是一个基本正则表达式(缩写为 BRE)。\n例如: grep -i 'hello world' menu.h main.c\n\n正则表达式选择与解释:\n  -E, --extended-regexp     PATTERN 是一个可扩展的正则表达式(缩写为 ERE)\n  -F, --fixed-strings       PATTERN 是一组由断行符分隔的定长字符串。\n  -G, --basic-regexp        PATTERN 是一个基本正则表达式(缩写为 BRE)\n  -P, --perl-regexp         PATTERN 是一个 Perl 正则表达式\n  -e, --regexp=PATTERN      用 PATTERN 来进行匹配操作\n  -f, --file=FILE           从 FILE 中取得 PATTERN\n  -i, --ignore-case         忽略大小写\n  -w, --word-regexp         强制 PATTERN 仅完全匹配字词\n  -x, --line-regexp         强制 PATTERN 仅完全匹配一行\n  -z, --null-data           一个 0 字节的数据行，但不是空行\n\n杂项:\n  -s, --no-messages         不显示错误信息\n  -v, --invert-match        选中不匹配的行\n  -V, --version             显示版本信息并退出\n      --help                显示此帮助并退出\n      --mmap                忽略向后兼容性\n\n输出控制:\n  -m, --max-count=NUM       NUM 次匹配后停止\n  -b, --byte-offset         输出的同时打印字节偏移\n  -n, --line-number         输出的同时打印行号\n      --line-buffered       每行输出清空\n  -H, --with-filename       为每一匹配项打印文件名\n  -h, --no-filename         输出时不显示文件名前缀\n      --label=LABEL         将LABEL 作为标准输入文件名前缀\n  -o, --only-matching       只显示一行中匹配PATTERN 的部分\n  -q, --quiet, --silent     不显示所有输出\n      --binary-files=TYPE   假定二进制文件的TYPE 类型；\n                            TYPE 可以是`binary', `text', 或`without-match'\n  -a, --text                等同于 --binary-files=text\n  -I                        等同于 --binary-files=without-match\n  -d, --directories=ACTION  操作目录的方式；\n                            ACTION 可以是`read', `recurse',或`skip'\n  -D, --devices=ACTION      操作设备、先入先出队列、套接字的方式；\n                            ACTION 可以是`read'或`skip'\n  -R, -r, --recursive       等同于 --directories=recurse\n      --include=FILE_PATTERN  只查找匹配FILE_PATTERN 的文件\n      --exclude=FILE_PATTERN  跳过匹配FILE_PATTERN 的文件和目录\n      --exclude-from=FILE   跳过所有除FILE 以外的文件\n      --exclude-dir=PATTERN  跳过所有匹配PATTERN 的目录。\n  -L, --files-without-match  只打印不匹配FILEs 的文件名\n  -l, --files-with-matches  只打印匹配FILES 的文件名\n  -c, --count               只打印每个FILE 中的匹配行数目\n  -T, --initial-tab         行首tabs 分隔（如有必要）\n  -Z, --null                在FILE 文件最后打印空字符\n\n文件控制:\n  -B, --before-context=NUM  打印以文本起始的NUM 行\n  -A, --after-context=NUM   打印以文本结尾的NUM 行\n  -C, --context=NUM         打印输出文本NUM 行\n  -NUM                      等同于 --context=NUM\n      --color[=WHEN],\n      --colour[=WHEN]       使用标志高亮匹配字串；\n                            WHEN 可以是`always', `never'或`auto'\n  -U, --binary              不要清除行尾的CR 字符(MSDOS 模式)\n  -u, --unix-byte-offsets   当CR 字符不存在，报告字节偏移(MSDOS 模式)\n\n‘egrep’即‘grep -E’。‘fgrep’即‘grep -F’。\n直接使用‘egrep’或是‘fgrep’均已不可行了。\n不带 FILE 参数，或是 FILE 为 -，将读取标准输入。如果少于两个 FILE 参数\n就要默认使用 -h 参数。如果选中任意一行，那退出状态为 0，否则为 1；\n如果有错误产生，且未指定 -q 参数，那退出状态为 2。\n\n请将错误报告给: bug-grep@gnu.org\nGNU Grep 主页: <http://www.gnu.org/software/grep/>\nGNU 软件的通用帮助: <http://www.gnu.org/gethelp/>\n\n```\n\n例子\n-----------\n```\ngrep wait_post_num -rn ./ --exclude-dir=\"fixtures\"\n```\n配置\n-----------\n如果每次都输入--exclude-dir=参数，是不是很慢还容易出错，降低效率呢?\n不过不用担心，我们可以把--exclude-dir=参数通过加入配置文件 ~/.bashrc (这是bash的当前用户配置文件) 的方法来简化操作，提高效率。\n\n在~/.bashrc文件的末尾添加以下命令：\n```\nexport GREP_OPTIONS=\"--exclude-dir=**\"\n```\n然后保存，执行source ~/.bashrc或者. ~/.bashrc，使修改起作用。\n\n\nfind\n============\n```\nfind ./ -name \"*file_name*\" 从当前目录查找文件中包含这个字段的文件\n```\n\n查看文件大小和文件夹大小\n===============\ndf 说明\n------------------\ndf命令可以显示目前所有文件系统的可用空间及使用情形\n\t\n\t```\n\tyann@Computer:~$ df --help\n\t用法：df [选项]... [文件]...\n\t显示每个文件所在的文件系统的信息，默认是显示所有文件系统。\n\t\n\t长选项必须使用的参数对于短选项时也是必需使用的。\n\t  -a, --all\t\t包含虚拟文件系统\n\t  -B, --block-size=大小\t使用指定字节数的块。例如-BM 以 1,248,576\n\t\t\t\t字节为单位显示大小。参看SIZE 格式。      --total\t\t显示总计信息\n\t  -h, --human-readable\t以可读性较好的格式显示尺寸(例如：1K 234M 2G)\n\t  -H, --si\t\t计算时使用1000 为基底而非1024\n\t  -i, --inodes\t\t显示inode 信息而非块使用量\n\t  -k\t\t\t即--block-size=1K\n\t  -l, --local\t\t只显示本机的文件系统\n\t      --no-sync\t\t取得使用量数据前不进行同步动作(默认)\n\t  -P, --portability\t使用POSIX 兼容的输出格式\n\t      --sync\t\t取得使用量数据前先进行同步动作\n\t  -t, --type=类型\t只显示指定文件系统为指定类型的信息\n\t  -T, --print-type\t显示文件系统类型\n\t  -x, --exclude-type=类型\t只显示文件系统不是指定类型信息\n\t  -v\t\t\t(忽略)\n\t      --help\t\t显示此帮助信息并退出\n\t      --version\t\t显示版本信息并退出\n\t\n\t所显示的数值是来自 --block-size、DF_BLOCK_SIZE、BLOCK_SIZE \n\t及 BLOCKSIZE 环境变量中第一个可用的 SIZE 单位。\n\t否则，默认单位是 1024 字节(或是 512，若设定 POSIXLY_CORRECT 的话)。\n\t\n\tSIZE 可以是一个可选的整数，后面跟着以下单位中的一个：\n\tKB 1000，K 1024，MB 1000*1000，M 1024*1024，还有 G、T、P、E、Z、Y。\n\t\n\t请向bug-coreutils@gnu.org 报告df 的错误\n\tGNU coreutils 的主页：<http://www.gnu.org/software/coreutils/>\n\tGNU 软件一般性帮助：<http://www.gnu.org/gethelp/>\n\t请向<http://translationproject.org/team/zh_CN.html> 报告df 的翻译错误\n\t要获取完整文档，请运行：info coreutils 'df invocation'\n\t```\n例子\n-----------\n\n1. df\n\t```\n\tyann@Computer:~$ df\n\t文件系统           1K-块     已用     可用 已用% 挂载点\n\t/dev/sda3      117985604 41013568 70972012   37% /\n\tudev             4022384        4  4022380    1% /dev\n\ttmpfs             806388     1144   805244    1% /run\n\tnone                5120        0     5120    0% /run/lock\n\tnone             4031940   169732  3862208    5% /run/shm\n\t```\n2. df -h 以可读性较好的格式显示尺寸\n\t```\n\tyann@Computer:~$ df -h\n\t文件系统        容量  已用  可用 已用% 挂载点\n\t/dev/sda3       113G   40G   68G   37% /\n\tudev            3.9G  4.0K  3.9G    1% /dev\n\ttmpfs           788M  1.2M  787M    1% /run\n\tnone            5.0M     0  5.0M    0% /run/lock\n\tnone            3.9G  168M  3.7G    5% /run/shm\n\t\n\t```\ndu 说明\n---------------\ndu：查询文件或文件夹的磁盘使用空间\n\n```\nyann@Computer:~$ du --help\n用法：du [选项]... [文件]...\n　或：du [选项]... --files0-from=F\n计算每个文件的磁盘用量，目录则取总用量。\n\n长选项必须使用的参数对于短选项时也是必需使用的。\n  -a, --all\t\t输出所有文件的磁盘用量，不仅仅是目录\n      --apparent-size\t显示表面用量，而并非是磁盘用量；虽然表面用量通常会\n\t\t\t小一些，但有时它会因为稀疏文件间的\"洞\"、内部碎\n\t\t\t片、非直接引用的块等原因而变大。\n  -B, --block-size=大小\t使用指定字节数的块。例如-BM 以 1,048,576\n\t\t\t字节为单位显示大小。参看SIZE 格式。  -b, --bytes\t\t等于--apparent-size --block-size=1\n  -c, --total\t\t显示总计信息\n  -D, --dereference-args\t解除命令行中列出的符号连接\n      --files0-from=F\t计算文件F 中以NUL 结尾的文件名对应占用的磁盘空间\n\t\t\t如果F 的值是\"-\"，则从标准输入读入文件名\n  -H\t\t\t等于--dereference-args (-D)\n  -h, --human-readable\t以可读性较好的方式显示尺寸(例如：1K 234M 2G)\n      --si\t\t类似-h，但在计算时使用1000 为基底而非1024\n  -k\t\t\t等于--block-size=1K\n  -l, --count-links\t如果是硬连接，就多次计算其尺寸\n  -m\t\t\t等于--block-size=1M\n  -L, --dereference\t找出任何符号链接指示的真正目的地\n  -P, --no-dereference\t不跟随任何符号链接(默认)\n  -0, --null\t\t将每个空行视作0 字节而非换行符\n  -S, --separate-dirs\t不包括子目录的占用量\n  -s, --summarize\t只分别计算命令列中每个参数所占的总用量\n  -x, --one-file-system\t\t跳过处于不同文件系统之上的目录\n  -X, --exclude-from=文件\t排除与指定文件中描述的模式相符的文件\n      --exclude=PATTERN\t\t排除与PATTERN 中描述的模式相符的文件\n      --max-depth=N\t显示目录总计(与--all 一起使用计算文件)\n\t\t\t当N 为指定数值时计算深度为N；\n\t\t\t--max-depth=0 等于--summarize\n      --time\t\t显示目录或该目录子目录下所有文件的最后修改时间\n      --time=WORD\t显示WORD 时间，而非修改时间：\n\t\t\tatime，access，use，ctime 或status\n      --time-style=样式\t按照指定样式显示时间(样式解释规则同\"date\"命令)：\n\t\t\tfull-iso，long-iso，iso，+FORMAT\n      --help\t\t显示此帮助信息并退出\n      --version\t\t显示版本信息并退出\n\n所显示的数值是来自 --block-size、DU_BLOCK_SIZE、BLOCK_SIZE \n及 BLOCKSIZE 环境变量中第一个可用的 SIZE 单位。\n否则，默认单位是 1024 字节(或是 512，若设定 POSIXLY_CORRECT 的话)。\n\nSIZE 可以是一个可选的整数，后面跟着以下单位中的一个：\nKB 1000，K 1024，MB 1000*1000，M 1024*1024，还有 G、T、P、E、Z、Y。\n\n```\n例子\n--------------\n1. <code>du -h --max-depth=1 文件路径</code>\n\t```\n\t(ve)yann@Computer:~/djandgo/$ du -h --max-depth=1 ../.git\n\t4.0K\t../.git/branches\n\t12K\t../.git/info\n\t28K\t../.git/refs\n\t35M\t../.git/objects\n\t380K\t../.git/logs\n\t40K\t../.git/hooks\n\t37M\t../.git\n\t\n```","source":"_posts/2015/10/14/linux.md","raw":"title: linux 使用集锦\ndate: 2015-10-14 10:54:54\ncategories:\n- Linux\ntags:\n- Linux\n---\n![一起使用linux](http://huangyan.qiniudn.com/linux.jpg?imageMogr2/thumbnail/600x400 \"一起使用linux\")\n\n\n\nGREP\n=============\n问题\n-------------\ngrep 搜索时忽略 目录\n在整个项目搜索某个关键字的时候，有些目录或者文件需要排除掉，我们可以采用以下方法：\n讲解\n-------------\n首先可以grep --help，来查看使用说明\n``` bash\ngrep --help\n用法: grep [选项]... PATTERN [FILE]...\n在每个 FILE 或是标准输入中查找 PATTERN。\n默认的 PATTERN 是一个基本正则表达式(缩写为 BRE)。\n例如: grep -i 'hello world' menu.h main.c\n\n正则表达式选择与解释:\n  -E, --extended-regexp     PATTERN 是一个可扩展的正则表达式(缩写为 ERE)\n  -F, --fixed-strings       PATTERN 是一组由断行符分隔的定长字符串。\n  -G, --basic-regexp        PATTERN 是一个基本正则表达式(缩写为 BRE)\n  -P, --perl-regexp         PATTERN 是一个 Perl 正则表达式\n  -e, --regexp=PATTERN      用 PATTERN 来进行匹配操作\n  -f, --file=FILE           从 FILE 中取得 PATTERN\n  -i, --ignore-case         忽略大小写\n  -w, --word-regexp         强制 PATTERN 仅完全匹配字词\n  -x, --line-regexp         强制 PATTERN 仅完全匹配一行\n  -z, --null-data           一个 0 字节的数据行，但不是空行\n\n杂项:\n  -s, --no-messages         不显示错误信息\n  -v, --invert-match        选中不匹配的行\n  -V, --version             显示版本信息并退出\n      --help                显示此帮助并退出\n      --mmap                忽略向后兼容性\n\n输出控制:\n  -m, --max-count=NUM       NUM 次匹配后停止\n  -b, --byte-offset         输出的同时打印字节偏移\n  -n, --line-number         输出的同时打印行号\n      --line-buffered       每行输出清空\n  -H, --with-filename       为每一匹配项打印文件名\n  -h, --no-filename         输出时不显示文件名前缀\n      --label=LABEL         将LABEL 作为标准输入文件名前缀\n  -o, --only-matching       只显示一行中匹配PATTERN 的部分\n  -q, --quiet, --silent     不显示所有输出\n      --binary-files=TYPE   假定二进制文件的TYPE 类型；\n                            TYPE 可以是`binary', `text', 或`without-match'\n  -a, --text                等同于 --binary-files=text\n  -I                        等同于 --binary-files=without-match\n  -d, --directories=ACTION  操作目录的方式；\n                            ACTION 可以是`read', `recurse',或`skip'\n  -D, --devices=ACTION      操作设备、先入先出队列、套接字的方式；\n                            ACTION 可以是`read'或`skip'\n  -R, -r, --recursive       等同于 --directories=recurse\n      --include=FILE_PATTERN  只查找匹配FILE_PATTERN 的文件\n      --exclude=FILE_PATTERN  跳过匹配FILE_PATTERN 的文件和目录\n      --exclude-from=FILE   跳过所有除FILE 以外的文件\n      --exclude-dir=PATTERN  跳过所有匹配PATTERN 的目录。\n  -L, --files-without-match  只打印不匹配FILEs 的文件名\n  -l, --files-with-matches  只打印匹配FILES 的文件名\n  -c, --count               只打印每个FILE 中的匹配行数目\n  -T, --initial-tab         行首tabs 分隔（如有必要）\n  -Z, --null                在FILE 文件最后打印空字符\n\n文件控制:\n  -B, --before-context=NUM  打印以文本起始的NUM 行\n  -A, --after-context=NUM   打印以文本结尾的NUM 行\n  -C, --context=NUM         打印输出文本NUM 行\n  -NUM                      等同于 --context=NUM\n      --color[=WHEN],\n      --colour[=WHEN]       使用标志高亮匹配字串；\n                            WHEN 可以是`always', `never'或`auto'\n  -U, --binary              不要清除行尾的CR 字符(MSDOS 模式)\n  -u, --unix-byte-offsets   当CR 字符不存在，报告字节偏移(MSDOS 模式)\n\n‘egrep’即‘grep -E’。‘fgrep’即‘grep -F’。\n直接使用‘egrep’或是‘fgrep’均已不可行了。\n不带 FILE 参数，或是 FILE 为 -，将读取标准输入。如果少于两个 FILE 参数\n就要默认使用 -h 参数。如果选中任意一行，那退出状态为 0，否则为 1；\n如果有错误产生，且未指定 -q 参数，那退出状态为 2。\n\n请将错误报告给: bug-grep@gnu.org\nGNU Grep 主页: <http://www.gnu.org/software/grep/>\nGNU 软件的通用帮助: <http://www.gnu.org/gethelp/>\n\n```\n\n例子\n-----------\n```\ngrep wait_post_num -rn ./ --exclude-dir=\"fixtures\"\n```\n配置\n-----------\n如果每次都输入--exclude-dir=参数，是不是很慢还容易出错，降低效率呢?\n不过不用担心，我们可以把--exclude-dir=参数通过加入配置文件 ~/.bashrc (这是bash的当前用户配置文件) 的方法来简化操作，提高效率。\n\n在~/.bashrc文件的末尾添加以下命令：\n```\nexport GREP_OPTIONS=\"--exclude-dir=**\"\n```\n然后保存，执行source ~/.bashrc或者. ~/.bashrc，使修改起作用。\n\n\nfind\n============\n```\nfind ./ -name \"*file_name*\" 从当前目录查找文件中包含这个字段的文件\n```\n\n查看文件大小和文件夹大小\n===============\ndf 说明\n------------------\ndf命令可以显示目前所有文件系统的可用空间及使用情形\n\t\n\t```\n\tyann@Computer:~$ df --help\n\t用法：df [选项]... [文件]...\n\t显示每个文件所在的文件系统的信息，默认是显示所有文件系统。\n\t\n\t长选项必须使用的参数对于短选项时也是必需使用的。\n\t  -a, --all\t\t包含虚拟文件系统\n\t  -B, --block-size=大小\t使用指定字节数的块。例如-BM 以 1,248,576\n\t\t\t\t字节为单位显示大小。参看SIZE 格式。      --total\t\t显示总计信息\n\t  -h, --human-readable\t以可读性较好的格式显示尺寸(例如：1K 234M 2G)\n\t  -H, --si\t\t计算时使用1000 为基底而非1024\n\t  -i, --inodes\t\t显示inode 信息而非块使用量\n\t  -k\t\t\t即--block-size=1K\n\t  -l, --local\t\t只显示本机的文件系统\n\t      --no-sync\t\t取得使用量数据前不进行同步动作(默认)\n\t  -P, --portability\t使用POSIX 兼容的输出格式\n\t      --sync\t\t取得使用量数据前先进行同步动作\n\t  -t, --type=类型\t只显示指定文件系统为指定类型的信息\n\t  -T, --print-type\t显示文件系统类型\n\t  -x, --exclude-type=类型\t只显示文件系统不是指定类型信息\n\t  -v\t\t\t(忽略)\n\t      --help\t\t显示此帮助信息并退出\n\t      --version\t\t显示版本信息并退出\n\t\n\t所显示的数值是来自 --block-size、DF_BLOCK_SIZE、BLOCK_SIZE \n\t及 BLOCKSIZE 环境变量中第一个可用的 SIZE 单位。\n\t否则，默认单位是 1024 字节(或是 512，若设定 POSIXLY_CORRECT 的话)。\n\t\n\tSIZE 可以是一个可选的整数，后面跟着以下单位中的一个：\n\tKB 1000，K 1024，MB 1000*1000，M 1024*1024，还有 G、T、P、E、Z、Y。\n\t\n\t请向bug-coreutils@gnu.org 报告df 的错误\n\tGNU coreutils 的主页：<http://www.gnu.org/software/coreutils/>\n\tGNU 软件一般性帮助：<http://www.gnu.org/gethelp/>\n\t请向<http://translationproject.org/team/zh_CN.html> 报告df 的翻译错误\n\t要获取完整文档，请运行：info coreutils 'df invocation'\n\t```\n例子\n-----------\n\n1. df\n\t```\n\tyann@Computer:~$ df\n\t文件系统           1K-块     已用     可用 已用% 挂载点\n\t/dev/sda3      117985604 41013568 70972012   37% /\n\tudev             4022384        4  4022380    1% /dev\n\ttmpfs             806388     1144   805244    1% /run\n\tnone                5120        0     5120    0% /run/lock\n\tnone             4031940   169732  3862208    5% /run/shm\n\t```\n2. df -h 以可读性较好的格式显示尺寸\n\t```\n\tyann@Computer:~$ df -h\n\t文件系统        容量  已用  可用 已用% 挂载点\n\t/dev/sda3       113G   40G   68G   37% /\n\tudev            3.9G  4.0K  3.9G    1% /dev\n\ttmpfs           788M  1.2M  787M    1% /run\n\tnone            5.0M     0  5.0M    0% /run/lock\n\tnone            3.9G  168M  3.7G    5% /run/shm\n\t\n\t```\ndu 说明\n---------------\ndu：查询文件或文件夹的磁盘使用空间\n\n```\nyann@Computer:~$ du --help\n用法：du [选项]... [文件]...\n　或：du [选项]... --files0-from=F\n计算每个文件的磁盘用量，目录则取总用量。\n\n长选项必须使用的参数对于短选项时也是必需使用的。\n  -a, --all\t\t输出所有文件的磁盘用量，不仅仅是目录\n      --apparent-size\t显示表面用量，而并非是磁盘用量；虽然表面用量通常会\n\t\t\t小一些，但有时它会因为稀疏文件间的\"洞\"、内部碎\n\t\t\t片、非直接引用的块等原因而变大。\n  -B, --block-size=大小\t使用指定字节数的块。例如-BM 以 1,048,576\n\t\t\t字节为单位显示大小。参看SIZE 格式。  -b, --bytes\t\t等于--apparent-size --block-size=1\n  -c, --total\t\t显示总计信息\n  -D, --dereference-args\t解除命令行中列出的符号连接\n      --files0-from=F\t计算文件F 中以NUL 结尾的文件名对应占用的磁盘空间\n\t\t\t如果F 的值是\"-\"，则从标准输入读入文件名\n  -H\t\t\t等于--dereference-args (-D)\n  -h, --human-readable\t以可读性较好的方式显示尺寸(例如：1K 234M 2G)\n      --si\t\t类似-h，但在计算时使用1000 为基底而非1024\n  -k\t\t\t等于--block-size=1K\n  -l, --count-links\t如果是硬连接，就多次计算其尺寸\n  -m\t\t\t等于--block-size=1M\n  -L, --dereference\t找出任何符号链接指示的真正目的地\n  -P, --no-dereference\t不跟随任何符号链接(默认)\n  -0, --null\t\t将每个空行视作0 字节而非换行符\n  -S, --separate-dirs\t不包括子目录的占用量\n  -s, --summarize\t只分别计算命令列中每个参数所占的总用量\n  -x, --one-file-system\t\t跳过处于不同文件系统之上的目录\n  -X, --exclude-from=文件\t排除与指定文件中描述的模式相符的文件\n      --exclude=PATTERN\t\t排除与PATTERN 中描述的模式相符的文件\n      --max-depth=N\t显示目录总计(与--all 一起使用计算文件)\n\t\t\t当N 为指定数值时计算深度为N；\n\t\t\t--max-depth=0 等于--summarize\n      --time\t\t显示目录或该目录子目录下所有文件的最后修改时间\n      --time=WORD\t显示WORD 时间，而非修改时间：\n\t\t\tatime，access，use，ctime 或status\n      --time-style=样式\t按照指定样式显示时间(样式解释规则同\"date\"命令)：\n\t\t\tfull-iso，long-iso，iso，+FORMAT\n      --help\t\t显示此帮助信息并退出\n      --version\t\t显示版本信息并退出\n\n所显示的数值是来自 --block-size、DU_BLOCK_SIZE、BLOCK_SIZE \n及 BLOCKSIZE 环境变量中第一个可用的 SIZE 单位。\n否则，默认单位是 1024 字节(或是 512，若设定 POSIXLY_CORRECT 的话)。\n\nSIZE 可以是一个可选的整数，后面跟着以下单位中的一个：\nKB 1000，K 1024，MB 1000*1000，M 1024*1024，还有 G、T、P、E、Z、Y。\n\n```\n例子\n--------------\n1. <code>du -h --max-depth=1 文件路径</code>\n\t```\n\t(ve)yann@Computer:~/djandgo/$ du -h --max-depth=1 ../.git\n\t4.0K\t../.git/branches\n\t12K\t../.git/info\n\t28K\t../.git/refs\n\t35M\t../.git/objects\n\t380K\t../.git/logs\n\t40K\t../.git/hooks\n\t37M\t../.git\n\t\n```","slug":"linux","published":1,"updated":"2016-06-29T15:29:25.175Z","_id":"cik3sv50v003q0s37nhduh0i7","comments":1,"layout":"post","photos":[],"link":"","content":"<p><img src=\"http://huangyan.qiniudn.com/linux.jpg?imageMogr2/thumbnail/600x400\" alt=\"一起使用linux\" title=\"一起使用linux\"></p>\n<h1 id=\"GREP\"><a href=\"#GREP\" class=\"headerlink\" title=\"GREP\"></a>GREP</h1><h2 id=\"问题\"><a href=\"#问题\" class=\"headerlink\" title=\"问题\"></a>问题</h2><p>grep 搜索时忽略 目录<br>在整个项目搜索某个关键字的时候，有些目录或者文件需要排除掉，我们可以采用以下方法：</p>\n<h2 id=\"讲解\"><a href=\"#讲解\" class=\"headerlink\" title=\"讲解\"></a>讲解</h2><p>首先可以grep –help，来查看使用说明<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div></pre></td><td class=\"code\"><pre><div class=\"line\">grep --help</div><div class=\"line\">用法: grep [选项]... PATTERN [FILE]...</div><div class=\"line\">在每个 FILE 或是标准输入中查找 PATTERN。</div><div class=\"line\">默认的 PATTERN 是一个基本正则表达式(缩写为 BRE)。</div><div class=\"line\">例如: grep -i <span class=\"string\">'hello world'</span> menu.h main.c</div><div class=\"line\"></div><div class=\"line\">正则表达式选择与解释:</div><div class=\"line\">  -E, --extended-regexp     PATTERN 是一个可扩展的正则表达式(缩写为 ERE)</div><div class=\"line\">  -F, --fixed-strings       PATTERN 是一组由断行符分隔的定长字符串。</div><div class=\"line\">  -G, --basic-regexp        PATTERN 是一个基本正则表达式(缩写为 BRE)</div><div class=\"line\">  -P, --perl-regexp         PATTERN 是一个 Perl 正则表达式</div><div class=\"line\">  <span class=\"_\">-e</span>, --regexp=PATTERN      用 PATTERN 来进行匹配操作</div><div class=\"line\">  <span class=\"_\">-f</span>, --file=FILE           从 FILE 中取得 PATTERN</div><div class=\"line\">  -i, --ignore-case         忽略大小写</div><div class=\"line\">  -w, --word-regexp         强制 PATTERN 仅完全匹配字词</div><div class=\"line\">  -x, --line-regexp         强制 PATTERN 仅完全匹配一行</div><div class=\"line\">  -z, --null-data           一个 0 字节的数据行，但不是空行</div><div class=\"line\"></div><div class=\"line\">杂项:</div><div class=\"line\">  <span class=\"_\">-s</span>, --no-messages         不显示错误信息</div><div class=\"line\">  -v, --invert-match        选中不匹配的行</div><div class=\"line\">  -V, --version             显示版本信息并退出</div><div class=\"line\">      --help                显示此帮助并退出</div><div class=\"line\">      --mmap                忽略向后兼容性</div><div class=\"line\"></div><div class=\"line\">输出控制:</div><div class=\"line\">  -m, --max-count=NUM       NUM 次匹配后停止</div><div class=\"line\">  -b, --byte-offset         输出的同时打印字节偏移</div><div class=\"line\">  -n, --line-number         输出的同时打印行号</div><div class=\"line\">      --line-buffered       每行输出清空</div><div class=\"line\">  -H, --with-filename       为每一匹配项打印文件名</div><div class=\"line\">  -h, --no-filename         输出时不显示文件名前缀</div><div class=\"line\">      --label=LABEL         将LABEL 作为标准输入文件名前缀</div><div class=\"line\">  -o, --only-matching       只显示一行中匹配PATTERN 的部分</div><div class=\"line\">  -q, --quiet, --silent     不显示所有输出</div><div class=\"line\">      --binary-files=TYPE   假定二进制文件的TYPE 类型；</div><div class=\"line\">                            TYPE 可以是`binary<span class=\"string\">', `text'</span>, 或`without-match<span class=\"string\">'</span></div><div class=\"line\">  -a, --text                等同于 --binary-files=text</div><div class=\"line\">  -I                        等同于 --binary-files=without-match</div><div class=\"line\">  -d, --directories=ACTION  操作目录的方式；</div><div class=\"line\">                            ACTION 可以是`read', `recurse<span class=\"string\">',或`skip'</span></div><div class=\"line\">  -D, --devices=ACTION      操作设备、先入先出队列、套接字的方式；</div><div class=\"line\">                            ACTION 可以是`<span class=\"built_in\">read</span><span class=\"string\">'或`skip'</span></div><div class=\"line\">  -R, -r, --recursive       等同于 --directories=recurse</div><div class=\"line\">      --include=FILE_PATTERN  只查找匹配FILE_PATTERN 的文件</div><div class=\"line\">      --exclude=FILE_PATTERN  跳过匹配FILE_PATTERN 的文件和目录</div><div class=\"line\">      --exclude-from=FILE   跳过所有除FILE 以外的文件</div><div class=\"line\">      --exclude-dir=PATTERN  跳过所有匹配PATTERN 的目录。</div><div class=\"line\">  -L, --files-without-match  只打印不匹配FILEs 的文件名</div><div class=\"line\">  <span class=\"_\">-l</span>, --files-with-matches  只打印匹配FILES 的文件名</div><div class=\"line\">  -c, --count               只打印每个FILE 中的匹配行数目</div><div class=\"line\">  -T, --initial-tab         行首tabs 分隔（如有必要）</div><div class=\"line\">  -Z, --null                在FILE 文件最后打印空字符</div><div class=\"line\"></div><div class=\"line\">文件控制:</div><div class=\"line\">  -B, --before-context=NUM  打印以文本起始的NUM 行</div><div class=\"line\">  -A, --after-context=NUM   打印以文本结尾的NUM 行</div><div class=\"line\">  -C, --context=NUM         打印输出文本NUM 行</div><div class=\"line\">  -NUM                      等同于 --context=NUM</div><div class=\"line\">      --color[=WHEN],</div><div class=\"line\">      --colour[=WHEN]       使用标志高亮匹配字串；</div><div class=\"line\">                            WHEN 可以是`always<span class=\"string\">', `never'</span>或`auto<span class=\"string\">'</span></div><div class=\"line\">  -U, --binary              不要清除行尾的CR 字符(MSDOS 模式)</div><div class=\"line\">  -u, --unix-byte-offsets   当CR 字符不存在，报告字节偏移(MSDOS 模式)</div><div class=\"line\"></div><div class=\"line\">‘egrep’即‘grep -E’。‘fgrep’即‘grep -F’。</div><div class=\"line\">直接使用‘egrep’或是‘fgrep’均已不可行了。</div><div class=\"line\">不带 FILE 参数，或是 FILE 为 -，将读取标准输入。如果少于两个 FILE 参数</div><div class=\"line\">就要默认使用 -h 参数。如果选中任意一行，那退出状态为 0，否则为 1；</div><div class=\"line\">如果有错误产生，且未指定 -q 参数，那退出状态为 2。</div><div class=\"line\"></div><div class=\"line\">请将错误报告给: bug-grep@gnu.org</div><div class=\"line\">GNU Grep 主页: &lt;http://www.gnu.org/software/grep/&gt;</div><div class=\"line\">GNU 软件的通用帮助: &lt;http://www.gnu.org/gethelp/&gt;</div></pre></td></tr></table></figure></p>\n<h2 id=\"例子\"><a href=\"#例子\" class=\"headerlink\" title=\"例子\"></a>例子</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">grep <span class=\"built_in\">wait</span>_post_num -rn ./ --exclude-dir=<span class=\"string\">\"fixtures\"</span></div></pre></td></tr></table></figure>\n<h2 id=\"配置\"><a href=\"#配置\" class=\"headerlink\" title=\"配置\"></a>配置</h2><p>如果每次都输入–exclude-dir=参数，是不是很慢还容易出错，降低效率呢?<br>不过不用担心，我们可以把–exclude-dir=参数通过加入配置文件 ~/.bashrc (这是bash的当前用户配置文件) 的方法来简化操作，提高效率。</p>\n<p>在~/.bashrc文件的末尾添加以下命令：<br><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">export</span> GREP_OPTIONS=<span class=\"string\">\"--exclude-dir=**\"</span></div></pre></td></tr></table></figure></p>\n<p>然后保存，执行source ~/.bashrc或者. ~/.bashrc，使修改起作用。</p>\n<h1 id=\"find\"><a href=\"#find\" class=\"headerlink\" title=\"find\"></a>find</h1><figure class=\"highlight sqf\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">find</span> ./ -<span class=\"built_in\">name</span> <span class=\"string\">\"*file_name*\"</span> 从当前目录查找文件中包含这个字段的文件</div></pre></td></tr></table></figure>\n<h1 id=\"查看文件大小和文件夹大小\"><a href=\"#查看文件大小和文件夹大小\" class=\"headerlink\" title=\"查看文件大小和文件夹大小\"></a>查看文件大小和文件夹大小</h1><h2 id=\"df-说明\"><a href=\"#df-说明\" class=\"headerlink\" title=\"df 说明\"></a>df 说明</h2><p>df命令可以显示目前所有文件系统的可用空间及使用情形</p>\n<pre><code><figure class=\"highlight haml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div></pre></td><td class=\"code\"><pre><div class=\"line\">yann@Computer:~$ df --help</div><div class=\"line\">用法：df [选项]... [文件]...</div><div class=\"line\">显示每个文件所在的文件系统的信息，默认是显示所有文件系统。</div><div class=\"line\"></div><div class=\"line\">长选项必须使用的参数对于短选项时也是必需使用的。</div><div class=\"line\">  -<span class=\"ruby\">a, --all\t\t包含虚拟文件系统</span></div><div class=\"line\">  -<span class=\"ruby\">B, --block-size=大小\t使用指定字节数的块。例如-BM 以 <span class=\"number\">1</span>,<span class=\"number\">248</span>,<span class=\"number\">576</span></span></div><div class=\"line\">\t\t\t字节为单位显示大小。参看SIZE 格式。      --total\t\t显示总计信息</div><div class=\"line\">  -<span class=\"ruby\">h, --human-readable\t以可读性较好的格式显示尺寸(例如：<span class=\"number\">1</span>K <span class=\"number\">234</span>M <span class=\"number\">2</span>G)</span></div><div class=\"line\">  -<span class=\"ruby\">H, --si\t\t计算时使用<span class=\"number\">1000</span> 为基底而非<span class=\"number\">1024</span></span></div><div class=\"line\">  -<span class=\"ruby\">i, --inodes\t\t显示inode 信息而非块使用量</span></div><div class=\"line\">  -<span class=\"ruby\">k\t\t\t即--block-size=<span class=\"number\">1</span>K</span></div><div class=\"line\">  -<span class=\"ruby\">l, --local\t\t只显示本机的文件系统</span></div><div class=\"line\">      -<span class=\"ruby\">-no-sync\t\t取得使用量数据前不进行同步动作(默认)</span></div><div class=\"line\">  -<span class=\"ruby\">P, --portability\t使用POSIX 兼容的输出格式</span></div><div class=\"line\">      -<span class=\"ruby\">-sync\t\t取得使用量数据前先进行同步动作</span></div><div class=\"line\">  -<span class=\"ruby\">t, --type=类型\t只显示指定文件系统为指定类型的信息</span></div><div class=\"line\">  -<span class=\"ruby\">T, --print-type\t显示文件系统类型</span></div><div class=\"line\">  -<span class=\"ruby\">x, --exclude-type=类型\t只显示文件系统不是指定类型信息</span></div><div class=\"line\">  -<span class=\"ruby\">v\t\t\t(忽略)</span></div><div class=\"line\">      -<span class=\"ruby\">-help\t\t显示此帮助信息并退出</span></div><div class=\"line\">      -<span class=\"ruby\">-version\t\t显示版本信息并退出</span></div><div class=\"line\"></div><div class=\"line\">所显示的数值是来自 --block-size、DF_BLOCK_SIZE、BLOCK_SIZE </div><div class=\"line\">及 BLOCKSIZE 环境变量中第一个可用的 SIZE 单位。</div><div class=\"line\">否则，默认单位是 1024 字节(或是 512，若设定 POSIXLY_CORRECT 的话)。</div><div class=\"line\"></div><div class=\"line\">SIZE 可以是一个可选的整数，后面跟着以下单位中的一个：</div><div class=\"line\">KB 1000，K 1024，MB 1000*1000，M 1024*1024，还有 G、T、P、E、Z、Y。</div><div class=\"line\"></div><div class=\"line\">请向bug-coreutils@gnu.org 报告df 的错误</div><div class=\"line\">GNU coreutils 的主页：&lt;http://www.gnu.org/software/coreutils/&gt;</div><div class=\"line\">GNU 软件一般性帮助：&lt;http://www.gnu.org/gethelp/&gt;</div><div class=\"line\">请向&lt;http://translationproject.org/team/zh_CN.html&gt; 报告df 的翻译错误</div><div class=\"line\">要获取完整文档，请运行：info coreutils 'df invocation'</div></pre></td></tr></table></figure>\n</code></pre><h2 id=\"例子-1\"><a href=\"#例子-1\" class=\"headerlink\" title=\"例子\"></a>例子</h2><ol>\n<li><p>df</p>\n <figure class=\"highlight less\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">yann<span class=\"variable\">@Computer:</span>~$ df</div><div class=\"line\">文件系统           <span class=\"number\">1</span>K-块     已用     可用 已用% 挂载点</div><div class=\"line\">/dev/sda3      <span class=\"number\">117985604</span> <span class=\"number\">41013568</span> <span class=\"number\">70972012</span>   <span class=\"number\">37%</span> /</div><div class=\"line\">udev             <span class=\"number\">4022384</span>        <span class=\"number\">4</span>  <span class=\"number\">4022380</span>    <span class=\"number\">1%</span> /dev</div><div class=\"line\">tmpfs             <span class=\"number\">806388</span>     <span class=\"number\">1144</span>   <span class=\"number\">805244</span>    <span class=\"number\">1%</span> /run</div><div class=\"line\">none                <span class=\"number\">5120</span>        <span class=\"number\">0</span>     <span class=\"number\">5120</span>    <span class=\"number\">0%</span> /run/lock</div><div class=\"line\">none             <span class=\"number\">4031940</span>   <span class=\"number\">169732</span>  <span class=\"number\">3862208</span>    <span class=\"number\">5%</span> /run/shm</div></pre></td></tr></table></figure>\n</li>\n<li><p>df -h 以可读性较好的格式显示尺寸</p>\n <figure class=\"highlight less\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">yann<span class=\"variable\">@Computer:</span>~$ df -h</div><div class=\"line\">文件系统        容量  已用  可用 已用% 挂载点</div><div class=\"line\">/dev/sda3       <span class=\"number\">113</span>G   <span class=\"number\">40</span>G   <span class=\"number\">68</span>G   <span class=\"number\">37%</span> /</div><div class=\"line\">udev            <span class=\"number\">3.9</span>G  <span class=\"number\">4.0</span>K  <span class=\"number\">3.9</span>G    <span class=\"number\">1%</span> /dev</div><div class=\"line\">tmpfs           <span class=\"number\">788</span>M  <span class=\"number\">1.2</span>M  <span class=\"number\">787</span>M    <span class=\"number\">1%</span> /run</div><div class=\"line\">none            <span class=\"number\">5.0</span>M     <span class=\"number\">0</span>  <span class=\"number\">5.0</span>M    <span class=\"number\">0%</span> /run/lock</div><div class=\"line\">none            <span class=\"number\">3.9</span>G  <span class=\"number\">168</span>M  <span class=\"number\">3.7</span>G    <span class=\"number\">5%</span> /run/shm</div></pre></td></tr></table></figure>\n</li>\n</ol>\n<h2 id=\"du-说明\"><a href=\"#du-说明\" class=\"headerlink\" title=\"du 说明\"></a>du 说明</h2><p>du：查询文件或文件夹的磁盘使用空间</p>\n<figure class=\"highlight haml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div></pre></td><td class=\"code\"><pre><div class=\"line\">yann@Computer:~$ du --help</div><div class=\"line\">用法：du [选项]... [文件]...</div><div class=\"line\">　或：du [选项]... --files0-from=F</div><div class=\"line\">计算每个文件的磁盘用量，目录则取总用量。</div><div class=\"line\"></div><div class=\"line\">长选项必须使用的参数对于短选项时也是必需使用的。</div><div class=\"line\">  -<span class=\"ruby\">a, --all\t\t输出所有文件的磁盘用量，不仅仅是目录</span></div><div class=\"line\">      -<span class=\"ruby\">-apparent-size\t显示表面用量，而并非是磁盘用量；虽然表面用量通常会</span></div><div class=\"line\">\t\t\t小一些，但有时它会因为稀疏文件间的\"洞\"、内部碎</div><div class=\"line\">\t\t\t片、非直接引用的块等原因而变大。</div><div class=\"line\">  -<span class=\"ruby\">B, --block-size=大小\t使用指定字节数的块。例如-BM 以 <span class=\"number\">1</span>,<span class=\"number\">04</span>8,<span class=\"number\">576</span></span></div><div class=\"line\">\t\t\t字节为单位显示大小。参看SIZE 格式。  -b, --bytes\t\t等于--apparent-size --block-size=1</div><div class=\"line\">  -<span class=\"ruby\">c, --total\t\t显示总计信息</span></div><div class=\"line\">  -<span class=\"ruby\">D, --dereference-args\t解除命令行中列出的符号连接</span></div><div class=\"line\">      -<span class=\"ruby\">-files<span class=\"number\">0</span>-from=F\t计算文件F 中以NUL 结尾的文件名对应占用的磁盘空间</span></div><div class=\"line\">\t\t\t如果F 的值是\"-\"，则从标准输入读入文件名</div><div class=\"line\">  -<span class=\"ruby\">H\t\t\t等于--dereference-args (-D)</span></div><div class=\"line\">  -<span class=\"ruby\">h, --human-readable\t以可读性较好的方式显示尺寸(例如：<span class=\"number\">1</span>K <span class=\"number\">234</span>M <span class=\"number\">2</span>G)</span></div><div class=\"line\">      -<span class=\"ruby\">-si\t\t类似-h，但在计算时使用<span class=\"number\">1000</span> 为基底而非<span class=\"number\">1024</span></span></div><div class=\"line\">  -<span class=\"ruby\">k\t\t\t等于--block-size=<span class=\"number\">1</span>K</span></div><div class=\"line\">  -<span class=\"ruby\">l, --count-links\t如果是硬连接，就多次计算其尺寸</span></div><div class=\"line\">  -<span class=\"ruby\">m\t\t\t等于--block-size=<span class=\"number\">1</span>M</span></div><div class=\"line\">  -<span class=\"ruby\">L, --dereference\t找出任何符号链接指示的真正目的地</span></div><div class=\"line\">  -<span class=\"ruby\">P, --no-dereference\t不跟随任何符号链接(默认)</span></div><div class=\"line\">  -<span class=\"ruby\"><span class=\"number\">0</span>, --null\t\t将每个空行视作<span class=\"number\">0</span> 字节而非换行符</span></div><div class=\"line\">  -<span class=\"ruby\">S, --separate-dirs\t不包括子目录的占用量</span></div><div class=\"line\">  -<span class=\"ruby\">s, --summarize\t只分别计算命令列中每个参数所占的总用量</span></div><div class=\"line\">  -<span class=\"ruby\">x, --one-file-system\t\t跳过处于不同文件系统之上的目录</span></div><div class=\"line\">  -<span class=\"ruby\">X, --exclude-from=文件\t排除与指定文件中描述的模式相符的文件</span></div><div class=\"line\">      -<span class=\"ruby\">-exclude=PATTERN\t\t排除与PATTERN 中描述的模式相符的文件</span></div><div class=\"line\">      -<span class=\"ruby\">-max-depth=N\t显示目录总计(与--all 一起使用计算文件)</span></div><div class=\"line\">\t\t\t当N 为指定数值时计算深度为N；</div><div class=\"line\">\t\t\t-<span class=\"ruby\">-max-depth=<span class=\"number\">0</span> 等于--summarize</span></div><div class=\"line\">      -<span class=\"ruby\">-time\t\t显示目录或该目录子目录下所有文件的最后修改时间</span></div><div class=\"line\">      -<span class=\"ruby\">-time=WORD\t显示WORD 时间，而非修改时间：</span></div><div class=\"line\">\t\t\tatime，access，use，ctime 或status</div><div class=\"line\">      -<span class=\"ruby\">-time-style=样式\t按照指定样式显示时间(样式解释规则同<span class=\"string\">\"date\"</span>命令)：</span></div><div class=\"line\">\t\t\tfull-iso，long-iso，iso，+FORMAT</div><div class=\"line\">      -<span class=\"ruby\">-help\t\t显示此帮助信息并退出</span></div><div class=\"line\">      -<span class=\"ruby\">-version\t\t显示版本信息并退出</span></div><div class=\"line\"></div><div class=\"line\">所显示的数值是来自 --block-size、DU_BLOCK_SIZE、BLOCK_SIZE </div><div class=\"line\">及 BLOCKSIZE 环境变量中第一个可用的 SIZE 单位。</div><div class=\"line\">否则，默认单位是 1024 字节(或是 512，若设定 POSIXLY_CORRECT 的话)。</div><div class=\"line\"></div><div class=\"line\">SIZE 可以是一个可选的整数，后面跟着以下单位中的一个：</div><div class=\"line\">KB 1000，K 1024，MB 1000*1000，M 1024*1024，还有 G、T、P、E、Z、Y。</div></pre></td></tr></table></figure>\n<h2 id=\"例子-2\"><a href=\"#例子-2\" class=\"headerlink\" title=\"例子\"></a>例子</h2><ol>\n<li><code>du -h –max-depth=1 文件路径</code> <figure class=\"highlight groovy\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">(ve)yann<span class=\"meta\">@Computer</span>:<span class=\"regexp\">~/djandgo/</span>$ du -h --max-depth=<span class=\"number\">1</span> ../.git</div><div class=\"line\"><span class=\"number\">4.0</span>K\t..<span class=\"regexp\">/.git/</span>branches</div><div class=\"line\"><span class=\"number\">12</span>K\t..<span class=\"regexp\">/.git/</span>info</div><div class=\"line\"><span class=\"number\">28</span>K\t..<span class=\"regexp\">/.git/</span>refs</div><div class=\"line\"><span class=\"number\">35</span>M\t..<span class=\"regexp\">/.git/</span>objects</div><div class=\"line\"><span class=\"number\">380</span>K\t..<span class=\"regexp\">/.git/</span>logs</div><div class=\"line\"><span class=\"number\">40</span>K\t..<span class=\"regexp\">/.git/</span>hooks</div><div class=\"line\"><span class=\"number\">37</span>M\t../.git</div></pre></td></tr></table></figure></li>\n</ol>\n","excerpt":"","more":"<p><img src=\"http://huangyan.qiniudn.com/linux.jpg?imageMogr2/thumbnail/600x400\" alt=\"一起使用linux\" title=\"一起使用linux\"></p>\n<h1 id=\"GREP\"><a href=\"#GREP\" class=\"headerlink\" title=\"GREP\"></a>GREP</h1><h2 id=\"问题\"><a href=\"#问题\" class=\"headerlink\" title=\"问题\"></a>问题</h2><p>grep 搜索时忽略 目录<br>在整个项目搜索某个关键字的时候，有些目录或者文件需要排除掉，我们可以采用以下方法：</p>\n<h2 id=\"讲解\"><a href=\"#讲解\" class=\"headerlink\" title=\"讲解\"></a>讲解</h2><p>首先可以grep –help，来查看使用说明<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div></pre></td><td class=\"code\"><pre><div class=\"line\">grep --help</div><div class=\"line\">用法: grep [选项]... PATTERN [FILE]...</div><div class=\"line\">在每个 FILE 或是标准输入中查找 PATTERN。</div><div class=\"line\">默认的 PATTERN 是一个基本正则表达式(缩写为 BRE)。</div><div class=\"line\">例如: grep -i <span class=\"string\">'hello world'</span> menu.h main.c</div><div class=\"line\"></div><div class=\"line\">正则表达式选择与解释:</div><div class=\"line\">  -E, --extended-regexp     PATTERN 是一个可扩展的正则表达式(缩写为 ERE)</div><div class=\"line\">  -F, --fixed-strings       PATTERN 是一组由断行符分隔的定长字符串。</div><div class=\"line\">  -G, --basic-regexp        PATTERN 是一个基本正则表达式(缩写为 BRE)</div><div class=\"line\">  -P, --perl-regexp         PATTERN 是一个 Perl 正则表达式</div><div class=\"line\">  <span class=\"_\">-e</span>, --regexp=PATTERN      用 PATTERN 来进行匹配操作</div><div class=\"line\">  <span class=\"_\">-f</span>, --file=FILE           从 FILE 中取得 PATTERN</div><div class=\"line\">  -i, --ignore-case         忽略大小写</div><div class=\"line\">  -w, --word-regexp         强制 PATTERN 仅完全匹配字词</div><div class=\"line\">  -x, --line-regexp         强制 PATTERN 仅完全匹配一行</div><div class=\"line\">  -z, --null-data           一个 0 字节的数据行，但不是空行</div><div class=\"line\"></div><div class=\"line\">杂项:</div><div class=\"line\">  <span class=\"_\">-s</span>, --no-messages         不显示错误信息</div><div class=\"line\">  -v, --invert-match        选中不匹配的行</div><div class=\"line\">  -V, --version             显示版本信息并退出</div><div class=\"line\">      --help                显示此帮助并退出</div><div class=\"line\">      --mmap                忽略向后兼容性</div><div class=\"line\"></div><div class=\"line\">输出控制:</div><div class=\"line\">  -m, --max-count=NUM       NUM 次匹配后停止</div><div class=\"line\">  -b, --byte-offset         输出的同时打印字节偏移</div><div class=\"line\">  -n, --line-number         输出的同时打印行号</div><div class=\"line\">      --line-buffered       每行输出清空</div><div class=\"line\">  -H, --with-filename       为每一匹配项打印文件名</div><div class=\"line\">  -h, --no-filename         输出时不显示文件名前缀</div><div class=\"line\">      --label=LABEL         将LABEL 作为标准输入文件名前缀</div><div class=\"line\">  -o, --only-matching       只显示一行中匹配PATTERN 的部分</div><div class=\"line\">  -q, --quiet, --silent     不显示所有输出</div><div class=\"line\">      --binary-files=TYPE   假定二进制文件的TYPE 类型；</div><div class=\"line\">                            TYPE 可以是`binary<span class=\"string\">', `text'</span>, 或`without-match<span class=\"string\">'</div><div class=\"line\">  -a, --text                等同于 --binary-files=text</div><div class=\"line\">  -I                        等同于 --binary-files=without-match</div><div class=\"line\">  -d, --directories=ACTION  操作目录的方式；</div><div class=\"line\">                            ACTION 可以是`read'</span>, `recurse<span class=\"string\">',或`skip'</span></div><div class=\"line\">  -D, --devices=ACTION      操作设备、先入先出队列、套接字的方式；</div><div class=\"line\">                            ACTION 可以是`<span class=\"built_in\">read</span><span class=\"string\">'或`skip'</span></div><div class=\"line\">  -R, -r, --recursive       等同于 --directories=recurse</div><div class=\"line\">      --include=FILE_PATTERN  只查找匹配FILE_PATTERN 的文件</div><div class=\"line\">      --exclude=FILE_PATTERN  跳过匹配FILE_PATTERN 的文件和目录</div><div class=\"line\">      --exclude-from=FILE   跳过所有除FILE 以外的文件</div><div class=\"line\">      --exclude-dir=PATTERN  跳过所有匹配PATTERN 的目录。</div><div class=\"line\">  -L, --files-without-match  只打印不匹配FILEs 的文件名</div><div class=\"line\">  <span class=\"_\">-l</span>, --files-with-matches  只打印匹配FILES 的文件名</div><div class=\"line\">  -c, --count               只打印每个FILE 中的匹配行数目</div><div class=\"line\">  -T, --initial-tab         行首tabs 分隔（如有必要）</div><div class=\"line\">  -Z, --null                在FILE 文件最后打印空字符</div><div class=\"line\"></div><div class=\"line\">文件控制:</div><div class=\"line\">  -B, --before-context=NUM  打印以文本起始的NUM 行</div><div class=\"line\">  -A, --after-context=NUM   打印以文本结尾的NUM 行</div><div class=\"line\">  -C, --context=NUM         打印输出文本NUM 行</div><div class=\"line\">  -NUM                      等同于 --context=NUM</div><div class=\"line\">      --color[=WHEN],</div><div class=\"line\">      --colour[=WHEN]       使用标志高亮匹配字串；</div><div class=\"line\">                            WHEN 可以是`always<span class=\"string\">', `never'</span>或`auto<span class=\"string\">'</div><div class=\"line\">  -U, --binary              不要清除行尾的CR 字符(MSDOS 模式)</div><div class=\"line\">  -u, --unix-byte-offsets   当CR 字符不存在，报告字节偏移(MSDOS 模式)</div><div class=\"line\"></div><div class=\"line\">‘egrep’即‘grep -E’。‘fgrep’即‘grep -F’。</div><div class=\"line\">直接使用‘egrep’或是‘fgrep’均已不可行了。</div><div class=\"line\">不带 FILE 参数，或是 FILE 为 -，将读取标准输入。如果少于两个 FILE 参数</div><div class=\"line\">就要默认使用 -h 参数。如果选中任意一行，那退出状态为 0，否则为 1；</div><div class=\"line\">如果有错误产生，且未指定 -q 参数，那退出状态为 2。</div><div class=\"line\"></div><div class=\"line\">请将错误报告给: bug-grep@gnu.org</div><div class=\"line\">GNU Grep 主页: &lt;http://www.gnu.org/software/grep/&gt;</div><div class=\"line\">GNU 软件的通用帮助: &lt;http://www.gnu.org/gethelp/&gt;</span></div></pre></td></tr></table></figure></p>\n<h2 id=\"例子\"><a href=\"#例子\" class=\"headerlink\" title=\"例子\"></a>例子</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">grep <span class=\"built_in\">wait</span>_post_num -rn ./ --exclude-dir=<span class=\"string\">\"fixtures\"</span></div></pre></td></tr></table></figure>\n<h2 id=\"配置\"><a href=\"#配置\" class=\"headerlink\" title=\"配置\"></a>配置</h2><p>如果每次都输入–exclude-dir=参数，是不是很慢还容易出错，降低效率呢?<br>不过不用担心，我们可以把–exclude-dir=参数通过加入配置文件 ~/.bashrc (这是bash的当前用户配置文件) 的方法来简化操作，提高效率。</p>\n<p>在~/.bashrc文件的末尾添加以下命令：<br><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">export</span> GREP_OPTIONS=<span class=\"string\">\"--exclude-dir=**\"</span></div></pre></td></tr></table></figure></p>\n<p>然后保存，执行source ~/.bashrc或者. ~/.bashrc，使修改起作用。</p>\n<h1 id=\"find\"><a href=\"#find\" class=\"headerlink\" title=\"find\"></a>find</h1><figure class=\"highlight sqf\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">find</span> ./ -<span class=\"built_in\">name</span> <span class=\"string\">\"*file_name*\"</span> 从当前目录查找文件中包含这个字段的文件</div></pre></td></tr></table></figure>\n<h1 id=\"查看文件大小和文件夹大小\"><a href=\"#查看文件大小和文件夹大小\" class=\"headerlink\" title=\"查看文件大小和文件夹大小\"></a>查看文件大小和文件夹大小</h1><h2 id=\"df-说明\"><a href=\"#df-说明\" class=\"headerlink\" title=\"df 说明\"></a>df 说明</h2><p>df命令可以显示目前所有文件系统的可用空间及使用情形</p>\n<pre><code><figure class=\"highlight haml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div></pre></td><td class=\"code\"><pre><div class=\"line\">yann@Computer:~$ df --help</div><div class=\"line\">用法：df [选项]... [文件]...</div><div class=\"line\">显示每个文件所在的文件系统的信息，默认是显示所有文件系统。</div><div class=\"line\"></div><div class=\"line\">长选项必须使用的参数对于短选项时也是必需使用的。</div><div class=\"line\">  -<span class=\"ruby\">a, --all\t\t包含虚拟文件系统</div><div class=\"line\"></span>  -<span class=\"ruby\">B, --block-size=大小\t使用指定字节数的块。例如-BM 以 <span class=\"number\">1</span>,<span class=\"number\">248</span>,<span class=\"number\">576</span></div><div class=\"line\"></span>\t\t\t字节为单位显示大小。参看SIZE 格式。      --total\t\t显示总计信息</div><div class=\"line\">  -<span class=\"ruby\">h, --human-readable\t以可读性较好的格式显示尺寸(例如：<span class=\"number\">1</span>K <span class=\"number\">234</span>M <span class=\"number\">2</span>G)</div><div class=\"line\"></span>  -<span class=\"ruby\">H, --si\t\t计算时使用<span class=\"number\">1000</span> 为基底而非<span class=\"number\">1024</span></div><div class=\"line\"></span>  -<span class=\"ruby\">i, --inodes\t\t显示inode 信息而非块使用量</div><div class=\"line\"></span>  -<span class=\"ruby\">k\t\t\t即--block-size=<span class=\"number\">1</span>K</div><div class=\"line\"></span>  -<span class=\"ruby\">l, --local\t\t只显示本机的文件系统</div><div class=\"line\"></span>      -<span class=\"ruby\">-no-sync\t\t取得使用量数据前不进行同步动作(默认)</div><div class=\"line\"></span>  -<span class=\"ruby\">P, --portability\t使用POSIX 兼容的输出格式</div><div class=\"line\"></span>      -<span class=\"ruby\">-sync\t\t取得使用量数据前先进行同步动作</div><div class=\"line\"></span>  -<span class=\"ruby\">t, --type=类型\t只显示指定文件系统为指定类型的信息</div><div class=\"line\"></span>  -<span class=\"ruby\">T, --print-type\t显示文件系统类型</div><div class=\"line\"></span>  -<span class=\"ruby\">x, --exclude-type=类型\t只显示文件系统不是指定类型信息</div><div class=\"line\"></span>  -<span class=\"ruby\">v\t\t\t(忽略)</div><div class=\"line\"></span>      -<span class=\"ruby\">-help\t\t显示此帮助信息并退出</div><div class=\"line\"></span>      -<span class=\"ruby\">-version\t\t显示版本信息并退出</div><div class=\"line\"></span></div><div class=\"line\">所显示的数值是来自 --block-size、DF_BLOCK_SIZE、BLOCK_SIZE </div><div class=\"line\">及 BLOCKSIZE 环境变量中第一个可用的 SIZE 单位。</div><div class=\"line\">否则，默认单位是 1024 字节(或是 512，若设定 POSIXLY_CORRECT 的话)。</div><div class=\"line\"></div><div class=\"line\">SIZE 可以是一个可选的整数，后面跟着以下单位中的一个：</div><div class=\"line\">KB 1000，K 1024，MB 1000*1000，M 1024*1024，还有 G、T、P、E、Z、Y。</div><div class=\"line\"></div><div class=\"line\">请向bug-coreutils@gnu.org 报告df 的错误</div><div class=\"line\">GNU coreutils 的主页：&lt;http://www.gnu.org/software/coreutils/&gt;</div><div class=\"line\">GNU 软件一般性帮助：&lt;http://www.gnu.org/gethelp/&gt;</div><div class=\"line\">请向&lt;http://translationproject.org/team/zh_CN.html&gt; 报告df 的翻译错误</div><div class=\"line\">要获取完整文档，请运行：info coreutils 'df invocation'</div></pre></td></tr></table></figure>\n</code></pre><h2 id=\"例子-1\"><a href=\"#例子-1\" class=\"headerlink\" title=\"例子\"></a>例子</h2><ol>\n<li><p>df</p>\n <figure class=\"highlight less\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">yann<span class=\"variable\">@Computer:</span>~$ df</div><div class=\"line\">文件系统           <span class=\"number\">1</span>K-块     已用     可用 已用% 挂载点</div><div class=\"line\">/dev/sda3      <span class=\"number\">117985604</span> <span class=\"number\">41013568</span> <span class=\"number\">70972012</span>   <span class=\"number\">37%</span> /</div><div class=\"line\">udev             <span class=\"number\">4022384</span>        <span class=\"number\">4</span>  <span class=\"number\">4022380</span>    <span class=\"number\">1%</span> /dev</div><div class=\"line\">tmpfs             <span class=\"number\">806388</span>     <span class=\"number\">1144</span>   <span class=\"number\">805244</span>    <span class=\"number\">1%</span> /run</div><div class=\"line\">none                <span class=\"number\">5120</span>        <span class=\"number\">0</span>     <span class=\"number\">5120</span>    <span class=\"number\">0%</span> /run/lock</div><div class=\"line\">none             <span class=\"number\">4031940</span>   <span class=\"number\">169732</span>  <span class=\"number\">3862208</span>    <span class=\"number\">5%</span> /run/shm</div></pre></td></tr></table></figure>\n</li>\n<li><p>df -h 以可读性较好的格式显示尺寸</p>\n <figure class=\"highlight less\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">yann<span class=\"variable\">@Computer:</span>~$ df -h</div><div class=\"line\">文件系统        容量  已用  可用 已用% 挂载点</div><div class=\"line\">/dev/sda3       <span class=\"number\">113</span>G   <span class=\"number\">40</span>G   <span class=\"number\">68</span>G   <span class=\"number\">37%</span> /</div><div class=\"line\">udev            <span class=\"number\">3.9</span>G  <span class=\"number\">4.0</span>K  <span class=\"number\">3.9</span>G    <span class=\"number\">1%</span> /dev</div><div class=\"line\">tmpfs           <span class=\"number\">788</span>M  <span class=\"number\">1.2</span>M  <span class=\"number\">787</span>M    <span class=\"number\">1%</span> /run</div><div class=\"line\">none            <span class=\"number\">5.0</span>M     <span class=\"number\">0</span>  <span class=\"number\">5.0</span>M    <span class=\"number\">0%</span> /run/lock</div><div class=\"line\">none            <span class=\"number\">3.9</span>G  <span class=\"number\">168</span>M  <span class=\"number\">3.7</span>G    <span class=\"number\">5%</span> /run/shm</div></pre></td></tr></table></figure>\n</li>\n</ol>\n<h2 id=\"du-说明\"><a href=\"#du-说明\" class=\"headerlink\" title=\"du 说明\"></a>du 说明</h2><p>du：查询文件或文件夹的磁盘使用空间</p>\n<figure class=\"highlight haml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div></pre></td><td class=\"code\"><pre><div class=\"line\">yann@Computer:~$ du --help</div><div class=\"line\">用法：du [选项]... [文件]...</div><div class=\"line\">　或：du [选项]... --files0-from=F</div><div class=\"line\">计算每个文件的磁盘用量，目录则取总用量。</div><div class=\"line\"></div><div class=\"line\">长选项必须使用的参数对于短选项时也是必需使用的。</div><div class=\"line\">  -<span class=\"ruby\">a, --all\t\t输出所有文件的磁盘用量，不仅仅是目录</div><div class=\"line\"></span>      -<span class=\"ruby\">-apparent-size\t显示表面用量，而并非是磁盘用量；虽然表面用量通常会</div><div class=\"line\"></span>\t\t\t小一些，但有时它会因为稀疏文件间的\"洞\"、内部碎</div><div class=\"line\">\t\t\t片、非直接引用的块等原因而变大。</div><div class=\"line\">  -<span class=\"ruby\">B, --block-size=大小\t使用指定字节数的块。例如-BM 以 <span class=\"number\">1</span>,<span class=\"number\">04</span>8,<span class=\"number\">576</span></div><div class=\"line\"></span>\t\t\t字节为单位显示大小。参看SIZE 格式。  -b, --bytes\t\t等于--apparent-size --block-size=1</div><div class=\"line\">  -<span class=\"ruby\">c, --total\t\t显示总计信息</div><div class=\"line\"></span>  -<span class=\"ruby\">D, --dereference-args\t解除命令行中列出的符号连接</div><div class=\"line\"></span>      -<span class=\"ruby\">-files<span class=\"number\">0</span>-from=F\t计算文件F 中以NUL 结尾的文件名对应占用的磁盘空间</div><div class=\"line\"></span>\t\t\t如果F 的值是\"-\"，则从标准输入读入文件名</div><div class=\"line\">  -<span class=\"ruby\">H\t\t\t等于--dereference-args (-D)</div><div class=\"line\"></span>  -<span class=\"ruby\">h, --human-readable\t以可读性较好的方式显示尺寸(例如：<span class=\"number\">1</span>K <span class=\"number\">234</span>M <span class=\"number\">2</span>G)</div><div class=\"line\"></span>      -<span class=\"ruby\">-si\t\t类似-h，但在计算时使用<span class=\"number\">1000</span> 为基底而非<span class=\"number\">1024</span></div><div class=\"line\"></span>  -<span class=\"ruby\">k\t\t\t等于--block-size=<span class=\"number\">1</span>K</div><div class=\"line\"></span>  -<span class=\"ruby\">l, --count-links\t如果是硬连接，就多次计算其尺寸</div><div class=\"line\"></span>  -<span class=\"ruby\">m\t\t\t等于--block-size=<span class=\"number\">1</span>M</div><div class=\"line\"></span>  -<span class=\"ruby\">L, --dereference\t找出任何符号链接指示的真正目的地</div><div class=\"line\"></span>  -<span class=\"ruby\">P, --no-dereference\t不跟随任何符号链接(默认)</div><div class=\"line\"></span>  -<span class=\"ruby\"><span class=\"number\">0</span>, --null\t\t将每个空行视作<span class=\"number\">0</span> 字节而非换行符</div><div class=\"line\"></span>  -<span class=\"ruby\">S, --separate-dirs\t不包括子目录的占用量</div><div class=\"line\"></span>  -<span class=\"ruby\">s, --summarize\t只分别计算命令列中每个参数所占的总用量</div><div class=\"line\"></span>  -<span class=\"ruby\">x, --one-file-system\t\t跳过处于不同文件系统之上的目录</div><div class=\"line\"></span>  -<span class=\"ruby\">X, --exclude-from=文件\t排除与指定文件中描述的模式相符的文件</div><div class=\"line\"></span>      -<span class=\"ruby\">-exclude=PATTERN\t\t排除与PATTERN 中描述的模式相符的文件</div><div class=\"line\"></span>      -<span class=\"ruby\">-max-depth=N\t显示目录总计(与--all 一起使用计算文件)</div><div class=\"line\"></span>\t\t\t当N 为指定数值时计算深度为N；</div><div class=\"line\">\t\t\t-<span class=\"ruby\">-max-depth=<span class=\"number\">0</span> 等于--summarize</div><div class=\"line\"></span>      -<span class=\"ruby\">-time\t\t显示目录或该目录子目录下所有文件的最后修改时间</div><div class=\"line\"></span>      -<span class=\"ruby\">-time=WORD\t显示WORD 时间，而非修改时间：</div><div class=\"line\"></span>\t\t\tatime，access，use，ctime 或status</div><div class=\"line\">      -<span class=\"ruby\">-time-style=样式\t按照指定样式显示时间(样式解释规则同<span class=\"string\">\"date\"</span>命令)：</div><div class=\"line\"></span>\t\t\tfull-iso，long-iso，iso，+FORMAT</div><div class=\"line\">      -<span class=\"ruby\">-help\t\t显示此帮助信息并退出</div><div class=\"line\"></span>      -<span class=\"ruby\">-version\t\t显示版本信息并退出</div><div class=\"line\"></span></div><div class=\"line\">所显示的数值是来自 --block-size、DU_BLOCK_SIZE、BLOCK_SIZE </div><div class=\"line\">及 BLOCKSIZE 环境变量中第一个可用的 SIZE 单位。</div><div class=\"line\">否则，默认单位是 1024 字节(或是 512，若设定 POSIXLY_CORRECT 的话)。</div><div class=\"line\"></div><div class=\"line\">SIZE 可以是一个可选的整数，后面跟着以下单位中的一个：</div><div class=\"line\">KB 1000，K 1024，MB 1000*1000，M 1024*1024，还有 G、T、P、E、Z、Y。</div></pre></td></tr></table></figure>\n<h2 id=\"例子-2\"><a href=\"#例子-2\" class=\"headerlink\" title=\"例子\"></a>例子</h2><ol>\n<li><code>du -h –max-depth=1 文件路径</code> <figure class=\"highlight groovy\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">(ve)yann<span class=\"meta\">@Computer</span>:<span class=\"regexp\">~/djandgo/</span>$ du -h --max-depth=<span class=\"number\">1</span> ../.git</div><div class=\"line\"><span class=\"number\">4.0</span>K\t..<span class=\"regexp\">/.git/</span>branches</div><div class=\"line\"><span class=\"number\">12</span>K\t..<span class=\"regexp\">/.git/</span>info</div><div class=\"line\"><span class=\"number\">28</span>K\t..<span class=\"regexp\">/.git/</span>refs</div><div class=\"line\"><span class=\"number\">35</span>M\t..<span class=\"regexp\">/.git/</span>objects</div><div class=\"line\"><span class=\"number\">380</span>K\t..<span class=\"regexp\">/.git/</span>logs</div><div class=\"line\"><span class=\"number\">40</span>K\t..<span class=\"regexp\">/.git/</span>hooks</div><div class=\"line\"><span class=\"number\">37</span>M\t../.git</div></pre></td></tr></table></figure></li>\n</ol>\n"},{"title":"python 问题","date":"2015-10-13T06:19:59.000Z","_content":"\nIndentationError: unindent does not match any outer indentation level\n=============\n问题描述\n-------------\n一个python脚本，本来都运行好好的，然后写了几行代码，而且也都确保每行都对齐了，但是运行的时候，却出现语法错误\n![Error pic](http://huangyan.qiniudn.com/tab_error.png)\n解决方法\n-------------\n缩进问题，特别是把几个不同的源码拷到一块修改调式的时候容易遇到，因为两个人写的程序缩进可能不一样，有的是tab，有的是空格，这用肉眼很难察觉。把缩进都改为一种格式就可以了。\n\n\nxxx  is not JSON serializable\n=============\n在使用json的时候经常会遇到xxx  is not JSON serializable，也就是无法序列化某些对象。经常使用django的同学知道django里面有个自带的Encoder(<code>from django.core.serializers.json import DjangoJSONEncoder</code>)来序列化时间等常用的对象。其实我们可以自己定定义对特定类型的对象的序列化，下面看下怎么定义和使用的。\n```\n#!/usr/bin/env python\n# -*- coding: utf-8 -*-\n#json_extention\n#2014-03-16\n#copyright: orangleliu\n#license: BSD\n\n'''\npython中dumps方法很好用，可以直接把我们的dict直接序列化为json对象\n但是有的时候我们加了一些自定义的类就没法序列化了，这个时候需要\n自定义一些序列化方法\n\n参考：\nhttp://docs.python.org/2.7/library/json.html\n\n例如:\nIn [3]: from datetime import  datetime\n\nIn [4]: json_1 = {'num':1112, 'date':datetime.now()}\n\nIn [5]: import json\n\nIn [6]: json.dumps(json_1)\n---------------------------------------------------------------------------\nTypeError\t\t\t\t\t\t\t\t Traceback (most recent call last)\nD:\\devsofts\\python2.7\\lib\\site-packages\\django\\core\\management\\commands\\shell.py\nc in <module>()\n----> 1 json.dumps(json_1)\n\nTypeError: datetime.datetime(2014, 3, 16, 13, 47, 37, 353000) is not JSON serial\nizable\n'''\n```\n```\nfrom datetime import datetime\nimport json\n\nclass DateEncoder(json.JSONEncoder ):\n  def default(self, obj):\n    if isinstance(obj, datetime):\n      return obj.__str__()\n    return json.JSONEncoder.default(self, obj)\n\njson_1 = {'num':1112, 'date':datetime.now()}\nprint json.dumps(json_1, cls=DateEncoder)\n\n'''\n输出结果：\n\nPS D:\\code\\python\\python_abc> python .\\json_extention.py\n{\"date\": \"2014-03-16 13:56:39.003000\", \"num\": 1112}\n'''\n```\n```\n#我们自定义一个类试试\n\nclass User(object):\n   def __init__(self, name):\n    self.name = name\n\nclass UserEncoder(json.JSONEncoder):\n  def default(self, obj):\n    if isinstance(obj, User):\n      return obj.name\n    return json.JSONEncoder.default(self, obj)\n\njson_2 = {'user':User('orangle')}\nprint json.dumps(json_2, cls=UserEncoder)\n\n\nPS D:\\code\\python\\python_abc> python .\\json_extention.py\n{\"date\": \"2014-03-16 14:01:46.738000\", \"num\": 1112}\n{\"user\": \"orangle\"}\n\n```\n\nunsupported operand type(s) for +: 'float' and 'Decimal'\n=================================\n在使用django时候，取得数据库中的Float型时，与cost相加出现的错误\n\n\t```\n\t cost = 0\n\t daily_order.cost_of_product = daily_order.cost_of_product + cost\n\t```\n解决方法\n\n\t```\n\timport decimal\n\t​daily_order.cost_of_product = decimal.Decimal(daily_order.cost_of_product) + cost\n\t```\nneed string or buffer, long found\n=============\n今天给 Django 设计模型时, 把模型的 __unicode__() 函数设计成返回 id, 结果出现了\ncoercing to Unicode: need string or buffer, long found\n\n感觉很奇怪. 总是提个醒吧, 不要妄图用 __unicode__() 得到 id.\n不过 unicode(id) 应该是可以的吧.","source":"_posts/2015/10/13/python_question.md","raw":"title: python 问题\ndate: 2015-10-13 14:19:59\ncategories:\n- Python\ntags:\n- Python\n---\n\nIndentationError: unindent does not match any outer indentation level\n=============\n问题描述\n-------------\n一个python脚本，本来都运行好好的，然后写了几行代码，而且也都确保每行都对齐了，但是运行的时候，却出现语法错误\n![Error pic](http://huangyan.qiniudn.com/tab_error.png)\n解决方法\n-------------\n缩进问题，特别是把几个不同的源码拷到一块修改调式的时候容易遇到，因为两个人写的程序缩进可能不一样，有的是tab，有的是空格，这用肉眼很难察觉。把缩进都改为一种格式就可以了。\n\n\nxxx  is not JSON serializable\n=============\n在使用json的时候经常会遇到xxx  is not JSON serializable，也就是无法序列化某些对象。经常使用django的同学知道django里面有个自带的Encoder(<code>from django.core.serializers.json import DjangoJSONEncoder</code>)来序列化时间等常用的对象。其实我们可以自己定定义对特定类型的对象的序列化，下面看下怎么定义和使用的。\n```\n#!/usr/bin/env python\n# -*- coding: utf-8 -*-\n#json_extention\n#2014-03-16\n#copyright: orangleliu\n#license: BSD\n\n'''\npython中dumps方法很好用，可以直接把我们的dict直接序列化为json对象\n但是有的时候我们加了一些自定义的类就没法序列化了，这个时候需要\n自定义一些序列化方法\n\n参考：\nhttp://docs.python.org/2.7/library/json.html\n\n例如:\nIn [3]: from datetime import  datetime\n\nIn [4]: json_1 = {'num':1112, 'date':datetime.now()}\n\nIn [5]: import json\n\nIn [6]: json.dumps(json_1)\n---------------------------------------------------------------------------\nTypeError\t\t\t\t\t\t\t\t Traceback (most recent call last)\nD:\\devsofts\\python2.7\\lib\\site-packages\\django\\core\\management\\commands\\shell.py\nc in <module>()\n----> 1 json.dumps(json_1)\n\nTypeError: datetime.datetime(2014, 3, 16, 13, 47, 37, 353000) is not JSON serial\nizable\n'''\n```\n```\nfrom datetime import datetime\nimport json\n\nclass DateEncoder(json.JSONEncoder ):\n  def default(self, obj):\n    if isinstance(obj, datetime):\n      return obj.__str__()\n    return json.JSONEncoder.default(self, obj)\n\njson_1 = {'num':1112, 'date':datetime.now()}\nprint json.dumps(json_1, cls=DateEncoder)\n\n'''\n输出结果：\n\nPS D:\\code\\python\\python_abc> python .\\json_extention.py\n{\"date\": \"2014-03-16 13:56:39.003000\", \"num\": 1112}\n'''\n```\n```\n#我们自定义一个类试试\n\nclass User(object):\n   def __init__(self, name):\n    self.name = name\n\nclass UserEncoder(json.JSONEncoder):\n  def default(self, obj):\n    if isinstance(obj, User):\n      return obj.name\n    return json.JSONEncoder.default(self, obj)\n\njson_2 = {'user':User('orangle')}\nprint json.dumps(json_2, cls=UserEncoder)\n\n\nPS D:\\code\\python\\python_abc> python .\\json_extention.py\n{\"date\": \"2014-03-16 14:01:46.738000\", \"num\": 1112}\n{\"user\": \"orangle\"}\n\n```\n\nunsupported operand type(s) for +: 'float' and 'Decimal'\n=================================\n在使用django时候，取得数据库中的Float型时，与cost相加出现的错误\n\n\t```\n\t cost = 0\n\t daily_order.cost_of_product = daily_order.cost_of_product + cost\n\t```\n解决方法\n\n\t```\n\timport decimal\n\t​daily_order.cost_of_product = decimal.Decimal(daily_order.cost_of_product) + cost\n\t```\nneed string or buffer, long found\n=============\n今天给 Django 设计模型时, 把模型的 __unicode__() 函数设计成返回 id, 结果出现了\ncoercing to Unicode: need string or buffer, long found\n\n感觉很奇怪. 总是提个醒吧, 不要妄图用 __unicode__() 得到 id.\n不过 unicode(id) 应该是可以的吧.","slug":"python_question","published":1,"updated":"2016-06-29T15:29:25.171Z","_id":"cik3sv50z003t0s37ejcismxs","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"IndentationError-unindent-does-not-match-any-outer-indentation-level\"><a href=\"#IndentationError-unindent-does-not-match-any-outer-indentation-level\" class=\"headerlink\" title=\"IndentationError: unindent does not match any outer indentation level\"></a>IndentationError: unindent does not match any outer indentation level</h1><h2 id=\"问题描述\"><a href=\"#问题描述\" class=\"headerlink\" title=\"问题描述\"></a>问题描述</h2><p>一个python脚本，本来都运行好好的，然后写了几行代码，而且也都确保每行都对齐了，但是运行的时候，却出现语法错误<br><img src=\"http://huangyan.qiniudn.com/tab_error.png\" alt=\"Error pic\"></p>\n<h2 id=\"解决方法\"><a href=\"#解决方法\" class=\"headerlink\" title=\"解决方法\"></a>解决方法</h2><p>缩进问题，特别是把几个不同的源码拷到一块修改调式的时候容易遇到，因为两个人写的程序缩进可能不一样，有的是tab，有的是空格，这用肉眼很难察觉。把缩进都改为一种格式就可以了。</p>\n<h1 id=\"xxx-is-not-JSON-serializable\"><a href=\"#xxx-is-not-JSON-serializable\" class=\"headerlink\" title=\"xxx  is not JSON serializable\"></a>xxx  is not JSON serializable</h1><p>在使用json的时候经常会遇到xxx  is not JSON serializable，也就是无法序列化某些对象。经常使用django的同学知道django里面有个自带的Encoder(<code>from django.core.serializers.json import DjangoJSONEncoder</code>)来序列化时间等常用的对象。其实我们可以自己定定义对特定类型的对象的序列化，下面看下怎么定义和使用的。<br><figure class=\"highlight asciidoc\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div></pre></td><td class=\"code\"><pre><div class=\"line\">#!/usr/bin/env python</div><div class=\"line\"># -<span class=\"strong\">*- coding: utf-8 -*</span>-</div><div class=\"line\">#json<span class=\"emphasis\">_extention</span></div><div class=\"line\">#2014-03-16</div><div class=\"line\">#copyright: orangleliu</div><div class=\"line\">#license: BSD</div><div class=\"line\"></div><div class=\"line\">'''</div><div class=\"line\">python中dumps方法很好用，可以直接把我们的dict直接序列化为json对象</div><div class=\"line\">但是有的时候我们加了一些自定义的类就没法序列化了，这个时候需要</div><div class=\"line\">自定义一些序列化方法</div><div class=\"line\"></div><div class=\"line\">参考：</div><div class=\"line\">http://docs.python.org/2.7/library/json.html</div><div class=\"line\"></div><div class=\"line\">例如:</div><div class=\"line\">In [3]: from datetime import  datetime</div><div class=\"line\"></div><div class=\"line\">In [4]: json<span class=\"emphasis\">_1 = &#123;'num':1112, 'date':datetime.now()&#125;</span></div><div class=\"line\"></div><div class=\"line\">In [5]: import json</div><div class=\"line\"></div><div class=\"line\">In [6]: json.dumps(json<span class=\"emphasis\">_1)</span></div><div class=\"line\">---------------------------------------------------------------------------</div><div class=\"line\">TypeError\t\t\t\t\t\t\t\t Traceback (most recent call last)</div><div class=\"line\">D:\\devsofts\\python2.7\\lib\\site-packages\\django\\core\\management\\commands\\shell.py</div><div class=\"line\">c in &lt;module&gt;()</div><div class=\"line\">----&gt; 1 json.dumps(json_1)</div><div class=\"line\"></div><div class=\"line\">TypeError: datetime.datetime(2014, 3, 16, 13, 47, 37, 353000) is not JSON serial</div><div class=\"line\">izable</div><div class=\"line\">'''</div></pre></td></tr></table></figure></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">from</span> datetime <span class=\"keyword\">import</span> datetime</div><div class=\"line\"><span class=\"keyword\">import</span> json</div><div class=\"line\"></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">DateEncoder</span><span class=\"params\">(json.JSONEncoder )</span>:</span></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">default</span><span class=\"params\">(self, obj)</span>:</span></div><div class=\"line\">    <span class=\"keyword\">if</span> isinstance(obj, datetime):</div><div class=\"line\">      <span class=\"keyword\">return</span> obj.__str__()</div><div class=\"line\">    <span class=\"keyword\">return</span> json.JSONEncoder.default(self, obj)</div><div class=\"line\"></div><div class=\"line\">json_1 = &#123;<span class=\"string\">'num'</span>:<span class=\"number\">1112</span>, <span class=\"string\">'date'</span>:datetime.now()&#125;</div><div class=\"line\"><span class=\"keyword\">print</span> json.dumps(json_1, cls=DateEncoder)</div><div class=\"line\"></div><div class=\"line\"><span class=\"string\">'''</span></div><div class=\"line\">输出结果：</div><div class=\"line\"></div><div class=\"line\">PS D:\\code\\python\\python_abc&gt; python .\\json_extention.py</div><div class=\"line\">&#123;\"date\": \"2014-03-16 13:56:39.003000\", \"num\": 1112&#125;</div><div class=\"line\">'''</div></pre></td></tr></table></figure>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">#我们自定义一个类试试</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">User</span><span class=\"params\">(object)</span>:</span></div><div class=\"line\">   <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span><span class=\"params\">(self, name)</span>:</span></div><div class=\"line\">    self.name = name</div><div class=\"line\"></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">UserEncoder</span><span class=\"params\">(json.JSONEncoder)</span>:</span></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">default</span><span class=\"params\">(self, obj)</span>:</span></div><div class=\"line\">    <span class=\"keyword\">if</span> isinstance(obj, User):</div><div class=\"line\">      <span class=\"keyword\">return</span> obj.name</div><div class=\"line\">    <span class=\"keyword\">return</span> json.JSONEncoder.default(self, obj)</div><div class=\"line\"></div><div class=\"line\">json_2 = &#123;<span class=\"string\">'user'</span>:User(<span class=\"string\">'orangle'</span>)&#125;</div><div class=\"line\"><span class=\"keyword\">print</span> json.dumps(json_2, cls=UserEncoder)</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">PS D:\\code\\python\\python_abc&gt; python .\\json_extention.py</div><div class=\"line\">&#123;<span class=\"string\">\"date\"</span>: <span class=\"string\">\"2014-03-16 14:01:46.738000\"</span>, <span class=\"string\">\"num\"</span>: <span class=\"number\">1112</span>&#125;</div><div class=\"line\">&#123;<span class=\"string\">\"user\"</span>: <span class=\"string\">\"orangle\"</span>&#125;</div></pre></td></tr></table></figure>\n<h1 id=\"unsupported-operand-type-s-for-‘float’-and-‘Decimal’\"><a href=\"#unsupported-operand-type-s-for-‘float’-and-‘Decimal’\" class=\"headerlink\" title=\"unsupported operand type(s) for +: ‘float’ and ‘Decimal’\"></a>unsupported operand type(s) for +: ‘float’ and ‘Decimal’</h1><p>在使用django时候，取得数据库中的Float型时，与cost相加出现的错误</p>\n<pre><code><figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">cost = <span class=\"number\">0</span></div><div class=\"line\">daily_order<span class=\"selector-class\">.cost_of_product</span> = daily_order<span class=\"selector-class\">.cost_of_product</span> + cost</div></pre></td></tr></table></figure>\n</code></pre><p>解决方法</p>\n<pre><code><figure class=\"highlight fortran\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">import</span> <span class=\"keyword\">decimal</span></div><div class=\"line\">​daily_order.cost_of_product = <span class=\"keyword\">decimal</span>.<span class=\"keyword\">Decimal</span>(daily_order.cost_of_product) + cost</div></pre></td></tr></table></figure>\n</code></pre><h1 id=\"need-string-or-buffer-long-found\"><a href=\"#need-string-or-buffer-long-found\" class=\"headerlink\" title=\"need string or buffer, long found\"></a>need string or buffer, long found</h1><p>今天给 Django 设计模型时, 把模型的 <strong>unicode</strong>() 函数设计成返回 id, 结果出现了<br>coercing to Unicode: need string or buffer, long found</p>\n<p>感觉很奇怪. 总是提个醒吧, 不要妄图用 <strong>unicode</strong>() 得到 id.<br>不过 unicode(id) 应该是可以的吧.</p>\n","excerpt":"","more":"<h1 id=\"IndentationError-unindent-does-not-match-any-outer-indentation-level\"><a href=\"#IndentationError-unindent-does-not-match-any-outer-indentation-level\" class=\"headerlink\" title=\"IndentationError: unindent does not match any outer indentation level\"></a>IndentationError: unindent does not match any outer indentation level</h1><h2 id=\"问题描述\"><a href=\"#问题描述\" class=\"headerlink\" title=\"问题描述\"></a>问题描述</h2><p>一个python脚本，本来都运行好好的，然后写了几行代码，而且也都确保每行都对齐了，但是运行的时候，却出现语法错误<br><img src=\"http://huangyan.qiniudn.com/tab_error.png\" alt=\"Error pic\"></p>\n<h2 id=\"解决方法\"><a href=\"#解决方法\" class=\"headerlink\" title=\"解决方法\"></a>解决方法</h2><p>缩进问题，特别是把几个不同的源码拷到一块修改调式的时候容易遇到，因为两个人写的程序缩进可能不一样，有的是tab，有的是空格，这用肉眼很难察觉。把缩进都改为一种格式就可以了。</p>\n<h1 id=\"xxx-is-not-JSON-serializable\"><a href=\"#xxx-is-not-JSON-serializable\" class=\"headerlink\" title=\"xxx  is not JSON serializable\"></a>xxx  is not JSON serializable</h1><p>在使用json的时候经常会遇到xxx  is not JSON serializable，也就是无法序列化某些对象。经常使用django的同学知道django里面有个自带的Encoder(<code>from django.core.serializers.json import DjangoJSONEncoder</code>)来序列化时间等常用的对象。其实我们可以自己定定义对特定类型的对象的序列化，下面看下怎么定义和使用的。<br><figure class=\"highlight asciidoc\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div></pre></td><td class=\"code\"><pre><div class=\"line\">#!/usr/bin/env python</div><div class=\"line\"># -<span class=\"strong\">*- coding: utf-8 -*</span>-</div><div class=\"line\">#json<span class=\"emphasis\">_extention</div><div class=\"line\">#2014-03-16</div><div class=\"line\">#copyright: orangleliu</div><div class=\"line\">#license: BSD</div><div class=\"line\"></div><div class=\"line\"></span>'''</div><div class=\"line\">python中dumps方法很好用，可以直接把我们的dict直接序列化为json对象</div><div class=\"line\">但是有的时候我们加了一些自定义的类就没法序列化了，这个时候需要</div><div class=\"line\">自定义一些序列化方法</div><div class=\"line\"></div><div class=\"line\">参考：</div><div class=\"line\">http://docs.python.org/2.7/library/json.html</div><div class=\"line\"></div><div class=\"line\">例如:</div><div class=\"line\">In [3]: from datetime import  datetime</div><div class=\"line\"></div><div class=\"line\">In [4]: json<span class=\"emphasis\">_1 = &#123;'num':1112, 'date':datetime.now()&#125;</div><div class=\"line\"></div><div class=\"line\"></span>In [5]: import json</div><div class=\"line\"></div><div class=\"line\">In [6]: json.dumps(json<span class=\"emphasis\">_1)</div><div class=\"line\">---------------------------------------------------------------------------</div><div class=\"line\">TypeError\t\t\t\t\t\t\t\t Traceback (most recent call last)</div><div class=\"line\">D:\\devsofts\\python2.7\\lib\\site-packages\\django\\core\\management\\commands\\shell.py</div><div class=\"line\">c in &lt;module&gt;()</div><div class=\"line\">----&gt; 1 json.dumps(json_</span>1)</div><div class=\"line\"></div><div class=\"line\">TypeError: datetime.datetime(2014, 3, 16, 13, 47, 37, 353000) is not JSON serial</div><div class=\"line\">izable</div><div class=\"line\">'''</div></pre></td></tr></table></figure></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">from</span> datetime <span class=\"keyword\">import</span> datetime</div><div class=\"line\"><span class=\"keyword\">import</span> json</div><div class=\"line\"></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">DateEncoder</span><span class=\"params\">(json.JSONEncoder )</span>:</span></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">default</span><span class=\"params\">(self, obj)</span>:</span></div><div class=\"line\">    <span class=\"keyword\">if</span> isinstance(obj, datetime):</div><div class=\"line\">      <span class=\"keyword\">return</span> obj.__str__()</div><div class=\"line\">    <span class=\"keyword\">return</span> json.JSONEncoder.default(self, obj)</div><div class=\"line\"></div><div class=\"line\">json_1 = &#123;<span class=\"string\">'num'</span>:<span class=\"number\">1112</span>, <span class=\"string\">'date'</span>:datetime.now()&#125;</div><div class=\"line\"><span class=\"keyword\">print</span> json.dumps(json_1, cls=DateEncoder)</div><div class=\"line\"></div><div class=\"line\"><span class=\"string\">'''</div><div class=\"line\">输出结果：</div><div class=\"line\"></div><div class=\"line\">PS D:\\code\\python\\python_abc&gt; python .\\json_extention.py</div><div class=\"line\">&#123;\"date\": \"2014-03-16 13:56:39.003000\", \"num\": 1112&#125;</div><div class=\"line\">'''</span></div></pre></td></tr></table></figure>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">#我们自定义一个类试试</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">User</span><span class=\"params\">(object)</span>:</span></div><div class=\"line\">   <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span><span class=\"params\">(self, name)</span>:</span></div><div class=\"line\">    self.name = name</div><div class=\"line\"></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">UserEncoder</span><span class=\"params\">(json.JSONEncoder)</span>:</span></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">default</span><span class=\"params\">(self, obj)</span>:</span></div><div class=\"line\">    <span class=\"keyword\">if</span> isinstance(obj, User):</div><div class=\"line\">      <span class=\"keyword\">return</span> obj.name</div><div class=\"line\">    <span class=\"keyword\">return</span> json.JSONEncoder.default(self, obj)</div><div class=\"line\"></div><div class=\"line\">json_2 = &#123;<span class=\"string\">'user'</span>:User(<span class=\"string\">'orangle'</span>)&#125;</div><div class=\"line\"><span class=\"keyword\">print</span> json.dumps(json_2, cls=UserEncoder)</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">PS D:\\code\\python\\python_abc&gt; python .\\json_extention.py</div><div class=\"line\">&#123;<span class=\"string\">\"date\"</span>: <span class=\"string\">\"2014-03-16 14:01:46.738000\"</span>, <span class=\"string\">\"num\"</span>: <span class=\"number\">1112</span>&#125;</div><div class=\"line\">&#123;<span class=\"string\">\"user\"</span>: <span class=\"string\">\"orangle\"</span>&#125;</div></pre></td></tr></table></figure>\n<h1 id=\"unsupported-operand-type-s-for-‘float’-and-‘Decimal’\"><a href=\"#unsupported-operand-type-s-for-‘float’-and-‘Decimal’\" class=\"headerlink\" title=\"unsupported operand type(s) for +: ‘float’ and ‘Decimal’\"></a>unsupported operand type(s) for +: ‘float’ and ‘Decimal’</h1><p>在使用django时候，取得数据库中的Float型时，与cost相加出现的错误</p>\n<pre><code><figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">cost = <span class=\"number\">0</span></div><div class=\"line\">daily_order<span class=\"selector-class\">.cost_of_product</span> = daily_order<span class=\"selector-class\">.cost_of_product</span> + cost</div></pre></td></tr></table></figure>\n</code></pre><p>解决方法</p>\n<pre><code><figure class=\"highlight fortran\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">import</span> <span class=\"keyword\">decimal</span></div><div class=\"line\">​daily_order.cost_of_product = <span class=\"keyword\">decimal</span>.<span class=\"keyword\">Decimal</span>(daily_order.cost_of_product) + cost</div></pre></td></tr></table></figure>\n</code></pre><h1 id=\"need-string-or-buffer-long-found\"><a href=\"#need-string-or-buffer-long-found\" class=\"headerlink\" title=\"need string or buffer, long found\"></a>need string or buffer, long found</h1><p>今天给 Django 设计模型时, 把模型的 <strong>unicode</strong>() 函数设计成返回 id, 结果出现了<br>coercing to Unicode: need string or buffer, long found</p>\n<p>感觉很奇怪. 总是提个醒吧, 不要妄图用 <strong>unicode</strong>() 得到 id.<br>不过 unicode(id) 应该是可以的吧.</p>\n"},{"title":"URI和URL的区别","date":"2015-10-12T12:36:45.000Z","_content":"URIs, URLs, and URNs\n=============\n* 首先，URI，是uniform resource identifier，统一资源标识符，用来唯一的标识一个资源。\n* 而URL是uniform resource locator，统一资源定位器，它是一种具体的URI，即URL可以用来标识一个资源，而且还指明了如何locate这个资源。\n* 而URN，uniform resource name，统一资源命名，是通过名字来标识资源，比如mailto:java-net@java.sun.com。\n也就是说，URI是以一种抽象的，高层次概念定义统一资源标识，而URL和URN则是具体的资源标识的方式。URL和URN都是一种URI。","source":"_posts/2015/10/12/technology.md","raw":"title: URI和URL的区别\ndate: 2015-10-12 20:36:45\ncategories:\n- 技术点滴\ntags:\n- 技术点滴\n---\nURIs, URLs, and URNs\n=============\n* 首先，URI，是uniform resource identifier，统一资源标识符，用来唯一的标识一个资源。\n* 而URL是uniform resource locator，统一资源定位器，它是一种具体的URI，即URL可以用来标识一个资源，而且还指明了如何locate这个资源。\n* 而URN，uniform resource name，统一资源命名，是通过名字来标识资源，比如mailto:java-net@java.sun.com。\n也就是说，URI是以一种抽象的，高层次概念定义统一资源标识，而URL和URN则是具体的资源标识的方式。URL和URN都是一种URI。","slug":"technology","published":1,"updated":"2016-06-29T15:29:25.171Z","_id":"cik3sv514003w0s37gjbqr5by","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"URIs-URLs-and-URNs\"><a href=\"#URIs-URLs-and-URNs\" class=\"headerlink\" title=\"URIs, URLs, and URNs\"></a>URIs, URLs, and URNs</h1><ul>\n<li>首先，URI，是uniform resource identifier，统一资源标识符，用来唯一的标识一个资源。</li>\n<li>而URL是uniform resource locator，统一资源定位器，它是一种具体的URI，即URL可以用来标识一个资源，而且还指明了如何locate这个资源。</li>\n<li>而URN，uniform resource name，统一资源命名，是通过名字来标识资源，比如mailto:java-net@java.sun.com。<br>也就是说，URI是以一种抽象的，高层次概念定义统一资源标识，而URL和URN则是具体的资源标识的方式。URL和URN都是一种URI。</li>\n</ul>\n","excerpt":"","more":"<h1 id=\"URIs-URLs-and-URNs\"><a href=\"#URIs-URLs-and-URNs\" class=\"headerlink\" title=\"URIs, URLs, and URNs\"></a>URIs, URLs, and URNs</h1><ul>\n<li>首先，URI，是uniform resource identifier，统一资源标识符，用来唯一的标识一个资源。</li>\n<li>而URL是uniform resource locator，统一资源定位器，它是一种具体的URI，即URL可以用来标识一个资源，而且还指明了如何locate这个资源。</li>\n<li>而URN，uniform resource name，统一资源命名，是通过名字来标识资源，比如mailto:java-net@java.sun.com。<br>也就是说，URI是以一种抽象的，高层次概念定义统一资源标识，而URL和URN则是具体的资源标识的方式。URL和URN都是一种URI。</li>\n</ul>\n"},{"title":"Markdown 使用","date":"2015-10-12T01:40:28.000Z","_content":"简介\n=============\nMarkdown是一种可以使用普通文本编辑器编写的标记语言，通过简单的标记语法，它可以使普通文本内容具有一定的格式。\n\n标题\n=============\n        This is an H1\n        =============  第一阶标题\n\n        This is an H2\n        -------------  第二阶标题\n\n链接\n=============\nMarkdown 支持两种形式的链接语法： 行内式和参考式两种形式。\n```\n行内式:这是参考链接 [title](http://cyan-blue.github.io) .\n```\n\n强调\n=============\nMarkdown 使用星号（*）和底线（_）作为标记强调字词的符号，被 * 或 _ 包围的字词会被转成用 <em> 标签包围，用两个 * 或 _ 包起来的话，则会被转成 <strong>，例如：\n```\n*single asterisks*\n\n_single underscores_\n\n**double asterisks**\n\n__double underscores__\n```\n会转成：\n```\n<em>single asterisks</em>\n\n<em>single underscores</em>\n\n<strong>double asterisks</strong>\n\n<strong>double underscores</strong>\n```\n你可以随便用你喜欢的样式，唯一的限制是，你用什么符号开启标签，就要用什么符号结束。\n\n强调也可以直接插在文字中间：\n```\nun*frigging*believable\n```\n但是如果你的 * 和 _ 两边都有空白的话，它们就只会被当成普通的符号。\n\n如果要在文字前后直接插入普通的星号或底线，你可以用反斜线：\n```\n\\*this text is surrounded by literal asterisks\\*\n```\n\n图片\n============\n很明显地，要在纯文字应用中设计一个「自然」的语法来插入图片是有一定难度的。\nMarkdown 使用一种和链接很相似的语法来标记图片，同样也允许两种样式： 行内式和参考式。\n行内式的图片语法看起来像是：\n```\n![python](http://huangyan.qiniudn.com/bird.jpg?imageMogr2/thumbnail/400x200 \"python\")\n```\n详细叙述如下：\n* 一个惊叹号 !\n* 接着一个方括号，里面放上图片的替代文字\n* 接着一个普通括号，里面放上图片的网址，最后还可以用引号包住并加上 选择性的 'title' 文字。","source":"_posts/2015/10/12/Markdown.md","raw":"title: Markdown 使用\ndate: 2015-10-12 09:40:28\ncategories:\n- 技术点滴\ntags:\n- Markdown\n---\n简介\n=============\nMarkdown是一种可以使用普通文本编辑器编写的标记语言，通过简单的标记语法，它可以使普通文本内容具有一定的格式。\n\n标题\n=============\n        This is an H1\n        =============  第一阶标题\n\n        This is an H2\n        -------------  第二阶标题\n\n链接\n=============\nMarkdown 支持两种形式的链接语法： 行内式和参考式两种形式。\n```\n行内式:这是参考链接 [title](http://cyan-blue.github.io) .\n```\n\n强调\n=============\nMarkdown 使用星号（*）和底线（_）作为标记强调字词的符号，被 * 或 _ 包围的字词会被转成用 <em> 标签包围，用两个 * 或 _ 包起来的话，则会被转成 <strong>，例如：\n```\n*single asterisks*\n\n_single underscores_\n\n**double asterisks**\n\n__double underscores__\n```\n会转成：\n```\n<em>single asterisks</em>\n\n<em>single underscores</em>\n\n<strong>double asterisks</strong>\n\n<strong>double underscores</strong>\n```\n你可以随便用你喜欢的样式，唯一的限制是，你用什么符号开启标签，就要用什么符号结束。\n\n强调也可以直接插在文字中间：\n```\nun*frigging*believable\n```\n但是如果你的 * 和 _ 两边都有空白的话，它们就只会被当成普通的符号。\n\n如果要在文字前后直接插入普通的星号或底线，你可以用反斜线：\n```\n\\*this text is surrounded by literal asterisks\\*\n```\n\n图片\n============\n很明显地，要在纯文字应用中设计一个「自然」的语法来插入图片是有一定难度的。\nMarkdown 使用一种和链接很相似的语法来标记图片，同样也允许两种样式： 行内式和参考式。\n行内式的图片语法看起来像是：\n```\n![python](http://huangyan.qiniudn.com/bird.jpg?imageMogr2/thumbnail/400x200 \"python\")\n```\n详细叙述如下：\n* 一个惊叹号 !\n* 接着一个方括号，里面放上图片的替代文字\n* 接着一个普通括号，里面放上图片的网址，最后还可以用引号包住并加上 选择性的 'title' 文字。","slug":"Markdown","published":1,"updated":"2016-06-29T15:29:25.171Z","_id":"cik3sv51t00410s371zgchvqc","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"简介\"><a href=\"#简介\" class=\"headerlink\" title=\"简介\"></a>简介</h1><p>Markdown是一种可以使用普通文本编辑器编写的标记语言，通过简单的标记语法，它可以使普通文本内容具有一定的格式。</p>\n<h1 id=\"标题\"><a href=\"#标题\" class=\"headerlink\" title=\"标题\"></a>标题</h1><pre><code>This is an H1\n=============  第一阶标题\n\nThis is an H2\n-------------  第二阶标题\n</code></pre><h1 id=\"链接\"><a href=\"#链接\" class=\"headerlink\" title=\"链接\"></a>链接</h1><p>Markdown 支持两种形式的链接语法： 行内式和参考式两种形式。<br><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">行内式:这是参考链接 [<span class=\"string\">title</span>](<span class=\"link\">http://cyan-blue.github.io</span>) .</div></pre></td></tr></table></figure></p>\n<h1 id=\"强调\"><a href=\"#强调\" class=\"headerlink\" title=\"强调\"></a>强调</h1><p>Markdown 使用星号（<em>）和底线（_）作为标记强调字词的符号，被 </em> 或 <em> 包围的字词会被转成用 <em> 标签包围，用两个 * 或 </em> 包起来的话，则会被转成 <strong>，例如：<br><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"emphasis\">*single asterisks*</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"emphasis\">_single underscores_</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"strong\">**double asterisks**</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"strong\">__double underscores__</span></div></pre></td></tr></table></figure></strong></em></p>\n<p>会转成：<br><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">em</span>&gt;</span>single asterisks<span class=\"tag\">&lt;/<span class=\"name\">em</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">em</span>&gt;</span>single underscores<span class=\"tag\">&lt;/<span class=\"name\">em</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">strong</span>&gt;</span>double asterisks<span class=\"tag\">&lt;/<span class=\"name\">strong</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">strong</span>&gt;</span>double underscores<span class=\"tag\">&lt;/<span class=\"name\">strong</span>&gt;</span></div></pre></td></tr></table></figure></p>\n<p>你可以随便用你喜欢的样式，唯一的限制是，你用什么符号开启标签，就要用什么符号结束。</p>\n<p>强调也可以直接插在文字中间：<br><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">un<span class=\"emphasis\">*frigging*</span>believable</div></pre></td></tr></table></figure></p>\n<p>但是如果你的 * 和 _ 两边都有空白的话，它们就只会被当成普通的符号。</p>\n<p>如果要在文字前后直接插入普通的星号或底线，你可以用反斜线：<br><figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">\\*<span class=\"keyword\">this</span> text <span class=\"keyword\">is</span> surrounded <span class=\"keyword\">by</span> literal asterisks\\*</div></pre></td></tr></table></figure></p>\n<h1 id=\"图片\"><a href=\"#图片\" class=\"headerlink\" title=\"图片\"></a>图片</h1><p>很明显地，要在纯文字应用中设计一个「自然」的语法来插入图片是有一定难度的。<br>Markdown 使用一种和链接很相似的语法来标记图片，同样也允许两种样式： 行内式和参考式。<br>行内式的图片语法看起来像是：<br><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">![<span class=\"string\">python</span>](<span class=\"link\">http://huangyan.qiniudn.com/bird.jpg?imageMogr2/thumbnail/400x200 \"python\"</span>)</div></pre></td></tr></table></figure></p>\n<p>详细叙述如下：</p>\n<ul>\n<li>一个惊叹号 !</li>\n<li>接着一个方括号，里面放上图片的替代文字</li>\n<li>接着一个普通括号，里面放上图片的网址，最后还可以用引号包住并加上 选择性的 ‘title’ 文字。</li>\n</ul>\n","excerpt":"","more":"<h1 id=\"简介\"><a href=\"#简介\" class=\"headerlink\" title=\"简介\"></a>简介</h1><p>Markdown是一种可以使用普通文本编辑器编写的标记语言，通过简单的标记语法，它可以使普通文本内容具有一定的格式。</p>\n<h1 id=\"标题\"><a href=\"#标题\" class=\"headerlink\" title=\"标题\"></a>标题</h1><pre><code>This is an H1\n=============  第一阶标题\n\nThis is an H2\n-------------  第二阶标题\n</code></pre><h1 id=\"链接\"><a href=\"#链接\" class=\"headerlink\" title=\"链接\"></a>链接</h1><p>Markdown 支持两种形式的链接语法： 行内式和参考式两种形式。<br><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">行内式:这是参考链接 [<span class=\"string\">title</span>](<span class=\"link\">http://cyan-blue.github.io</span>) .</div></pre></td></tr></table></figure></p>\n<h1 id=\"强调\"><a href=\"#强调\" class=\"headerlink\" title=\"强调\"></a>强调</h1><p>Markdown 使用星号（<em>）和底线（_）作为标记强调字词的符号，被 </em> 或 <em> 包围的字词会被转成用 <em> 标签包围，用两个 * 或 </em> 包起来的话，则会被转成 <strong>，例如：<br><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"emphasis\">*single asterisks*</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"emphasis\">_single underscores_</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"strong\">**double asterisks**</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"strong\">__double underscores__</span></div></pre></td></tr></table></figure></p>\n<p>会转成：<br><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">em</span>&gt;</span>single asterisks<span class=\"tag\">&lt;/<span class=\"name\">em</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">em</span>&gt;</span>single underscores<span class=\"tag\">&lt;/<span class=\"name\">em</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">strong</span>&gt;</span>double asterisks<span class=\"tag\">&lt;/<span class=\"name\">strong</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">strong</span>&gt;</span>double underscores<span class=\"tag\">&lt;/<span class=\"name\">strong</span>&gt;</span></div></pre></td></tr></table></figure></p>\n<p>你可以随便用你喜欢的样式，唯一的限制是，你用什么符号开启标签，就要用什么符号结束。</p>\n<p>强调也可以直接插在文字中间：<br><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">un<span class=\"emphasis\">*frigging*</span>believable</div></pre></td></tr></table></figure></p>\n<p>但是如果你的 * 和 _ 两边都有空白的话，它们就只会被当成普通的符号。</p>\n<p>如果要在文字前后直接插入普通的星号或底线，你可以用反斜线：<br><figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">\\*<span class=\"keyword\">this</span> text <span class=\"keyword\">is</span> surrounded <span class=\"keyword\">by</span> literal asterisks\\*</div></pre></td></tr></table></figure></p>\n<h1 id=\"图片\"><a href=\"#图片\" class=\"headerlink\" title=\"图片\"></a>图片</h1><p>很明显地，要在纯文字应用中设计一个「自然」的语法来插入图片是有一定难度的。<br>Markdown 使用一种和链接很相似的语法来标记图片，同样也允许两种样式： 行内式和参考式。<br>行内式的图片语法看起来像是：<br><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">![<span class=\"string\">python</span>](<span class=\"link\">http://huangyan.qiniudn.com/bird.jpg?imageMogr2/thumbnail/400x200 \"python\"</span>)</div></pre></td></tr></table></figure></p>\n<p>详细叙述如下：</p>\n<ul>\n<li>一个惊叹号 !</li>\n<li>接着一个方括号，里面放上图片的替代文字</li>\n<li>接着一个普通括号，里面放上图片的网址，最后还可以用引号包住并加上 选择性的 ‘title’ 文字。</li>\n</ul>\n"},{"title":"JavaScript 使用","date":"2015-10-12T01:20:41.000Z","_content":"\n简介\n=============\nJavaScript一种直译式脚本语言，是一种动态类型、弱类型、基于原型的语言，内置支持类型。它的解释器被称为JavaScript引擎，为浏览器的一部分，广泛用于客户端的脚本语言，最早是在HTML（标准通用标记语言下的一个应用）网页上使用，用来给HTML网页增加动态功能。\n\njQuery 事件 - bind() 方法\n=============\n```\n$(\".btn-save\").bind(\"click\", btn_save_func); //绑定btn_save_func\nfunction btn_save_func () { console.log(\"func\")}\n$(\".btn-save\").unbind(\"click\");//解绑btn_save_func\n```","source":"_posts/2015/10/12/JS.md","raw":"title: JavaScript 使用\ndate: 2015-10-12 09:20:41\ncategories:\n- 前端\ntags:\n- Js\n---\n\n简介\n=============\nJavaScript一种直译式脚本语言，是一种动态类型、弱类型、基于原型的语言，内置支持类型。它的解释器被称为JavaScript引擎，为浏览器的一部分，广泛用于客户端的脚本语言，最早是在HTML（标准通用标记语言下的一个应用）网页上使用，用来给HTML网页增加动态功能。\n\njQuery 事件 - bind() 方法\n=============\n```\n$(\".btn-save\").bind(\"click\", btn_save_func); //绑定btn_save_func\nfunction btn_save_func () { console.log(\"func\")}\n$(\".btn-save\").unbind(\"click\");//解绑btn_save_func\n```","slug":"JS","published":1,"updated":"2016-06-29T15:29:25.171Z","_id":"cik3sv51w00450s37l5crtses","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"简介\"><a href=\"#简介\" class=\"headerlink\" title=\"简介\"></a>简介</h1><p>JavaScript一种直译式脚本语言，是一种动态类型、弱类型、基于原型的语言，内置支持类型。它的解释器被称为JavaScript引擎，为浏览器的一部分，广泛用于客户端的脚本语言，最早是在HTML（标准通用标记语言下的一个应用）网页上使用，用来给HTML网页增加动态功能。</p>\n<h1 id=\"jQuery-事件-bind-方法\"><a href=\"#jQuery-事件-bind-方法\" class=\"headerlink\" title=\"jQuery 事件 - bind() 方法\"></a>jQuery 事件 - bind() 方法</h1><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">$(<span class=\"string\">\".btn-save\"</span>).bind(<span class=\"string\">\"click\"</span>, btn_save_func); <span class=\"comment\">//绑定btn_save_func</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">btn_save_func</span> (<span class=\"params\"></span>) </span>&#123; <span class=\"built_in\">console</span>.log(<span class=\"string\">\"func\"</span>)&#125;</div><div class=\"line\">$(<span class=\"string\">\".btn-save\"</span>).unbind(<span class=\"string\">\"click\"</span>);<span class=\"comment\">//解绑btn_save_func</span></div></pre></td></tr></table></figure>","excerpt":"","more":"<h1 id=\"简介\"><a href=\"#简介\" class=\"headerlink\" title=\"简介\"></a>简介</h1><p>JavaScript一种直译式脚本语言，是一种动态类型、弱类型、基于原型的语言，内置支持类型。它的解释器被称为JavaScript引擎，为浏览器的一部分，广泛用于客户端的脚本语言，最早是在HTML（标准通用标记语言下的一个应用）网页上使用，用来给HTML网页增加动态功能。</p>\n<h1 id=\"jQuery-事件-bind-方法\"><a href=\"#jQuery-事件-bind-方法\" class=\"headerlink\" title=\"jQuery 事件 - bind() 方法\"></a>jQuery 事件 - bind() 方法</h1><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">$(<span class=\"string\">\".btn-save\"</span>).bind(<span class=\"string\">\"click\"</span>, btn_save_func); <span class=\"comment\">//绑定btn_save_func</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">btn_save_func</span> (<span class=\"params\"></span>) </span>&#123; <span class=\"built_in\">console</span>.log(<span class=\"string\">\"func\"</span>)&#125;</div><div class=\"line\">$(<span class=\"string\">\".btn-save\"</span>).unbind(<span class=\"string\">\"click\"</span>);<span class=\"comment\">//解绑btn_save_func</span></div></pre></td></tr></table></figure>"},{"title":"Django 问题收集","date":"2015-10-12T08:46:06.000Z","_content":"\nneed string or buffer, long found\n=============\n今天给 Django 设计模型时, 把模型的 __unicode__() 函数设计成返回 id, 结果出现了\ncoercing to Unicode: need string or buffer, long found\n\n感觉很奇怪. 总是提个醒吧, 不要妄图用 __unicode__() 得到 id.\n不过 unicode(id) 应该是可以的吧.\n\nSite matching query does not exist.\n==============\n\nIf you don't have a site defined in your database and django wants to reference it, you will need to create one.\n```\nFrom a python manage.py shell :\n\nfrom django.contrib.sites.models import Site\nnew_site = Site.objects.create(domain='foo.com', name='foo.com')\nprint new_site.id\n```\nNow set that site ID in your settings.py to SITE_ID","source":"_posts/2015/10/12/Django.md","raw":"title: Django 问题收集\ndate: 2015-10-12 16:46:06\ncategories:\n- Django\ntags:\n- Django\n- Error\n---\n\nneed string or buffer, long found\n=============\n今天给 Django 设计模型时, 把模型的 __unicode__() 函数设计成返回 id, 结果出现了\ncoercing to Unicode: need string or buffer, long found\n\n感觉很奇怪. 总是提个醒吧, 不要妄图用 __unicode__() 得到 id.\n不过 unicode(id) 应该是可以的吧.\n\nSite matching query does not exist.\n==============\n\nIf you don't have a site defined in your database and django wants to reference it, you will need to create one.\n```\nFrom a python manage.py shell :\n\nfrom django.contrib.sites.models import Site\nnew_site = Site.objects.create(domain='foo.com', name='foo.com')\nprint new_site.id\n```\nNow set that site ID in your settings.py to SITE_ID","slug":"Django","published":1,"updated":"2016-06-29T15:29:25.171Z","_id":"cik3sv51y00480s37zsvcelko","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"need-string-or-buffer-long-found\"><a href=\"#need-string-or-buffer-long-found\" class=\"headerlink\" title=\"need string or buffer, long found\"></a>need string or buffer, long found</h1><p>今天给 Django 设计模型时, 把模型的 <strong>unicode</strong>() 函数设计成返回 id, 结果出现了<br>coercing to Unicode: need string or buffer, long found</p>\n<p>感觉很奇怪. 总是提个醒吧, 不要妄图用 <strong>unicode</strong>() 得到 id.<br>不过 unicode(id) 应该是可以的吧.</p>\n<h1 id=\"Site-matching-query-does-not-exist\"><a href=\"#Site-matching-query-does-not-exist\" class=\"headerlink\" title=\"Site matching query does not exist.\"></a>Site matching query does not exist.</h1><p>If you don’t have a site defined in your database and django wants to reference it, you will need to create one.<br><figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">From <span class=\"selector-tag\">a</span> python manage<span class=\"selector-class\">.py</span> shell :</div><div class=\"line\"></div><div class=\"line\">from django<span class=\"selector-class\">.contrib</span><span class=\"selector-class\">.sites</span><span class=\"selector-class\">.models</span> import Site</div><div class=\"line\">new_site = Site<span class=\"selector-class\">.objects</span><span class=\"selector-class\">.create</span>(domain=<span class=\"string\">'foo.com'</span>, name=<span class=\"string\">'foo.com'</span>)</div><div class=\"line\">print new_site.id</div></pre></td></tr></table></figure></p>\n<p>Now set that site ID in your settings.py to SITE_ID</p>\n","excerpt":"","more":"<h1 id=\"need-string-or-buffer-long-found\"><a href=\"#need-string-or-buffer-long-found\" class=\"headerlink\" title=\"need string or buffer, long found\"></a>need string or buffer, long found</h1><p>今天给 Django 设计模型时, 把模型的 <strong>unicode</strong>() 函数设计成返回 id, 结果出现了<br>coercing to Unicode: need string or buffer, long found</p>\n<p>感觉很奇怪. 总是提个醒吧, 不要妄图用 <strong>unicode</strong>() 得到 id.<br>不过 unicode(id) 应该是可以的吧.</p>\n<h1 id=\"Site-matching-query-does-not-exist\"><a href=\"#Site-matching-query-does-not-exist\" class=\"headerlink\" title=\"Site matching query does not exist.\"></a>Site matching query does not exist.</h1><p>If you don’t have a site defined in your database and django wants to reference it, you will need to create one.<br><figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">From <span class=\"selector-tag\">a</span> python manage<span class=\"selector-class\">.py</span> shell :</div><div class=\"line\"></div><div class=\"line\">from django<span class=\"selector-class\">.contrib</span><span class=\"selector-class\">.sites</span><span class=\"selector-class\">.models</span> import Site</div><div class=\"line\">new_site = Site<span class=\"selector-class\">.objects</span><span class=\"selector-class\">.create</span>(domain=<span class=\"string\">'foo.com'</span>, name=<span class=\"string\">'foo.com'</span>)</div><div class=\"line\">print new_site.id</div></pre></td></tr></table></figure></p>\n<p>Now set that site ID in your settings.py to SITE_ID</p>\n"},{"title":"Css 使用","date":"2015-10-12T02:11:24.000Z","_content":"\n简介\n=============\n层叠样式表是一种用来表现HTML（标准通用标记语言的一个应用）或XML（标准通用标记语言的一个子集）等文件样式的计算机语言。","source":"_posts/2015/10/12/Css.md","raw":"title: Css 使用\ndate: 2015-10-12 10:11:24\ncategories:\n- 前端\ntags:\n- Css\n---\n\n简介\n=============\n层叠样式表是一种用来表现HTML（标准通用标记语言的一个应用）或XML（标准通用标记语言的一个子集）等文件样式的计算机语言。","slug":"Css","published":1,"updated":"2016-06-29T15:29:25.171Z","_id":"cik3sv521004d0s3772sblcv8","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"简介\"><a href=\"#简介\" class=\"headerlink\" title=\"简介\"></a>简介</h1><p>层叠样式表是一种用来表现HTML（标准通用标记语言的一个应用）或XML（标准通用标记语言的一个子集）等文件样式的计算机语言。</p>\n","excerpt":"","more":"<h1 id=\"简介\"><a href=\"#简介\" class=\"headerlink\" title=\"简介\"></a>简介</h1><p>层叠样式表是一种用来表现HTML（标准通用标记语言的一个应用）或XML（标准通用标记语言的一个子集）等文件样式的计算机语言。</p>\n"},{"title":"github输入用户和密码","date":"2015-10-09T13:00:20.000Z","_content":"\n## 每次git push 的时候总是要输用户名和密码的解决方法\n\n```\ngit remote -v\n>origin\tgit@github.com:cyan-blue/cyan-blue.github.io.git (fetch)\n>origin\tgit@github.com:cyan-blue/cyan-blue.github.io.git (push)\n```\n下面把它换成ssh方式的。\n```\ngit remote rm origin\ngit remote add origin git@github.com:cyan-blue/cyan-blue.github.io.git\ngit push origin\n```","source":"_posts/2015/10/09/github-user-pwd.md","raw":"title: github输入用户和密码\ndate: 2015-10-09 21:00:20\ncategories:\n- Git\ntags:\n- Git\n---\n\n## 每次git push 的时候总是要输用户名和密码的解决方法\n\n```\ngit remote -v\n>origin\tgit@github.com:cyan-blue/cyan-blue.github.io.git (fetch)\n>origin\tgit@github.com:cyan-blue/cyan-blue.github.io.git (push)\n```\n下面把它换成ssh方式的。\n```\ngit remote rm origin\ngit remote add origin git@github.com:cyan-blue/cyan-blue.github.io.git\ngit push origin\n```","slug":"github-user-pwd","published":1,"updated":"2016-06-29T15:52:33.405Z","_id":"cik3sv525004h0s37bfup1owc","comments":1,"layout":"post","photos":[],"link":"","content":"<h2 id=\"每次git-push-的时候总是要输用户名和密码的解决方法\"><a href=\"#每次git-push-的时候总是要输用户名和密码的解决方法\" class=\"headerlink\" title=\"每次git push 的时候总是要输用户名和密码的解决方法\"></a>每次git push 的时候总是要输用户名和密码的解决方法</h2><figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">git remote -v</div><div class=\"line\">&gt;origin\tgit@github<span class=\"selector-class\">.com</span>:cyan-blue/cyan-blue<span class=\"selector-class\">.github</span><span class=\"selector-class\">.io</span><span class=\"selector-class\">.git</span> (fetch)</div><div class=\"line\">&gt;origin\tgit@github<span class=\"selector-class\">.com</span>:cyan-blue/cyan-blue<span class=\"selector-class\">.github</span><span class=\"selector-class\">.io</span><span class=\"selector-class\">.git</span> (push)</div></pre></td></tr></table></figure>\n<p>下面把它换成ssh方式的。<br><figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">git remote rm origin</div><div class=\"line\">git remote add origin git@github<span class=\"selector-class\">.com</span>:cyan-blue/cyan-blue<span class=\"selector-class\">.github</span><span class=\"selector-class\">.io</span><span class=\"selector-class\">.git</span></div><div class=\"line\">git push origin</div></pre></td></tr></table></figure></p>\n","excerpt":"","more":"<h2 id=\"每次git-push-的时候总是要输用户名和密码的解决方法\"><a href=\"#每次git-push-的时候总是要输用户名和密码的解决方法\" class=\"headerlink\" title=\"每次git push 的时候总是要输用户名和密码的解决方法\"></a>每次git push 的时候总是要输用户名和密码的解决方法</h2><figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">git remote -v</div><div class=\"line\">&gt;origin\tgit@github<span class=\"selector-class\">.com</span>:cyan-blue/cyan-blue<span class=\"selector-class\">.github</span><span class=\"selector-class\">.io</span><span class=\"selector-class\">.git</span> (fetch)</div><div class=\"line\">&gt;origin\tgit@github<span class=\"selector-class\">.com</span>:cyan-blue/cyan-blue<span class=\"selector-class\">.github</span><span class=\"selector-class\">.io</span><span class=\"selector-class\">.git</span> (push)</div></pre></td></tr></table></figure>\n<p>下面把它换成ssh方式的。<br><figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">git remote rm origin</div><div class=\"line\">git remote add origin git@github<span class=\"selector-class\">.com</span>:cyan-blue/cyan-blue<span class=\"selector-class\">.github</span><span class=\"selector-class\">.io</span><span class=\"selector-class\">.git</span></div><div class=\"line\">git push origin</div></pre></td></tr></table></figure></p>\n"},{"title":"Git Use","date":"2015-10-09T03:30:39.000Z","_content":"\n\n<span style=\"color:#408140\">Git Start</span>\n=================\nGit是目前世界上最先进的分布式版本控制系统（没有之一）。\n查看本地分支:\n-----------------\n```\ngit branch\n```\n查看远程分支:\n-----------------\n```\ngit branch -r\n```\n新建branch：\n-----------------\n```\ngit checkout -b abc_branch\n```\n\n删除分支\n-----------------\n```\ngit branch -d abc_branch\n```\n<span style=\"color:#408140;\">强制删除使用 -D</span>\n切换branch\n-----------------\n```\ngit checkout abc_branch\n```\n合并分支\n-----------------\n```\ngit merge abc_branch\n```\n查看记录\n-----------------\n```\ngit blame filename 查看该文件目前的每一行最后改动的是什么时候提交的\ngit log -p filename 查看这个文件所有的详细提交\n```\n查看某一个文件的所有提交记录：\n```\ngit log --pretty=oneline 文件路径`\ngit log --pretty=oneline views.py\n>>f850a9ef393584e49d46391897db614ed56a2903 third commit\n>>0d08b578371afb8f45748a0491faa2a7820d7928 second commit\n>>3fcc3973deee5c33695c0b40b18a11f83c986b2d first commit\n```\n查看某一个记录的修改内容：\n-----------------\n*\n\t```\n\tgit show 3fcc3973deee5c33695c0b40b18a11f83c986b2d\n\t```\n\t例子里面打印出来的就是针对文件views.py的所有的改动历史，每一行最前面的那一长串数字就是每次提交形成的哈希值，接下来使用git show即可显示具体的某次的改动的修改\n\n存储\n-----------------\n-   ```\n    git stash\n    ```\n    > 用来暂存当前正在进行的工作， 比如突然你想pull 最新代码， 又不想加新commit， 或者为了fix 一个紧急的bug, 先stash, 使返回到自己上一个commit, 改完bug之后再stash pop, 继续原来的工作。\n-   ```\n    git stash 做一些操作后\n    git stash list 查看stash 列表\n    git pop 将最近的一个取出，并且删除\n    ```\n-   > if你的stash里面有好多个，这个时候可以使用git stash list 将Git栈信息打印出来，然后git stash apply stash@{0},取出对应的，注意这个时候并没有清除，如果需要清除，git stash clear，清空\n\n    >stash 多了，会发现list中你不知道哪一个对应的修改是什么？解决方法\n\n    ```\n    git stash save \"I DO SOMETHING\"\n    git stash list\n    >>stash@{0}: On develop: I DO SOMETHING\n    git stash pop stash@{0} or git stash apply stash@{0}\n     两者区别在于pop会删除stash，apply不会删除最后apply结束后，git stash clear\n    ```\n    **详细可以使用 git stash -help**\n\ngit pull --rebase\n-----------------\n\n>当本地commit一个提交和远端服务器中的代码有冲突(别人也改了相同的文件)时可以在pull 中加 –rebase。\n\n>加上rebase的意思是：\n把本地 repo. 从上次 pull 之后的变更暂存起來\n恢复到上次 pull 时的状态\n合并远端的变更到本地\n最后再合并刚刚暂存下來的本地变更\n\n\n修改commit 内容\n-----------------\n1. // 查看修改\n\t```\n\tgit commit --amend 可以修改最后一次 commit\n\t```\n\n\t```\n\tgit rebase -i master~1 //最后一次\n\tgit rebase -i master~5 //最后五次\n\t```\n2. // 显示结果如下，修改 pick 为 edit ，并 :wq 保存退出\n\t```\n\tpick 92b495b 2009-08-08: ×××××××\n\tRebase 9ef2b1f..92b495b onto 9ef2b1f\n\tCommands:\n\tpick = use commit\n\tedit = use commit, but stop for amending //改上面的 pick 为 edit\n\tsquash = use commit, but meld into previous commit\n\tIf you remove a line here THAT COMMIT WILL BE LOST.\n\t However, if you remove everything, the rebase will be aborted.\n\t```\n3. 命令行显示：\n\n\t```\n\tRebasing (1/1)\n\tYou can amend the commit now, with\n\tgit commit --amend\n\t```\n4. 使用 `git commit --amend` 进行修改，完成后 :wq 退出\n5. 使用 `git rebase --continue` 完成操作\n\n恢复文件\n-----------------\n- git 恢复\t\t\n\t```\n\tgit checkout\n\t```\n- git 返回到某个节点的文件\n\t\n\t```\n\tgit checkout 1bbbb91aaf96f1274750c6fd21d77c5e7142d424 文件路径\n\t```\n\ngit 有用的小贴士\n-----------------\n\n\t```\n\t> 内建的git输出 gitk\n\t> 彩色的git输出 git config color.ui true\n\t> git config format.pretty oneline\n\t```\n\n<span style=\"color:red;\">Git 使用时候遇到的错误</span>\n=================\n1. GIT CLONE ERROR\n错误fatal: The remote end hung up unexpectedly\n解决方案：\n\t```\n\tgit config --global http.postBuffer 24288000\n\tgit config --list\n\t```\n\n<span style=\"color:blue;\">GIT 一般使用：</span>\n=================\n\n从一般开发者的角度来看，git有以下功能：\n-----------------\n1. 从服务器上克隆数据库（包括代码和版本信息）到单机上。\n2. 在自己的机器上创建分支，修改代码。\n3. 在单机上自己创建的分支上提交代码。\n4. 在单机上合并分支。\n5. 新建一个分支，把服务器上最新版的代码fetch下来，然后跟自己的主分支合并。\n6. 生成补丁（patch），把补丁发送给主开发者。\n7. 看主开发者的反馈，如果主开发者发现两个一般开发者之间有冲突（他们之间可以合作解决的冲突），就会要求他们先解决冲突，然后再由其中一个人提交。如果主开发者可以自己解决，或者没有冲突，就通过。\n8. 一般开发者之间解决冲突的方法，开发者之间可以使用pull 命令解决冲突，解决完冲突之后再向主开发者提交补丁。\n\n从主开发者的角度（假设主开发者不用开发代码）看，git有以下功能：\n-----------------\n1. 查看邮件或者通过其它方式查看一般开发者的提交状态。\n2. 打上补丁，解决冲突（可以自己解决，也可以要求开发者之间解决以后再重新提交，如果是开源项目，还要决定哪些补丁有用，哪些不用）。\n3. 向公共服务器提交结果，然后通知所有开发人员。\n\n\n\n\ngit diff 082721fa41f6a351b4385ec02d94d8464f9ebb52 24a821ab059c12f9ec501bb93dc87439a1a4fd4f | wc -l\n","source":"_posts/2015/10/09/Git-Use.md","raw":"title: Git Use\ndate: 2015-10-09 11:30:39\ncategories:\n- Git\ntags:\n- Git\n---\n\n\n<span style=\"color:#408140\">Git Start</span>\n=================\nGit是目前世界上最先进的分布式版本控制系统（没有之一）。\n查看本地分支:\n-----------------\n```\ngit branch\n```\n查看远程分支:\n-----------------\n```\ngit branch -r\n```\n新建branch：\n-----------------\n```\ngit checkout -b abc_branch\n```\n\n删除分支\n-----------------\n```\ngit branch -d abc_branch\n```\n<span style=\"color:#408140;\">强制删除使用 -D</span>\n切换branch\n-----------------\n```\ngit checkout abc_branch\n```\n合并分支\n-----------------\n```\ngit merge abc_branch\n```\n查看记录\n-----------------\n```\ngit blame filename 查看该文件目前的每一行最后改动的是什么时候提交的\ngit log -p filename 查看这个文件所有的详细提交\n```\n查看某一个文件的所有提交记录：\n```\ngit log --pretty=oneline 文件路径`\ngit log --pretty=oneline views.py\n>>f850a9ef393584e49d46391897db614ed56a2903 third commit\n>>0d08b578371afb8f45748a0491faa2a7820d7928 second commit\n>>3fcc3973deee5c33695c0b40b18a11f83c986b2d first commit\n```\n查看某一个记录的修改内容：\n-----------------\n*\n\t```\n\tgit show 3fcc3973deee5c33695c0b40b18a11f83c986b2d\n\t```\n\t例子里面打印出来的就是针对文件views.py的所有的改动历史，每一行最前面的那一长串数字就是每次提交形成的哈希值，接下来使用git show即可显示具体的某次的改动的修改\n\n存储\n-----------------\n-   ```\n    git stash\n    ```\n    > 用来暂存当前正在进行的工作， 比如突然你想pull 最新代码， 又不想加新commit， 或者为了fix 一个紧急的bug, 先stash, 使返回到自己上一个commit, 改完bug之后再stash pop, 继续原来的工作。\n-   ```\n    git stash 做一些操作后\n    git stash list 查看stash 列表\n    git pop 将最近的一个取出，并且删除\n    ```\n-   > if你的stash里面有好多个，这个时候可以使用git stash list 将Git栈信息打印出来，然后git stash apply stash@{0},取出对应的，注意这个时候并没有清除，如果需要清除，git stash clear，清空\n\n    >stash 多了，会发现list中你不知道哪一个对应的修改是什么？解决方法\n\n    ```\n    git stash save \"I DO SOMETHING\"\n    git stash list\n    >>stash@{0}: On develop: I DO SOMETHING\n    git stash pop stash@{0} or git stash apply stash@{0}\n     两者区别在于pop会删除stash，apply不会删除最后apply结束后，git stash clear\n    ```\n    **详细可以使用 git stash -help**\n\ngit pull --rebase\n-----------------\n\n>当本地commit一个提交和远端服务器中的代码有冲突(别人也改了相同的文件)时可以在pull 中加 –rebase。\n\n>加上rebase的意思是：\n把本地 repo. 从上次 pull 之后的变更暂存起來\n恢复到上次 pull 时的状态\n合并远端的变更到本地\n最后再合并刚刚暂存下來的本地变更\n\n\n修改commit 内容\n-----------------\n1. // 查看修改\n\t```\n\tgit commit --amend 可以修改最后一次 commit\n\t```\n\n\t```\n\tgit rebase -i master~1 //最后一次\n\tgit rebase -i master~5 //最后五次\n\t```\n2. // 显示结果如下，修改 pick 为 edit ，并 :wq 保存退出\n\t```\n\tpick 92b495b 2009-08-08: ×××××××\n\tRebase 9ef2b1f..92b495b onto 9ef2b1f\n\tCommands:\n\tpick = use commit\n\tedit = use commit, but stop for amending //改上面的 pick 为 edit\n\tsquash = use commit, but meld into previous commit\n\tIf you remove a line here THAT COMMIT WILL BE LOST.\n\t However, if you remove everything, the rebase will be aborted.\n\t```\n3. 命令行显示：\n\n\t```\n\tRebasing (1/1)\n\tYou can amend the commit now, with\n\tgit commit --amend\n\t```\n4. 使用 `git commit --amend` 进行修改，完成后 :wq 退出\n5. 使用 `git rebase --continue` 完成操作\n\n恢复文件\n-----------------\n- git 恢复\t\t\n\t```\n\tgit checkout\n\t```\n- git 返回到某个节点的文件\n\t\n\t```\n\tgit checkout 1bbbb91aaf96f1274750c6fd21d77c5e7142d424 文件路径\n\t```\n\ngit 有用的小贴士\n-----------------\n\n\t```\n\t> 内建的git输出 gitk\n\t> 彩色的git输出 git config color.ui true\n\t> git config format.pretty oneline\n\t```\n\n<span style=\"color:red;\">Git 使用时候遇到的错误</span>\n=================\n1. GIT CLONE ERROR\n错误fatal: The remote end hung up unexpectedly\n解决方案：\n\t```\n\tgit config --global http.postBuffer 24288000\n\tgit config --list\n\t```\n\n<span style=\"color:blue;\">GIT 一般使用：</span>\n=================\n\n从一般开发者的角度来看，git有以下功能：\n-----------------\n1. 从服务器上克隆数据库（包括代码和版本信息）到单机上。\n2. 在自己的机器上创建分支，修改代码。\n3. 在单机上自己创建的分支上提交代码。\n4. 在单机上合并分支。\n5. 新建一个分支，把服务器上最新版的代码fetch下来，然后跟自己的主分支合并。\n6. 生成补丁（patch），把补丁发送给主开发者。\n7. 看主开发者的反馈，如果主开发者发现两个一般开发者之间有冲突（他们之间可以合作解决的冲突），就会要求他们先解决冲突，然后再由其中一个人提交。如果主开发者可以自己解决，或者没有冲突，就通过。\n8. 一般开发者之间解决冲突的方法，开发者之间可以使用pull 命令解决冲突，解决完冲突之后再向主开发者提交补丁。\n\n从主开发者的角度（假设主开发者不用开发代码）看，git有以下功能：\n-----------------\n1. 查看邮件或者通过其它方式查看一般开发者的提交状态。\n2. 打上补丁，解决冲突（可以自己解决，也可以要求开发者之间解决以后再重新提交，如果是开源项目，还要决定哪些补丁有用，哪些不用）。\n3. 向公共服务器提交结果，然后通知所有开发人员。\n\n\n\n\ngit diff 082721fa41f6a351b4385ec02d94d8464f9ebb52 24a821ab059c12f9ec501bb93dc87439a1a4fd4f | wc -l\n","slug":"Git-Use","published":1,"updated":"2016-06-29T15:29:25.171Z","_id":"cik3sv528004l0s37mfmeyrjm","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"Git-Start\"><a href=\"#Git-Start\" class=\"headerlink\" title=\"Git Start\"></a><span style=\"color:#408140\">Git Start</span></h1><p>Git是目前世界上最先进的分布式版本控制系统（没有之一）。</p>\n<h2 id=\"查看本地分支\"><a href=\"#查看本地分支\" class=\"headerlink\" title=\"查看本地分支:\"></a>查看本地分支:</h2><figure class=\"highlight nginx\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"attribute\">git</span> branch</div></pre></td></tr></table></figure>\n<h2 id=\"查看远程分支\"><a href=\"#查看远程分支\" class=\"headerlink\" title=\"查看远程分支:\"></a>查看远程分支:</h2><figure class=\"highlight armasm\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"symbol\">git</span> <span class=\"keyword\">branch </span>-r</div></pre></td></tr></table></figure>\n<h2 id=\"新建branch：\"><a href=\"#新建branch：\" class=\"headerlink\" title=\"新建branch：\"></a>新建branch：</h2><figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">git checkout -<span class=\"selector-tag\">b</span> abc_branch</div></pre></td></tr></table></figure>\n<h2 id=\"删除分支\"><a href=\"#删除分支\" class=\"headerlink\" title=\"删除分支\"></a>删除分支</h2><figure class=\"highlight armasm\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"symbol\">git</span> <span class=\"keyword\">branch </span>-d abc_branch</div></pre></td></tr></table></figure>\n<p><span style=\"color:#408140;\">强制删除使用 -D</span></p>\n<h2 id=\"切换branch\"><a href=\"#切换branch\" class=\"headerlink\" title=\"切换branch\"></a>切换branch</h2><figure class=\"highlight nginx\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"attribute\">git</span> checkout abc_branch</div></pre></td></tr></table></figure>\n<h2 id=\"合并分支\"><a href=\"#合并分支\" class=\"headerlink\" title=\"合并分支\"></a>合并分支</h2><figure class=\"highlight cos\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">git <span class=\"keyword\">merge</span> abc_branch</div></pre></td></tr></table></figure>\n<h2 id=\"查看记录\"><a href=\"#查看记录\" class=\"headerlink\" title=\"查看记录\"></a>查看记录</h2><figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">git blame filename 查看该文件目前的每一行最后改动的是什么时候提交的</div><div class=\"line\">git log -<span class=\"selector-tag\">p</span> filename 查看这个文件所有的详细提交</div></pre></td></tr></table></figure>\n<p>查看某一个文件的所有提交记录：<br><figure class=\"highlight applescript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">git <span class=\"built_in\">log</span> <span class=\"comment\">--pretty=oneline 文件路径`</span></div><div class=\"line\">git <span class=\"built_in\">log</span> <span class=\"comment\">--pretty=oneline views.py</span></div><div class=\"line\">&gt;&gt;f850a9ef393584e49d46391897db614ed56a2903 <span class=\"keyword\">third</span> commit</div><div class=\"line\">&gt;&gt;<span class=\"number\">0</span>d08b578371afb8f45748a0491faa2a7820d7928 <span class=\"keyword\">second</span> commit</div><div class=\"line\">&gt;&gt;<span class=\"number\">3</span>fcc3973deee5c33695c0b40b18a11f83c986b2d <span class=\"keyword\">first</span> commit</div></pre></td></tr></table></figure></p>\n<h2 id=\"查看某一个记录的修改内容：\"><a href=\"#查看某一个记录的修改内容：\" class=\"headerlink\" title=\"查看某一个记录的修改内容：\"></a>查看某一个记录的修改内容：</h2><p>*<br>    <figure class=\"highlight gauss\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">git <span class=\"keyword\">show</span> <span class=\"number\">3</span>fcc3973deee5c33695c0b40b18a11f83c986b2d</div></pre></td></tr></table></figure></p>\n<pre><code>例子里面打印出来的就是针对文件views.py的所有的改动历史，每一行最前面的那一长串数字就是每次提交形成的哈希值，接下来使用git show即可显示具体的某次的改动的修改\n</code></pre><h2 id=\"存储\"><a href=\"#存储\" class=\"headerlink\" title=\"存储\"></a>存储</h2><ul>\n<li><figure class=\"highlight nginx\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"attribute\">git</span> stash</div></pre></td></tr></table></figure>\n<blockquote>\n<p>用来暂存当前正在进行的工作， 比如突然你想pull 最新代码， 又不想加新commit， 或者为了fix 一个紧急的bug, 先stash, 使返回到自己上一个commit, 改完bug之后再stash pop, 继续原来的工作。</p>\n</blockquote>\n</li>\n<li><figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">git stash 做一些操作后</div><div class=\"line\">git stash <span class=\"keyword\">list</span> 查看stash 列表</div><div class=\"line\">git <span class=\"keyword\">pop</span> 将最近的一个取出，并且删除</div></pre></td></tr></table></figure>\n</li>\n<li><blockquote>\n<p>if你的stash里面有好多个，这个时候可以使用git stash list 将Git栈信息打印出来，然后git stash apply stash@{0},取出对应的，注意这个时候并没有清除，如果需要清除，git stash clear，清空</p>\n<p>stash 多了，会发现list中你不知道哪一个对应的修改是什么？解决方法</p>\n</blockquote>\n<figure class=\"highlight perl\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">git stash save <span class=\"string\">\"I DO SOMETHING\"</span></div><div class=\"line\">git stash list</div><div class=\"line\">&gt;&gt;stash@&#123;0&#125;: On develop: I DO SOMETHING</div><div class=\"line\">git stash <span class=\"keyword\">pop</span> stash@&#123;0&#125; <span class=\"keyword\">or</span> git stash apply stash@&#123;0&#125;</div><div class=\"line\"> 两者区别在于<span class=\"keyword\">pop</span>会删除stash，apply不会删除最后apply结束后，git stash clear</div></pre></td></tr></table></figure>\n<p><strong>详细可以使用 git stash -help</strong></p>\n</li>\n</ul>\n<h2 id=\"git-pull-–rebase\"><a href=\"#git-pull-–rebase\" class=\"headerlink\" title=\"git pull –rebase\"></a>git pull –rebase</h2><blockquote>\n<p>当本地commit一个提交和远端服务器中的代码有冲突(别人也改了相同的文件)时可以在pull 中加 –rebase。</p>\n<p>加上rebase的意思是：<br>把本地 repo. 从上次 pull 之后的变更暂存起來<br>恢复到上次 pull 时的状态<br>合并远端的变更到本地<br>最后再合并刚刚暂存下來的本地变更</p>\n</blockquote>\n<h2 id=\"修改commit-内容\"><a href=\"#修改commit-内容\" class=\"headerlink\" title=\"修改commit 内容\"></a>修改commit 内容</h2><ol>\n<li><p>// 查看修改</p>\n <figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">git <span class=\"keyword\">commit</span> <span class=\"comment\">--amend 可以修改最后一次 commit</span></div></pre></td></tr></table></figure>\n <figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">git rebase -<span class=\"selector-tag\">i</span> master~<span class=\"number\">1</span> <span class=\"comment\">//最后一次</span></div><div class=\"line\">git rebase -<span class=\"selector-tag\">i</span> master~<span class=\"number\">5</span> <span class=\"comment\">//最后五次</span></div></pre></td></tr></table></figure>\n</li>\n<li><p>// 显示结果如下，修改 pick 为 edit ，并 :wq 保存退出</p>\n <figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">pick 92b495b 2009-08-08: ×××××××</div><div class=\"line\">Rebase 9ef2b1f..92b495b onto 9ef2b1f</div><div class=\"line\">Commands:</div><div class=\"line\">pick = <span class=\"keyword\">use</span> <span class=\"keyword\">commit</span></div><div class=\"line\">edit = <span class=\"keyword\">use</span> <span class=\"keyword\">commit</span>, but <span class=\"keyword\">stop</span> <span class=\"keyword\">for</span> amending //改上面的 pick 为 edit</div><div class=\"line\">squash = <span class=\"keyword\">use</span> <span class=\"keyword\">commit</span>, but meld <span class=\"keyword\">into</span> previous <span class=\"keyword\">commit</span></div><div class=\"line\"><span class=\"keyword\">If</span> you remove a line here THAT <span class=\"keyword\">COMMIT</span> WILL BE LOST.</div><div class=\"line\"> However, <span class=\"keyword\">if</span> you remove everything, the rebase will be aborted.</div></pre></td></tr></table></figure>\n</li>\n<li><p>命令行显示：</p>\n <figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">Rebasing (1/1)</div><div class=\"line\">You can amend the <span class=\"keyword\">commit</span> <span class=\"keyword\">now</span>, <span class=\"keyword\">with</span></div><div class=\"line\">git <span class=\"keyword\">commit</span> <span class=\"comment\">--amend</span></div></pre></td></tr></table></figure>\n</li>\n<li><p>使用 <code>git commit --amend</code> 进行修改，完成后 :wq 退出</p>\n</li>\n<li>使用 <code>git rebase --continue</code> 完成操作</li>\n</ol>\n<h2 id=\"恢复文件\"><a href=\"#恢复文件\" class=\"headerlink\" title=\"恢复文件\"></a>恢复文件</h2><ul>\n<li><p>git 恢复        </p>\n  <figure class=\"highlight nginx\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"attribute\">git</span> checkout</div></pre></td></tr></table></figure>\n</li>\n<li><p>git 返回到某个节点的文件</p>\n  <figure class=\"highlight dns\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">git checkout <span class=\"number\">1</span>bbbb91aaf96f1274750c6fd21d77c5e<span class=\"number\">7142d424</span> 文件路径</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<h2 id=\"git-有用的小贴士\"><a href=\"#git-有用的小贴士\" class=\"headerlink\" title=\"git 有用的小贴士\"></a>git 有用的小贴士</h2><pre><code><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"quote\">&gt; 内建的git输出 gitk</span></div><div class=\"line\"><span class=\"quote\">&gt; 彩色的git输出 git config color.ui true</span></div><div class=\"line\"><span class=\"quote\">&gt; git config format.pretty oneline</span></div></pre></td></tr></table></figure>\n</code></pre><h1 id=\"Git-使用时候遇到的错误\"><a href=\"#Git-使用时候遇到的错误\" class=\"headerlink\" title=\"Git 使用时候遇到的错误\"></a><span style=\"color:red;\">Git 使用时候遇到的错误</span></h1><ol>\n<li>GIT CLONE ERROR<br>错误fatal: The remote end hung up unexpectedly<br>解决方案： <figure class=\"highlight tcl\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">git config --<span class=\"keyword\">global</span> <span class=\"keyword\">http</span>.postBuffer <span class=\"number\">24288000</span></div><div class=\"line\">git config --<span class=\"keyword\">list</span></div></pre></td></tr></table></figure>\n</li>\n</ol>\n<h1 id=\"GIT-一般使用：\"><a href=\"#GIT-一般使用：\" class=\"headerlink\" title=\"GIT 一般使用：\"></a><span style=\"color:blue;\">GIT 一般使用：</span></h1><h2 id=\"从一般开发者的角度来看，git有以下功能：\"><a href=\"#从一般开发者的角度来看，git有以下功能：\" class=\"headerlink\" title=\"从一般开发者的角度来看，git有以下功能：\"></a>从一般开发者的角度来看，git有以下功能：</h2><ol>\n<li>从服务器上克隆数据库（包括代码和版本信息）到单机上。</li>\n<li>在自己的机器上创建分支，修改代码。</li>\n<li>在单机上自己创建的分支上提交代码。</li>\n<li>在单机上合并分支。</li>\n<li>新建一个分支，把服务器上最新版的代码fetch下来，然后跟自己的主分支合并。</li>\n<li>生成补丁（patch），把补丁发送给主开发者。</li>\n<li>看主开发者的反馈，如果主开发者发现两个一般开发者之间有冲突（他们之间可以合作解决的冲突），就会要求他们先解决冲突，然后再由其中一个人提交。如果主开发者可以自己解决，或者没有冲突，就通过。</li>\n<li>一般开发者之间解决冲突的方法，开发者之间可以使用pull 命令解决冲突，解决完冲突之后再向主开发者提交补丁。</li>\n</ol>\n<h2 id=\"从主开发者的角度（假设主开发者不用开发代码）看，git有以下功能：\"><a href=\"#从主开发者的角度（假设主开发者不用开发代码）看，git有以下功能：\" class=\"headerlink\" title=\"从主开发者的角度（假设主开发者不用开发代码）看，git有以下功能：\"></a>从主开发者的角度（假设主开发者不用开发代码）看，git有以下功能：</h2><ol>\n<li>查看邮件或者通过其它方式查看一般开发者的提交状态。</li>\n<li>打上补丁，解决冲突（可以自己解决，也可以要求开发者之间解决以后再重新提交，如果是开源项目，还要决定哪些补丁有用，哪些不用）。</li>\n<li>向公共服务器提交结果，然后通知所有开发人员。</li>\n</ol>\n<p>git diff 082721fa41f6a351b4385ec02d94d8464f9ebb52 24a821ab059c12f9ec501bb93dc87439a1a4fd4f | wc -l</p>\n","excerpt":"","more":"<h1 id=\"Git-Start\"><a href=\"#Git-Start\" class=\"headerlink\" title=\"Git Start\"></a><span style=\"color:#408140\">Git Start</span></h1><p>Git是目前世界上最先进的分布式版本控制系统（没有之一）。</p>\n<h2 id=\"查看本地分支\"><a href=\"#查看本地分支\" class=\"headerlink\" title=\"查看本地分支:\"></a>查看本地分支:</h2><figure class=\"highlight nginx\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"attribute\">git</span> branch</div></pre></td></tr></table></figure>\n<h2 id=\"查看远程分支\"><a href=\"#查看远程分支\" class=\"headerlink\" title=\"查看远程分支:\"></a>查看远程分支:</h2><figure class=\"highlight armasm\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"symbol\">git</span> <span class=\"keyword\">branch </span>-r</div></pre></td></tr></table></figure>\n<h2 id=\"新建branch：\"><a href=\"#新建branch：\" class=\"headerlink\" title=\"新建branch：\"></a>新建branch：</h2><figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">git checkout -<span class=\"selector-tag\">b</span> abc_branch</div></pre></td></tr></table></figure>\n<h2 id=\"删除分支\"><a href=\"#删除分支\" class=\"headerlink\" title=\"删除分支\"></a>删除分支</h2><figure class=\"highlight armasm\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"symbol\">git</span> <span class=\"keyword\">branch </span>-d abc_branch</div></pre></td></tr></table></figure>\n<p><span style=\"color:#408140;\">强制删除使用 -D</span></p>\n<h2 id=\"切换branch\"><a href=\"#切换branch\" class=\"headerlink\" title=\"切换branch\"></a>切换branch</h2><figure class=\"highlight nginx\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"attribute\">git</span> checkout abc_branch</div></pre></td></tr></table></figure>\n<h2 id=\"合并分支\"><a href=\"#合并分支\" class=\"headerlink\" title=\"合并分支\"></a>合并分支</h2><figure class=\"highlight cos\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">git <span class=\"keyword\">merge</span> abc_branch</div></pre></td></tr></table></figure>\n<h2 id=\"查看记录\"><a href=\"#查看记录\" class=\"headerlink\" title=\"查看记录\"></a>查看记录</h2><figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">git blame filename 查看该文件目前的每一行最后改动的是什么时候提交的</div><div class=\"line\">git log -<span class=\"selector-tag\">p</span> filename 查看这个文件所有的详细提交</div></pre></td></tr></table></figure>\n<p>查看某一个文件的所有提交记录：<br><figure class=\"highlight applescript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">git <span class=\"built_in\">log</span> <span class=\"comment\">--pretty=oneline 文件路径`</span></div><div class=\"line\">git <span class=\"built_in\">log</span> <span class=\"comment\">--pretty=oneline views.py</span></div><div class=\"line\">&gt;&gt;f850a9ef393584e49d46391897db614ed56a2903 <span class=\"keyword\">third</span> commit</div><div class=\"line\">&gt;&gt;<span class=\"number\">0</span>d08b578371afb8f45748a0491faa2a7820d7928 <span class=\"keyword\">second</span> commit</div><div class=\"line\">&gt;&gt;<span class=\"number\">3</span>fcc3973deee5c33695c0b40b18a11f83c986b2d <span class=\"keyword\">first</span> commit</div></pre></td></tr></table></figure></p>\n<h2 id=\"查看某一个记录的修改内容：\"><a href=\"#查看某一个记录的修改内容：\" class=\"headerlink\" title=\"查看某一个记录的修改内容：\"></a>查看某一个记录的修改内容：</h2><p>*<br>    <figure class=\"highlight gauss\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">git <span class=\"keyword\">show</span> <span class=\"number\">3</span>fcc3973deee5c33695c0b40b18a11f83c986b2d</div></pre></td></tr></table></figure></p>\n<pre><code>例子里面打印出来的就是针对文件views.py的所有的改动历史，每一行最前面的那一长串数字就是每次提交形成的哈希值，接下来使用git show即可显示具体的某次的改动的修改\n</code></pre><h2 id=\"存储\"><a href=\"#存储\" class=\"headerlink\" title=\"存储\"></a>存储</h2><ul>\n<li><figure class=\"highlight nginx\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"attribute\">git</span> stash</div></pre></td></tr></table></figure>\n<blockquote>\n<p>用来暂存当前正在进行的工作， 比如突然你想pull 最新代码， 又不想加新commit， 或者为了fix 一个紧急的bug, 先stash, 使返回到自己上一个commit, 改完bug之后再stash pop, 继续原来的工作。</p>\n</blockquote>\n</li>\n<li><figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">git stash 做一些操作后</div><div class=\"line\">git stash <span class=\"keyword\">list</span> 查看stash 列表</div><div class=\"line\">git <span class=\"keyword\">pop</span> 将最近的一个取出，并且删除</div></pre></td></tr></table></figure>\n</li>\n<li><blockquote>\n<p>if你的stash里面有好多个，这个时候可以使用git stash list 将Git栈信息打印出来，然后git stash apply stash@{0},取出对应的，注意这个时候并没有清除，如果需要清除，git stash clear，清空</p>\n<p>stash 多了，会发现list中你不知道哪一个对应的修改是什么？解决方法</p>\n</blockquote>\n<figure class=\"highlight perl\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">git stash save <span class=\"string\">\"I DO SOMETHING\"</span></div><div class=\"line\">git stash list</div><div class=\"line\">&gt;&gt;stash@&#123;0&#125;: On develop: I DO SOMETHING</div><div class=\"line\">git stash <span class=\"keyword\">pop</span> stash@&#123;0&#125; <span class=\"keyword\">or</span> git stash apply stash@&#123;0&#125;</div><div class=\"line\"> 两者区别在于<span class=\"keyword\">pop</span>会删除stash，apply不会删除最后apply结束后，git stash clear</div></pre></td></tr></table></figure>\n<p><strong>详细可以使用 git stash -help</strong></p>\n</li>\n</ul>\n<h2 id=\"git-pull-–rebase\"><a href=\"#git-pull-–rebase\" class=\"headerlink\" title=\"git pull –rebase\"></a>git pull –rebase</h2><blockquote>\n<p>当本地commit一个提交和远端服务器中的代码有冲突(别人也改了相同的文件)时可以在pull 中加 –rebase。</p>\n<p>加上rebase的意思是：<br>把本地 repo. 从上次 pull 之后的变更暂存起來<br>恢复到上次 pull 时的状态<br>合并远端的变更到本地<br>最后再合并刚刚暂存下來的本地变更</p>\n</blockquote>\n<h2 id=\"修改commit-内容\"><a href=\"#修改commit-内容\" class=\"headerlink\" title=\"修改commit 内容\"></a>修改commit 内容</h2><ol>\n<li><p>// 查看修改</p>\n <figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">git <span class=\"keyword\">commit</span> <span class=\"comment\">--amend 可以修改最后一次 commit</span></div></pre></td></tr></table></figure>\n <figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">git rebase -<span class=\"selector-tag\">i</span> master~<span class=\"number\">1</span> <span class=\"comment\">//最后一次</span></div><div class=\"line\">git rebase -<span class=\"selector-tag\">i</span> master~<span class=\"number\">5</span> <span class=\"comment\">//最后五次</span></div></pre></td></tr></table></figure>\n</li>\n<li><p>// 显示结果如下，修改 pick 为 edit ，并 :wq 保存退出</p>\n <figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">pick 92b495b 2009-08-08: ×××××××</div><div class=\"line\">Rebase 9ef2b1f..92b495b onto 9ef2b1f</div><div class=\"line\">Commands:</div><div class=\"line\">pick = <span class=\"keyword\">use</span> <span class=\"keyword\">commit</span></div><div class=\"line\">edit = <span class=\"keyword\">use</span> <span class=\"keyword\">commit</span>, but <span class=\"keyword\">stop</span> <span class=\"keyword\">for</span> amending //改上面的 pick 为 edit</div><div class=\"line\">squash = <span class=\"keyword\">use</span> <span class=\"keyword\">commit</span>, but meld <span class=\"keyword\">into</span> previous <span class=\"keyword\">commit</span></div><div class=\"line\"><span class=\"keyword\">If</span> you remove a line here THAT <span class=\"keyword\">COMMIT</span> WILL BE LOST.</div><div class=\"line\"> However, <span class=\"keyword\">if</span> you remove everything, the rebase will be aborted.</div></pre></td></tr></table></figure>\n</li>\n<li><p>命令行显示：</p>\n <figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">Rebasing (1/1)</div><div class=\"line\">You can amend the <span class=\"keyword\">commit</span> <span class=\"keyword\">now</span>, <span class=\"keyword\">with</span></div><div class=\"line\">git <span class=\"keyword\">commit</span> <span class=\"comment\">--amend</span></div></pre></td></tr></table></figure>\n</li>\n<li><p>使用 <code>git commit --amend</code> 进行修改，完成后 :wq 退出</p>\n</li>\n<li>使用 <code>git rebase --continue</code> 完成操作</li>\n</ol>\n<h2 id=\"恢复文件\"><a href=\"#恢复文件\" class=\"headerlink\" title=\"恢复文件\"></a>恢复文件</h2><ul>\n<li><p>git 恢复        </p>\n  <figure class=\"highlight nginx\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"attribute\">git</span> checkout</div></pre></td></tr></table></figure>\n</li>\n<li><p>git 返回到某个节点的文件</p>\n  <figure class=\"highlight dns\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">git checkout <span class=\"number\">1</span>bbbb91aaf96f1274750c6fd21d77c5e<span class=\"number\">7142d424</span> 文件路径</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<h2 id=\"git-有用的小贴士\"><a href=\"#git-有用的小贴士\" class=\"headerlink\" title=\"git 有用的小贴士\"></a>git 有用的小贴士</h2><pre><code><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"quote\">&gt; 内建的git输出 gitk</span></div><div class=\"line\"><span class=\"quote\">&gt; 彩色的git输出 git config color.ui true</span></div><div class=\"line\"><span class=\"quote\">&gt; git config format.pretty oneline</span></div></pre></td></tr></table></figure>\n</code></pre><h1 id=\"Git-使用时候遇到的错误\"><a href=\"#Git-使用时候遇到的错误\" class=\"headerlink\" title=\"Git 使用时候遇到的错误\"></a><span style=\"color:red;\">Git 使用时候遇到的错误</span></h1><ol>\n<li>GIT CLONE ERROR<br>错误fatal: The remote end hung up unexpectedly<br>解决方案： <figure class=\"highlight tcl\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">git config --<span class=\"keyword\">global</span> <span class=\"keyword\">http</span>.postBuffer <span class=\"number\">24288000</span></div><div class=\"line\">git config --<span class=\"keyword\">list</span></div></pre></td></tr></table></figure>\n</li>\n</ol>\n<h1 id=\"GIT-一般使用：\"><a href=\"#GIT-一般使用：\" class=\"headerlink\" title=\"GIT 一般使用：\"></a><span style=\"color:blue;\">GIT 一般使用：</span></h1><h2 id=\"从一般开发者的角度来看，git有以下功能：\"><a href=\"#从一般开发者的角度来看，git有以下功能：\" class=\"headerlink\" title=\"从一般开发者的角度来看，git有以下功能：\"></a>从一般开发者的角度来看，git有以下功能：</h2><ol>\n<li>从服务器上克隆数据库（包括代码和版本信息）到单机上。</li>\n<li>在自己的机器上创建分支，修改代码。</li>\n<li>在单机上自己创建的分支上提交代码。</li>\n<li>在单机上合并分支。</li>\n<li>新建一个分支，把服务器上最新版的代码fetch下来，然后跟自己的主分支合并。</li>\n<li>生成补丁（patch），把补丁发送给主开发者。</li>\n<li>看主开发者的反馈，如果主开发者发现两个一般开发者之间有冲突（他们之间可以合作解决的冲突），就会要求他们先解决冲突，然后再由其中一个人提交。如果主开发者可以自己解决，或者没有冲突，就通过。</li>\n<li>一般开发者之间解决冲突的方法，开发者之间可以使用pull 命令解决冲突，解决完冲突之后再向主开发者提交补丁。</li>\n</ol>\n<h2 id=\"从主开发者的角度（假设主开发者不用开发代码）看，git有以下功能：\"><a href=\"#从主开发者的角度（假设主开发者不用开发代码）看，git有以下功能：\" class=\"headerlink\" title=\"从主开发者的角度（假设主开发者不用开发代码）看，git有以下功能：\"></a>从主开发者的角度（假设主开发者不用开发代码）看，git有以下功能：</h2><ol>\n<li>查看邮件或者通过其它方式查看一般开发者的提交状态。</li>\n<li>打上补丁，解决冲突（可以自己解决，也可以要求开发者之间解决以后再重新提交，如果是开源项目，还要决定哪些补丁有用，哪些不用）。</li>\n<li>向公共服务器提交结果，然后通知所有开发人员。</li>\n</ol>\n<p>git diff 082721fa41f6a351b4385ec02d94d8464f9ebb52 24a821ab059c12f9ec501bb93dc87439a1a4fd4f | wc -l</p>\n"},{"title":"依赖注入原理","date":"2016-06-29T15:56:58.000Z","_content":"\n<div class=\"post-body\">\n<span itemprop=\"articleBody\"><h1 id=\"0-_前言\">0. 前言</h1><p>在软件工程领域，依赖注入（Dependency Injection）是用于实现控制反转（Inversion of Control）的最常见的方式之一。本文主要介绍依赖注入原理和常见的实现方式，重点在于介绍这种年轻的设计模式的适用场景及优势。</p>\n<h1 id=\"1-_为什么需要依赖注入\">1. 为什么需要依赖注入</h1><p>控制反转用于解耦，解的究竟是谁和谁的耦？这是我在最初了解依赖注入时候产生的第一个问题。</p>\n<p>下面我引用Martin Flower在解释介绍注入时使用的一部分代码来说明这个问题。<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span\n        class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span\n        class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span\n        class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span\n        class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span\n        class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span\n        class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span\n        class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span\n        class=\"title\">MovieLister</span> </span>&#123;</span><br><span class=\"line\">    <span\n        class=\"keyword\">private</span> MovieFinder finder;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span\n        class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">MovieLister</span><span class=\"params\">()</span> </span>&#123;</span><br><span\n        class=\"line\">        finder = <span class=\"keyword\">new</span> MovieFinderImpl();</span><br><span class=\"line\">    &#125;</span><br><span\n        class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">public</span> Movie[] moviesDirectedBy(String arg) &#123;</span><br><span\n        class=\"line\">        List allMovies = finder.findAll();</span><br><span class=\"line\">        <span\n        class=\"keyword\">for</span> (Iterator it = allMovies.iterator(); it.hasNext();) &#123;</span><br><span\n        class=\"line\">            Movie movie = (Movie) it.next();</span><br><span class=\"line\">            <span\n        class=\"keyword\">if</span> (!movie.getDirector().equals(arg)) it.remove();</span><br><span class=\"line\">        &#125;</span><br><span\n        class=\"line\">        <span class=\"keyword\">return</span> (Movie[]) allMovies.toArray(<span\n        class=\"keyword\">new</span> Movie[allMovies.size()]);</span><br><span class=\"line\">    &#125;</span><br><span\n        class=\"line\">    ...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span\n        class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span\n        class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span\n        class=\"keyword\">interface</span> <span class=\"title\">MovieFinder</span> </span>&#123;</span><br><span\n        class=\"line\">    <span class=\"function\">List <span class=\"title\">findAll</span><span\n        class=\"params\">()</span></span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<a id=\"more\"></a>\n<p>我们创建了一个名为MovieLister的类来提供需要的电影列表，它moviesDirectedBy方法提供根据导演名来搜索电影的方式。真正负责搜索电影的是实现了MovieFinder接口的MovieFinderImpl，我们的MovieLister类在构造函数中创建了一个MovieFinderImpl的对象。</p>\n<p>目前看来，一切都不错。但是，当我们希望修改finder，将finder替换为一种新的实现时（比如为MovieFinder增加一个参数表明Movie数据的来源是哪个数据库），我们不仅需要修改MovieFinderImpl类，还需要修改我们MovieLister中创建MovieFinderImpl的代码。</p>\n<p><strong>这就是依赖注入要处理的耦合。这种在MovieLister中创建MovieFinderImpl的方式，使得MovieLister不仅仅依赖于MovieFinder这个接口，它还依赖于MovieListImpl这个实现。</strong> 这种在一个类中直接创建另一个类的对象的代码，和硬编码（hard-coded strings)以及硬编码的数字（magic numbers）一样，是一种导致耦合的坏味道，我们可以把这种坏味道称为硬初始化（hard init）。同时，我们也应该像记住硬编码一样记住，new（对象创建）是有毒的。</p>\n<p>Hard Init带来的主要坏处有两个方面：1）上文所述的修改其实现时，需要修改创建处的代码；2）不便于测试，这种方式创建的类（上文中的MovieLister）无法单独被测试，其行为和MovieFinderImpl紧紧耦合在一起，同时，也会导致代码的可读性问题（“如果一段代码不便于测试，那么它一定不便于阅读。”）。</p>\n<h1 id=\"2-_依赖注入的实现方式\">2. 依赖注入的实现方式</h1><p>依赖注入其实并不神奇，我们日常的代码中很多都用到了依赖注入，但很少注意到它，也很少主动使用依赖注入进行解耦。这里我们简单介绍一下赖注入实现三种的方式。</p>\n<h2 id=\"2-1_构造函数注入（Contructor_Injection）\">2.1 构造函数注入（Contructor Injection）</h2><p>这是我认为的最简单的依赖注入方式，我们修改一下上面代码中MovieList的构造函数，使得MovieFinderImpl的实现在MovieLister类之外创建。这样，MovieLister就只依赖于我们定义的MovieFinder接口，而不依赖于MovieFinder的实现了。<br><figure\n            class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span\n            class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span\n            class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td\n            class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span\n            class=\"keyword\">class</span> <span class=\"title\">MovieLister</span> </span>&#123;</span><br><span\n            class=\"line\">    <span class=\"keyword\">private</span> MovieFinder finder;</span><br><span\n            class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span\n            class=\"keyword\">public</span> <span class=\"title\">MovieLister</span><span class=\"params\">(MovieFinder finder)</span> </span>&#123;</span><br><span\n            class=\"line\">        <span class=\"keyword\">this</span>.finder = finder;</span><br><span class=\"line\">    &#125;</span><br><span\n            class=\"line\">    ...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"2-2_setter注入\">2.2 setter注入</h2><p>类似的，我们可以增加一个setter函数来传入创建好的MovieFinder对象，这样同样可以避免在MovieFinder中hard init这个对象。<br><figure\n            class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span\n            class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span\n            class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span\n            class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MovieLister</span> </span>&#123;</span><br><span\n            class=\"line\">    s...</span><br><span class=\"line\">    <span class=\"function\"><span\n            class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setFinder</span><span\n            class=\"params\">(MovieFinder finder)</span> </span>&#123;</span><br><span class=\"line\">        <span\n            class=\"keyword\">this</span>.finder = finder;</span><br><span class=\"line\">    &#125;</span><br><span\n            class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"2-3_接口注入\">2.3 接口注入</h2><p>接口注入使用接口来提供setter方法，其实现方式如下。<br>首先要创建一个注入使用的接口。<br><figure class=\"highlight java\"><table><tr><td\n            class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span\n            class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span\n            class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span\n            class=\"title\">InjectFinder</span> </span>&#123;</span><br><span class=\"line\">    <span\n            class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">injectFinder</span><span\n            class=\"params\">(MovieFinder finder)</span></span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><br>之后，我们让MovieLister实现这个接口。<br><figure\n            class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span\n            class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span\n            class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span\n            class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MovieLister</span> <span\n            class=\"keyword\">implements</span> <span class=\"title\">InjectFinder</span> </span>&#123;</span><br><span\n            class=\"line\">    ...</span><br><span class=\"line\">    <span class=\"function\"><span\n            class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">injectFinder</span><span\n            class=\"params\">(MovieFinder finder)</span> </span>&#123;</span><br><span class=\"line\">      <span\n            class=\"keyword\">this</span>.finder = finder;</span><br><span class=\"line\">    &#125;</span><br><span\n            class=\"line\">    ...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><br>最后，我们需要根据不同的框架创建被依赖的MovieFinder的实现。</p>\n<h1 id=\"3-_最后\">3. 最后</h1><p>依赖注入降低了依赖和被依赖类型间的耦合，在修改被依赖的类型实现时，不需要修改依赖类型的实现，同时，对于依赖类型的测试，可以更方便的使用mocking object替代原有的被依赖类型，以达到对依赖对象独立进行单元测试的目的。</p>\n<p>最后需要注意的是，依赖注入只是控制反转的一种实现方式。控制反转还有一种常见的实现方式称为依赖查找。</p>\n<h1 id=\"转载\">转载自</h1>\n<a href=\"http://codethink.me/2015/08/01/dependency-injection-theory\">http://codethink.me/2015/08/01/dependency-injection-theory</a>\n\n</span>\n\n</div>\n\n\n\n","source":"_posts/2016/06/29/依赖注入原理.md","raw":"title: 依赖注入原理\ndate: 2016-06-29 23:56:58\ntags:\n- 代码\ncategories:\n- 代码\n\n---\n\n<div class=\"post-body\">\n<span itemprop=\"articleBody\"><h1 id=\"0-_前言\">0. 前言</h1><p>在软件工程领域，依赖注入（Dependency Injection）是用于实现控制反转（Inversion of Control）的最常见的方式之一。本文主要介绍依赖注入原理和常见的实现方式，重点在于介绍这种年轻的设计模式的适用场景及优势。</p>\n<h1 id=\"1-_为什么需要依赖注入\">1. 为什么需要依赖注入</h1><p>控制反转用于解耦，解的究竟是谁和谁的耦？这是我在最初了解依赖注入时候产生的第一个问题。</p>\n<p>下面我引用Martin Flower在解释介绍注入时使用的一部分代码来说明这个问题。<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span\n        class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span\n        class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span\n        class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span\n        class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span\n        class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span\n        class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span\n        class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span\n        class=\"title\">MovieLister</span> </span>&#123;</span><br><span class=\"line\">    <span\n        class=\"keyword\">private</span> MovieFinder finder;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span\n        class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">MovieLister</span><span class=\"params\">()</span> </span>&#123;</span><br><span\n        class=\"line\">        finder = <span class=\"keyword\">new</span> MovieFinderImpl();</span><br><span class=\"line\">    &#125;</span><br><span\n        class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">public</span> Movie[] moviesDirectedBy(String arg) &#123;</span><br><span\n        class=\"line\">        List allMovies = finder.findAll();</span><br><span class=\"line\">        <span\n        class=\"keyword\">for</span> (Iterator it = allMovies.iterator(); it.hasNext();) &#123;</span><br><span\n        class=\"line\">            Movie movie = (Movie) it.next();</span><br><span class=\"line\">            <span\n        class=\"keyword\">if</span> (!movie.getDirector().equals(arg)) it.remove();</span><br><span class=\"line\">        &#125;</span><br><span\n        class=\"line\">        <span class=\"keyword\">return</span> (Movie[]) allMovies.toArray(<span\n        class=\"keyword\">new</span> Movie[allMovies.size()]);</span><br><span class=\"line\">    &#125;</span><br><span\n        class=\"line\">    ...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span\n        class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span\n        class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span\n        class=\"keyword\">interface</span> <span class=\"title\">MovieFinder</span> </span>&#123;</span><br><span\n        class=\"line\">    <span class=\"function\">List <span class=\"title\">findAll</span><span\n        class=\"params\">()</span></span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<a id=\"more\"></a>\n<p>我们创建了一个名为MovieLister的类来提供需要的电影列表，它moviesDirectedBy方法提供根据导演名来搜索电影的方式。真正负责搜索电影的是实现了MovieFinder接口的MovieFinderImpl，我们的MovieLister类在构造函数中创建了一个MovieFinderImpl的对象。</p>\n<p>目前看来，一切都不错。但是，当我们希望修改finder，将finder替换为一种新的实现时（比如为MovieFinder增加一个参数表明Movie数据的来源是哪个数据库），我们不仅需要修改MovieFinderImpl类，还需要修改我们MovieLister中创建MovieFinderImpl的代码。</p>\n<p><strong>这就是依赖注入要处理的耦合。这种在MovieLister中创建MovieFinderImpl的方式，使得MovieLister不仅仅依赖于MovieFinder这个接口，它还依赖于MovieListImpl这个实现。</strong> 这种在一个类中直接创建另一个类的对象的代码，和硬编码（hard-coded strings)以及硬编码的数字（magic numbers）一样，是一种导致耦合的坏味道，我们可以把这种坏味道称为硬初始化（hard init）。同时，我们也应该像记住硬编码一样记住，new（对象创建）是有毒的。</p>\n<p>Hard Init带来的主要坏处有两个方面：1）上文所述的修改其实现时，需要修改创建处的代码；2）不便于测试，这种方式创建的类（上文中的MovieLister）无法单独被测试，其行为和MovieFinderImpl紧紧耦合在一起，同时，也会导致代码的可读性问题（“如果一段代码不便于测试，那么它一定不便于阅读。”）。</p>\n<h1 id=\"2-_依赖注入的实现方式\">2. 依赖注入的实现方式</h1><p>依赖注入其实并不神奇，我们日常的代码中很多都用到了依赖注入，但很少注意到它，也很少主动使用依赖注入进行解耦。这里我们简单介绍一下赖注入实现三种的方式。</p>\n<h2 id=\"2-1_构造函数注入（Contructor_Injection）\">2.1 构造函数注入（Contructor Injection）</h2><p>这是我认为的最简单的依赖注入方式，我们修改一下上面代码中MovieList的构造函数，使得MovieFinderImpl的实现在MovieLister类之外创建。这样，MovieLister就只依赖于我们定义的MovieFinder接口，而不依赖于MovieFinder的实现了。<br><figure\n            class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span\n            class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span\n            class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td\n            class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span\n            class=\"keyword\">class</span> <span class=\"title\">MovieLister</span> </span>&#123;</span><br><span\n            class=\"line\">    <span class=\"keyword\">private</span> MovieFinder finder;</span><br><span\n            class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span\n            class=\"keyword\">public</span> <span class=\"title\">MovieLister</span><span class=\"params\">(MovieFinder finder)</span> </span>&#123;</span><br><span\n            class=\"line\">        <span class=\"keyword\">this</span>.finder = finder;</span><br><span class=\"line\">    &#125;</span><br><span\n            class=\"line\">    ...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"2-2_setter注入\">2.2 setter注入</h2><p>类似的，我们可以增加一个setter函数来传入创建好的MovieFinder对象，这样同样可以避免在MovieFinder中hard init这个对象。<br><figure\n            class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span\n            class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span\n            class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span\n            class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MovieLister</span> </span>&#123;</span><br><span\n            class=\"line\">    s...</span><br><span class=\"line\">    <span class=\"function\"><span\n            class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setFinder</span><span\n            class=\"params\">(MovieFinder finder)</span> </span>&#123;</span><br><span class=\"line\">        <span\n            class=\"keyword\">this</span>.finder = finder;</span><br><span class=\"line\">    &#125;</span><br><span\n            class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"2-3_接口注入\">2.3 接口注入</h2><p>接口注入使用接口来提供setter方法，其实现方式如下。<br>首先要创建一个注入使用的接口。<br><figure class=\"highlight java\"><table><tr><td\n            class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span\n            class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span\n            class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span\n            class=\"title\">InjectFinder</span> </span>&#123;</span><br><span class=\"line\">    <span\n            class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">injectFinder</span><span\n            class=\"params\">(MovieFinder finder)</span></span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><br>之后，我们让MovieLister实现这个接口。<br><figure\n            class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span\n            class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span\n            class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span\n            class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MovieLister</span> <span\n            class=\"keyword\">implements</span> <span class=\"title\">InjectFinder</span> </span>&#123;</span><br><span\n            class=\"line\">    ...</span><br><span class=\"line\">    <span class=\"function\"><span\n            class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">injectFinder</span><span\n            class=\"params\">(MovieFinder finder)</span> </span>&#123;</span><br><span class=\"line\">      <span\n            class=\"keyword\">this</span>.finder = finder;</span><br><span class=\"line\">    &#125;</span><br><span\n            class=\"line\">    ...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><br>最后，我们需要根据不同的框架创建被依赖的MovieFinder的实现。</p>\n<h1 id=\"3-_最后\">3. 最后</h1><p>依赖注入降低了依赖和被依赖类型间的耦合，在修改被依赖的类型实现时，不需要修改依赖类型的实现，同时，对于依赖类型的测试，可以更方便的使用mocking object替代原有的被依赖类型，以达到对依赖对象独立进行单元测试的目的。</p>\n<p>最后需要注意的是，依赖注入只是控制反转的一种实现方式。控制反转还有一种常见的实现方式称为依赖查找。</p>\n<h1 id=\"转载\">转载自</h1>\n<a href=\"http://codethink.me/2015/08/01/dependency-injection-theory\">http://codethink.me/2015/08/01/dependency-injection-theory</a>\n\n</span>\n\n</div>\n\n\n\n","slug":"依赖注入原理","published":1,"updated":"2016-06-29T16:23:37.401Z","_id":"ciq12eytb0001lwbytyfuj3zl","comments":1,"layout":"post","photos":[],"link":"","content":"<div class=\"post-body\"><br><span itemprop=\"articleBody\"><h1 id=\"0-_前言\">0. 前言</h1><p>在软件工程领域，依赖注入（Dependency Injection）是用于实现控制反转（Inversion of Control）的最常见的方式之一。本文主要介绍依赖注入原理和常见的实现方式，重点在于介绍这种年轻的设计模式的适用场景及优势。</p><br><h1 id=\"1-_为什么需要依赖注入\">1. 为什么需要依赖注入</h1><p>控制反转用于解耦，解的究竟是谁和谁的耦？这是我在最初了解依赖注入时候产生的第一个问题。</p><br><p>下面我引用Martin Flower在解释介绍注入时使用的一部分代码来说明这个问题。<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MovieLister</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> MovieFinder finder;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">MovieLister</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        finder = <span class=\"keyword\">new</span> MovieFinderImpl();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">public</span> Movie[] moviesDirectedBy(String arg) &#123;</span><br><span class=\"line\">        List allMovies = finder.findAll();</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (Iterator it = allMovies.iterator(); it.hasNext();) &#123;</span><br><span class=\"line\">            Movie movie = (Movie) it.next();</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (!movie.getDirector().equals(arg)) it.remove();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> (Movie[]) allMovies.toArray(<span class=\"keyword\">new</span> Movie[allMovies.size()]);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    …</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p><br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">MovieFinder</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\">List <span class=\"title\">findAll</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><br><a id=\"more\"></a><br><p>我们创建了一个名为MovieLister的类来提供需要的电影列表，它moviesDirectedBy方法提供根据导演名来搜索电影的方式。真正负责搜索电影的是实现了MovieFinder接口的MovieFinderImpl，我们的MovieLister类在构造函数中创建了一个MovieFinderImpl的对象。</p><br><p>目前看来，一切都不错。但是，当我们希望修改finder，将finder替换为一种新的实现时（比如为MovieFinder增加一个参数表明Movie数据的来源是哪个数据库），我们不仅需要修改MovieFinderImpl类，还需要修改我们MovieLister中创建MovieFinderImpl的代码。</p><br><p><strong>这就是依赖注入要处理的耦合。这种在MovieLister中创建MovieFinderImpl的方式，使得MovieLister不仅仅依赖于MovieFinder这个接口，它还依赖于MovieListImpl这个实现。</strong> 这种在一个类中直接创建另一个类的对象的代码，和硬编码（hard-coded strings)以及硬编码的数字（magic numbers）一样，是一种导致耦合的坏味道，我们可以把这种坏味道称为硬初始化（hard init）。同时，我们也应该像记住硬编码一样记住，new（对象创建）是有毒的。</p><br><p>Hard Init带来的主要坏处有两个方面：1）上文所述的修改其实现时，需要修改创建处的代码；2）不便于测试，这种方式创建的类（上文中的MovieLister）无法单独被测试，其行为和MovieFinderImpl紧紧耦合在一起，同时，也会导致代码的可读性问题（“如果一段代码不便于测试，那么它一定不便于阅读。”）。</p><br><h1 id=\"2-_依赖注入的实现方式\">2. 依赖注入的实现方式</h1><p>依赖注入其实并不神奇，我们日常的代码中很多都用到了依赖注入，但很少注意到它，也很少主动使用依赖注入进行解耦。这里我们简单介绍一下赖注入实现三种的方式。</p><br><h2 id=\"2-1_构造函数注入（Contructor_Injection）\">2.1 构造函数注入（Contructor Injection）</h2><p>这是我认为的最简单的依赖注入方式，我们修改一下上面代码中MovieList的构造函数，使得MovieFinderImpl的实现在MovieLister类之外创建。这样，MovieLister就只依赖于我们定义的MovieFinder接口，而不依赖于MovieFinder的实现了。<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MovieLister</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> MovieFinder finder;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">MovieLister</span><span class=\"params\">(MovieFinder finder)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.finder = finder;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    …</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p><br><h2 id=\"2-2_setter注入\">2.2 setter注入</h2><p>类似的，我们可以增加一个setter函数来传入创建好的MovieFinder对象，这样同样可以避免在MovieFinder中hard init这个对象。<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MovieLister</span> </span>&#123;</span><br><span class=\"line\">    s…</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setFinder</span><span class=\"params\">(MovieFinder finder)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.finder = finder;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p><br><h2 id=\"2-3_接口注入\">2.3 接口注入</h2><p>接口注入使用接口来提供setter方法，其实现方式如下。<br>首先要创建一个注入使用的接口。<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">InjectFinder</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">injectFinder</span><span class=\"params\">(MovieFinder finder)</span></span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><br>之后，我们让MovieLister实现这个接口。<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MovieLister</span> <span class=\"keyword\">implements</span> <span class=\"title\">InjectFinder</span> </span>&#123;</span><br><span class=\"line\">    …</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">injectFinder</span><span class=\"params\">(MovieFinder finder)</span> </span>&#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.finder = finder;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    …</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><br>最后，我们需要根据不同的框架创建被依赖的MovieFinder的实现。</p><br><h1 id=\"3-_最后\">3. 最后</h1><p>依赖注入降低了依赖和被依赖类型间的耦合，在修改被依赖的类型实现时，不需要修改依赖类型的实现，同时，对于依赖类型的测试，可以更方便的使用mocking object替代原有的被依赖类型，以达到对依赖对象独立进行单元测试的目的。</p><br><p>最后需要注意的是，依赖注入只是控制反转的一种实现方式。控制反转还有一种常见的实现方式称为依赖查找。</p><br><h1 id=\"转载\">转载自</h1><br><a href=\"http://codethink.me/2015/08/01/dependency-injection-theory\" target=\"_blank\" rel=\"external\">http://codethink.me/2015/08/01/dependency-injection-theory</a><br><br></span><br><br></div>\n\n\n\n","excerpt":"","more":"<div class=\"post-body\"><br><span itemprop=\"articleBody\"><h1 id=\"0-_前言\">0. 前言</h1><p>在软件工程领域，依赖注入（Dependency Injection）是用于实现控制反转（Inversion of Control）的最常见的方式之一。本文主要介绍依赖注入原理和常见的实现方式，重点在于介绍这种年轻的设计模式的适用场景及优势。</p><br><h1 id=\"1-_为什么需要依赖注入\">1. 为什么需要依赖注入</h1><p>控制反转用于解耦，解的究竟是谁和谁的耦？这是我在最初了解依赖注入时候产生的第一个问题。</p><br><p>下面我引用Martin Flower在解释介绍注入时使用的一部分代码来说明这个问题。<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span\n        class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span\n        class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span\n        class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span\n        class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span\n        class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span\n        class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span\n        class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span\n        class=\"title\">MovieLister</span> </span>&#123;</span><br><span class=\"line\">    <span\n        class=\"keyword\">private</span> MovieFinder finder;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span\n        class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">MovieLister</span><span class=\"params\">()</span> </span>&#123;</span><br><span\n        class=\"line\">        finder = <span class=\"keyword\">new</span> MovieFinderImpl();</span><br><span class=\"line\">    &#125;</span><br><span\n        class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">public</span> Movie[] moviesDirectedBy(String arg) &#123;</span><br><span\n        class=\"line\">        List allMovies = finder.findAll();</span><br><span class=\"line\">        <span\n        class=\"keyword\">for</span> (Iterator it = allMovies.iterator(); it.hasNext();) &#123;</span><br><span\n        class=\"line\">            Movie movie = (Movie) it.next();</span><br><span class=\"line\">            <span\n        class=\"keyword\">if</span> (!movie.getDirector().equals(arg)) it.remove();</span><br><span class=\"line\">        &#125;</span><br><span\n        class=\"line\">        <span class=\"keyword\">return</span> (Movie[]) allMovies.toArray(<span\n        class=\"keyword\">new</span> Movie[allMovies.size()]);</span><br><span class=\"line\">    &#125;</span><br><span\n        class=\"line\">    …</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p><br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span\n        class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span\n        class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span\n        class=\"keyword\">interface</span> <span class=\"title\">MovieFinder</span> </span>&#123;</span><br><span\n        class=\"line\">    <span class=\"function\">List <span class=\"title\">findAll</span><span\n        class=\"params\">()</span></span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><br><a id=\"more\"></a><br><p>我们创建了一个名为MovieLister的类来提供需要的电影列表，它moviesDirectedBy方法提供根据导演名来搜索电影的方式。真正负责搜索电影的是实现了MovieFinder接口的MovieFinderImpl，我们的MovieLister类在构造函数中创建了一个MovieFinderImpl的对象。</p><br><p>目前看来，一切都不错。但是，当我们希望修改finder，将finder替换为一种新的实现时（比如为MovieFinder增加一个参数表明Movie数据的来源是哪个数据库），我们不仅需要修改MovieFinderImpl类，还需要修改我们MovieLister中创建MovieFinderImpl的代码。</p><br><p><strong>这就是依赖注入要处理的耦合。这种在MovieLister中创建MovieFinderImpl的方式，使得MovieLister不仅仅依赖于MovieFinder这个接口，它还依赖于MovieListImpl这个实现。</strong> 这种在一个类中直接创建另一个类的对象的代码，和硬编码（hard-coded strings)以及硬编码的数字（magic numbers）一样，是一种导致耦合的坏味道，我们可以把这种坏味道称为硬初始化（hard init）。同时，我们也应该像记住硬编码一样记住，new（对象创建）是有毒的。</p><br><p>Hard Init带来的主要坏处有两个方面：1）上文所述的修改其实现时，需要修改创建处的代码；2）不便于测试，这种方式创建的类（上文中的MovieLister）无法单独被测试，其行为和MovieFinderImpl紧紧耦合在一起，同时，也会导致代码的可读性问题（“如果一段代码不便于测试，那么它一定不便于阅读。”）。</p><br><h1 id=\"2-_依赖注入的实现方式\">2. 依赖注入的实现方式</h1><p>依赖注入其实并不神奇，我们日常的代码中很多都用到了依赖注入，但很少注意到它，也很少主动使用依赖注入进行解耦。这里我们简单介绍一下赖注入实现三种的方式。</p><br><h2 id=\"2-1_构造函数注入（Contructor_Injection）\">2.1 构造函数注入（Contructor Injection）</h2><p>这是我认为的最简单的依赖注入方式，我们修改一下上面代码中MovieList的构造函数，使得MovieFinderImpl的实现在MovieLister类之外创建。这样，MovieLister就只依赖于我们定义的MovieFinder接口，而不依赖于MovieFinder的实现了。<br><figure\n            class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span\n            class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span\n            class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td\n            class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span\n            class=\"keyword\">class</span> <span class=\"title\">MovieLister</span> </span>&#123;</span><br><span\n            class=\"line\">    <span class=\"keyword\">private</span> MovieFinder finder;</span><br><span\n            class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span\n            class=\"keyword\">public</span> <span class=\"title\">MovieLister</span><span class=\"params\">(MovieFinder finder)</span> </span>&#123;</span><br><span\n            class=\"line\">        <span class=\"keyword\">this</span>.finder = finder;</span><br><span class=\"line\">    &#125;</span><br><span\n            class=\"line\">    …</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p><br><h2 id=\"2-2_setter注入\">2.2 setter注入</h2><p>类似的，我们可以增加一个setter函数来传入创建好的MovieFinder对象，这样同样可以避免在MovieFinder中hard init这个对象。<br><figure\n            class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span\n            class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span\n            class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span\n            class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MovieLister</span> </span>&#123;</span><br><span\n            class=\"line\">    s…</span><br><span class=\"line\">    <span class=\"function\"><span\n            class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setFinder</span><span\n            class=\"params\">(MovieFinder finder)</span> </span>&#123;</span><br><span class=\"line\">        <span\n            class=\"keyword\">this</span>.finder = finder;</span><br><span class=\"line\">    &#125;</span><br><span\n            class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p><br><h2 id=\"2-3_接口注入\">2.3 接口注入</h2><p>接口注入使用接口来提供setter方法，其实现方式如下。<br>首先要创建一个注入使用的接口。<br><figure class=\"highlight java\"><table><tr><td\n            class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span\n            class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span\n            class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span\n            class=\"title\">InjectFinder</span> </span>&#123;</span><br><span class=\"line\">    <span\n            class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">injectFinder</span><span\n            class=\"params\">(MovieFinder finder)</span></span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><br>之后，我们让MovieLister实现这个接口。<br><figure\n            class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span\n            class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span\n            class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span\n            class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MovieLister</span> <span\n            class=\"keyword\">implements</span> <span class=\"title\">InjectFinder</span> </span>&#123;</span><br><span\n            class=\"line\">    …</span><br><span class=\"line\">    <span class=\"function\"><span\n            class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">injectFinder</span><span\n            class=\"params\">(MovieFinder finder)</span> </span>&#123;</span><br><span class=\"line\">      <span\n            class=\"keyword\">this</span>.finder = finder;</span><br><span class=\"line\">    &#125;</span><br><span\n            class=\"line\">    …</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><br>最后，我们需要根据不同的框架创建被依赖的MovieFinder的实现。</p><br><h1 id=\"3-_最后\">3. 最后</h1><p>依赖注入降低了依赖和被依赖类型间的耦合，在修改被依赖的类型实现时，不需要修改依赖类型的实现，同时，对于依赖类型的测试，可以更方便的使用mocking object替代原有的被依赖类型，以达到对依赖对象独立进行单元测试的目的。</p><br><p>最后需要注意的是，依赖注入只是控制反转的一种实现方式。控制反转还有一种常见的实现方式称为依赖查找。</p><br><h1 id=\"转载\">转载自</h1><br><a href=\"http://codethink.me/2015/08/01/dependency-injection-theory\">http://codethink.me/2015/08/01/dependency-injection-theory</a><br><br></span><br><br></div>\n\n\n\n"},{"_content":"<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <title>Title</title>\n</head>\n<body>\n\n</body>\n</html>","source":"_posts/2016/06/29/uuu.html","raw":"<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <title>Title</title>\n</head>\n<body>\n\n</body>\n</html>","slug":"uuu","published":1,"date":"2016-06-28T16:00:00.000Z","updated":"2016-06-29T16:19:46.981Z","_id":"ciq138avl000056by89hylrr9","title":"","comments":1,"layout":"post","photos":[],"link":"","content":"<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <title>Title</title>\n</head>\n<body>\n\n</body>\n</html>","excerpt":"","more":"<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <title>Title</title>\n</head>\n<body>\n\n</body>\n</html>"}],"PostAsset":[],"PostCategory":[{"post_id":"cik3sv4oj00000s37fz8ionwo","category_id":"cik3sv4or00010s371ajc9hkt","_id":"cik3sv4ou00040s37d0ipzwk1"},{"post_id":"cik3sv4sw000d0s370defsiel","category_id":"cik3sv4sx000e0s37spaa1njj","_id":"cik3sv4sz000h0s37vopkfghx"},{"post_id":"cik3sv4v4000z0s37rsey9ig1","category_id":"cik3sv4v500100s37bugrwrfp","_id":"cik3sv4v800130s3774bp2efa"},{"post_id":"cik3sv4vb00140s37ijyakmnl","category_id":"cik3sv4v500100s37bugrwrfp","_id":"cik3sv4ve00150s373eo2pckg"},{"post_id":"cik3sv4vg00170s37t9mbm5bd","category_id":"cik3sv4or00010s371ajc9hkt","_id":"cik3sv4vj001a0s377hgxeut2"},{"post_id":"cik3sv4vg00170s37t9mbm5bd","category_id":"cik3sv4vi00180s37uheqxyvn","_id":"cik3sv4vj001b0s37kj171hgg"},{"post_id":"cik3sv4vl001c0s37tik5huph","category_id":"cik3sv4v500100s37bugrwrfp","_id":"cik3sv4vm001d0s3704xdkcse"},{"post_id":"cik3sv4vo001f0s37u6ap3e6n","category_id":"cik3sv4vp001g0s37t2hhtro2","_id":"cik3sv4wj001j0s37xftl6wyl"},{"post_id":"cik3sv4wk001k0s37depz56da","category_id":"cik3sv4or00010s371ajc9hkt","_id":"cik3sv4wn001n0s37td6huio1"},{"post_id":"cik3sv4wk001k0s37depz56da","category_id":"cik3sv4wm001l0s37qmu43d1u","_id":"cik3sv4wn001o0s37ue3fg0ic"},{"post_id":"cik3sv4wx001p0s37iasxv0yv","category_id":"cik3sv4wz001q0s37o51sfllc","_id":"cik3sv4x0001t0s37lqeajsat"},{"post_id":"cik3sv4xt001v0s37ixr8hqa4","category_id":"cik3sv4wz001q0s37o51sfllc","_id":"cik3sv4xv001y0s37uxjwt5dm"},{"post_id":"cik3sv4xt001v0s37ixr8hqa4","category_id":"cik3sv4xu001w0s37gr2r5dsn","_id":"cik3sv4xv001z0s37qy1g3d0e"},{"post_id":"cik3sv4xy00200s37by30vxsi","category_id":"cik3sv4or00010s371ajc9hkt","_id":"cik3sv4y100210s37gvrtc9ph"},{"post_id":"cik3sv4xy00200s37by30vxsi","category_id":"cik3sv4vi00180s37uheqxyvn","_id":"cik3sv4y100230s37v30sp4kv"},{"post_id":"cik3sv4y300240s377918e29u","category_id":"cik3sv4wz001q0s37o51sfllc","_id":"cik3sv4y500250s3784duipdj"},{"post_id":"cik3sv4y300240s377918e29u","category_id":"cik3sv4xu001w0s37gr2r5dsn","_id":"cik3sv4y600270s37megsvhor"},{"post_id":"cik3sv4y800280s37l56269ho","category_id":"cik3sv4y900290s37ba2rf12q","_id":"cik3sv4ya002d0s37uzkbw223"},{"post_id":"cik3sv4y800280s37l56269ho","category_id":"cik3sv4ya002b0s37yahlrf1g","_id":"cik3sv4ya002e0s37ubqizx9h"},{"post_id":"cik3sv4yb002f0s37h7ye4kua","category_id":"cik3sv4yc002g0s374oqjykwp","_id":"cik3sv4yd002j0s374xm5a8vh"},{"post_id":"cik3sv4ye002k0s37xtms3m5s","category_id":"cik3sv4yl002l0s3779gncw6o","_id":"cik3sv4ym002o0s372thfouh9"},{"post_id":"cik3sv4yq002p0s37i4j3jjup","category_id":"cik3sv4yl002l0s3779gncw6o","_id":"cik3sv4ys002q0s371ehgpk1a"},{"post_id":"cik3sv4yy002s0s370gkop9xc","category_id":"cik3sv4yl002l0s3779gncw6o","_id":"cik3sv4z0002t0s37ix11bxqw"},{"post_id":"cik3sv4z5002w0s37uxj26959","category_id":"cik3sv4wz001q0s37o51sfllc","_id":"cik3sv4z6002x0s37nd9khs5x"},{"post_id":"cik3sv4za002z0s37n2iuunlw","category_id":"cik3sv4or00010s371ajc9hkt","_id":"cik3sv4zd00300s37i1tre0fv"},{"post_id":"cik3sv4zf00320s375srihzqs","category_id":"cik3sv4zg00330s37x4l0w27q","_id":"cik3sv4zh00360s379a2s67gk"},{"post_id":"cik3sv4zk00370s37i3cvo3f0","category_id":"cik3sv4zl00380s376v8y1iz7","_id":"cik3sv4zm003a0s37vtabug1g"},{"post_id":"cik3sv4zn003b0s37s2ckmibt","category_id":"cik3sv4or00010s371ajc9hkt","_id":"cik3sv4zp003e0s3771gzs99w"},{"post_id":"cik3sv4zn003b0s37s2ckmibt","category_id":"cik3sv4zp003c0s37axeptf4v","_id":"cik3sv4zp003f0s3715vvrn20"},{"post_id":"cik3sv50g003g0s37l72v6uc8","category_id":"cik3sv4yl002l0s3779gncw6o","_id":"cik3sv50i003h0s376zjjew02"},{"post_id":"cik3sv50l003j0s372mudckkk","category_id":"cik3sv4yl002l0s3779gncw6o","_id":"cik3sv50m003k0s37wjxkr8fx"},{"post_id":"cik3sv50p003m0s37r0ebl1ex","category_id":"cik3sv4zg00330s37x4l0w27q","_id":"cik3sv50r003n0s375uxj3j84"},{"post_id":"cik3sv50v003q0s37nhduh0i7","category_id":"cik3sv4wz001q0s37o51sfllc","_id":"cik3sv50w003r0s376y7qt79x"},{"post_id":"cik3sv50z003t0s37ejcismxs","category_id":"cik3sv4yl002l0s3779gncw6o","_id":"cik3sv510003u0s37r9xyxw09"},{"post_id":"cik3sv514003w0s37gjbqr5by","category_id":"cik3sv516003x0s37vqob7kb0","_id":"cik3sv51r00400s379f4hdpab"},{"post_id":"cik3sv51t00410s371zgchvqc","category_id":"cik3sv516003x0s37vqob7kb0","_id":"cik3sv51u00420s37af32l9af"},{"post_id":"cik3sv51w00450s37l5crtses","category_id":"cik3sv4zg00330s37x4l0w27q","_id":"cik3sv51x00460s37i3856fzv"},{"post_id":"cik3sv51y00480s37zsvcelko","category_id":"cik3sv4or00010s371ajc9hkt","_id":"cik3sv52000490s37ku5bqkt2"},{"post_id":"cik3sv521004d0s3772sblcv8","category_id":"cik3sv4zg00330s37x4l0w27q","_id":"cik3sv524004e0s37q55iy7gd"},{"post_id":"cik3sv525004h0s37bfup1owc","category_id":"cik3sv4sx000e0s37spaa1njj","_id":"cik3sv527004i0s37l52ztsy9"},{"post_id":"cik3sv528004l0s37mfmeyrjm","category_id":"cik3sv4sx000e0s37spaa1njj","_id":"cik3sv52a004m0s37dlis9w9v"},{"post_id":"cik3sv4sg00090s37us89gw0w","category_id":"cik3sv4wz001q0s37o51sfllc","_id":"ciq11wzbo0001gnby6lb600yc"},{"post_id":"ciq12eytb0001lwbytyfuj3zl","category_id":"ciq12qgmn0001uybya7hqjpir","_id":"ciq12qgmo0003uyby5acor5ko"}],"PostTag":[{"post_id":"cik3sv4oj00000s37fz8ionwo","tag_id":"cik3sv4or00020s37usuoa8rq","_id":"cik3sv4ou00030s37gt5xd8zo"},{"post_id":"cik3sv4sw000d0s370defsiel","tag_id":"cik3sv4sy000f0s37hctggacn","_id":"cik3sv4sz000g0s379f3r49wk"},{"post_id":"cik3sv4t1000i0s37cjthep5b","tag_id":"cik3sv4tr000j0s37l4snqv66","_id":"cik3sv4ts000l0s37fjm18o8p"},{"post_id":"cik3sv4t1000i0s37cjthep5b","tag_id":"cik3sv4ts000k0s37lnywascc","_id":"cik3sv4ts000m0s37gxe30vcu"},{"post_id":"cik3sv4u7000r0s37ho4a4vw1","tag_id":"cik3sv4u9000s0s37zv2rlzgb","_id":"cik3sv4ua000u0s37ga4g9sqx"},{"post_id":"cik3sv4u7000r0s37ho4a4vw1","tag_id":"cik3sv4u9000t0s37d6bkrdgj","_id":"cik3sv4ua000v0s37i9afce6a"},{"post_id":"cik3sv4uf000x0s3776eujino","tag_id":"cik3sv4u9000s0s37zv2rlzgb","_id":"cik3sv4uh000y0s37y1w5fwjk"},{"post_id":"cik3sv4v4000z0s37rsey9ig1","tag_id":"cik3sv4v600110s37fazckcd4","_id":"cik3sv4v700120s372x3dtsgt"},{"post_id":"cik3sv4vb00140s37ijyakmnl","tag_id":"cik3sv4v600110s37fazckcd4","_id":"cik3sv4ve00160s37mqxdkjv1"},{"post_id":"cik3sv4vg00170s37t9mbm5bd","tag_id":"cik3sv4or00020s37usuoa8rq","_id":"cik3sv4vi00190s3758jlkicc"},{"post_id":"cik3sv4vl001c0s37tik5huph","tag_id":"cik3sv4v600110s37fazckcd4","_id":"cik3sv4vm001e0s37thbn2qpp"},{"post_id":"cik3sv4vo001f0s37u6ap3e6n","tag_id":"cik3sv4vp001h0s378wkpyqxh","_id":"cik3sv4vq001i0s37cmcn8wad"},{"post_id":"cik3sv4wk001k0s37depz56da","tag_id":"cik3sv4or00020s37usuoa8rq","_id":"cik3sv4wm001m0s37vxnxq9h2"},{"post_id":"cik3sv4wx001p0s37iasxv0yv","tag_id":"cik3sv4wz001r0s3785up5x4r","_id":"cik3sv4x0001s0s37y4gel0b0"},{"post_id":"cik3sv4wx001p0s37iasxv0yv","tag_id":"cik3sv4vp001h0s378wkpyqxh","_id":"cik3sv4x1001u0s374hkp56sj"},{"post_id":"cik3sv4xt001v0s37ixr8hqa4","tag_id":"cik3sv4wz001r0s3785up5x4r","_id":"cik3sv4xu001x0s37bosbuswk"},{"post_id":"cik3sv4xy00200s37by30vxsi","tag_id":"cik3sv4or00020s37usuoa8rq","_id":"cik3sv4y100220s37xuo7m4yr"},{"post_id":"cik3sv4y300240s377918e29u","tag_id":"cik3sv4wz001r0s3785up5x4r","_id":"cik3sv4y500260s37akwnkk4v"},{"post_id":"cik3sv4y800280s37l56269ho","tag_id":"cik3sv4y9002a0s37ziw1nktg","_id":"cik3sv4ya002c0s37x6jbkf1h"},{"post_id":"cik3sv4yb002f0s37h7ye4kua","tag_id":"cik3sv4yc002h0s37jzvd0hrx","_id":"cik3sv4yd002i0s37je5xln1e"},{"post_id":"cik3sv4ye002k0s37xtms3m5s","tag_id":"cik3sv4yl002m0s37ly79cczo","_id":"cik3sv4ym002n0s379ikj5t3m"},{"post_id":"cik3sv4yq002p0s37i4j3jjup","tag_id":"cik3sv4yl002m0s37ly79cczo","_id":"cik3sv4yt002r0s370f9i65s8"},{"post_id":"cik3sv4yy002s0s370gkop9xc","tag_id":"cik3sv4yl002m0s37ly79cczo","_id":"cik3sv4z0002u0s379mvzxwdp"},{"post_id":"cik3sv4z5002w0s37uxj26959","tag_id":"cik3sv4wz001r0s3785up5x4r","_id":"cik3sv4z6002y0s37zkcpb4rj"},{"post_id":"cik3sv4za002z0s37n2iuunlw","tag_id":"cik3sv4or00020s37usuoa8rq","_id":"cik3sv4zd00310s37dmpsudbc"},{"post_id":"cik3sv4zf00320s375srihzqs","tag_id":"cik3sv4zg00340s373824dx5o","_id":"cik3sv4zh00350s37z8ub04z7"},{"post_id":"cik3sv4zk00370s37i3cvo3f0","tag_id":"cik3sv4yc002h0s37jzvd0hrx","_id":"cik3sv4zl00390s376lto5b58"},{"post_id":"cik3sv4zn003b0s37s2ckmibt","tag_id":"cik3sv4or00020s37usuoa8rq","_id":"cik3sv4zp003d0s37byypcv0m"},{"post_id":"cik3sv50g003g0s37l72v6uc8","tag_id":"cik3sv4yl002m0s37ly79cczo","_id":"cik3sv50j003i0s37andee7ay"},{"post_id":"cik3sv50l003j0s372mudckkk","tag_id":"cik3sv4yl002m0s37ly79cczo","_id":"cik3sv50n003l0s37s4aixay6"},{"post_id":"cik3sv50p003m0s37r0ebl1ex","tag_id":"cik3sv50s003o0s37pw4de0zg","_id":"cik3sv50s003p0s378vdi43l0"},{"post_id":"cik3sv50v003q0s37nhduh0i7","tag_id":"cik3sv4wz001r0s3785up5x4r","_id":"cik3sv50w003s0s37bvg804ug"},{"post_id":"cik3sv50z003t0s37ejcismxs","tag_id":"cik3sv4yl002m0s37ly79cczo","_id":"cik3sv511003v0s37ovs159w0"},{"post_id":"cik3sv514003w0s37gjbqr5by","tag_id":"cik3sv516003y0s37ddf8qvek","_id":"cik3sv51r003z0s37vycqe3ja"},{"post_id":"cik3sv51t00410s371zgchvqc","tag_id":"cik3sv51u00430s37a9bc77bc","_id":"cik3sv51v00440s37aog8e3df"},{"post_id":"cik3sv51w00450s37l5crtses","tag_id":"cik3sv4y9002a0s37ziw1nktg","_id":"cik3sv51x00470s370tgl7vcp"},{"post_id":"cik3sv51y00480s37zsvcelko","tag_id":"cik3sv4or00020s37usuoa8rq","_id":"cik3sv520004b0s373iog13g4"},{"post_id":"cik3sv51y00480s37zsvcelko","tag_id":"cik3sv520004a0s37hulpl4o6","_id":"cik3sv520004c0s3702m0t9yn"},{"post_id":"cik3sv521004d0s3772sblcv8","tag_id":"cik3sv524004f0s374dd6v6rv","_id":"cik3sv524004g0s37jbtixr5t"},{"post_id":"cik3sv528004l0s37mfmeyrjm","tag_id":"cik3sv4sy000f0s37hctggacn","_id":"cik3sv52a004n0s37e90ybp95"},{"post_id":"cik3sv4sg00090s37us89gw0w","tag_id":"cik3sv4wz001r0s3785up5x4r","_id":"ciq11wzbn0000gnbypeltes85"},{"post_id":"cik3sv525004h0s37bfup1owc","tag_id":"cik3sv4sy000f0s37hctggacn","_id":"ciq129ak40000lwby8fvdjhd6"},{"post_id":"ciq12eytb0001lwbytyfuj3zl","tag_id":"ciq12qgmc0000uybym3ebl5gh","_id":"ciq12qgmo0002uyby00329n9d"}],"Tag":[{"name":"Django","_id":"cik3sv4or00020s37usuoa8rq"},{"name":"Git","_id":"cik3sv4sy000f0s37hctggacn"},{"name":"test","_id":"cik3sv4tr000j0s37l4snqv66"},{"name":"python","_id":"cik3sv4ts000k0s37lnywascc"},{"name":"android","_id":"cik3sv4u9000s0s37zv2rlzgb"},{"name":"错误收集","_id":"cik3sv4u9000t0s37d6bkrdgj"},{"name":"MySql","_id":"cik3sv4v600110s37fazckcd4"},{"name":"Vim","_id":"cik3sv4vp001h0s378wkpyqxh"},{"name":"Linux","_id":"cik3sv4wz001r0s3785up5x4r"},{"name":"Js","_id":"cik3sv4y9002a0s37ziw1nktg"},{"name":"Mysql","_id":"cik3sv4yc002h0s37jzvd0hrx"},{"name":"Python","_id":"cik3sv4yl002m0s37ly79cczo"},{"name":"NodeJs","_id":"cik3sv4zg00340s373824dx5o"},{"name":"Html","_id":"cik3sv50s003o0s37pw4de0zg"},{"name":"技术点滴","_id":"cik3sv516003y0s37ddf8qvek"},{"name":"Markdown","_id":"cik3sv51u00430s37a9bc77bc"},{"name":"Error","_id":"cik3sv520004a0s37hulpl4o6"},{"name":"Css","_id":"cik3sv524004f0s374dd6v6rv"},{"name":"GitHub","_id":"cik3sv527004j0s3713r2o05o"},{"name":"代码","_id":"ciq12qgmc0000uybym3ebl5gh"}]}}